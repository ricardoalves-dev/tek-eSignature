const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.es-C7zZGSUO.js","assets/index-CtdQ5dhS.js","assets/index-By4RFaAo.css","assets/rounded-DRbAkIAm.js"])))=>i.map(i=>d[i]);
var N_=Object.defineProperty;var Kv=n=>{throw TypeError(n)};var T_=(n,t,e)=>t in n?N_(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var Ut=(n,t,e)=>T_(n,typeof t!="symbol"?t+"":t,e),R1=(n,t,e)=>t.has(n)||Kv("Cannot "+e);var u=(n,t,e)=>(R1(n,t,"read from private field"),e?e.call(n):t.get(n)),O=(n,t,e)=>t.has(n)?Kv("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,e),k=(n,t,e,i)=>(R1(n,t,"write to private field"),i?i.call(n,e):t.set(n,e),e),R=(n,t,e)=>(R1(n,t,"access private method"),e);var On=(n,t,e,i)=>({set _(s){k(n,t,s,e)},get _(){return u(n,t,i)}});import{B as zg,C as hb,D as ub,g as Ne,E as Am,F as db,m as Ci,G as bu,_ as hl,p as re,H as Qf,e as Et,i as dt,I as Ba,J as Ed,b as kn,c as Es,d as Ps,K as _m,t as ni,h as si,L as ja,M as fb,N as Sm,O as Zf,P as tp,Q as gi,R as Pd,S as wc,T as xm,U as I_,W as pb,X as M_,Y as R_,Z as ti,$ as F_,a0 as gb,j as Ae,a1 as mu,r as Re,a2 as O_,a3 as D_,a4 as B_,s as xi,a5 as z2,u as n0,w as Lm,a6 as Ac,a7 as Hg,a8 as Ls,a9 as fc,aa as j_,ab as Jv,ac as qa,ad as Vr,ae as mb,af as Qv,ag as yu,ah as wu,ai as pc,y as Au,o as Oo,l as ep,f as H2,aj as vb,ak as q_,al as Zv,am as z_,an as V2,ao as H_,ap as V_,aq as U2,ar as U_,as as W2,at as Cm,au as G2,n as zi,q as ao,x as s0,av as Em,aw as W_,ax as G_,ay as $2,v as bb,az as $_,aA as X_,aB as yb,aC as Y_,aD as wb,aE as K_,aF as J_,aG as Q_,aH as Z_,aI as Ab,aJ as tS,aK as td}from"./index-CtdQ5dhS.js";import{f as eS,m as Pm,a as km,b as _u,c as Nm,d as Tm,e as Su,g as vu,u as Ta,_ as iS}from"./rounded-DRbAkIAm.js";const _b=["top","bottom"],nS=["start","end","left","right"];function r0(n,t){let[e,i]=n.split(" ");return i||(i=zg(_b,e)?"start":zg(nS,e)?"top":"center"),{side:t5(e,t),align:t5(i,t)}}function t5(n,t){return n==="start"?t?"right":"left":n==="end"?t?"left":"right":n}function F1(n){return{side:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[n.side],align:n.align}}function O1(n){return{side:n.side,align:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[n.align]}}function e5(n){return{side:n.align,align:n.side}}function i5(n){return zg(_b,n.side)?"y":"x"}class hc{constructor(t){let{x:e,y:i,width:s,height:r}=t;this.x=e,this.y=i,this.width=s,this.height=r}get top(){return this.y}get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}}function n5(n,t){return{x:{before:Math.max(0,t.left-n.left),after:Math.max(0,n.right-t.right)},y:{before:Math.max(0,t.top-n.top),after:Math.max(0,n.bottom-t.bottom)}}}function Sb(n){return Array.isArray(n)?new hc({x:n[0],y:n[1],width:0,height:0}):n.getBoundingClientRect()}function xb(n){const t=n.getBoundingClientRect(),e=getComputedStyle(n),i=e.transform;if(i){let s,r,a,o,l;if(i.startsWith("matrix3d("))s=i.slice(9,-1).split(/, /),r=+s[0],a=+s[5],o=+s[12],l=+s[13];else if(i.startsWith("matrix("))s=i.slice(7,-1).split(/, /),r=+s[0],a=+s[3],o=+s[4],l=+s[5];else return new hc(t);const c=e.transformOrigin,d=t.x-o-(1-r)*parseFloat(c),p=t.y-l-(1-a)*parseFloat(c.slice(c.indexOf(" ")+1)),m=r?t.width/r:n.offsetWidth+1,f=a?t.height/a:n.offsetHeight+1;return new hc({x:d,y:p,width:m,height:f})}else return new hc(t)}function dh(n,t,e){if(typeof n.animate>"u")return{finished:Promise.resolve()};let i;try{i=n.animate(t,e)}catch{return{finished:Promise.resolve()}}return typeof i.finished>"u"&&(i.finished=new Promise(s=>{i.onfinish=()=>{s(i)}})),i}const ag=new WeakMap;function sS(n,t){Object.keys(t).forEach(e=>{if(hb(e)){const i=ub(e),s=ag.get(n);if(t[e]==null)s==null||s.forEach(r=>{const[a,o]=r;a===i&&(n.removeEventListener(i,o),s.delete(r))});else if(!s||![...s].some(r=>r[0]===i&&r[1]===t[e])){n.addEventListener(i,t[e]);const r=s||new Set;r.add([i,t[e]]),ag.has(n)||ag.set(n,r)}}else t[e]==null?n.removeAttribute(e):n.setAttribute(e,t[e])})}function rS(n,t){Object.keys(t).forEach(e=>{if(hb(e)){const i=ub(e),s=ag.get(n);s==null||s.forEach(r=>{const[a,o]=r;a===i&&(n.removeEventListener(i,o),s.delete(r))})}else n.removeAttribute(e)})}function aS(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"div",e=arguments.length>2?arguments[2]:void 0;return Ne()({name:e??Am(db(n.replace(/__/g,"-"))),props:{tag:{type:String,default:t},...Ci()},setup(i,s){let{slots:r}=s;return()=>{var a;return bu(i.tag,{class:[n,i.class],style:i.style},(a=r.default)==null?void 0:a.call(r))}}})}function Lb(n){if(typeof n.getRootNode!="function"){for(;n.parentNode;)n=n.parentNode;return n!==document?null:document}const t=n.getRootNode();return t!==document&&t.getRootNode({composed:!0})!==document?null:t}const Vg="cubic-bezier(0.4, 0, 0.2, 1)",oS="cubic-bezier(0.0, 0, 0.2, 1)",lS="cubic-bezier(0.4, 0, 1, 1)";function cS(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;for(;n;){if(t?hS(n):X2(n))return n;n=n.parentElement}return document.scrollingElement}function Ug(n,t){const e=[];if(t&&n&&!t.contains(n))return e;for(;n&&(X2(n)&&e.push(n),n!==t);)n=n.parentElement;return e}function X2(n){if(!n||n.nodeType!==Node.ELEMENT_NODE)return!1;const t=window.getComputedStyle(n);return t.overflowY==="scroll"||t.overflowY==="auto"&&n.scrollHeight>n.clientHeight}function hS(n){if(!n||n.nodeType!==Node.ELEMENT_NODE)return!1;const t=window.getComputedStyle(n);return["scroll","auto"].includes(t.overflowY)}function uS(n){for(;n;){if(window.getComputedStyle(n).position==="fixed")return!0;n=n.offsetParent}return!1}var _d={};_d.d=(n,t)=>{for(var e in t)_d.o(t,e)&&!_d.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:t[e]})};_d.o=(n,t)=>Object.prototype.hasOwnProperty.call(n,t);var he=globalThis.pdfjsLib={};_d.d(he,{AbortException:()=>Sc,AnnotationEditorLayer:()=>b2,AnnotationEditorParamsType:()=>se,AnnotationEditorType:()=>Se,AnnotationEditorUIManager:()=>mc,AnnotationLayer:()=>c3,AnnotationMode:()=>oo,CMapCompressionType:()=>o0,ColorPicker:()=>Xg,DOMSVGFactory:()=>K2,DrawLayer:()=>_2,FeatureTest:()=>zn,GlobalWorkerOptions:()=>Na,ImageKind:()=>og,InvalidPDFException:()=>Eb,MissingPDFException:()=>_c,OPS:()=>Vs,PDFDataRangeTransport:()=>Ly,PDFDateString:()=>Db,PDFWorker:()=>vh,PasswordResponses:()=>gS,PermissionFlag:()=>pS,PixelsPerInch:()=>Do,RenderingCancelledException:()=>J2,TextLayer:()=>kd,UnexpectedResponseException:()=>Fm,Util:()=>$t,VerbosityLevel:()=>Im,XfaLayer:()=>Ey,build:()=>Vx,createValidAbsoluteUrl:()=>yS,fetchData:()=>Dm,getDocument:()=>Rx,getFilenameFromUrl:()=>NS,getPdfFilenameFromUrl:()=>TS,getXfaPageViewport:()=>IS,isDataScheme:()=>Bm,isPdfFile:()=>Q2,noContextMenu:()=>Cs,normalizeUnicode:()=>LS,setLayerDimensions:()=>gc,shadow:()=>Le,version:()=>Hx});const yn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Cb=[1,0,0,1,0,0],a0=[.001,0,0,.001,0,0],dS=1e7,D1=1.35,ns={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},oo={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},fS="pdfjs_internal_editor_",Se={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},se={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},pS={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},pn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},og={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Oi={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},ed={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Im={ERRORS:0,WARNINGS:1,INFOS:5},o0={NONE:0,BINARY:1},Vs={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},gS={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Mm=Im.WARNINGS;function mS(n){Number.isInteger(n)&&(Mm=n)}function vS(){return Mm}function Rm(n){Mm>=Im.INFOS&&console.log(`Info: ${n}`)}function ve(n){Mm>=Im.WARNINGS&&console.log(`Warning: ${n}`)}function Mi(n){throw new Error(n)}function Hi(n,t){n||Mi(t)}function bS(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function yS(n,t=null,e=null){if(!n)return null;try{if(e&&typeof n=="string"){if(e.addDefaultProtocol&&n.startsWith("www.")){const s=n.match(/\./g);(s==null?void 0:s.length)>=2&&(n=`http://${n}`)}if(e.tryConvertEncoding)try{n=xS(n)}catch{}}const i=t?new URL(n,t):new URL(n);if(bS(i))return i}catch{}return null}function Le(n,t,e,i=!1){return Object.defineProperty(n,t,{value:e,enumerable:!i,configurable:!0,writable:!1}),e}const Vo=function(){function t(e,i){this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t}();class l0 extends Vo{constructor(t,e){super(t,"PasswordException"),this.code=e}}class c0 extends Vo{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class Eb extends Vo{constructor(t){super(t,"InvalidPDFException")}}class _c extends Vo{constructor(t){super(t,"MissingPDFException")}}class Fm extends Vo{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}}class wS extends Vo{constructor(t){super(t,"FormatError")}}class Sc extends Vo{constructor(t){super(t,"AbortException")}}function Pb(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&Mi("Invalid argument for bytesToString");const t=n.length,e=8192;if(t<e)return String.fromCharCode.apply(null,n);const i=[];for(let s=0;s<t;s+=e){const r=Math.min(s+e,t),a=n.subarray(s,r);i.push(String.fromCharCode.apply(null,a))}return i.join("")}function Om(n){typeof n!="string"&&Mi("Invalid argument for stringToBytes");const t=n.length,e=new Uint8Array(t);for(let i=0;i<t;++i)e[i]=n.charCodeAt(i)&255;return e}function AS(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function Y2(n){const t=Object.create(null);for(const[e,i]of n)t[e]=i;return t}function _S(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function SS(){try{return new Function(""),!0}catch{return!1}}class zn{static get isLittleEndian(){return Le(this,"isLittleEndian",_S())}static get isEvalSupported(){return Le(this,"isEvalSupported",SS())}static get isOffscreenCanvasSupported(){return Le(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?Le(this,"platform",{isMac:navigator.platform.includes("Mac")}):Le(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){var t,e;return Le(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const B1=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var Ra,lg,h0;class $t{static makeHexColor(t,e,i){return`#${B1[t]}${B1[e]}${B1[i]}`}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){const i=t[0]*e[0]+t[1]*e[2]+e[4],s=t[0]*e[1]+t[1]*e[3]+e[5];return[i,s]}static applyInverseTransform(t,e){const i=e[0]*e[3]-e[1]*e[2],s=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/i,r=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/i;return[s,r]}static getAxialAlignedBoundingBox(t,e){const i=this.applyTransform(t,e),s=this.applyTransform(t.slice(2,4),e),r=this.applyTransform([t[0],t[3]],e),a=this.applyTransform([t[2],t[1]],e);return[Math.min(i[0],s[0],r[0],a[0]),Math.min(i[1],s[1],r[1],a[1]),Math.max(i[0],s[0],r[0],a[0]),Math.max(i[1],s[1],r[1],a[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],i=t[0]*e[0]+t[1]*e[2],s=t[0]*e[1]+t[1]*e[3],r=t[2]*e[0]+t[3]*e[2],a=t[2]*e[1]+t[3]*e[3],o=(i+a)/2,l=Math.sqrt((i+a)**2-4*(i*a-r*s))/2,c=o+l||1,d=o-l||1;return[Math.sqrt(c),Math.sqrt(d)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),s=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>s)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),a=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>a?null:[i,r,s,a]}static bezierBoundingBox(t,e,i,s,r,a,o,l,c){return c?(c[0]=Math.min(c[0],t,o),c[1]=Math.min(c[1],e,l),c[2]=Math.max(c[2],t,o),c[3]=Math.max(c[3],e,l)):c=[Math.min(t,o),Math.min(e,l),Math.max(t,o),Math.max(e,l)],R(this,Ra,h0).call(this,t,i,r,o,e,s,a,l,3*(-t+3*(i-r)+o),6*(t-2*i+r),3*(i-t),c),R(this,Ra,h0).call(this,t,i,r,o,e,s,a,l,3*(-e+3*(s-a)+l),6*(e-2*s+a),3*(s-e),c),c}}Ra=new WeakSet,lg=function(t,e,i,s,r,a,o,l,c,d){if(c<=0||c>=1)return;const p=1-c,m=c*c,f=m*c,b=p*(p*(p*t+3*c*e)+3*m*i)+f*s,w=p*(p*(p*r+3*c*a)+3*m*o)+f*l;d[0]=Math.min(d[0],b),d[1]=Math.min(d[1],w),d[2]=Math.max(d[2],b),d[3]=Math.max(d[3],w)},h0=function(t,e,i,s,r,a,o,l,c,d,p,m){if(Math.abs(c)<1e-12){Math.abs(d)>=1e-12&&R(this,Ra,lg).call(this,t,e,i,s,r,a,o,l,-p/d,m);return}const f=d**2-4*p*c;if(f<0)return;const b=Math.sqrt(f),w=2*c;R(this,Ra,lg).call(this,t,e,i,s,r,a,o,l,(-d+b)/w,m),R(this,Ra,lg).call(this,t,e,i,s,r,a,o,l,(-d-b)/w,m)},O($t,Ra);function xS(n){return decodeURIComponent(escape(n))}let j1=null,s5=null;function LS(n){return j1||(j1=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,s5=new Map([["ﬅ","ſt"]])),n.replaceAll(j1,(t,e,i)=>e?e.normalize("NFKC"):s5.get(i))}function CS(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const n=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(n);else for(let t=0;t<32;t++)n[t]=Math.floor(Math.random()*255);return Pb(n)}const kb="pdfjs_internal_id_",ia={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};class Nb{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,s,r){return"none"}destroy(t=!1){}}var Fd;class Tb{constructor({enableHWA:t=!1}={}){O(this,Fd,!1);k(this,Fd,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!u(this,Fd)})}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Mi("Abstract method `_createCanvas` called.")}}Fd=new WeakMap;class Ib{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":""),i=this.isCompressed?o0.BINARY:o0.NONE;return this._fetchData(e,i).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}_fetchData(t,e){Mi("Abstract method `_fetchData` called.")}}class Mb{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetchData(e).catch(i=>{throw new Error(`Unable to load font data at: ${e}`)})}_fetchData(t){Mi("Abstract method `_fetchData` called.")}}class ES{create(t,e,i=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),i||(s.setAttribute("width",`${t}px`),s.setAttribute("height",`${e}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${t} ${e}`),s}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Mi("Abstract method `_createSVG` called.")}}const ra="http://www.w3.org/2000/svg",ll=class ll{};Ut(ll,"CSS",96),Ut(ll,"PDF",72),Ut(ll,"PDF_TO_CSS_UNITS",ll.CSS/ll.PDF);let Do=ll;var ul,dl,br,ca,vn,nm,fl,Vt,gn,nh,sh,cg,rh,Rb,u0,ah,od,ld,d0,cd;class PS extends Nb{constructor({docId:e,ownerDocument:i=globalThis.document}={}){super();O(this,Vt);O(this,ul);O(this,dl);O(this,br);O(this,ca);O(this,vn);O(this,nm);O(this,fl,0);k(this,ca,e),k(this,vn,i)}addFilter(e){if(!e)return"none";let i=u(this,Vt,gn).get(e);if(i)return i;const[s,r,a]=R(this,Vt,cg).call(this,e),o=e.length===1?s:`${s}${r}${a}`;if(i=u(this,Vt,gn).get(o),i)return u(this,Vt,gn).set(e,i),i;const l=`g_${u(this,ca)}_transfer_map_${On(this,fl)._++}`,c=R(this,Vt,rh).call(this,l);u(this,Vt,gn).set(e,c),u(this,Vt,gn).set(o,c);const d=R(this,Vt,ah).call(this,l);return R(this,Vt,ld).call(this,s,r,a,d),c}addHCMFilter(e,i){var b;const s=`${e}-${i}`,r="base";let a=u(this,Vt,nh).get(r);if((a==null?void 0:a.key)===s||(a?((b=a.filter)==null||b.remove(),a.key=s,a.url="none",a.filter=null):(a={key:s,url:"none",filter:null},u(this,Vt,nh).set(r,a)),!e||!i))return a.url;const o=R(this,Vt,cd).call(this,e);e=$t.makeHexColor(...o);const l=R(this,Vt,cd).call(this,i);if(i=$t.makeHexColor(...l),u(this,Vt,sh).style.color="",e==="#000000"&&i==="#ffffff"||e===i)return a.url;const c=new Array(256);for(let w=0;w<=255;w++){const S=w/255;c[w]=S<=.03928?S/12.92:((S+.055)/1.055)**2.4}const d=c.join(","),p=`g_${u(this,ca)}_hcm_filter`,m=a.filter=R(this,Vt,ah).call(this,p);R(this,Vt,ld).call(this,d,d,d,m),R(this,Vt,u0).call(this,m);const f=(w,S)=>{const A=o[w]/255,x=l[w]/255,M=new Array(S+1);for(let q=0;q<=S;q++)M[q]=A+q/S*(x-A);return M.join(",")};return R(this,Vt,ld).call(this,f(0,5),f(1,5),f(2,5),m),a.url=R(this,Vt,rh).call(this,p),a.url}addAlphaFilter(e){let i=u(this,Vt,gn).get(e);if(i)return i;const[s]=R(this,Vt,cg).call(this,[e]),r=`alpha_${s}`;if(i=u(this,Vt,gn).get(r),i)return u(this,Vt,gn).set(e,i),i;const a=`g_${u(this,ca)}_alpha_map_${On(this,fl)._++}`,o=R(this,Vt,rh).call(this,a);u(this,Vt,gn).set(e,o),u(this,Vt,gn).set(r,o);const l=R(this,Vt,ah).call(this,a);return R(this,Vt,d0).call(this,s,l),o}addLuminosityFilter(e){let i=u(this,Vt,gn).get(e||"luminosity");if(i)return i;let s,r;if(e?([s]=R(this,Vt,cg).call(this,[e]),r=`luminosity_${s}`):r="luminosity",i=u(this,Vt,gn).get(r),i)return u(this,Vt,gn).set(e,i),i;const a=`g_${u(this,ca)}_luminosity_map_${On(this,fl)._++}`,o=R(this,Vt,rh).call(this,a);u(this,Vt,gn).set(e,o),u(this,Vt,gn).set(r,o);const l=R(this,Vt,ah).call(this,a);return R(this,Vt,Rb).call(this,l),e&&R(this,Vt,d0).call(this,s,l),o}addHighlightHCMFilter(e,i,s,r,a){var x;const o=`${i}-${s}-${r}-${a}`;let l=u(this,Vt,nh).get(e);if((l==null?void 0:l.key)===o||(l?((x=l.filter)==null||x.remove(),l.key=o,l.url="none",l.filter=null):(l={key:o,url:"none",filter:null},u(this,Vt,nh).set(e,l)),!i||!s))return l.url;const[c,d]=[i,s].map(R(this,Vt,cd).bind(this));let p=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),m=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[f,b]=[r,a].map(R(this,Vt,cd).bind(this));m<p&&([p,m,f,b]=[m,p,b,f]),u(this,Vt,sh).style.color="";const w=(M,q,U)=>{const X=new Array(256),G=(m-p)/U,B=M/255,Q=(q-M)/(255*U);let ct=0;for(let P=0;P<=U;P++){const N=Math.round(p+P*G),V=B+P*Q;for(let j=ct;j<=N;j++)X[j]=V;ct=N+1}for(let P=ct;P<256;P++)X[P]=X[ct-1];return X.join(",")},S=`g_${u(this,ca)}_hcm_${e}_filter`,A=l.filter=R(this,Vt,ah).call(this,S);return R(this,Vt,u0).call(this,A),R(this,Vt,ld).call(this,w(f[0],b[0],5),w(f[1],b[1],5),w(f[2],b[2],5),A),l.url=R(this,Vt,rh).call(this,S),l.url}destroy(e=!1){e&&u(this,Vt,nh).size!==0||(u(this,br)&&(u(this,br).parentNode.parentNode.remove(),k(this,br,null)),u(this,dl)&&(u(this,dl).clear(),k(this,dl,null)),k(this,fl,0))}}ul=new WeakMap,dl=new WeakMap,br=new WeakMap,ca=new WeakMap,vn=new WeakMap,nm=new WeakMap,fl=new WeakMap,Vt=new WeakSet,gn=function(){return u(this,dl)||k(this,dl,new Map)},nh=function(){return u(this,nm)||k(this,nm,new Map)},sh=function(){if(!u(this,br)){const e=u(this,vn).createElement("div"),{style:i}=e;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const s=u(this,vn).createElementNS(ra,"svg");s.setAttribute("width",0),s.setAttribute("height",0),k(this,br,u(this,vn).createElementNS(ra,"defs")),e.append(s),s.append(u(this,br)),u(this,vn).body.append(e)}return u(this,br)},cg=function(e){if(e.length===1){const c=e[0],d=new Array(256);for(let m=0;m<256;m++)d[m]=c[m]/255;const p=d.join(",");return[p,p,p]}const[i,s,r]=e,a=new Array(256),o=new Array(256),l=new Array(256);for(let c=0;c<256;c++)a[c]=i[c]/255,o[c]=s[c]/255,l[c]=r[c]/255;return[a.join(","),o.join(","),l.join(",")]},rh=function(e){if(u(this,ul)===void 0){k(this,ul,"");const i=u(this,vn).URL;i!==u(this,vn).baseURI&&(Bm(i)?ve('#createUrl: ignore "data:"-URL for performance reasons.'):k(this,ul,i.split("#",1)[0]))}return`url(${u(this,ul)}#${e})`},Rb=function(e){const i=u(this,vn).createElementNS(ra,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(i)},u0=function(e){const i=u(this,vn).createElementNS(ra,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(i)},ah=function(e){const i=u(this,vn).createElementNS(ra,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",e),u(this,Vt,sh).append(i),i},od=function(e,i,s){const r=u(this,vn).createElementNS(ra,i);r.setAttribute("type","discrete"),r.setAttribute("tableValues",s),e.append(r)},ld=function(e,i,s,r){const a=u(this,vn).createElementNS(ra,"feComponentTransfer");r.append(a),R(this,Vt,od).call(this,a,"feFuncR",e),R(this,Vt,od).call(this,a,"feFuncG",i),R(this,Vt,od).call(this,a,"feFuncB",s)},d0=function(e,i){const s=u(this,vn).createElementNS(ra,"feComponentTransfer");i.append(s),R(this,Vt,od).call(this,s,"feFuncA",e)},cd=function(e){return u(this,Vt,sh).style.color=e,Z2(getComputedStyle(u(this,Vt,sh)).getPropertyValue("color"))};class kS extends Tb{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}={}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const i=this._document.createElement("canvas");return i.width=t,i.height=e,i}}async function Dm(n,t="text"){if(hd(n,document.baseURI)){const e=await fetch(n);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,i)=>{const s=new XMLHttpRequest;s.open("GET",n,!0),s.responseType=t,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(s.response);return}e(s.responseText);return}i(new Error(s.statusText))}},s.send(null)})}class Fb extends Ib{_fetchData(t,e){return Dm(t,this.isCompressed?"arraybuffer":"text").then(i=>({cMapData:i instanceof ArrayBuffer?new Uint8Array(i):Om(i),compressionType:e}))}}class Ob extends Mb{_fetchData(t){return Dm(t,"arraybuffer").then(e=>new Uint8Array(e))}}class K2 extends ES{_createSVG(t){return document.createElementNS(ra,t)}}class ip{constructor({viewBox:t,scale:e,rotation:i,offsetX:s=0,offsetY:r=0,dontFlip:a=!1}){this.viewBox=t,this.scale=e,this.rotation=i,this.offsetX=s,this.offsetY=r;const o=(t[2]+t[0])/2,l=(t[3]+t[1])/2;let c,d,p,m;switch(i%=360,i<0&&(i+=360),i){case 180:c=-1,d=0,p=0,m=1;break;case 90:c=0,d=1,p=1,m=0;break;case 270:c=0,d=-1,p=-1,m=0;break;case 0:c=1,d=0,p=0,m=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(p=-p,m=-m);let f,b,w,S;c===0?(f=Math.abs(l-t[1])*e+s,b=Math.abs(o-t[0])*e+r,w=(t[3]-t[1])*e,S=(t[2]-t[0])*e):(f=Math.abs(o-t[0])*e+s,b=Math.abs(l-t[1])*e+r,w=(t[2]-t[0])*e,S=(t[3]-t[1])*e),this.transform=[c*e,d*e,p*e,m*e,f-c*e*o-p*e*l,b-d*e*o-m*e*l],this.width=w,this.height=S}get rawDims(){const{viewBox:t}=this;return Le(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:s=this.offsetY,dontFlip:r=!1}={}){return new ip({viewBox:this.viewBox.slice(),scale:t,rotation:e,offsetX:i,offsetY:s,dontFlip:r})}convertToViewportPoint(t,e){return $t.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=$t.applyTransform([t[0],t[1]],this.transform),i=$t.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){return $t.applyInverseTransform([t,e],this.transform)}}class J2 extends Vo{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function Bm(n){const t=n.length;let e=0;for(;e<t&&n[e].trim()==="";)e++;return n.substring(e,e+5).toLowerCase()==="data:"}function Q2(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function NS(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function TS(n,t="document.pdf"){if(typeof n!="string")return t;if(Bm(n))return ve('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,s=e.exec(n);let r=i.exec(s[1])||i.exec(s[2])||i.exec(s[3]);if(r&&(r=r[0],r.includes("%")))try{r=i.exec(decodeURIComponent(r))[0]}catch{}return r||t}class r5{constructor(){Ut(this,"started",Object.create(null));Ut(this,"times",[])}time(t){t in this.started&&ve(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||ve(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:i}of this.times)e=Math.max(i.length,e);for(const{name:i,start:s,end:r}of this.times)t.push(`${i.padEnd(e)} ${r-s}ms
`);return t.join("")}}function hd(n,t){try{const{protocol:e}=t?new URL(n,t):new URL(n);return e==="http:"||e==="https:"}catch{return!1}}function Cs(n){n.preventDefault()}let a5;class Db{static toDateObject(t){if(!t||typeof t!="string")return null;a5||(a5=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=a5.exec(t);if(!e)return null;const i=parseInt(e[1],10);let s=parseInt(e[2],10);s=s>=1&&s<=12?s-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let a=parseInt(e[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(e[5],10);o=o>=0&&o<=59?o:0;let l=parseInt(e[6],10);l=l>=0&&l<=59?l:0;const c=e[7]||"Z";let d=parseInt(e[8],10);d=d>=0&&d<=23?d:0;let p=parseInt(e[9],10)||0;return p=p>=0&&p<=59?p:0,c==="-"?(a+=d,o+=p):c==="+"&&(a-=d,o-=p),new Date(Date.UTC(i,s,r,a,o,l))}}function IS(n,{scale:t=1,rotation:e=0}){const{width:i,height:s}=n.attributes.style,r=[0,0,parseInt(i),parseInt(s)];return new ip({viewBox:r,scale:t,rotation:e})}function Z2(n){if(n.startsWith("#")){const t=parseInt(n.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(t=>parseInt(t)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(ve(`Not a valid color format: "${n}"`),[0,0,0])}function MS(n){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const e of n.keys()){t.style.color=e;const i=window.getComputedStyle(t).color;n.set(e,Z2(i))}t.remove()}function li(n){const{a:t,b:e,c:i,d:s,e:r,f:a}=n.getTransform();return[t,e,i,s,r,a]}function na(n){const{a:t,b:e,c:i,d:s,e:r,f:a}=n.getTransform().invertSelf();return[t,e,i,s,r,a]}function gc(n,t,e=!1,i=!0){if(t instanceof ip){const{pageWidth:s,pageHeight:r}=t.rawDims,{style:a}=n,o=zn.isCSSRoundSupported,l=`var(--scale-factor) * ${s}px`,c=`var(--scale-factor) * ${r}px`,d=o?`round(${l}, 1px)`:`calc(${l})`,p=o?`round(${c}, 1px)`:`calc(${c})`;!e||t.rotation%180===0?(a.width=d,a.height=p):(a.width=p,a.height=d)}i&&n.setAttribute("data-main-rotation",t.rotation)}var pl,gl,Ws,ml,Od,Dd,sm,Bb,En,jb,qb,hg,zb,p0;const aa=class aa{constructor(t){O(this,En);O(this,pl,null);O(this,gl,null);O(this,Ws);O(this,ml,null);O(this,Od,null);k(this,Ws,t),u(aa,Dd)||k(aa,Dd,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const t=k(this,pl,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar");const e=u(this,Ws)._uiManager._signal;t.addEventListener("contextmenu",Cs,{signal:e}),t.addEventListener("pointerdown",R(aa,sm,Bb),{signal:e});const i=k(this,ml,document.createElement("div"));i.className="buttons",t.append(i);const s=u(this,Ws).toolbarPosition;if(s){const{style:r}=t,a=u(this,Ws)._uiManager.direction==="ltr"?1-s[0]:s[0];r.insetInlineEnd=`${100*a}%`,r.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return R(this,En,zb).call(this),t}hide(){var t;u(this,pl).classList.add("hidden"),(t=u(this,gl))==null||t.hideDropdown()}show(){var t;u(this,pl).classList.remove("hidden"),(t=u(this,Od))==null||t.shown()}async addAltText(t){const e=await t.render();R(this,En,hg).call(this,e),u(this,ml).prepend(e,u(this,En,p0)),k(this,Od,t)}addColorPicker(t){k(this,gl,t);const e=t.renderButton();R(this,En,hg).call(this,e),u(this,ml).prepend(e,u(this,En,p0))}remove(){var t;u(this,pl).remove(),(t=u(this,gl))==null||t.destroy(),k(this,gl,null)}};pl=new WeakMap,gl=new WeakMap,Ws=new WeakMap,ml=new WeakMap,Od=new WeakMap,Dd=new WeakMap,sm=new WeakSet,Bb=function(t){t.stopPropagation()},En=new WeakSet,jb=function(t){u(this,Ws)._focusEventsAllowed=!1,t.preventDefault(),t.stopPropagation()},qb=function(t){u(this,Ws)._focusEventsAllowed=!0,t.preventDefault(),t.stopPropagation()},hg=function(t){const e=u(this,Ws)._uiManager._signal;t.addEventListener("focusin",R(this,En,jb).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",R(this,En,qb).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Cs,{signal:e})},zb=function(){const{editorType:t,_uiManager:e}=u(this,Ws),i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",u(aa,Dd)[t]),R(this,En,hg).call(this,i),i.addEventListener("click",s=>{e.delete()},{signal:e._signal}),u(this,ml).append(i)},p0=function(){const t=document.createElement("div");return t.className="divider",t},O(aa,sm),O(aa,Dd,null);let f0=aa;var Bd,vl,bl,zo,Hb,Vb,Ub;class RS{constructor(t){O(this,zo);O(this,Bd,null);O(this,vl,null);O(this,bl);k(this,bl,t)}show(t,e,i){const[s,r]=R(this,zo,Vb).call(this,e,i),{style:a}=u(this,vl)||k(this,vl,R(this,zo,Hb).call(this));t.append(u(this,vl)),a.insetInlineEnd=`${100*s}%`,a.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){u(this,vl).remove()}}Bd=new WeakMap,vl=new WeakMap,bl=new WeakMap,zo=new WeakSet,Hb=function(){const t=k(this,vl,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Cs,{signal:u(this,bl)._signal});const e=k(this,Bd,document.createElement("div"));return e.className="buttons",t.append(e),R(this,zo,Ub).call(this),t},Vb=function(t,e){let i=0,s=0;for(const r of t){const a=r.y+r.height;if(a<i)continue;const o=r.x+(e?r.width:0);if(a>i){s=o,i=a;continue}e?o>s&&(s=o):o<s&&(s=o)}return[e?1-s:s,i]},Ub=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=u(this,bl)._signal;t.addEventListener("contextmenu",Cs,{signal:i}),t.addEventListener("click",()=>{u(this,bl).highlightSelection("floating_button")},{signal:i}),u(this,Bd).append(t)};function Wg(n,t,e){for(const i of e)t.addEventListener(i,n[i].bind(n))}function FS(n){return Math.round(Math.min(255,Math.max(1,255*n))).toString(16).padStart(2,"0")}var rm;class OS{constructor(){O(this,rm,0)}get id(){return`${fS}${On(this,rm)._++}`}}rm=new WeakMap;var jd,am,bs,qd,m0;const yv=class yv{constructor(){O(this,qd);O(this,jd,CS());O(this,am,0);O(this,bs,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=t;const r=s.decode().then(()=>(i.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return Le(this,"_isSVGFittingCanvas",r)}async getFromFile(t){const{lastModified:e,name:i,size:s,type:r}=t;return R(this,qd,m0).call(this,`${e}_${i}_${s}_${r}`,t)}async getFromUrl(t){return R(this,qd,m0).call(this,t,t)}async getFromId(t){u(this,bs)||k(this,bs,new Map);const e=u(this,bs).get(t);return e?e.bitmap?(e.refCounter+=1,e):e.file?this.getFromFile(e.file):this.getFromUrl(e.url):null}getSvgUrl(t){const e=u(this,bs).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){u(this,bs)||k(this,bs,new Map);const e=u(this,bs).get(t);e&&(e.refCounter-=1,e.refCounter===0&&(e.bitmap=null))}isValidId(t){return t.startsWith(`image_${u(this,jd)}_`)}};jd=new WeakMap,am=new WeakMap,bs=new WeakMap,qd=new WeakSet,m0=async function(t,e){u(this,bs)||k(this,bs,new Map);let i=u(this,bs).get(t);if(i===null)return null;if(i!=null&&i.bitmap)return i.refCounter+=1,i;try{i||(i={bitmap:null,id:`image_${u(this,jd)}_${On(this,am)._++}`,refCounter:0,isSvg:!1});let s;if(typeof e=="string"?(i.url=e,s=await Dm(e,"blob")):s=i.file=e,s.type==="image/svg+xml"){const r=yv._isSVGFittingCanvas,a=new FileReader,o=new Image,l=new Promise((c,d)=>{o.onload=()=>{i.bitmap=o,i.isSvg=!0,c()},a.onload=async()=>{const p=i.svgUrl=a.result;o.src=await r?`${p}#svgView(preserveAspectRatio(none))`:p},o.onerror=a.onerror=d});a.readAsDataURL(s),await l}else i.bitmap=await createImageBitmap(s);i.refCounter=1}catch(s){console.error(s),i=null}return u(this,bs).set(t,i),i&&u(this,bs).set(i.id,i),i};let g0=yv;var Gi,lo,zd,$i;class DS{constructor(t=128){O(this,Gi,[]);O(this,lo,!1);O(this,zd);O(this,$i,-1);k(this,zd,t)}add({cmd:t,undo:e,post:i,mustExec:s,type:r=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}){if(s&&t(),u(this,lo))return;const l={cmd:t,undo:e,post:i,type:r};if(u(this,$i)===-1){u(this,Gi).length>0&&(u(this,Gi).length=0),k(this,$i,0),u(this,Gi).push(l);return}if(a&&u(this,Gi)[u(this,$i)].type===r){o&&(l.undo=u(this,Gi)[u(this,$i)].undo),u(this,Gi)[u(this,$i)]=l;return}const c=u(this,$i)+1;c===u(this,zd)?u(this,Gi).splice(0,1):(k(this,$i,c),c<u(this,Gi).length&&u(this,Gi).splice(c)),u(this,Gi).push(l)}undo(){if(u(this,$i)===-1)return;k(this,lo,!0);const{undo:t,post:e}=u(this,Gi)[u(this,$i)];t(),e==null||e(),k(this,lo,!1),k(this,$i,u(this,$i)-1)}redo(){if(u(this,$i)<u(this,Gi).length-1){k(this,$i,u(this,$i)+1),k(this,lo,!0);const{cmd:t,post:e}=u(this,Gi)[u(this,$i)];t(),e==null||e(),k(this,lo,!1)}}hasSomethingToUndo(){return u(this,$i)!==-1}hasSomethingToRedo(){return u(this,$i)<u(this,Gi).length-1}destroy(){k(this,Gi,null)}}Gi=new WeakMap,lo=new WeakMap,zd=new WeakMap,$i=new WeakMap;var om,Wb;class np{constructor(t){O(this,om);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=zn.platform;for(const[i,s,r={}]of t)for(const a of i){const o=a.startsWith("mac+");e&&o?(this.callbacks.set(a.slice(4),{callback:s,options:r}),this.allKeys.add(a.split("+").at(-1))):!e&&!o&&(this.callbacks.set(a,{callback:s,options:r}),this.allKeys.add(a.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const i=this.callbacks.get(R(this,om,Wb).call(this,e));if(!i)return;const{callback:s,options:{bubbles:r=!1,args:a=[],checker:o=null}}=i;o&&!o(t,e)||(s.bind(t,...a,e)(),r||(e.stopPropagation(),e.preventDefault()))}}om=new WeakSet,Wb=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const lm=class lm{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return MS(t),Le(this,"_colors",t)}convert(t){const e=Z2(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[i,s]of this._colors)if(s.every((r,a)=>r===e[a]))return lm._colorsMapping.get(i);return e}getHexCode(t){const e=this._colors.get(t);return e?$t.makeHexColor(...e):t}};Ut(lm,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let v0=lm;var _h,Kn,Di,nn,Sh,ha,xh,Gs,co,Lh,yl,yr,$s,wl,Hd,Vd,Ch,Ud,wr,ho,Eh,uo,Ar,cm,fo,Wd,po,Al,Gd,$d,Xi,qe,ua,_l,Xd,Yd,go,_r,da,Kd,Ot,ug,b0,Gb,$b,dg,Xb,Yb,Kb,y0,Jb,w0,A0,Qb,Sn,no,Zb,ty,_0,ey,ud,S0;const gh=class gh{constructor(t,e,i,s,r,a,o,l,c,d,p){O(this,Ot);O(this,_h,new AbortController);O(this,Kn,null);O(this,Di,new Map);O(this,nn,new Map);O(this,Sh,null);O(this,ha,null);O(this,xh,null);O(this,Gs,new DS);O(this,co,null);O(this,Lh,0);O(this,yl,new Set);O(this,yr,null);O(this,$s,null);O(this,wl,new Set);O(this,Hd,!1);O(this,Vd,!1);O(this,Ch,!1);O(this,Ud,null);O(this,wr,null);O(this,ho,null);O(this,Eh,null);O(this,uo,!1);O(this,Ar,null);O(this,cm,new OS);O(this,fo,!1);O(this,Wd,!1);O(this,po,null);O(this,Al,null);O(this,Gd,null);O(this,$d,null);O(this,Xi,Se.NONE);O(this,qe,new Set);O(this,ua,null);O(this,_l,null);O(this,Xd,null);O(this,Yd,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});O(this,go,[0,0]);O(this,_r,null);O(this,da,null);O(this,Kd,null);const m=this._signal=u(this,_h).signal;k(this,da,t),k(this,Kd,e),k(this,Sh,i),this._eventBus=s,s._on("editingaction",this.onEditingAction.bind(this),{signal:m}),s._on("pagechanging",this.onPageChanging.bind(this),{signal:m}),s._on("scalechanging",this.onScaleChanging.bind(this),{signal:m}),s._on("rotationchanging",this.onRotationChanging.bind(this),{signal:m}),s._on("setpreference",this.onSetPreference.bind(this),{signal:m}),s._on("switchannotationeditorparams",f=>this.updateParams(f.type,f.value),{signal:m}),R(this,Ot,Xb).call(this),R(this,Ot,Qb).call(this),R(this,Ot,y0).call(this),k(this,ha,r.annotationStorage),k(this,Ud,r.filterFactory),k(this,_l,a),k(this,Eh,o||null),k(this,Hd,l),k(this,Vd,c),k(this,Ch,d),k(this,$d,p||null),this.viewParameters={realScale:Do.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const t=gh.prototype,e=a=>u(a,da).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),i=(a,{target:o})=>{if(o instanceof HTMLInputElement){const{type:l}=o;return l!=="text"&&l!=="number"}return!0},s=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return Le(this,"_keyboardManager",new np([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&u(a,da).contains(o)&&!a.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&u(a,da).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}destroy(){var t,e,i;(t=u(this,_h))==null||t.abort(),k(this,_h,null),this._signal=null;for(const s of u(this,nn).values())s.destroy();u(this,nn).clear(),u(this,Di).clear(),u(this,wl).clear(),k(this,Kn,null),u(this,qe).clear(),u(this,Gs).destroy(),(e=u(this,Sh))==null||e.destroy(),(i=u(this,Ar))==null||i.hide(),k(this,Ar,null),u(this,wr)&&(clearTimeout(u(this,wr)),k(this,wr,null)),u(this,_r)&&(clearTimeout(u(this,_r)),k(this,_r,null))}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return u(this,$d)}get useNewAltTextFlow(){return u(this,Vd)}get useNewAltTextWhenAddingImage(){return u(this,Ch)}get hcmFilter(){return Le(this,"hcmFilter",u(this,_l)?u(this,Ud).addHCMFilter(u(this,_l).foreground,u(this,_l).background):"none")}get direction(){return Le(this,"direction",getComputedStyle(u(this,da)).direction)}get highlightColors(){return Le(this,"highlightColors",u(this,Eh)?new Map(u(this,Eh).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return Le(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setMainHighlightColorPicker(t){k(this,Gd,t)}editAltText(t,e=!1){var i;(i=u(this,Sh))==null||i.editAltText(this,t,e)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":k(this,Ch,e);break}}onPageChanging({pageNumber:t}){k(this,Lh,t-1)}focusMainContainer(){u(this,da).focus()}findParent(t,e){for(const i of u(this,nn).values()){const{x:s,y:r,width:a,height:o}=i.div.getBoundingClientRect();if(t>=s&&t<=s+a&&e>=r&&e<=r+o)return i}return null}disableUserSelect(t=!1){u(this,Kd).classList.toggle("noUserSelect",t)}addShouldRescale(t){u(this,wl).add(t)}removeShouldRescale(t){u(this,wl).delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*Do.PDF_TO_CSS_UNITS;for(const e of u(this,wl))e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:i,anchorOffset:s,focusNode:r,focusOffset:a}=e,o=e.toString(),c=R(this,Ot,ug).call(this,e).closest(".textLayer"),d=this.getSelectionBoxes(c);if(!d)return;e.empty();const p=R(this,Ot,b0).call(this,c),m=u(this,Xi)===Se.NONE,f=()=>{p==null||p.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:d,anchorNode:i,anchorOffset:s,focusNode:r,focusOffset:a,text:o}),m&&this.showAllEditors("highlight",!0,!0)};if(m){this.switchToMode(Se.HIGHLIGHT,f);return}f()}addToAnnotationStorage(t){!t.isEmpty()&&u(this,ha)&&!u(this,ha).has(t.id)&&u(this,ha).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,u(this,uo)&&(k(this,uo,!1),R(this,Ot,dg).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of u(this,qe))if(e.div.contains(t)){k(this,Al,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!u(this,Al))return;const[t,e]=u(this,Al);k(this,Al,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){R(this,Ot,y0).call(this),R(this,Ot,w0).call(this)}removeEditListeners(){R(this,Ot,Jb).call(this),R(this,Ot,A0).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const i of u(this,$s))if(i.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const i of u(this,$s))if(i.isHandlingMimeForPasting(e.type)){i.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var i;if(t.preventDefault(),(i=u(this,Kn))==null||i.commitOrRemove(),!this.hasSelection)return;const e=[];for(const s of u(this,qe)){const r=s.serialize(!0);r&&e.push(r)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const a of u(this,$s))if(a.isHandlingMimeForPasting(r.type)){a.paste(r,this.currentLayer);return}let i=e.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(r){ve(`paste: "${r.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const s=this.currentLayer;try{const r=[];for(const l of i){const c=s.deserialize(l);if(!c)return;r.push(c)}const a=()=>{for(const l of r)R(this,Ot,_0).call(this,l);R(this,Ot,S0).call(this,r)},o=()=>{for(const l of r)l.remove()};this.addCommands({cmd:a,undo:o,mustExec:!0})}catch(r){ve(`paste: "${r.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),u(this,Xi)!==Se.NONE&&!this.isEditorHandlingKeyboard&&gh._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,u(this,uo)&&(k(this,uo,!1),R(this,Ot,dg).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(R(this,Ot,Yb).call(this),R(this,Ot,w0).call(this),R(this,Ot,Sn).call(this,{isEditing:u(this,Xi)!==Se.NONE,isEmpty:R(this,Ot,ud).call(this),hasSomethingToUndo:u(this,Gs).hasSomethingToUndo(),hasSomethingToRedo:u(this,Gs).hasSomethingToRedo(),hasSelectedEditor:!1})):(R(this,Ot,Kb).call(this),R(this,Ot,A0).call(this),R(this,Ot,Sn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!u(this,$s)){k(this,$s,t);for(const e of u(this,$s))R(this,Ot,no).call(this,e.defaultPropertiesToUpdate)}}getId(){return u(this,cm).id}get currentLayer(){return u(this,nn).get(u(this,Lh))}getLayer(t){return u(this,nn).get(t)}get currentPageIndex(){return u(this,Lh)}addLayer(t){u(this,nn).set(t.pageIndex,t),u(this,fo)?t.enable():t.disable()}removeLayer(t){u(this,nn).delete(t.pageIndex)}updateMode(t,e=null,i=!1){if(u(this,Xi)!==t){if(k(this,Xi,t),t===Se.NONE){this.setEditingState(!1),R(this,Ot,ty).call(this);return}this.setEditingState(!0),R(this,Ot,Zb).call(this),this.unselectAll();for(const s of u(this,nn).values())s.updateMode(t);if(!e&&i){this.addNewEditorFromKeyboard();return}if(e){for(const s of u(this,Di).values())if(s.annotationElementId===e){this.setSelected(s),s.enterInEditMode();break}}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==u(this,Xi)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var i;if(u(this,$s)){switch(t){case se.CREATE:this.currentLayer.addNewEditor();return;case se.HIGHLIGHT_DEFAULT_COLOR:(i=u(this,Gd))==null||i.updateColor(e);break;case se.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(u(this,Xd)||k(this,Xd,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const s of u(this,qe))s.updateParams(t,e);for(const s of u(this,$s))s.updateDefaultParams(t,e)}}showAllEditors(t,e,i=!1){var r;for(const a of u(this,Di).values())a.editorType===t&&a.show(e);(((r=u(this,Xd))==null?void 0:r.get(se.HIGHLIGHT_SHOW_ALL))??!0)!==e&&R(this,Ot,no).call(this,[[se.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(u(this,Wd)!==t){k(this,Wd,t);for(const e of u(this,nn).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const i of u(this,Di).values())i.pageIndex===t&&e.push(i);return e}getEditor(t){return u(this,Di).get(t)}addEditor(t){u(this,Di).set(t.id,t)}removeEditor(t){var e;t.div.contains(document.activeElement)&&(u(this,wr)&&clearTimeout(u(this,wr)),k(this,wr,setTimeout(()=>{this.focusMainContainer(),k(this,wr,null)},0))),u(this,Di).delete(t.id),this.unselect(t),(!t.annotationElementId||!u(this,yl).has(t.annotationElementId))&&((e=u(this,ha))==null||e.remove(t.id))}addDeletedAnnotationElement(t){u(this,yl).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return u(this,yl).has(t)}removeDeletedAnnotationElement(t){u(this,yl).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){u(this,Kn)!==t&&(k(this,Kn,t),t&&R(this,Ot,no).call(this,t.propertiesToUpdate))}updateUI(t){u(this,Ot,ey)===t&&R(this,Ot,no).call(this,t.propertiesToUpdate)}toggleSelected(t){if(u(this,qe).has(t)){u(this,qe).delete(t),t.unselect(),R(this,Ot,Sn).call(this,{hasSelectedEditor:this.hasSelection});return}u(this,qe).add(t),t.select(),R(this,Ot,no).call(this,t.propertiesToUpdate),R(this,Ot,Sn).call(this,{hasSelectedEditor:!0})}setSelected(t){for(const e of u(this,qe))e!==t&&e.unselect();u(this,qe).clear(),u(this,qe).add(t),t.select(),R(this,Ot,no).call(this,t.propertiesToUpdate),R(this,Ot,Sn).call(this,{hasSelectedEditor:!0})}isSelected(t){return u(this,qe).has(t)}get firstSelectedEditor(){return u(this,qe).values().next().value}unselect(t){t.unselect(),u(this,qe).delete(t),R(this,Ot,Sn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return u(this,qe).size!==0}get isEnterHandled(){return u(this,qe).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){u(this,Gs).undo(),R(this,Ot,Sn).call(this,{hasSomethingToUndo:u(this,Gs).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:R(this,Ot,ud).call(this)})}redo(){u(this,Gs).redo(),R(this,Ot,Sn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:u(this,Gs).hasSomethingToRedo(),isEmpty:R(this,Ot,ud).call(this)})}addCommands(t){u(this,Gs).add(t),R(this,Ot,Sn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:R(this,Ot,ud).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const t=[...u(this,qe)],e=()=>{for(const s of t)s.remove()},i=()=>{for(const s of t)R(this,Ot,_0).call(this,s)};this.addCommands({cmd:e,undo:i,mustExec:!0})}commitOrRemove(){var t;(t=u(this,Kn))==null||t.commitOrRemove()}hasSomethingToControl(){return u(this,Kn)||this.hasSelection}selectAll(){for(const t of u(this,qe))t.commit();R(this,Ot,S0).call(this,u(this,Di).values())}unselectAll(){if(!(u(this,Kn)&&(u(this,Kn).commitOrRemove(),u(this,Xi)!==Se.NONE))&&this.hasSelection){for(const t of u(this,qe))t.unselect();u(this,qe).clear(),R(this,Ot,Sn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;u(this,go)[0]+=t,u(this,go)[1]+=e;const[s,r]=u(this,go),a=[...u(this,qe)],o=1e3;u(this,_r)&&clearTimeout(u(this,_r)),k(this,_r,setTimeout(()=>{k(this,_r,null),u(this,go)[0]=u(this,go)[1]=0,this.addCommands({cmd:()=>{for(const l of a)u(this,Di).has(l.id)&&l.translateInPage(s,r)},undo:()=>{for(const l of a)u(this,Di).has(l.id)&&l.translateInPage(-s,-r)},mustExec:!1})},o));for(const l of a)l.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),k(this,yr,new Map);for(const t of u(this,qe))u(this,yr).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!u(this,yr))return!1;this.disableUserSelect(!1);const t=u(this,yr);k(this,yr,null);let e=!1;for(const[{x:s,y:r,pageIndex:a},o]of t)o.newX=s,o.newY=r,o.newPageIndex=a,e||(e=s!==o.savedX||r!==o.savedY||a!==o.savedPageIndex);if(!e)return!1;const i=(s,r,a,o)=>{if(u(this,Di).has(s.id)){const l=u(this,nn).get(o);l?s._setParentAndPosition(l,r,a):(s.pageIndex=o,s.x=r,s.y=a)}};return this.addCommands({cmd:()=>{for(const[s,{newX:r,newY:a,newPageIndex:o}]of t)i(s,r,a,o)},undo:()=>{for(const[s,{savedX:r,savedY:a,savedPageIndex:o}]of t)i(s,r,a,o)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(u(this,yr))for(const i of u(this,yr).keys())i.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||u(this,qe).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return u(this,Kn)===t}getActive(){return u(this,Kn)}getMode(){return u(this,Xi)}get imageManager(){return Le(this,"imageManager",new g0)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let c=0,d=e.rangeCount;c<d;c++)if(!t.contains(e.getRangeAt(c).commonAncestorContainer))return null;const{x:i,y:s,width:r,height:a}=t.getBoundingClientRect();let o;switch(t.getAttribute("data-main-rotation")){case"90":o=(c,d,p,m)=>({x:(d-s)/a,y:1-(c+p-i)/r,width:m/a,height:p/r});break;case"180":o=(c,d,p,m)=>({x:1-(c+p-i)/r,y:1-(d+m-s)/a,width:p/r,height:m/a});break;case"270":o=(c,d,p,m)=>({x:1-(d+m-s)/a,y:(c-i)/r,width:m/a,height:p/r});break;default:o=(c,d,p,m)=>({x:(c-i)/r,y:(d-s)/a,width:p/r,height:m/a});break}const l=[];for(let c=0,d=e.rangeCount;c<d;c++){const p=e.getRangeAt(c);if(!p.collapsed)for(const{x:m,y:f,width:b,height:w}of p.getClientRects())b===0||w===0||l.push(o(m,f,b,w))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:t,id:e}){(u(this,xh)||k(this,xh,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=u(this,xh))==null||e.delete(t)}renderAnnotationElement(t){var s;const e=(s=u(this,xh))==null?void 0:s.get(t.data.id);if(!e)return;const i=u(this,ha).getRawValue(e);i&&(u(this,Xi)===Se.NONE&&!i.hasBeenModified||i.renderAnnotationElement(t))}};_h=new WeakMap,Kn=new WeakMap,Di=new WeakMap,nn=new WeakMap,Sh=new WeakMap,ha=new WeakMap,xh=new WeakMap,Gs=new WeakMap,co=new WeakMap,Lh=new WeakMap,yl=new WeakMap,yr=new WeakMap,$s=new WeakMap,wl=new WeakMap,Hd=new WeakMap,Vd=new WeakMap,Ch=new WeakMap,Ud=new WeakMap,wr=new WeakMap,ho=new WeakMap,Eh=new WeakMap,uo=new WeakMap,Ar=new WeakMap,cm=new WeakMap,fo=new WeakMap,Wd=new WeakMap,po=new WeakMap,Al=new WeakMap,Gd=new WeakMap,$d=new WeakMap,Xi=new WeakMap,qe=new WeakMap,ua=new WeakMap,_l=new WeakMap,Xd=new WeakMap,Yd=new WeakMap,go=new WeakMap,_r=new WeakMap,da=new WeakMap,Kd=new WeakMap,Ot=new WeakSet,ug=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},b0=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const i of u(this,nn).values())if(i.hasTextLayer(t))return i;return null},Gb=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const i=R(this,Ot,ug).call(this,t).closest(".textLayer"),s=this.getSelectionBoxes(i);s&&(u(this,Ar)||k(this,Ar,new RS(this)),u(this,Ar).show(i,s,this.direction==="ltr"))},$b=function(){var r,a,o;const t=document.getSelection();if(!t||t.isCollapsed){u(this,ua)&&((r=u(this,Ar))==null||r.hide(),k(this,ua,null),R(this,Ot,Sn).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===u(this,ua))return;const s=R(this,Ot,ug).call(this,t).closest(".textLayer");if(!s){u(this,ua)&&((a=u(this,Ar))==null||a.hide(),k(this,ua,null),R(this,Ot,Sn).call(this,{hasSelectedText:!1}));return}if((o=u(this,Ar))==null||o.hide(),k(this,ua,e),R(this,Ot,Sn).call(this,{hasSelectedText:!0}),!(u(this,Xi)!==Se.HIGHLIGHT&&u(this,Xi)!==Se.NONE)&&(u(this,Xi)===Se.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),k(this,uo,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=u(this,Xi)===Se.HIGHLIGHT?R(this,Ot,b0).call(this,s):null;l==null||l.toggleDrawing();const c=new AbortController,d=this.combinedSignal(c),p=m=>{m.type==="pointerup"&&m.button!==0||(c.abort(),l==null||l.toggleDrawing(!0),m.type==="pointerup"&&R(this,Ot,dg).call(this,"main_toolbar"))};window.addEventListener("pointerup",p,{signal:d}),window.addEventListener("blur",p,{signal:d})}},dg=function(t=""){u(this,Xi)===Se.HIGHLIGHT?this.highlightSelection(t):u(this,Hd)&&R(this,Ot,Gb).call(this)},Xb=function(){document.addEventListener("selectionchange",R(this,Ot,$b).bind(this),{signal:this._signal})},Yb=function(){if(u(this,ho))return;k(this,ho,new AbortController);const t=this.combinedSignal(u(this,ho));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},Kb=function(){var t;(t=u(this,ho))==null||t.abort(),k(this,ho,null)},y0=function(){if(u(this,po))return;k(this,po,new AbortController);const t=this.combinedSignal(u(this,po));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},Jb=function(){var t;(t=u(this,po))==null||t.abort(),k(this,po,null)},w0=function(){if(u(this,co))return;k(this,co,new AbortController);const t=this.combinedSignal(u(this,co));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},A0=function(){var t;(t=u(this,co))==null||t.abort(),k(this,co,null)},Qb=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},Sn=function(t){Object.entries(t).some(([i,s])=>u(this,Yd)[i]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(u(this,Yd),t)}),u(this,Xi)===Se.HIGHLIGHT&&t.hasSelectedEditor===!1&&R(this,Ot,no).call(this,[[se.HIGHLIGHT_FREE,!0]]))},no=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},Zb=function(){if(!u(this,fo)){k(this,fo,!0);for(const t of u(this,nn).values())t.enable();for(const t of u(this,Di).values())t.enable()}},ty=function(){if(this.unselectAll(),u(this,fo)){k(this,fo,!1);for(const t of u(this,nn).values())t.disable();for(const t of u(this,Di).values())t.disable()}},_0=function(t){const e=u(this,nn).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},ey=function(){let t=null;for(t of u(this,qe));return t},ud=function(){if(u(this,Di).size===0)return!0;if(u(this,Di).size===1)for(const t of u(this,Di).values())return t.isEmpty();return!1},S0=function(t){for(const e of u(this,qe))e.unselect();u(this,qe).clear();for(const e of t)e.isEmpty()||(u(this,qe).add(e),e.select());R(this,Ot,Sn).call(this,{hasSelectedEditor:this.hasSelection})},Ut(gh,"TRANSLATE_SMALL",1),Ut(gh,"TRANSLATE_BIG",10);let mc=gh;var Yi,Sr,Xs,xr,Jn,Ph,Lr,Bn,fa,Sl,Cr,qr,fg,pg;const vs=class vs{constructor(t){O(this,qr);O(this,Yi,null);O(this,Sr,!1);O(this,Xs,null);O(this,xr,null);O(this,Jn,null);O(this,Ph,!1);O(this,Lr,null);O(this,Bn,null);O(this,fa,null);O(this,Sl,null);O(this,Cr,!1);k(this,Bn,t),k(this,Cr,t._uiManager.useNewAltTextFlow)}static initialize(t){vs._l10nPromise||(vs._l10nPromise=t)}async render(){const t=k(this,Xs,document.createElement("button"));t.className="altText";let e;u(this,Cr)?(t.classList.add("new"),e=await vs._l10nPromise.get("pdfjs-editor-new-alt-text-missing-button-label")):e=await vs._l10nPromise.get("pdfjs-editor-alt-text-button-label"),t.textContent=e,t.setAttribute("aria-label",e),t.tabIndex="0";const i=u(this,Bn)._uiManager._signal;t.addEventListener("contextmenu",Cs,{signal:i}),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:i});const s=r=>{r.preventDefault(),u(this,Bn)._uiManager.editAltText(u(this,Bn)),u(this,Cr)&&u(this,Bn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:u(this,qr,fg)}})};return t.addEventListener("click",s,{capture:!0,signal:i}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(k(this,Ph,!0),s(r))},{signal:i}),await R(this,qr,pg).call(this),t}finish(){u(this,Xs)&&(u(this,Xs).focus({focusVisible:u(this,Ph)}),k(this,Ph,!1))}isEmpty(){return u(this,Cr)?u(this,Yi)===null:!u(this,Yi)&&!u(this,Sr)}hasData(){return u(this,Cr)?u(this,Yi)!==null||!!u(this,fa):this.isEmpty()}get guessedText(){return u(this,fa)}async setGuessedText(t){u(this,Yi)===null&&(k(this,fa,t),k(this,Sl,await vs._l10nPromise.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer")({generatedAltText:t})),R(this,qr,pg).call(this))}toggleAltTextBadge(t=!1){var e;if(!u(this,Cr)||u(this,Yi)){(e=u(this,Lr))==null||e.remove(),k(this,Lr,null);return}if(!u(this,Lr)){const i=k(this,Lr,document.createElement("div"));i.className="noAltTextBadge",u(this,Bn).div.append(i)}u(this,Lr).classList.toggle("hidden",!t)}serialize(t){let e=u(this,Yi);return!t&&u(this,fa)===e&&(e=u(this,Sl)),{altText:e,decorative:u(this,Sr),guessedText:u(this,fa),textWithDisclaimer:u(this,Sl)}}get data(){return{altText:u(this,Yi),decorative:u(this,Sr)}}set data({altText:t,decorative:e,guessedText:i,textWithDisclaimer:s,cancel:r=!1}){i&&(k(this,fa,i),k(this,Sl,s)),!(u(this,Yi)===t&&u(this,Sr)===e)&&(r||(k(this,Yi,t),k(this,Sr,e)),R(this,qr,pg).call(this))}toggle(t=!1){u(this,Xs)&&(!t&&u(this,Jn)&&(clearTimeout(u(this,Jn)),k(this,Jn,null)),u(this,Xs).disabled=!t)}shown(){u(this,Bn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:u(this,qr,fg)}})}destroy(){var t,e;(t=u(this,Xs))==null||t.remove(),k(this,Xs,null),k(this,xr,null),(e=u(this,Lr))==null||e.remove(),k(this,Lr,null)}};Yi=new WeakMap,Sr=new WeakMap,Xs=new WeakMap,xr=new WeakMap,Jn=new WeakMap,Ph=new WeakMap,Lr=new WeakMap,Bn=new WeakMap,fa=new WeakMap,Sl=new WeakMap,Cr=new WeakMap,qr=new WeakSet,fg=function(){return u(this,Yi)&&"added"||u(this,Yi)===null&&this.guessedText&&"review"||"missing"},pg=async function(){var s,r;const t=u(this,Xs);if(!t)return;if(u(this,Cr)){const a=u(this,qr,fg),o=a==="review"?"to-review":a;if(t.classList.toggle("done",!!u(this,Yi)),vs._l10nPromise.get(`pdfjs-editor-new-alt-text-${o}-button-label`).then(l=>{t.setAttribute("aria-label",l);for(const c of t.childNodes)if(c.nodeType===Node.TEXT_NODE){c.textContent=l;break}}),!u(this,Yi)){(s=u(this,xr))==null||s.remove();return}}else{if(!u(this,Yi)&&!u(this,Sr)){t.classList.remove("done"),(r=u(this,xr))==null||r.remove();return}t.classList.add("done"),vs._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(a=>{t.setAttribute("aria-label",a)})}let e=u(this,xr);if(!e){k(this,xr,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip");const a=e.id=`alt-text-tooltip-${u(this,Bn).id}`;t.setAttribute("aria-describedby",a);const o=100,l=u(this,Bn)._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(u(this,Jn)),k(this,Jn,null)},{once:!0}),t.addEventListener("mouseenter",()=>{k(this,Jn,setTimeout(()=>{k(this,Jn,null),u(this,xr).classList.add("show"),u(this,Bn)._reportTelemetry({action:"alt_text_tooltip"})},o))},{signal:l}),t.addEventListener("mouseleave",()=>{var c;u(this,Jn)&&(clearTimeout(u(this,Jn)),k(this,Jn,null)),(c=u(this,xr))==null||c.classList.remove("show")},{signal:l})}e.innerText=u(this,Sr)?await vs._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):u(this,Yi),e.parentNode||t.append(e);const i=u(this,Bn).getImageForAltText();i==null||i.setAttribute("aria-describedby",e.id)},Ut(vs,"_l10nPromise",null);let Gg=vs;var xl,Ys,oi,kh,Ll,sn,Cl,mo,Jd,El,vo,Qd,Pl,pa,Er,Nh,Th,ys,Zd,hm,ge,x0,tf,L0,C0,iy,ny,E0,P0,k0,sy,N0,ry,ay,oy,T0,dd;const Ie=class Ie{constructor(t){O(this,ge);O(this,xl,null);O(this,Ys,null);O(this,oi,null);O(this,kh,!1);O(this,Ll,!1);O(this,sn,null);O(this,Cl,null);O(this,mo,null);O(this,Jd,"");O(this,El,!1);O(this,vo,null);O(this,Qd,!1);O(this,Pl,!1);O(this,pa,!1);O(this,Er,null);O(this,Nh,0);O(this,Th,0);O(this,ys,null);Ut(this,"_editToolbar",null);Ut(this,"_initialOptions",Object.create(null));Ut(this,"_isVisible",!0);Ut(this,"_uiManager",null);Ut(this,"_focusEventsAllowed",!0);O(this,Zd,!1);O(this,hm,Ie._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:i,pageHeight:s,pageX:r,pageY:a}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,s],this.pageTranslation=[r,a];const[o,l]=this.parentDimensions;this.x=t.x/o,this.y=t.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=Ie.prototype._resizeWithKeyboard,e=mc.TRANSLATE_SMALL,i=mc.TRANSLATE_BIG;return Le(this,"_resizerKeyboardManager",new np([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],Ie.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return Le(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new BS({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e,i){if(Ie._l10nResizer||(Ie._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Ie._l10nPromise||(Ie._l10nPromise=new Map([...["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-new-alt-text-added-button-label","pdfjs-editor-new-alt-text-missing-button-label","pdfjs-editor-new-alt-text-to-review-button-label"].map(r=>[r,t.get(r)]),...["pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer"].map(r=>[r,t.get.bind(t,r)])])),i!=null&&i.strings)for(const r of i.strings)Ie._l10nPromise.set(r,t.get(r));if(Ie._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);Ie._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Mi("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return u(this,Zd)}set _isDraggable(t){var e;k(this,Zd,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=u(this,hm)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):R(this,ge,dd).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(u(this,El)?k(this,El,!1):this.parent.setSelected(this))}focusout(t){var i;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(i=this.parent)!=null&&i.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,s){const[r,a]=this.parentDimensions;[i,s]=this.screenToPageTranslation(i,s),this.x=(t+i)/r,this.y=(e+s)/a,this.fixAndSetPosition()}translate(t,e){R(this,ge,x0).call(this,this.parentDimensions,t,e)}translateInPage(t,e){u(this,vo)||k(this,vo,[this.x,this.y]),R(this,ge,x0).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){u(this,vo)||k(this,vo,[this.x,this.y]);const[i,s]=this.parentDimensions;if(this.x+=t/i,this.y+=e/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:c,y:d}=this.div.getBoundingClientRect();this.parent.findNewParent(this,c,d)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:r,y:a}=this;const[o,l]=this.getBaseTranslation();r+=o,a+=l,this.div.style.left=`${(100*r).toFixed(2)}%`,this.div.style.top=`${(100*a).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!u(this,vo)&&(u(this,vo)[0]!==this.x||u(this,vo)[1]!==this.y)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:i}=Ie,s=i/t,r=i/e;switch(this.rotation){case 90:return[-s,r];case 180:return[s,r];case 270:return[s,-r];default:return[-s,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const[e,i]=this.pageDimensions;let{x:s,y:r,width:a,height:o}=this;if(a*=e,o*=i,s*=e,r*=i,this._mustFixPosition)switch(t){case 0:s=Math.max(0,Math.min(e-a,s)),r=Math.max(0,Math.min(i-o,r));break;case 90:s=Math.max(0,Math.min(e-o,s)),r=Math.min(i,Math.max(a,r));break;case 180:s=Math.min(e,Math.max(a,s)),r=Math.min(i,Math.max(o,r));break;case 270:s=Math.min(e,Math.max(o,s)),r=Math.max(0,Math.min(i-a,r));break}this.x=s/=e,this.y=r/=i;const[l,c]=this.getBaseTranslation();s+=l,r+=c;const{style:d}=this.div;d.left=`${(100*s).toFixed(2)}%`,d.top=`${(100*r).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var i;return R(i=Ie,tf,L0).call(i,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var i;return R(i=Ie,tf,L0).call(i,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,i]}=this,s=e*t,r=i*t;return zn.isCSSRoundSupported?[Math.round(s),Math.round(r)]:[s,r]}setDims(t,e){const[i,s]=this.parentDimensions;this.div.style.width=`${(100*t/i).toFixed(2)}%`,u(this,Ll)||(this.div.style.height=`${(100*e/s).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:i}=t,s=i.endsWith("%"),r=!u(this,Ll)&&e.endsWith("%");if(s&&r)return;const[a,o]=this.parentDimensions;s||(t.width=`${(100*parseFloat(i)/a).toFixed(2)}%`),!u(this,Ll)&&!r&&(t.height=`${(100*parseFloat(e)/o).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var t;(t=u(this,oi))==null||t.finish()}async addEditToolbar(){return this._editToolbar||u(this,Pl)?this._editToolbar:(this._editToolbar=new f0(this),this.div.append(this._editToolbar.render()),u(this,oi)&&await this._editToolbar.addAltText(u(this,oi)),this._editToolbar)}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=u(this,oi))==null||t.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){u(this,oi)||(Gg.initialize(Ie._l10nPromise),k(this,oi,new Gg(this)),u(this,xl)&&(u(this,oi).data=u(this,xl),k(this,xl,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=u(this,oi))==null?void 0:t.data}set altTextData(t){u(this,oi)&&(u(this,oi).data=t)}get guessedAltText(){var t;return(t=u(this,oi))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=u(this,oi))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=u(this,oi))==null?void 0:e.serialize(t)}hasAltText(){return!!u(this,oi)&&!u(this,oi).isEmpty()}hasAltTextData(){var t;return((t=u(this,oi))==null?void 0:t.hasData())??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=u(this,kh)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),R(this,ge,N0).call(this);const[t,e]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*e/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/e).toFixed(2)}%`);const[i,s]=this.getInitialTranslation();return this.translate(i,s),Wg(this,this.div,["pointerdown"]),this.div}pointerdown(t){const{isMac:e}=zn.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(k(this,El,!0),this._isDraggable){R(this,ge,sy).call(this,t);return}R(this,ge,k0).call(this,t)}moveInDOM(){u(this,Er)&&clearTimeout(u(this,Er)),k(this,Er,setTimeout(()=>{var t;k(this,Er,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition()}getRect(t,e,i=this.rotation){const s=this.parentScale,[r,a]=this.pageDimensions,[o,l]=this.pageTranslation,c=t/s,d=e/s,p=this.x*r,m=this.y*a,f=this.width*r,b=this.height*a;switch(i){case 0:return[p+c+o,a-m-d-b+l,p+c+f+o,a-m-d+l];case 90:return[p+d+o,a-m+c+l,p+d+b+o,a-m+c+f+l];case 180:return[p-c-f+o,a-m+d+l,p-c+o,a-m+d+b+l];case 270:return[p-d-b+o,a-m-c-f+l,p-d+o,a-m-c+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[i,s,r,a]=t,o=r-i,l=a-s;switch(this.rotation){case 0:return[i,e-a,o,l];case 90:return[i,e-s,l,o];case 180:return[r,e-s,o,l];case 270:return[r,e-a,l,o];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){k(this,Pl,!0)}disableEditMode(){k(this,Pl,!1)}isInEditMode(){return u(this,Pl)}shouldGetKeyboardEvents(){return u(this,pa)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){R(this,ge,N0).call(this)}rotate(t){}serialize(t=!1,e=null){Mi("An editor must be serializable")}static deserialize(t,e,i){const s=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i});s.rotation=t.rotation,k(s,xl,t.accessibilityData);const[r,a]=s.pageDimensions,[o,l,c,d]=s.getRectInCurrentCoords(t.rect,a);return s.x=o/r,s.y=l/a,s.width=c/r,s.height=d/a,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t;if((t=u(this,mo))==null||t.abort(),k(this,mo,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),u(this,Er)&&(clearTimeout(u(this,Er)),k(this,Er,null)),R(this,ge,dd).call(this),this.removeEditToolbar(),u(this,ys)){for(const e of u(this,ys).values())clearTimeout(e);k(this,ys,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(R(this,ge,iy).call(this),u(this,sn).classList.remove("hidden"),Wg(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),k(this,Cl,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=u(this,sn).children;if(!u(this,Ys)){k(this,Ys,Array.from(e));const a=R(this,ge,ry).bind(this),o=R(this,ge,ay).bind(this),l=this._uiManager._signal;for(const c of u(this,Ys)){const d=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",a,{signal:l}),c.addEventListener("blur",o,{signal:l}),c.addEventListener("focus",R(this,ge,oy).bind(this,d),{signal:l}),c.setAttribute("data-l10n-id",Ie._l10nResizer[d])}}const i=u(this,Ys)[0];let s=0;for(const a of e){if(a===i)break;s++}const r=(360-this.rotation+this.parentRotation)%360/90*(u(this,Ys).length/4);if(r!==s){if(r<s)for(let o=0;o<s-r;o++)u(this,sn).append(u(this,sn).firstChild);else if(r>s)for(let o=0;o<r-s;o++)u(this,sn).firstChild.before(u(this,sn).lastChild);let a=0;for(const o of e){const c=u(this,Ys)[a++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",Ie._l10nResizer[c])}}R(this,ge,T0).call(this,0),k(this,pa,!0),u(this,sn).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){u(this,pa)&&R(this,ge,P0).call(this,u(this,Jd),{movementX:t,movementY:e})}_stopResizingWithKeyboard(){R(this,ge,dd).call(this),this.div.focus()}select(){var t,e,i;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var s,r;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(e=this._editToolbar)==null||e.show(),(i=u(this,oi))==null||i.toggleAltTextBadge(!1)}unselect(){var t,e,i,s,r;(t=u(this,sn))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(i=this.div)!=null&&i.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=this._editToolbar)==null||s.hide(),(r=u(this,oi))==null||r.toggleAltTextBadge(!0)}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return u(this,Qd)}set isEditing(t){k(this,Qd,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){k(this,Ll,!0);const i=t/e,{style:s}=this.div;s.aspectRatio=i,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){u(this,ys)||k(this,ys,new Map);const{action:i}=t;let s=u(this,ys).get(i);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(t),u(this,ys).delete(i),u(this,ys).size===0&&k(this,ys,null)},Ie._telemetryTimeout),u(this,ys).set(i,s);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),k(this,kh,!1)}disable(){this.div&&(this.div.tabIndex=-1),k(this,kh,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const i=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),i.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;e.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};xl=new WeakMap,Ys=new WeakMap,oi=new WeakMap,kh=new WeakMap,Ll=new WeakMap,sn=new WeakMap,Cl=new WeakMap,mo=new WeakMap,Jd=new WeakMap,El=new WeakMap,vo=new WeakMap,Qd=new WeakMap,Pl=new WeakMap,pa=new WeakMap,Er=new WeakMap,Nh=new WeakMap,Th=new WeakMap,ys=new WeakMap,Zd=new WeakMap,hm=new WeakMap,ge=new WeakSet,x0=function([t,e],i,s){[i,s]=this.screenToPageTranslation(i,s),this.x+=i/t,this.y+=s/e,this.fixAndSetPosition()},tf=new WeakSet,L0=function(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},C0=function(t){switch(t){case 90:{const[e,i]=this.pageDimensions;return[0,-e/i,i/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,i]=this.pageDimensions;return[0,e/i,-i/e,0]}default:return[1,0,0,1]}},iy=function(){if(u(this,sn))return;k(this,sn,document.createElement("div")),u(this,sn).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const i of t){const s=document.createElement("div");u(this,sn).append(s),s.classList.add("resizer",i),s.setAttribute("data-resizer-name",i),s.addEventListener("pointerdown",R(this,ge,ny).bind(this,i),{signal:e}),s.addEventListener("contextmenu",Cs,{signal:e}),s.tabIndex=-1}this.div.prepend(u(this,sn))},ny=function(t,e){var b;e.preventDefault();const{isMac:i}=zn.platform;if(e.button!==0||e.ctrlKey&&i)return;(b=u(this,oi))==null||b.toggle(!1);const s=this._isDraggable;this._isDraggable=!1;const r=new AbortController,a=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",R(this,ge,P0).bind(this,t),{passive:!0,capture:!0,signal:a}),window.addEventListener("contextmenu",Cs,{signal:a});const o=this.x,l=this.y,c=this.width,d=this.height,p=this.parent.div.style.cursor,m=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const f=()=>{var w;r.abort(),this.parent.togglePointerEvents(!0),(w=u(this,oi))==null||w.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=p,this.div.style.cursor=m,R(this,ge,E0).call(this,o,l,c,d)};window.addEventListener("pointerup",f,{signal:a}),window.addEventListener("blur",f,{signal:a})},E0=function(t,e,i,s){const r=this.x,a=this.y,o=this.width,l=this.height;r===t&&a===e&&o===i&&l===s||this.addCommands({cmd:()=>{this.width=o,this.height=l,this.x=r,this.y=a;const[c,d]=this.parentDimensions;this.setDims(c*o,d*l),this.fixAndSetPosition()},undo:()=>{this.width=i,this.height=s,this.x=t,this.y=e;const[c,d]=this.parentDimensions;this.setDims(c*i,d*s),this.fixAndSetPosition()},mustExec:!0})},P0=function(t,e){const[i,s]=this.parentDimensions,r=this.x,a=this.y,o=this.width,l=this.height,c=Ie.MIN_SIZE/i,d=Ie.MIN_SIZE/s,p=st=>Math.round(st*1e4)/1e4,m=R(this,ge,C0).call(this,this.rotation),f=(st,tt)=>[m[0]*st+m[2]*tt,m[1]*st+m[3]*tt],b=R(this,ge,C0).call(this,360-this.rotation),w=(st,tt)=>[b[0]*st+b[2]*tt,b[1]*st+b[3]*tt];let S,A,x=!1,M=!1;switch(t){case"topLeft":x=!0,S=(st,tt)=>[0,0],A=(st,tt)=>[st,tt];break;case"topMiddle":S=(st,tt)=>[st/2,0],A=(st,tt)=>[st/2,tt];break;case"topRight":x=!0,S=(st,tt)=>[st,0],A=(st,tt)=>[0,tt];break;case"middleRight":M=!0,S=(st,tt)=>[st,tt/2],A=(st,tt)=>[0,tt/2];break;case"bottomRight":x=!0,S=(st,tt)=>[st,tt],A=(st,tt)=>[0,0];break;case"bottomMiddle":S=(st,tt)=>[st/2,tt],A=(st,tt)=>[st/2,0];break;case"bottomLeft":x=!0,S=(st,tt)=>[0,tt],A=(st,tt)=>[st,0];break;case"middleLeft":M=!0,S=(st,tt)=>[0,tt/2],A=(st,tt)=>[st,tt/2];break}const q=S(o,l),U=A(o,l);let X=f(...U);const G=p(r+X[0]),B=p(a+X[1]);let Q=1,ct=1,[P,N]=this.screenToPageTranslation(e.movementX,e.movementY);if([P,N]=w(P/i,N/s),x){const st=Math.hypot(o,l);Q=ct=Math.max(Math.min(Math.hypot(U[0]-q[0]-P,U[1]-q[1]-N)/st,1/o,1/l),c/o,d/l)}else M?Q=Math.max(c,Math.min(1,Math.abs(U[0]-q[0]-P)))/o:ct=Math.max(d,Math.min(1,Math.abs(U[1]-q[1]-N)))/l;const V=p(o*Q),j=p(l*ct);X=f(...A(V,j));const J=G-X[0],at=B-X[1];this.width=V,this.height=j,this.x=J,this.y=at,this.setDims(i*V,s*j),this.fixAndSetPosition()},k0=function(t){const{isMac:e}=zn.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},sy=function(t){const e=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();const i=new AbortController,s=this._uiManager.combinedSignal(i);if(e){this.div.classList.add("moving"),k(this,Nh,t.clientX),k(this,Th,t.clientY);const a=o=>{const{clientX:l,clientY:c}=o,[d,p]=this.screenToPageTranslation(l-u(this,Nh),c-u(this,Th));k(this,Nh,l),k(this,Th,c),this._uiManager.dragSelectedEditors(d,p)};window.addEventListener("pointermove",a,{passive:!0,capture:!0,signal:s})}const r=()=>{i.abort(),e&&this.div.classList.remove("moving"),k(this,El,!1),this._uiManager.endDragSession()||R(this,ge,k0).call(this,t)};window.addEventListener("pointerup",r,{signal:s}),window.addEventListener("blur",r,{signal:s})},N0=function(){if(u(this,mo)||!this.div)return;k(this,mo,new AbortController);const t=this._uiManager.combinedSignal(u(this,mo));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},ry=function(t){Ie._resizerKeyboardManager.exec(this,t)},ay=function(t){var e;u(this,pa)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==u(this,sn)&&R(this,ge,dd).call(this)},oy=function(t){k(this,Jd,u(this,pa)?t:"")},T0=function(t){if(u(this,Ys))for(const e of u(this,Ys))e.tabIndex=t},dd=function(){if(k(this,pa,!1),R(this,ge,T0).call(this,-1),u(this,Cl)){const{savedX:t,savedY:e,savedWidth:i,savedHeight:s}=u(this,Cl);R(this,ge,E0).call(this,t,e,i,s),k(this,Cl,null)}},O(Ie,tf),Ut(Ie,"_l10nPromise",null),Ut(Ie,"_l10nResizer",null),Ut(Ie,"_borderLineWidth",-1),Ut(Ie,"_colorManager",new v0),Ut(Ie,"_zIndex",1),Ut(Ie,"_telemetryTimeout",1e3);let De=Ie;class BS extends De{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}const o5=3285377520,ms=4294901760,mr=65535;class ly{constructor(t){this.h1=t?t&4294967295:o5,this.h2=t?t&4294967295:o5}update(t){let e,i;if(typeof t=="string"){e=new Uint8Array(t.length*2),i=0;for(let w=0,S=t.length;w<S;w++){const A=t.charCodeAt(w);A<=255?e[i++]=A:(e[i++]=A>>>8,e[i++]=A&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),i=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=i>>2,r=i-s*4,a=new Uint32Array(e.buffer,0,s);let o=0,l=0,c=this.h1,d=this.h2;const p=3432918353,m=461845907,f=p&mr,b=m&mr;for(let w=0;w<s;w++)w&1?(o=a[w],o=o*p&ms|o*f&mr,o=o<<15|o>>>17,o=o*m&ms|o*b&mr,c^=o,c=c<<13|c>>>19,c=c*5+3864292196):(l=a[w],l=l*p&ms|l*f&mr,l=l<<15|l>>>17,l=l*m&ms|l*b&mr,d^=l,d=d<<13|d>>>19,d=d*5+3864292196);switch(o=0,r){case 3:o^=e[s*4+2]<<16;case 2:o^=e[s*4+1]<<8;case 1:o^=e[s*4],o=o*p&ms|o*f&mr,o=o<<15|o>>>17,o=o*m&ms|o*b&mr,s&1?c^=o:d^=o}this.h1=c,this.h2=d}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&ms|t*36045&mr,e=e*4283543511&ms|((e<<16|t>>>16)*2950163797&ms)>>>16,t^=e>>>1,t=t*444984403&ms|t*60499&mr,e=e*3301882366&ms|((e<<16|t>>>16)*3120437893&ms)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const I0=Object.freeze({map:null,hash:"",transfer:void 0});var kl,Nl,Ki,um,cy;class tv{constructor(){O(this,um);O(this,kl,!1);O(this,Nl,null);O(this,Ki,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const i=u(this,Ki).get(t);return i===void 0?e:Object.assign(e,i)}getRawValue(t){return u(this,Ki).get(t)}remove(t){if(u(this,Ki).delete(t),u(this,Ki).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of u(this,Ki).values())if(e instanceof De)return;this.onAnnotationEditor(null)}}setValue(t,e){const i=u(this,Ki).get(t);let s=!1;if(i!==void 0)for(const[r,a]of Object.entries(e))i[r]!==a&&(s=!0,i[r]=a);else s=!0,u(this,Ki).set(t,e);s&&R(this,um,cy).call(this),e instanceof De&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return u(this,Ki).has(t)}getAll(){return u(this,Ki).size>0?Y2(u(this,Ki)):null}setAll(t){for(const[e,i]of Object.entries(t))this.setValue(e,i)}get size(){return u(this,Ki).size}resetModified(){u(this,kl)&&(k(this,kl,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new hy(this)}get serializable(){if(u(this,Ki).size===0)return I0;const t=new Map,e=new ly,i=[],s=Object.create(null);let r=!1;for(const[a,o]of u(this,Ki)){const l=o instanceof De?o.serialize(!1,s):o;l&&(t.set(a,l),e.update(`${a}:${JSON.stringify(l)}`),r||(r=!!l.bitmap))}if(r)for(const a of t.values())a.bitmap&&i.push(a.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:I0}get editorStats(){let t=null;const e=new Map;for(const i of u(this,Ki).values()){if(!(i instanceof De))continue;const s=i.telemetryFinalData;if(!s)continue;const{type:r}=s;e.has(r)||e.set(r,Object.getPrototypeOf(i).constructor),t||(t=Object.create(null));const a=t[r]||(t[r]=new Map);for(const[o,l]of Object.entries(s)){if(o==="type")continue;let c=a.get(o);c||(c=new Map,a.set(o,c));const d=c.get(l)??0;c.set(l,d+1)}}for(const[i,s]of e)t[i]=s.computeTelemetryFinalData(t[i]);return t}resetModifiedIds(){k(this,Nl,null)}get modifiedIds(){if(u(this,Nl))return u(this,Nl);const t=[];for(const e of u(this,Ki).values())!(e instanceof De)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return k(this,Nl,{ids:new Set(t),hash:t.join(",")})}}kl=new WeakMap,Nl=new WeakMap,Ki=new WeakMap,um=new WeakSet,cy=function(){u(this,kl)||(k(this,kl,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var ef;class hy extends tv{constructor(e){super();O(this,ef);const{map:i,hash:s,transfer:r}=e.serializable,a=structuredClone(i,r?{transfer:r}:null);k(this,ef,{map:a,hash:s,transfer:r})}get print(){Mi("Should not call PrintAnnotationStorage.print")}get serializable(){return u(this,ef)}get modifiedIds(){return Le(this,"modifiedIds",{ids:new Set,hash:""})}}ef=new WeakMap;var Ih;class jS{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){O(this,Ih,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),u(this,Ih).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:e}){if(!(!t||u(this,Ih).has(t.loadedName))){if(Hi(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:s,style:r}=t,a=new FontFace(i,s,r);this.addNativeFontFace(a);try{await a.load(),u(this,Ih).add(i),e==null||e(t)}catch{ve(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}Mi("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const i=t.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(s){throw ve(`Failed to load font '${i.family}': '${s}'.`),t.disableFontFace=!0,s}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const s=this._queueLoadingCallback(i);this._prepareFontLoadEvent(t,s)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return Le(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(yn||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),Le(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function e(){for(Hi(!s.done,"completeRequest() cannot be called twice."),s.done=!0;i.length>0&&i[0].done;){const r=i.shift();setTimeout(r.callback,0)}}const{loadingRequests:i}=this,s={done:!1,complete:e,callback:t};return i.push(s),s}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Le(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function i(q,U){return q.charCodeAt(U)<<24|q.charCodeAt(U+1)<<16|q.charCodeAt(U+2)<<8|q.charCodeAt(U+3)&255}function s(q,U,X,G){const B=q.substring(0,U),Q=q.substring(U+X);return B+G+Q}let r,a;const o=this._document.createElement("canvas");o.width=1,o.height=1;const l=o.getContext("2d");let c=0;function d(q,U){if(++c>30){ve("Load test font never loaded."),U();return}if(l.font="30px "+q,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){U();return}setTimeout(d.bind(null,q,U))}const p=`lt${Date.now()}${this.loadTestFontId++}`;let m=this._loadTestFont;m=s(m,976,p.length,p);const b=16,w=1482184792;let S=i(m,b);for(r=0,a=p.length-3;r<a;r+=4)S=S-w+i(p,r)|0;r<p.length&&(S=S-w+i(p+"XXX",r)|0),m=s(m,b,4,AS(S));const A=`url(data:font/opentype;base64,${btoa(m)});`,x=`@font-face {font-family:"${p}";src:${A}}`;this.insertRule(x);const M=this._document.createElement("div");M.style.visibility="hidden",M.style.width=M.style.height="10px",M.style.position="absolute",M.style.top=M.style.left="0px";for(const q of[t.loadedName,p]){const U=this._document.createElement("span");U.textContent="Hi",U.style.fontFamily=q,M.append(U)}this._document.body.append(M),d(p,()=>{M.remove(),e.complete()})}}Ih=new WeakMap;class qS{constructor(t,{disableFontFace:e=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const s in t)this[s]=t[s];this.disableFontFace=e===!0,this._inspectFont=i}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const t=Pb(this.data),e=`url(data:${this.mimetype};base64,${btoa(t)});`;let i;if(!this.cssFontInfo)i=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),i=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return(s=this._inspectFont)==null||s.call(this,this,e),i}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];let i;try{i=t.get(this.loadedName+"_path_"+e)}catch(r){ve(`getPathGenerator - ignoring character: "${r}".`)}if(!Array.isArray(i)||i.length===0)return this.compiledGlyphs[e]=function(r,a){};const s=[];for(let r=0,a=i.length;r<a;)switch(i[r++]){case ia.BEZIER_CURVE_TO:{const[o,l,c,d,p,m]=i.slice(r,r+6);s.push(f=>f.bezierCurveTo(o,l,c,d,p,m)),r+=6}break;case ia.MOVE_TO:{const[o,l]=i.slice(r,r+2);s.push(c=>c.moveTo(o,l)),r+=2}break;case ia.LINE_TO:{const[o,l]=i.slice(r,r+2);s.push(c=>c.lineTo(o,l)),r+=2}break;case ia.QUADRATIC_CURVE_TO:{const[o,l,c,d]=i.slice(r,r+4);s.push(p=>p.quadraticCurveTo(o,l,c,d)),r+=4}break;case ia.RESTORE:s.push(o=>o.restore());break;case ia.SAVE:s.push(o=>o.save());break;case ia.SCALE:Hi(s.length===2,"Scale command is only valid at the third position.");break;case ia.TRANSFORM:{const[o,l,c,d,p,m]=i.slice(r,r+6);s.push(f=>f.transform(o,l,c,d,p,m)),r+=6}break;case ia.TRANSLATE:{const[o,l]=i.slice(r,r+2);s.push(c=>c.translate(o,l)),r+=2}break}return this.compiledGlyphs[e]=function(a,o){s[0](a),s[1](a),a.scale(o,-o);for(let l=2,c=s.length;l<c;l++)s[l](a)}}}if(yn){var M0=Promise.withResolvers(),Sd=null;(async()=>{const t=await hl(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),e=await hl(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),i=await hl(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),s=await hl(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let r,a;return new Map(Object.entries({fs:t,http:e,https:i,url:s,canvas:r,path2d:a}))})().then(t=>{Sd=t,M0.resolve()},t=>{ve(`loadPackages: ${t}`),Sd=new Map,M0.resolve()})}class Bo{static get promise(){return M0.promise}static get(t){return Sd==null?void 0:Sd.get(t)}}const uy=function(n){return Bo.get("fs").promises.readFile(n).then(e=>new Uint8Array(e))};class zS extends Nb{}class HS extends Tb{_createCanvas(t,e){return Bo.get("canvas").createCanvas(t,e)}}class VS extends Ib{_fetchData(t,e){return uy(t).then(i=>({cMapData:i,compressionType:e}))}}class US extends Mb{_fetchData(t){return uy(t)}}const Cn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function R0(n,t){if(!t)return;const e=t[2]-t[0],i=t[3]-t[1],s=new Path2D;s.rect(t[0],t[1],e,i),n.clip(s)}class ev{getPattern(){Mi("Abstract method `getPattern` called.")}}class WS extends ev{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)e.addColorStop(i[0],i[1]);return e}getPattern(t,e,i,s){let r;if(s===Cn.STROKE||s===Cn.FILL){const a=e.current.getClippedPathBoundingBox(s,li(t))||[0,0,0,0],o=Math.ceil(a[2]-a[0])||1,l=Math.ceil(a[3]-a[1])||1,c=e.cachedCanvases.getCanvas("pattern",o,l,!0),d=c.context;d.clearRect(0,0,d.canvas.width,d.canvas.height),d.beginPath(),d.rect(0,0,d.canvas.width,d.canvas.height),d.translate(-a[0],-a[1]),i=$t.transform(i,[1,0,0,1,a[0],a[1]]),d.transform(...e.baseTransform),this.matrix&&d.transform(...this.matrix),R0(d,this._bbox),d.fillStyle=this._createGradient(d),d.fill(),r=t.createPattern(c.canvas,"no-repeat");const p=new DOMMatrix(i);r.setTransform(p)}else R0(t,this._bbox),r=this._createGradient(t);return r}}function q1(n,t,e,i,s,r,a,o){const l=t.coords,c=t.colors,d=n.data,p=n.width*4;let m;l[e+1]>l[i+1]&&(m=e,e=i,i=m,m=r,r=a,a=m),l[i+1]>l[s+1]&&(m=i,i=s,s=m,m=a,a=o,o=m),l[e+1]>l[i+1]&&(m=e,e=i,i=m,m=r,r=a,a=m);const f=(l[e]+t.offsetX)*t.scaleX,b=(l[e+1]+t.offsetY)*t.scaleY,w=(l[i]+t.offsetX)*t.scaleX,S=(l[i+1]+t.offsetY)*t.scaleY,A=(l[s]+t.offsetX)*t.scaleX,x=(l[s+1]+t.offsetY)*t.scaleY;if(b>=x)return;const M=c[r],q=c[r+1],U=c[r+2],X=c[a],G=c[a+1],B=c[a+2],Q=c[o],ct=c[o+1],P=c[o+2],N=Math.round(b),V=Math.round(x);let j,J,at,st,tt,vt,ht,At;for(let E=N;E<=V;E++){if(E<S){const ot=E<b?0:(b-E)/(b-S);j=f-(f-w)*ot,J=M-(M-X)*ot,at=q-(q-G)*ot,st=U-(U-B)*ot}else{let ot;E>x?ot=1:S===x?ot=0:ot=(S-E)/(S-x),j=w-(w-A)*ot,J=X-(X-Q)*ot,at=G-(G-ct)*ot,st=B-(B-P)*ot}let z;E<b?z=0:E>x?z=1:z=(b-E)/(b-x),tt=f-(f-A)*z,vt=M-(M-Q)*z,ht=q-(q-ct)*z,At=U-(U-P)*z;const $=Math.round(Math.min(j,tt)),K=Math.round(Math.max(j,tt));let Z=p*E+$*4;for(let ot=$;ot<=K;ot++)z=(j-ot)/(j-tt),z<0?z=0:z>1&&(z=1),d[Z++]=J-(J-vt)*z|0,d[Z++]=at-(at-ht)*z|0,d[Z++]=st-(st-At)*z|0,d[Z++]=255}}function GS(n,t,e){const i=t.coords,s=t.colors;let r,a;switch(t.type){case"lattice":const o=t.verticesPerRow,l=Math.floor(i.length/o)-1,c=o-1;for(r=0;r<l;r++){let d=r*o;for(let p=0;p<c;p++,d++)q1(n,e,i[d],i[d+1],i[d+o],s[d],s[d+1],s[d+o]),q1(n,e,i[d+o+1],i[d+1],i[d+o],s[d+o+1],s[d+1],s[d+o])}break;case"triangles":for(r=0,a=i.length;r<a;r+=3)q1(n,e,i[r],i[r+1],i[r+2],s[r],s[r+1],s[r+2]);break;default:throw new Error("illegal figure")}}class $S extends ev{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,i){const o=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-o,d=Math.ceil(this._bounds[3])-l,p=Math.min(Math.ceil(Math.abs(c*t[0]*1.1)),3e3),m=Math.min(Math.ceil(Math.abs(d*t[1]*1.1)),3e3),f=c/p,b=d/m,w={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-l,scaleX:1/f,scaleY:1/b},S=p+2*2,A=m+2*2,x=i.getCanvas("mesh",S,A,!1),M=x.context,q=M.createImageData(p,m);if(e){const X=q.data;for(let G=0,B=X.length;G<B;G+=4)X[G]=e[0],X[G+1]=e[1],X[G+2]=e[2],X[G+3]=255}for(const X of this._figures)GS(q,X,w);return M.putImageData(q,2,2),{canvas:x.canvas,offsetX:o-2*f,offsetY:l-2*b,scaleX:f,scaleY:b}}getPattern(t,e,i,s){R0(t,this._bbox);let r;if(s===Cn.SHADING)r=$t.singularValueDecompose2dScale(li(t));else if(r=$t.singularValueDecompose2dScale(e.baseTransform),this.matrix){const o=$t.singularValueDecompose2dScale(this.matrix);r=[r[0]*o[0],r[1]*o[1]]}const a=this._createMeshCanvas(r,s===Cn.SHADING?null:this._background,e.cachedCanvases);return s!==Cn.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(a.offsetX,a.offsetY),t.scale(a.scaleX,a.scaleY),t.createPattern(a.canvas,"no-repeat")}}class XS extends ev{getPattern(){return"hotpink"}}function YS(n){switch(n[0]){case"RadialAxial":return new WS(n);case"Mesh":return new $S(n);case"Dummy":return new XS}throw new Error(`Unknown IR type: ${n[0]}`)}const l5={COLORED:1,UNCOLORED:2},dm=class dm{constructor(t,e,i,s,r){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=i,this.canvasGraphicsFactory=s,this.baseTransform=r}createPatternCanvas(t){const e=this.operatorList,i=this.bbox,s=this.xstep,r=this.ystep,a=this.paintType,o=this.tilingType,l=this.color,c=this.canvasGraphicsFactory;Rm("TilingType: "+o);const d=i[0],p=i[1],m=i[2],f=i[3],b=$t.singularValueDecompose2dScale(this.matrix),w=$t.singularValueDecompose2dScale(this.baseTransform),S=[b[0]*w[0],b[1]*w[1]],A=this.getSizeAndScale(s,this.ctx.canvas.width,S[0]),x=this.getSizeAndScale(r,this.ctx.canvas.height,S[1]),M=t.cachedCanvases.getCanvas("pattern",A.size,x.size,!0),q=M.context,U=c.createCanvasGraphics(q);U.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(U,a,l);let X=d,G=p,B=m,Q=f;return d<0&&(X=0,B+=Math.abs(d)),p<0&&(G=0,Q+=Math.abs(p)),q.translate(-(A.scale*X),-(x.scale*G)),U.transform(A.scale,0,0,x.scale,0,0),q.save(),this.clipBbox(U,X,G,B,Q),U.baseTransform=li(U.ctx),U.executeOperatorList(e),U.endDrawing(),{canvas:M.canvas,scaleX:A.scale,scaleY:x.scale,offsetX:X,offsetY:G}}getSizeAndScale(t,e,i){t=Math.abs(t);const s=Math.max(dm.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*i);return r>=s?r=s:i=r/t,{scale:i,size:r}}clipBbox(t,e,i,s,r){const a=s-e,o=r-i;t.ctx.rect(e,i,a,o),t.current.updateRectMinMax(li(t.ctx),[e,i,s,r]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){const s=t.ctx,r=t.current;switch(e){case l5.COLORED:const a=this.ctx;s.fillStyle=a.fillStyle,s.strokeStyle=a.strokeStyle,r.fillColor=a.fillStyle,r.strokeColor=a.strokeStyle;break;case l5.UNCOLORED:const o=$t.makeHexColor(i[0],i[1],i[2]);s.fillStyle=o,s.strokeStyle=o,r.fillColor=o,r.strokeColor=o;break;default:throw new wS(`Unsupported paint type: ${e}`)}}getPattern(t,e,i,s){let r=i;s!==Cn.SHADING&&(r=$t.transform(r,e.baseTransform),this.matrix&&(r=$t.transform(r,this.matrix)));const a=this.createPatternCanvas(e);let o=new DOMMatrix(r);o=o.translate(a.offsetX,a.offsetY),o=o.scale(1/a.scaleX,1/a.scaleY);const l=t.createPattern(a.canvas,"repeat");return l.setTransform(o),l}};Ut(dm,"MAX_PATTERN_SIZE",3e3);let F0=dm;function KS({src:n,srcPos:t=0,dest:e,width:i,height:s,nonBlackColor:r=4294967295,inverseDecode:a=!1}){const o=zn.isLittleEndian?4278190080:255,[l,c]=a?[r,o]:[o,r],d=i>>3,p=i&7,m=n.length;e=new Uint32Array(e.buffer);let f=0;for(let b=0;b<s;b++){for(const S=t+d;t<S;t++){const A=t<m?n[t]:255;e[f++]=A&128?c:l,e[f++]=A&64?c:l,e[f++]=A&32?c:l,e[f++]=A&16?c:l,e[f++]=A&8?c:l,e[f++]=A&4?c:l,e[f++]=A&2?c:l,e[f++]=A&1?c:l}if(p===0)continue;const w=t<m?n[t++]:255;for(let S=0;S<p;S++)e[f++]=w&1<<7-S?c:l}return{srcPos:t,destPos:f}}const c5=16,h5=100,JS=15,u5=10,d5=1e3,qn=16;function QS(n,t){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){t.save(),this.__originalSave()},n.restore=function(){t.restore(),this.__originalRestore()},n.translate=function(i,s){t.translate(i,s),this.__originalTranslate(i,s)},n.scale=function(i,s){t.scale(i,s),this.__originalScale(i,s)},n.transform=function(i,s,r,a,o,l){t.transform(i,s,r,a,o,l),this.__originalTransform(i,s,r,a,o,l)},n.setTransform=function(i,s,r,a,o,l){t.setTransform(i,s,r,a,o,l),this.__originalSetTransform(i,s,r,a,o,l)},n.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},n.rotate=function(i){t.rotate(i),this.__originalRotate(i)},n.clip=function(i){t.clip(i),this.__originalClip(i)},n.moveTo=function(e,i){t.moveTo(e,i),this.__originalMoveTo(e,i)},n.lineTo=function(e,i){t.lineTo(e,i),this.__originalLineTo(e,i)},n.bezierCurveTo=function(e,i,s,r,a,o){t.bezierCurveTo(e,i,s,r,a,o),this.__originalBezierCurveTo(e,i,s,r,a,o)},n.rect=function(e,i,s,r){t.rect(e,i,s,r),this.__originalRect(e,i,s,r)},n.closePath=function(){t.closePath(),this.__originalClosePath()},n.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class ZS{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let s;return this.cache[t]!==void 0?(s=this.cache[t],this.canvasFactory.reset(s,e,i)):(s=this.canvasFactory.create(e,i),this.cache[t]=s),s}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Yp(n,t,e,i,s,r,a,o,l,c){const[d,p,m,f,b,w]=li(n);if(p===0&&m===0){const x=a*d+b,M=Math.round(x),q=o*f+w,U=Math.round(q),X=(a+l)*d+b,G=Math.abs(Math.round(X)-M)||1,B=(o+c)*f+w,Q=Math.abs(Math.round(B)-U)||1;return n.setTransform(Math.sign(d),0,0,Math.sign(f),M,U),n.drawImage(t,e,i,s,r,0,0,G,Q),n.setTransform(d,p,m,f,b,w),[G,Q]}if(d===0&&f===0){const x=o*m+b,M=Math.round(x),q=a*p+w,U=Math.round(q),X=(o+c)*m+b,G=Math.abs(Math.round(X)-M)||1,B=(a+l)*p+w,Q=Math.abs(Math.round(B)-U)||1;return n.setTransform(0,Math.sign(p),Math.sign(m),0,M,U),n.drawImage(t,e,i,s,r,0,0,Q,G),n.setTransform(d,p,m,f,b,w),[Q,G]}n.drawImage(t,e,i,s,r,a,o,l,c);const S=Math.hypot(d,p),A=Math.hypot(m,f);return[S*l,A*c]}function tx(n){const{width:t,height:e}=n;if(t>d5||e>d5)return null;const i=1e3,s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=t+1;let a=new Uint8Array(r*(e+1)),o,l,c;const d=t+7&-8;let p=new Uint8Array(d*e),m=0;for(const A of n.data){let x=128;for(;x>0;)p[m++]=A&x?0:255,x>>=1}let f=0;for(m=0,p[m]!==0&&(a[0]=1,++f),l=1;l<t;l++)p[m]!==p[m+1]&&(a[l]=p[m]?2:1,++f),m++;for(p[m]!==0&&(a[l]=2,++f),o=1;o<e;o++){m=o*d,c=o*r,p[m-d]!==p[m]&&(a[c]=p[m]?1:8,++f);let A=(p[m]?4:0)+(p[m-d]?8:0);for(l=1;l<t;l++)A=(A>>2)+(p[m+1]?4:0)+(p[m-d+1]?8:0),s[A]&&(a[c+l]=s[A],++f),m++;if(p[m-d]!==p[m]&&(a[c+l]=p[m]?2:4,++f),f>i)return null}for(m=d*(e-1),c=o*r,p[m]!==0&&(a[c]=8,++f),l=1;l<t;l++)p[m]!==p[m+1]&&(a[c+l]=p[m]?4:8,++f),m++;if(p[m]!==0&&(a[c+l]=4,++f),f>i)return null;const b=new Int32Array([0,r,-1,0,-r,0,0,0,1]),w=new Path2D;for(o=0;f&&o<=e;o++){let A=o*r;const x=A+t;for(;A<x&&!a[A];)A++;if(A===x)continue;w.moveTo(A%r,o);const M=A;let q=a[A];do{const U=b[q];do A+=U;while(!a[A]);const X=a[A];X!==5&&X!==10?(q=X,a[A]=0):(q=X&51*q>>4,a[A]&=q>>2|q<<2),w.lineTo(A%r,A/r|0),a[A]||--f}while(M!==A);--o}return p=null,a=null,function(A){A.save(),A.scale(1/t,-1/e),A.translate(0,-e),A.fill(w),A.beginPath(),A.restore()}}class f5{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=Cb,this.textMatrixScale=1,this.fontMatrix=a0,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=pn.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,i){[e,i]=$t.applyTransform([e,i],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(t,e){const i=$t.applyTransform(e,t),s=$t.applyTransform(e.slice(2),t),r=$t.applyTransform([e[0],e[3]],t),a=$t.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,i[0],s[0],r[0],a[0]),this.minY=Math.min(this.minY,i[1],s[1],r[1],a[1]),this.maxX=Math.max(this.maxX,i[0],s[0],r[0],a[0]),this.maxY=Math.max(this.maxY,i[1],s[1],r[1],a[1])}updateScalingPathMinMax(t,e){$t.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,i,s,r,a,o,l,c,d){const p=$t.bezierBoundingBox(e,i,s,r,a,o,l,c,d);d||this.updateRectMinMax(t,p)}getPathBoundingBox(t=Cn.FILL,e=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(t===Cn.STROKE){e||Mi("Stroke bounding box must include transform.");const s=$t.singularValueDecompose2dScale(e),r=s[0]*this.lineWidth/2,a=s[1]*this.lineWidth/2;i[0]-=r,i[1]-=a,i[2]+=r,i[3]+=a}return i}updateClipFromPath(){const t=$t.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=Cn.FILL,e=null){return $t.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function p5(n,t){if(typeof ImageData<"u"&&t instanceof ImageData){n.putImageData(t,0,0);return}const e=t.height,i=t.width,s=e%qn,r=(e-s)/qn,a=s===0?r:r+1,o=n.createImageData(i,qn);let l=0,c;const d=t.data,p=o.data;let m,f,b,w;if(t.kind===og.GRAYSCALE_1BPP){const S=d.byteLength,A=new Uint32Array(p.buffer,0,p.byteLength>>2),x=A.length,M=i+7>>3,q=4294967295,U=zn.isLittleEndian?4278190080:255;for(m=0;m<a;m++){for(b=m<r?qn:s,c=0,f=0;f<b;f++){const X=S-l;let G=0;const B=X>M?i:X*8-7,Q=B&-8;let ct=0,P=0;for(;G<Q;G+=8)P=d[l++],A[c++]=P&128?q:U,A[c++]=P&64?q:U,A[c++]=P&32?q:U,A[c++]=P&16?q:U,A[c++]=P&8?q:U,A[c++]=P&4?q:U,A[c++]=P&2?q:U,A[c++]=P&1?q:U;for(;G<B;G++)ct===0&&(P=d[l++],ct=128),A[c++]=P&ct?q:U,ct>>=1}for(;c<x;)A[c++]=0;n.putImageData(o,0,m*qn)}}else if(t.kind===og.RGBA_32BPP){for(f=0,w=i*qn*4,m=0;m<r;m++)p.set(d.subarray(l,l+w)),l+=w,n.putImageData(o,0,f),f+=qn;m<a&&(w=i*s*4,p.set(d.subarray(l,l+w)),n.putImageData(o,0,f))}else if(t.kind===og.RGB_24BPP)for(b=qn,w=i*b,m=0;m<a;m++){for(m>=r&&(b=s,w=i*b),c=0,f=w;f--;)p[c++]=d[l++],p[c++]=d[l++],p[c++]=d[l++],p[c++]=255;n.putImageData(o,0,m*qn)}else throw new Error(`bad image kind: ${t.kind}`)}function g5(n,t){if(t.bitmap){n.drawImage(t.bitmap,0,0);return}const e=t.height,i=t.width,s=e%qn,r=(e-s)/qn,a=s===0?r:r+1,o=n.createImageData(i,qn);let l=0;const c=t.data,d=o.data;for(let p=0;p<a;p++){const m=p<r?qn:s;({srcPos:l}=KS({src:c,srcPos:l,dest:d,width:i,height:m,nonBlackColor:0})),n.putImageData(o,0,p*qn)}}function id(n,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of e)n[i]!==void 0&&(t[i]=n[i]);n.setLineDash!==void 0&&(t.setLineDash(n.getLineDash()),t.lineDashOffset=n.lineDashOffset)}function Kp(n){if(n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0),!yn){const{filter:t}=n;t!=="none"&&t!==""&&(n.filter="none")}}function m5(n,t){if(t)return!0;const e=$t.singularValueDecompose2dScale(n);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*Do.PDF_TO_CSS_UNITS);return e[0]<=i&&e[1]<=i}const ex=["butt","round","square"],ix=["miter","round","bevel"],nx={},v5={};var Ho,O0,D0;const wv=class wv{constructor(t,e,i,s,r,{optionalContentConfig:a,markedContentStack:o=null},l,c){O(this,Ho);this.ctx=t,this.current=new f5(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=s,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=a,this.cachedCanvases=new ZS(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:s=null}){const r=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,r,a),this.ctx.fillStyle=o,i){const l=this.cachedCanvases.getCanvas("transparent",r,a);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...li(this.compositeCtx))}this.ctx.save(),Kp(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=li(this.ctx)}executeOperatorList(t,e,i,s){const r=t.argsArray,a=t.fnArray;let o=e||0;const l=r.length;if(l===o)return o;const c=l-o>u5&&typeof i=="function",d=c?Date.now()+JS:0;let p=0;const m=this.commonObjs,f=this.objs;let b;for(;;){if(s!==void 0&&o===s.nextBreakPoint)return s.breakIt(o,i),o;if(b=a[o],b!==Vs.dependency)this[b].apply(this,r[o]);else for(const w of r[o]){const S=w.startsWith("g_")?m:f;if(!S.has(w))return S.get(w,i),o}if(o++,o===l)return o;if(c&&++p>u5){if(Date.now()>d)return i(),o;p=0}}}endDrawing(){R(this,Ho,O0).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),R(this,Ho,D0).call(this)}_scaleImage(t,e){const i=t.width,s=t.height;let r=Math.max(Math.hypot(e[0],e[1]),1),a=Math.max(Math.hypot(e[2],e[3]),1),o=i,l=s,c="prescale1",d,p;for(;r>2&&o>1||a>2&&l>1;){let m=o,f=l;r>2&&o>1&&(m=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),r/=o/m),a>2&&l>1&&(f=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,a/=l/f),d=this.cachedCanvases.getCanvas(c,m,f),p=d.context,p.clearRect(0,0,m,f),p.drawImage(t,0,0,o,l,0,0,m,f),t=d.canvas,o=m,l=f,c=c==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:o,paintHeight:l}}_createMaskCanvas(t){const e=this.ctx,{width:i,height:s}=t,r=this.current.fillColor,a=this.current.patternFill,o=li(e);let l,c,d,p;if((t.bitmap||t.data)&&t.count>1){const B=t.bitmap||t.data.buffer;c=JSON.stringify(a?o:[o.slice(0,4),r]),l=this._cachedBitmapsMap.get(B),l||(l=new Map,this._cachedBitmapsMap.set(B,l));const Q=l.get(c);if(Q&&!a){const ct=Math.round(Math.min(o[0],o[2])+o[4]),P=Math.round(Math.min(o[1],o[3])+o[5]);return{canvas:Q,offsetX:ct,offsetY:P}}d=Q}d||(p=this.cachedCanvases.getCanvas("maskCanvas",i,s),g5(p.context,t));let m=$t.transform(o,[1/i,0,0,-1/s,0,0]);m=$t.transform(m,[1,0,0,1,0,-s]);const[f,b,w,S]=$t.getAxialAlignedBoundingBox([0,0,i,s],m),A=Math.round(w-f)||1,x=Math.round(S-b)||1,M=this.cachedCanvases.getCanvas("fillCanvas",A,x),q=M.context,U=f,X=b;q.translate(-U,-X),q.transform(...m),d||(d=this._scaleImage(p.canvas,na(q)),d=d.img,l&&a&&l.set(c,d)),q.imageSmoothingEnabled=m5(li(q),t.interpolate),Yp(q,d,0,0,d.width,d.height,0,0,i,s),q.globalCompositeOperation="source-in";const G=$t.transform(na(q),[1,0,0,1,-U,-X]);return q.fillStyle=a?r.getPattern(e,this,G,Cn.FILL):r,q.fillRect(0,0,i,s),l&&!a&&(this.cachedCanvases.delete("fillCanvas"),l.set(c,M.canvas)),{canvas:M.canvas,offsetX:Math.round(U),offsetY:Math.round(X)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=ex[t]}setLineJoin(t){this.ctx.lineJoin=ix[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,i]of t)switch(e){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(i,t,e);this.suspendedCtx=this.ctx,this.ctx=s.context;const r=this.ctx;r.setTransform(...li(this.suspendedCtx)),id(this.suspendedCtx,r),QS(r,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),id(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,s){const r=s[0],a=s[1],o=s[2]-r,l=s[3]-a;o===0||l===0||(this.genericComposeSMask(e.context,i,o,l,e.subtype,e.backdrop,e.transferMap,r,a,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,s,r,a,o,l,c,d,p){let m=t.canvas,f=l-d,b=c-p;if(a){if(f<0||b<0||f+i>m.width||b+s>m.height){const S=this.cachedCanvases.getCanvas("maskExtension",i,s),A=S.context;A.drawImage(m,-f,-b),a.some(x=>x!==0)&&(A.globalCompositeOperation="destination-atop",A.fillStyle=$t.makeHexColor(...a),A.fillRect(0,0,i,s),A.globalCompositeOperation="source-over"),m=S.canvas,f=b=0}else if(a.some(S=>S!==0)){t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const S=new Path2D;S.rect(f,b,i,s),t.clip(S),t.globalCompositeOperation="destination-atop",t.fillStyle=$t.makeHexColor(...a),t.fillRect(f,b,i,s),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),r==="Alpha"&&o?e.filter=this.filterFactory.addAlphaFilter(o):r==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(o));const w=new Path2D;w.rect(l,c,i,s),e.clip(w),e.globalCompositeOperation="destination-in",e.drawImage(m,f,b,i,s,l,c,i,s),e.restore()}save(){this.inSMaskMode?(id(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),id(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,i,s,r,a){this.ctx.transform(t,e,i,s,r,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i){const s=this.ctx,r=this.current;let a=r.x,o=r.y,l,c;const d=li(s),p=d[0]===0&&d[3]===0||d[1]===0&&d[2]===0,m=p?i.slice(0):null;for(let f=0,b=0,w=t.length;f<w;f++)switch(t[f]|0){case Vs.rectangle:a=e[b++],o=e[b++];const S=e[b++],A=e[b++],x=a+S,M=o+A;s.moveTo(a,o),S===0||A===0?s.lineTo(x,M):(s.lineTo(x,o),s.lineTo(x,M),s.lineTo(a,M)),p||r.updateRectMinMax(d,[a,o,x,M]),s.closePath();break;case Vs.moveTo:a=e[b++],o=e[b++],s.moveTo(a,o),p||r.updatePathMinMax(d,a,o);break;case Vs.lineTo:a=e[b++],o=e[b++],s.lineTo(a,o),p||r.updatePathMinMax(d,a,o);break;case Vs.curveTo:l=a,c=o,a=e[b+4],o=e[b+5],s.bezierCurveTo(e[b],e[b+1],e[b+2],e[b+3],a,o),r.updateCurvePathMinMax(d,l,c,e[b],e[b+1],e[b+2],e[b+3],a,o,m),b+=6;break;case Vs.curveTo2:l=a,c=o,s.bezierCurveTo(a,o,e[b],e[b+1],e[b+2],e[b+3]),r.updateCurvePathMinMax(d,l,c,a,o,e[b],e[b+1],e[b+2],e[b+3],m),a=e[b+2],o=e[b+3],b+=4;break;case Vs.curveTo3:l=a,c=o,a=e[b+2],o=e[b+3],s.bezierCurveTo(e[b],e[b+1],a,o,a,o),r.updateCurvePathMinMax(d,l,c,e[b],e[b+1],a,o,a,o,m),b+=4;break;case Vs.closePath:s.closePath();break}p&&r.updateScalingPathMinMax(d,m),r.setCurrentPoint(a,o)}closePath(){this.ctx.closePath()}stroke(t=!0){const e=this.ctx,i=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof i=="object"&&(i!=null&&i.getPattern)?(e.save(),e.strokeStyle=i.getPattern(e,this,na(e),Cn.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const e=this.ctx,i=this.current.fillColor,s=this.current.patternFill;let r=!1;s&&(e.save(),e.fillStyle=i.getPattern(e,this,na(e),Cn.FILL),r=!0);const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),r&&e.restore(),t&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=nx}eoClip(){this.pendingClip=v5}beginText(){this.current.textMatrix=Cb,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0){e.beginPath();return}e.save(),e.beginPath();for(const i of t)e.setTransform(...i.transform),e.translate(i.x,i.y),i.addToPath(e,i.fontSize);e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var d;const i=this.commonObjs.get(t),s=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(s.fontMatrix=i.fontMatrix||a0,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&ve("Invalid font matrix for font "+t),e<0?(e=-e,s.fontDirection=-1):s.fontDirection=1,this.current.font=i,this.current.fontSize=e,i.isType3Font)return;const r=i.loadedName||"sans-serif",a=((d=i.systemFontInfo)==null?void 0:d.css)||`"${r}", ${i.fallbackName}`;let o="normal";i.black?o="900":i.bold&&(o="bold");const l=i.italic?"italic":"normal";let c=e;e<c5?c=c5:e>h5&&(c=h5),this.current.fontSizeScale=e/c,this.ctx.font=`${l} ${o} ${c}px ${a}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,i,s,r,a){this.current.textMatrix=[t,e,i,s,r,a],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,i,s){const r=this.ctx,a=this.current,o=a.font,l=a.textRenderingMode,c=a.fontSize/a.fontSizeScale,d=l&pn.FILL_STROKE_MASK,p=!!(l&pn.ADD_TO_PATH_FLAG),m=a.patternFill&&!o.missingFile;let f;(o.disableFontFace||p||m)&&(f=o.getPathGenerator(this.commonObjs,t)),o.disableFontFace||m?(r.save(),r.translate(e,i),r.beginPath(),f(r,c),s&&r.setTransform(...s),(d===pn.FILL||d===pn.FILL_STROKE)&&r.fill(),(d===pn.STROKE||d===pn.FILL_STROKE)&&r.stroke(),r.restore()):((d===pn.FILL||d===pn.FILL_STROKE)&&r.fillText(t,e,i),(d===pn.STROKE||d===pn.FILL_STROKE)&&r.strokeText(t,e,i)),p&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:li(r),x:e,y:i,fontSize:c,addToPath:f})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let s=3;s<e.length;s+=4)if(e[s]>0&&e[s]<255){i=!0;break}return Le(this,"isFontSubpixelAAEnabled",i)}showText(t){const e=this.current,i=e.font;if(i.isType3Font)return this.showType3Text(t);const s=e.fontSize;if(s===0)return;const r=this.ctx,a=e.fontSizeScale,o=e.charSpacing,l=e.wordSpacing,c=e.fontDirection,d=e.textHScale*c,p=t.length,m=i.vertical,f=m?1:-1,b=i.defaultVMetrics,w=s*e.fontMatrix[0],S=e.textRenderingMode===pn.FILL&&!i.disableFontFace&&!e.patternFill;r.save(),r.transform(...e.textMatrix),r.translate(e.x,e.y+e.textRise),c>0?r.scale(d,-1):r.scale(d,1);let A;if(e.patternFill){r.save();const X=e.fillColor.getPattern(r,this,na(r),Cn.FILL);A=li(r),r.restore(),r.fillStyle=X}let x=e.lineWidth;const M=e.textMatrixScale;if(M===0||x===0){const X=e.textRenderingMode&pn.FILL_STROKE_MASK;(X===pn.STROKE||X===pn.FILL_STROKE)&&(x=this.getSinglePixelWidth())}else x/=M;if(a!==1&&(r.scale(a,a),x/=a),r.lineWidth=x,i.isInvalidPDFjsFont){const X=[];let G=0;for(const B of t)X.push(B.unicode),G+=B.width;r.fillText(X.join(""),0,0),e.x+=G*w*d,r.restore(),this.compose();return}let q=0,U;for(U=0;U<p;++U){const X=t[U];if(typeof X=="number"){q+=f*X*s/1e3;continue}let G=!1;const B=(X.isSpace?l:0)+o,Q=X.fontChar,ct=X.accent;let P,N,V=X.width;if(m){const J=X.vmetric||b,at=-(X.vmetric?J[1]:V*.5)*w,st=J[2]*w;V=J?-J[0]:V,P=at/a,N=(q+st)/a}else P=q/a,N=0;if(i.remeasure&&V>0){const J=r.measureText(Q).width*1e3/s*a;if(V<J&&this.isFontSubpixelAAEnabled){const at=V/J;G=!0,r.save(),r.scale(at,1),P/=at}else V!==J&&(P+=(V-J)/2e3*s/a)}if(this.contentVisible&&(X.isInFont||i.missingFile)){if(S&&!ct)r.fillText(Q,P,N);else if(this.paintChar(Q,P,N,A),ct){const J=P+s*ct.offset.x/a,at=N-s*ct.offset.y/a;this.paintChar(ct.fontChar,J,at,A)}}const j=m?V*w-B*c:V*w+B*c;q+=j,G&&r.restore()}m?e.y-=q:e.x+=q*d,r.restore(),this.compose()}showType3Text(t){const e=this.ctx,i=this.current,s=i.font,r=i.fontSize,a=i.fontDirection,o=s.vertical?1:-1,l=i.charSpacing,c=i.wordSpacing,d=i.textHScale*a,p=i.fontMatrix||a0,m=t.length,f=i.textRenderingMode===pn.INVISIBLE;let b,w,S,A;if(!(f||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...i.textMatrix),e.translate(i.x,i.y),e.scale(d,a),b=0;b<m;++b){if(w=t[b],typeof w=="number"){A=o*w*r/1e3,this.ctx.translate(A,0),i.x+=A*d;continue}const x=(w.isSpace?c:0)+l,M=s.charProcOperatorList[w.operatorListId];if(!M){ve(`Type3 character "${w.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=w,this.save(),e.scale(r,r),e.transform(...p),this.executeOperatorList(M),this.restore()),S=$t.applyTransform([w.width,0],p)[0]*r+x,e.translate(S,0),i.x+=S*d}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,i,s,r,a){this.ctx.rect(i,s,r-i,a-s),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const i=t[1],s=this.baseTransform||li(this.ctx),r={createCanvasGraphics:a=>new wv(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new F0(t,i,this.ctx,r,s)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,i){this.ctx.strokeStyle=this.current.strokeColor=$t.makeHexColor(t,e,i)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(t,e,i){this.ctx.fillStyle=this.current.fillColor=$t.makeHexColor(t,e,i),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=YS(this.getObject(t)),this.cachedPatterns.set(t,i)),e&&(i.matrix=e),i}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const i=this._getPattern(t);e.fillStyle=i.getPattern(e,this,na(e),Cn.SHADING);const s=na(e);if(s){const{width:r,height:a}=e.canvas,[o,l,c,d]=$t.getAxialAlignedBoundingBox([0,0,r,a],s);this.ctx.fillRect(o,l,c-o,d-l)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Mi("Should not call beginInlineImage")}beginImageData(){Mi("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=li(this.ctx),e)){const i=e[2]-e[0],s=e[3]-e[1];this.ctx.rect(e[0],e[1],i,s),this.current.updateRectMinMax(li(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||Rm("TODO: Support non-isolated groups."),t.knockout&&ve("Knockout groups not supported.");const i=li(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let s=$t.getAxialAlignedBoundingBox(t.bbox,li(e));const r=[0,0,e.canvas.width,e.canvas.height];s=$t.intersect(s,r)||[0,0,0,0];const a=Math.floor(s[0]),o=Math.floor(s[1]),l=Math.max(Math.ceil(s[2])-a,1),c=Math.max(Math.ceil(s[3])-o,1);this.current.startNewPathAndClipBox([0,0,l,c]);let d="groupAt"+this.groupLevel;t.smask&&(d+="_smask_"+this.smaskCounter++%2);const p=this.cachedCanvases.getCanvas(d,l,c),m=p.context;m.translate(-a,-o),m.transform(...i),t.smask?this.smaskStack.push({canvas:p.canvas,context:m,offsetX:a,offsetY:o,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(a,o),e.save()),id(e,m),this.ctx=m,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=li(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const r=$t.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],s);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(t,e,i,s,r){if(R(this,Ho,O0).call(this),Kp(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const a=e[2]-e[0],o=e[3]-e[1];if(r&&this.annotationCanvasMap){i=i.slice(),i[4]-=e[0],i[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=a,e[3]=o;const[l,c]=$t.singularValueDecompose2dScale(li(this.ctx)),{viewportScale:d}=this,p=Math.ceil(a*this.outputScaleX*d),m=Math.ceil(o*this.outputScaleY*d);this.annotationCanvas=this.canvasFactory.create(p,m);const{canvas:f,context:b}=this.annotationCanvas;this.annotationCanvasMap.set(t,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=b,this.ctx.save(),this.ctx.setTransform(l,0,0,-c,0,o*c),Kp(this.ctx)}else Kp(this.ctx),this.ctx.rect(e[0],e[1],a,o),this.ctx.clip(),this.endPath()}this.current=new f5(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),R(this,Ho,D0).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const i=this.ctx,s=this.processingType3;if(s&&(s.compiled===void 0&&(s.compiled=tx(t)),s.compiled)){s.compiled(i);return}const r=this._createMaskCanvas(t),a=r.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(a,r.offsetX,r.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i=0,s=0,r,a){if(!this.contentVisible)return;t=this.getObject(t.data,t);const o=this.ctx;o.save();const l=li(o);o.transform(e,i,s,r,0,0);const c=this._createMaskCanvas(t);o.setTransform(1,0,0,1,c.offsetX-l[4],c.offsetY-l[5]);for(let d=0,p=a.length;d<p;d+=2){const m=$t.transform(l,[e,i,s,r,a[d],a[d+1]]),[f,b]=$t.applyTransform([0,0],m);o.drawImage(c.canvas,f,b)}o.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,i=this.current.fillColor,s=this.current.patternFill;for(const r of t){const{data:a,width:o,height:l,transform:c}=r,d=this.cachedCanvases.getCanvas("maskCanvas",o,l),p=d.context;p.save();const m=this.getObject(a,r);g5(p,m),p.globalCompositeOperation="source-in",p.fillStyle=s?i.getPattern(p,this,na(e),Cn.FILL):i,p.fillRect(0,0,o,l),p.restore(),e.save(),e.transform(...c),e.scale(1,-1),Yp(e,d.canvas,0,0,o,l,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){ve("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,i,s){if(!this.contentVisible)return;const r=this.getObject(t);if(!r){ve("Dependent image isn't ready yet");return}const a=r.width,o=r.height,l=[];for(let c=0,d=s.length;c<d;c+=2)l.push({transform:[e,0,0,i,s[c],s[c+1]],x:0,y:0,w:a,h:o});this.paintInlineImageXObjectGroup(r,l)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:i,height:s}=t,r=this.cachedCanvases.getCanvas("inlineImage",i,s),a=r.context;return a.filter=this.current.transferMaps,a.drawImage(e,0,0),a.filter="none",r.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,i=t.height,s=this.ctx;if(this.save(),!yn){const{filter:o}=s;o!=="none"&&o!==""&&(s.filter="none")}s.scale(1/e,-1/i);let r;if(t.bitmap)r=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)r=t;else{const l=this.cachedCanvases.getCanvas("inlineImage",e,i).context;p5(l,t),r=this.applyTransferMapsToCanvas(l)}const a=this._scaleImage(r,na(s));s.imageSmoothingEnabled=m5(li(s),t.interpolate),Yp(s,a.img,0,0,a.paintWidth,a.paintHeight,0,-i,e,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const i=this.ctx;let s;if(t.bitmap)s=t.bitmap;else{const r=t.width,a=t.height,l=this.cachedCanvases.getCanvas("inlineImage",r,a).context;p5(l,t),s=this.applyTransferMapsToCanvas(l)}for(const r of e)i.save(),i.transform(...r.transform),i.scale(1,-1),Yp(i,s,r.x,r.y,r.w,r.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const i=this.ctx;this.pendingClip&&(e||(this.pendingClip===v5?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=li(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),s=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,s)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:i,c:s,d:r}=this.ctx.getTransform();let a,o;if(i===0&&s===0){const l=Math.abs(e),c=Math.abs(r);if(l===c)if(t===0)a=o=1/l;else{const d=l*t;a=o=d<1?1/d:1}else if(t===0)a=1/l,o=1/c;else{const d=l*t,p=c*t;a=d<1?1/d:1,o=p<1?1/p:1}}else{const l=Math.abs(e*r-i*s),c=Math.hypot(e,i),d=Math.hypot(s,r);if(t===0)a=d/l,o=c/l;else{const p=t*l;a=d>p?d/p:1,o=c>p?c/p:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:i}=this.current,[s,r]=this.getScaleForStroking();if(e.lineWidth=i||1,s===1&&r===1){e.stroke();return}const a=e.getLineDash();if(t&&e.save(),e.scale(s,r),a.length>0){const o=Math.max(s,r);e.setLineDash(a.map(l=>l/o)),e.lineDashOffset/=o}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};Ho=new WeakSet,O0=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},D0=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}};let mh=wv;for(const n in Vs)mh.prototype[n]!==void 0&&(mh.prototype[Vs[n]]=mh.prototype[n]);var nf,sf;class Na{static get workerPort(){return u(this,nf)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");k(this,nf,t)}static get workerSrc(){return u(this,sf)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");k(this,sf,t)}}nf=new WeakMap,sf=new WeakMap,O(Na,nf,null),O(Na,sf,"");const Jp={UNKNOWN:0,DATA:1,ERROR:2},Ti={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Yn(n){switch(n instanceof Error||typeof n=="object"&&n!==null||Mi('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Sc(n.message);case"MissingPDFException":return new _c(n.message);case"PasswordException":return new l0(n.message,n.code);case"UnexpectedResponseException":return new Fm(n.message,n.status);case"UnknownErrorException":return new c0(n.message,n.details);default:return new c0(n.message,n.toString())}}var zr,dy,fy,gg;class fd{constructor(t,e,i){O(this,zr);this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=s=>{const r=s.data;if(r.targetName!==this.sourceName)return;if(r.stream){R(this,zr,fy).call(this,r);return}if(r.callback){const o=r.callbackId,l=this.callbackCapabilities[o];if(!l)throw new Error(`Cannot resolve callback ${o}`);if(delete this.callbackCapabilities[o],r.callback===Jp.DATA)l.resolve(r.data);else if(r.callback===Jp.ERROR)l.reject(Yn(r.reason));else throw new Error("Unexpected callback case");return}const a=this.actionHandler[r.action];if(!a)throw new Error(`Unknown action from worker: ${r.action}`);if(r.callbackId){const o=this.sourceName,l=r.sourceName;new Promise(function(c){c(a(r.data))}).then(function(c){i.postMessage({sourceName:o,targetName:l,callback:Jp.DATA,callbackId:r.callbackId,data:c})},function(c){i.postMessage({sourceName:o,targetName:l,callback:Jp.ERROR,callbackId:r.callbackId,reason:Yn(c)})});return}if(r.streamId){R(this,zr,dy).call(this,r);return}a(r.data)},i.addEventListener("message",this._onComObjOnMessage)}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const s=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[s]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:s,data:e},i)}catch(a){r.reject(a)}return r.promise}sendWithStream(t,e,i,s){const r=this.streamId++,a=this.sourceName,o=this.targetName,l=this.comObj;return new ReadableStream({start:c=>{const d=Promise.withResolvers();return this.streamControllers[r]={controller:c,startCall:d,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:a,targetName:o,action:t,streamId:r,data:e,desiredSize:c.desiredSize},s),d.promise},pull:c=>{const d=Promise.withResolvers();return this.streamControllers[r].pullCall=d,l.postMessage({sourceName:a,targetName:o,stream:Ti.PULL,streamId:r,desiredSize:c.desiredSize}),d.promise},cancel:c=>{Hi(c instanceof Error,"cancel must have a valid reason");const d=Promise.withResolvers();return this.streamControllers[r].cancelCall=d,this.streamControllers[r].isClosed=!0,l.postMessage({sourceName:a,targetName:o,stream:Ti.CANCEL,streamId:r,reason:Yn(c)}),d.promise}},i)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}zr=new WeakSet,dy=function(t){const e=t.streamId,i=this.sourceName,s=t.sourceName,r=this.comObj,a=this,o=this.actionHandler[t.action],l={enqueue(c,d=1,p){if(this.isCancelled)return;const m=this.desiredSize;this.desiredSize-=d,m>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:i,targetName:s,stream:Ti.ENQUEUE,streamId:e,chunk:c},p)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:s,stream:Ti.CLOSE,streamId:e}),delete a.streamSinks[e])},error(c){Hi(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:s,stream:Ti.ERROR,streamId:e,reason:Yn(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[e]=l,new Promise(function(c){c(o(t.data,l))}).then(function(){r.postMessage({sourceName:i,targetName:s,stream:Ti.START_COMPLETE,streamId:e,success:!0})},function(c){r.postMessage({sourceName:i,targetName:s,stream:Ti.START_COMPLETE,streamId:e,reason:Yn(c)})})},fy=function(t){const e=t.streamId,i=this.sourceName,s=t.sourceName,r=this.comObj,a=this.streamControllers[e],o=this.streamSinks[e];switch(t.stream){case Ti.START_COMPLETE:t.success?a.startCall.resolve():a.startCall.reject(Yn(t.reason));break;case Ti.PULL_COMPLETE:t.success?a.pullCall.resolve():a.pullCall.reject(Yn(t.reason));break;case Ti.PULL:if(!o){r.postMessage({sourceName:i,targetName:s,stream:Ti.PULL_COMPLETE,streamId:e,success:!0});break}o.desiredSize<=0&&t.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=t.desiredSize,new Promise(function(l){var c;l((c=o.onPull)==null?void 0:c.call(o))}).then(function(){r.postMessage({sourceName:i,targetName:s,stream:Ti.PULL_COMPLETE,streamId:e,success:!0})},function(l){r.postMessage({sourceName:i,targetName:s,stream:Ti.PULL_COMPLETE,streamId:e,reason:Yn(l)})});break;case Ti.ENQUEUE:if(Hi(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(t.chunk);break;case Ti.CLOSE:if(Hi(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),R(this,zr,gg).call(this,a,e);break;case Ti.ERROR:Hi(a,"error should have stream controller"),a.controller.error(Yn(t.reason)),R(this,zr,gg).call(this,a,e);break;case Ti.CANCEL_COMPLETE:t.success?a.cancelCall.resolve():a.cancelCall.reject(Yn(t.reason)),R(this,zr,gg).call(this,a,e);break;case Ti.CANCEL:if(!o)break;new Promise(function(l){var c;l((c=o.onCancel)==null?void 0:c.call(o,Yn(t.reason)))}).then(function(){r.postMessage({sourceName:i,targetName:s,stream:Ti.CANCEL_COMPLETE,streamId:e,success:!0})},function(l){r.postMessage({sourceName:i,targetName:s,stream:Ti.CANCEL_COMPLETE,streamId:e,reason:Yn(l)})}),o.sinkCapability.reject(Yn(t.reason)),o.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},gg=async function(t,e){var i,s,r;await Promise.allSettled([(i=t.startCall)==null?void 0:i.promise,(s=t.pullCall)==null?void 0:s.promise,(r=t.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[e]};var Tl,rf;class sx{constructor({parsedData:t,rawData:e}){O(this,Tl);O(this,rf);k(this,Tl,t),k(this,rf,e)}getRaw(){return u(this,rf)}get(t){return u(this,Tl).get(t)??null}getAll(){return Y2(u(this,Tl))}has(t){return u(this,Tl).has(t)}}Tl=new WeakMap,rf=new WeakMap;const so=Symbol("INTERNAL");var af,of,lf,Mh;class rx{constructor(t,{name:e,intent:i,usage:s}){O(this,af,!1);O(this,of,!1);O(this,lf,!1);O(this,Mh,!0);k(this,af,!!(t&ns.DISPLAY)),k(this,of,!!(t&ns.PRINT)),this.name=e,this.intent=i,this.usage=s}get visible(){if(u(this,lf))return u(this,Mh);if(!u(this,Mh))return!1;const{print:t,view:e}=this.usage;return u(this,af)?(e==null?void 0:e.viewState)!=="OFF":u(this,of)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,i=!1){t!==so&&Mi("Internal method `_setVisible` called."),k(this,lf,i),k(this,Mh,e)}}af=new WeakMap,of=new WeakMap,lf=new WeakMap,Mh=new WeakMap;var bo,Ue,Rh,Fh,cf,B0;class ax{constructor(t,e=ns.DISPLAY){O(this,cf);O(this,bo,null);O(this,Ue,new Map);O(this,Rh,null);O(this,Fh,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,k(this,Fh,t.order);for(const i of t.groups)u(this,Ue).set(i.id,new rx(e,i));if(t.baseState==="OFF")for(const i of u(this,Ue).values())i._setVisible(so,!1);for(const i of t.on)u(this,Ue).get(i)._setVisible(so,!0);for(const i of t.off)u(this,Ue).get(i)._setVisible(so,!1);k(this,Rh,this.getHash())}}isVisible(t){if(u(this,Ue).size===0)return!0;if(!t)return Rm("Optional content group not defined."),!0;if(t.type==="OCG")return u(this,Ue).has(t.id)?u(this,Ue).get(t.id).visible:(ve(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return R(this,cf,B0).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!u(this,Ue).has(e))return ve(`Optional content group not found: ${e}`),!0;if(u(this,Ue).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!u(this,Ue).has(e))return ve(`Optional content group not found: ${e}`),!0;if(!u(this,Ue).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!u(this,Ue).has(e))return ve(`Optional content group not found: ${e}`),!0;if(!u(this,Ue).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!u(this,Ue).has(e))return ve(`Optional content group not found: ${e}`),!0;if(u(this,Ue).get(e).visible)return!1}return!0}return ve(`Unknown optional content policy ${t.policy}.`),!0}return ve(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0){const i=u(this,Ue).get(t);if(!i){ve(`Optional content group not found: ${t}`);return}i._setVisible(so,!!e,!0),k(this,bo,null)}setOCGState({state:t,preserveRB:e}){let i;for(const s of t){switch(s){case"ON":case"OFF":case"Toggle":i=s;continue}const r=u(this,Ue).get(s);if(r)switch(i){case"ON":r._setVisible(so,!0);break;case"OFF":r._setVisible(so,!1);break;case"Toggle":r._setVisible(so,!r.visible);break}}k(this,bo,null)}get hasInitialVisibility(){return u(this,Rh)===null||this.getHash()===u(this,Rh)}getOrder(){return u(this,Ue).size?u(this,Fh)?u(this,Fh).slice():[...u(this,Ue).keys()]:null}getGroups(){return u(this,Ue).size>0?Y2(u(this,Ue)):null}getGroup(t){return u(this,Ue).get(t)||null}getHash(){if(u(this,bo)!==null)return u(this,bo);const t=new ly;for(const[e,i]of u(this,Ue))t.update(`${e}:${i.visible}`);return k(this,bo,t.hexdigest())}}bo=new WeakMap,Ue=new WeakMap,Rh=new WeakMap,Fh=new WeakMap,cf=new WeakSet,B0=function(t){const e=t.length;if(e<2)return!0;const i=t[0];for(let s=1;s<e;s++){const r=t[s];let a;if(Array.isArray(r))a=R(this,cf,B0).call(this,r);else if(u(this,Ue).has(r))a=u(this,Ue).get(r).visible;else return ve(`Optional content group not found: ${r}`),!0;switch(i){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return i==="And"};class ox{constructor(t,{disableRange:e=!1,disableStream:i=!1}){Hi(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:r,progressiveDone:a,contentDispositionFilename:o}=t;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(r==null?void 0:r.length)>0){const l=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!e,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((l,c)=>{this._onReceiveData({begin:l,chunk:c})}),t.addProgressListener((l,c)=>{this._onProgress({loaded:l,total:c})}),t.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const i=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const s=this._rangeReaders.some(function(r){return r._begin!==t?!1:(r._enqueue(i),!0)});Hi(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,i,s,r;t.total===void 0?(i=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||i.call(e,{loaded:t.loaded}):(r=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||r.call(s,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){Hi(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new lx(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new cx(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeReaders.slice(0))i.cancel(t);this._pdfDataRangeTransport.abort()}}class lx{constructor(t,e,i=!1,s=null){this._stream=t,this._done=i||!1,this._filename=Q2(s)?s:null,this._queuedChunks=e||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class cx{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function hx(n){let t=!0,e=i("filename\\*","i").exec(n);if(e){e=e[1];let d=o(e);return d=unescape(d),d=l(d),d=c(d),r(d)}if(e=a(n),e){const d=c(e);return r(d)}if(e=i("filename","i").exec(n),e){e=e[1];let d=o(e);return d=c(d),r(d)}function i(d,p){return new RegExp("(?:^|;)\\s*"+d+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',p)}function s(d,p){if(d){if(!/^[\x00-\xFF]+$/.test(p))return p;try{const m=new TextDecoder(d,{fatal:!0}),f=Om(p);p=m.decode(f),t=!1}catch{}}return p}function r(d){return t&&/[\x80-\xff]/.test(d)&&(d=s("utf-8",d),t&&(d=s("iso-8859-1",d))),d}function a(d){const p=[];let m;const f=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(m=f.exec(d))!==null;){let[,w,S,A]=m;if(w=parseInt(w,10),w in p){if(w===0)break;continue}p[w]=[S,A]}const b=[];for(let w=0;w<p.length&&w in p;++w){let[S,A]=p[w];A=o(A),S&&(A=unescape(A),w===0&&(A=l(A))),b.push(A)}return b.join("")}function o(d){if(d.startsWith('"')){const p=d.slice(1).split('\\"');for(let m=0;m<p.length;++m){const f=p[m].indexOf('"');f!==-1&&(p[m]=p[m].slice(0,f),p.length=m+1),p[m]=p[m].replaceAll(/\\(.)/g,"$1")}d=p.join('"')}return d}function l(d){const p=d.indexOf("'");if(p===-1)return d;const m=d.slice(0,p),b=d.slice(p+1).replace(/^[^']*'/,"");return s(m,b)}function c(d){return!d.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(d)?d:d.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(p,m,f,b){if(f==="q"||f==="Q")return b=b.replaceAll("_"," "),b=b.replaceAll(/=([0-9a-fA-F]{2})/g,function(w,S){return String.fromCharCode(parseInt(S,16))}),s(m,b);try{b=atob(b)}catch{}return s(m,b)})}return""}function iv({getResponseHeader:n,isHttp:t,rangeChunkSize:e,disableRange:i}){const s={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(n("Content-Length"),10);return!Number.isInteger(r)||(s.suggestedLength=r,r<=2*e)||i||!t||n("Accept-Ranges")!=="bytes"||(n("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function nv(n){const t=n("Content-Disposition");if(t){let e=hx(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Q2(e))return e}return null}function jm(n,t){return n===404||n===0&&t.startsWith("file:")?new _c('Missing PDF "'+t+'".'):new Fm(`Unexpected server response (${n}) while retrieving PDF "${t}".`,n)}function py(n){return n===200||n===206}function gy(n,t,e){return{method:"GET",headers:n,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function my(n){const t=new Headers;for(const e in n){const i=n[e];i!==void 0&&t.append(e,i)}return t}function vy(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(ve(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class b5{constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Hi(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new ux(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new dx(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class ux{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._headers=my(this._stream.httpHeaders);const i=e.url;fetch(i,gy(this._headers,this._withCredentials,this._abortController)).then(s=>{if(!py(s.status))throw jm(s.status,i);this._reader=s.body.getReader(),this._headersCapability.resolve();const r=l=>s.headers.get(l),{allowRangeRequests:a,suggestedLength:o}=iv({getResponseHeader:r,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=o||this._contentLength,this._filename=nv(r),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Sc("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:vy(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class dx{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;const s=t.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController,this._headers=my(this._stream.httpHeaders),this._headers.append("Range",`bytes=${e}-${i-1}`);const r=s.url;fetch(r,gy(this._headers,this._withCredentials,this._abortController)).then(a=>{if(!py(a.status))throw jm(a.status,r);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:vy(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const z1=200,H1=206;function fx(n){const t=n.response;return typeof t!="string"?t:Om(t).buffer}class px{constructor(t,e={}){this.url=t,this.isHttp=/^https?:/i.test(t),this.httpHeaders=this.isHttp&&e.httpHeaders||Object.create(null),this.withCredentials=e.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(t,e,i){const s={begin:t,end:e};for(const r in i)s[r]=i[r];return this.request(s)}requestFull(t){return this.request(t)}request(t){const e=new XMLHttpRequest,i=this.currXhrId++,s=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const r in this.httpHeaders){const a=this.httpHeaders[r];a!==void 0&&e.setRequestHeader(r,a)}return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),s.expectedStatus=H1):s.expectedStatus=z1,e.responseType="arraybuffer",t.onError&&(e.onerror=function(r){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),s.onHeadersReceived=t.onHeadersReceived,s.onDone=t.onDone,s.onError=t.onError,s.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){var s;const i=this.pendingRequests[t];i&&((s=i.onProgress)==null||s.call(i,e))}onStateChange(t,e){var l,c,d;const i=this.pendingRequests[t];if(!i)return;const s=i.xhr;if(s.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),s.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],s.status===0&&this.isHttp){(l=i.onError)==null||l.call(i,s.status);return}const r=s.status||z1;if(!(r===z1&&i.expectedStatus===H1)&&r!==i.expectedStatus){(c=i.onError)==null||c.call(i,s.status);return}const o=fx(s);if(r===H1){const p=s.getResponseHeader("Content-Range"),m=/bytes (\d+)-(\d+)\/(\d+)/.exec(p);i.onDone({begin:parseInt(m[1],10),chunk:o})}else o?i.onDone({begin:0,chunk:o}):(d=i.onError)==null||d.call(i,s.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class gx{constructor(t){this._source=t,this._manager=new px(t.url,{httpHeaders:t.httpHeaders,withCredentials:t.withCredentials}),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return Hi(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new mx(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const i=new vx(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class mx{constructor(t,e){this._manager=t;const i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=t.requestFull(i),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t),i=a=>e.getResponseHeader(a),{allowRangeRequests:s,suggestedLength:r}=iv({getResponseHeader:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=r||this._contentLength,this._filename=nv(i),this._isRangeSupported&&this._manager.abortRequest(t),this._headersReceivedCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=jm(t,this._url),this._headersReceivedCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersReceivedCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class vx{constructor(t,e,i){this._manager=t;const s={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._requestId=t.requestRange(e,i,s),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError=jm(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const bx=/^[a-z][a-z0-9\-+.]+:/i;function yx(n){if(bx.test(n))return new URL(n);const t=Bo.get("url");return new URL(t.pathToFileURL(n))}function by(n,t,e){return n.protocol==="http:"?Bo.get("http").request(n,{headers:t},e):Bo.get("https").request(n,{headers:t},e)}class wx{constructor(t){this.source=t,this.url=yx(t.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Hi(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new Sx(this):new Ax(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=this.isFsUrl?new xx(this,t,e):new _x(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class yy{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Sc("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class wy{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const e=t.source;this._isStreamingSupported=!e.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class Ax extends yy{constructor(t){super(t);const e=i=>{if(i.statusCode===404){const o=new _c(`Missing PDF "${this._url}".`);this._storedError=o,this._headersCapability.reject(o);return}this._headersCapability.resolve(),this._setReadableStream(i);const s=o=>this._readableStream.headers[o.toLowerCase()],{allowRangeRequests:r,suggestedLength:a}=iv({getResponseHeader:s,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=r,this._contentLength=a||this._contentLength,this._filename=nv(s)};this._request=by(this._url,t.httpHeaders,e),this._request.on("error",i=>{this._storedError=i,this._headersCapability.reject(i)}),this._request.end()}}class _x extends wy{constructor(t,e,i){super(t),this._httpHeaders={};for(const r in t.httpHeaders){const a=t.httpHeaders[r];a!==void 0&&(this._httpHeaders[r]=a)}this._httpHeaders.Range=`bytes=${e}-${i-1}`;const s=r=>{if(r.statusCode===404){const a=new _c(`Missing PDF "${this._url}".`);this._storedError=a;return}this._setReadableStream(r)};this._request=by(this._url,this._httpHeaders,s),this._request.on("error",r=>{this._storedError=r}),this._request.end()}}class Sx extends yy{constructor(t){super(t);const e=Bo.get("fs");e.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(e.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=new _c(`Missing PDF "${this._url}".`)),this._storedError=i,this._headersCapability.reject(i)})}}class xx extends wy{constructor(t,e,i){super(t);const s=Bo.get("fs");this._setReadableStream(s.createReadStream(this._url,{start:e,end:i-1}))}}const Lx=1e5,Dn=30,Cx=.8;var cb,yo,jn,hf,uf,Il,ga,df,ff,Ml,Oh,Dh,wo,Bh,pf,jh,Rl,gf,mf,Fl,Ol,Ao,qh,Oa,Ay,_y,j0,Hr,mg,Sy,xy;const mn=class mn{constructor({textContentSource:t,container:e,viewport:i}){O(this,Oa);O(this,yo,Promise.withResolvers());O(this,jn,null);O(this,hf,!1);O(this,uf,!!((cb=globalThis.FontInspector)!=null&&cb.enabled));O(this,Il,null);O(this,ga,null);O(this,df,0);O(this,ff,0);O(this,Ml,null);O(this,Oh,null);O(this,Dh,0);O(this,wo,0);O(this,Bh,Object.create(null));O(this,pf,[]);O(this,jh,null);O(this,Rl,[]);O(this,gf,new WeakMap);O(this,mf,null);var l;if(t instanceof ReadableStream)k(this,jh,t);else if(typeof t=="object")k(this,jh,new ReadableStream({start(c){c.enqueue(t),c.close()}}));else throw new Error('No "textContentSource" parameter specified.');k(this,jn,k(this,Oh,e)),k(this,wo,i.scale*(globalThis.devicePixelRatio||1)),k(this,Dh,i.rotation),k(this,ga,{prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:r,pageX:a,pageY:o}=i.rawDims;k(this,mf,[1,0,0,-1,-a,o+r]),k(this,ff,s),k(this,df,r),R(l=mn,Hr,Sy).call(l),gc(e,i),u(this,yo).promise.catch(()=>{}).then(()=>{u(mn,qh).delete(this),k(this,ga,null),k(this,Bh,null)})}render(){const t=()=>{u(this,Ml).read().then(({value:e,done:i})=>{if(i){u(this,yo).resolve();return}u(this,Il)??k(this,Il,e.lang),Object.assign(u(this,Bh),e.styles),R(this,Oa,Ay).call(this,e.items),t()},u(this,yo).reject)};return k(this,Ml,u(this,jh).getReader()),u(mn,qh).add(this),t(),u(this,yo).promise}update({viewport:t,onBefore:e=null}){var r;const i=t.scale*(globalThis.devicePixelRatio||1),s=t.rotation;if(s!==u(this,Dh)&&(e==null||e(),k(this,Dh,s),gc(u(this,Oh),{rotation:s})),i!==u(this,wo)){e==null||e(),k(this,wo,i);const a={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:R(r=mn,Hr,mg).call(r,u(this,Il))};for(const o of u(this,Rl))a.properties=u(this,gf).get(o),a.div=o,R(this,Oa,j0).call(this,a)}}cancel(){var e;const t=new Sc("TextLayer task cancelled.");(e=u(this,Ml))==null||e.cancel(t).catch(()=>{}),k(this,Ml,null),u(this,yo).reject(t)}get textDivs(){return u(this,Rl)}get textContentItemsStr(){return u(this,pf)}static cleanup(){if(!(u(this,qh).size>0)){u(this,Fl).clear();for(const{canvas:t}of u(this,Ol).values())t.remove();u(this,Ol).clear()}}};yo=new WeakMap,jn=new WeakMap,hf=new WeakMap,uf=new WeakMap,Il=new WeakMap,ga=new WeakMap,df=new WeakMap,ff=new WeakMap,Ml=new WeakMap,Oh=new WeakMap,Dh=new WeakMap,wo=new WeakMap,Bh=new WeakMap,pf=new WeakMap,jh=new WeakMap,Rl=new WeakMap,gf=new WeakMap,mf=new WeakMap,Fl=new WeakMap,Ol=new WeakMap,Ao=new WeakMap,qh=new WeakMap,Oa=new WeakSet,Ay=function(t){var s,r;if(u(this,hf))return;(r=u(this,ga)).ctx??(r.ctx=R(s=mn,Hr,mg).call(s,u(this,Il)));const e=u(this,Rl),i=u(this,pf);for(const a of t){if(e.length>Lx){ve("Ignoring additional textDivs for performance reasons."),k(this,hf,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=u(this,jn);k(this,jn,document.createElement("span")),u(this,jn).classList.add("markedContent"),a.id!==null&&u(this,jn).setAttribute("id",`${a.id}`),o.append(u(this,jn))}else a.type==="endMarkedContent"&&k(this,jn,u(this,jn).parentNode);continue}i.push(a.str),R(this,Oa,_y).call(this,a)}},_y=function(t){var w;const e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};u(this,Rl).push(e);const s=$t.transform(u(this,mf),t.transform);let r=Math.atan2(s[1],s[0]);const a=u(this,Bh)[t.fontName];a.vertical&&(r+=Math.PI/2);const o=u(this,uf)&&a.fontSubstitution||a.fontFamily,l=Math.hypot(s[2],s[3]),c=l*R(w=mn,Hr,xy).call(w,o,u(this,Il));let d,p;r===0?(d=s[4],p=s[5]-c):(d=s[4]+c*Math.sin(r),p=s[5]-c*Math.cos(r));const m="calc(var(--scale-factor)*",f=e.style;u(this,jn)===u(this,Oh)?(f.left=`${(100*d/u(this,ff)).toFixed(2)}%`,f.top=`${(100*p/u(this,df)).toFixed(2)}%`):(f.left=`${m}${d.toFixed(2)}px)`,f.top=`${m}${p.toFixed(2)}px)`),f.fontSize=`${m}${(u(mn,Ao)*l).toFixed(2)}px)`,f.fontFamily=o,i.fontSize=l,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,u(this,uf)&&(e.dataset.fontName=a.fontSubstitutionLoadedName||t.fontName),r!==0&&(i.angle=r*(180/Math.PI));let b=!1;if(t.str.length>1)b=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const S=Math.abs(t.transform[0]),A=Math.abs(t.transform[3]);S!==A&&Math.max(S,A)/Math.min(S,A)>1.5&&(b=!0)}if(b&&(i.canvasWidth=a.vertical?t.height:t.width),u(this,gf).set(e,i),u(this,ga).div=e,u(this,ga).properties=i,R(this,Oa,j0).call(this,u(this,ga)),i.hasText&&u(this,jn).append(e),i.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),u(this,jn).append(S)}},j0=function(t){const{div:e,properties:i,ctx:s,prevFontSize:r,prevFontFamily:a}=t,{style:o}=e;let l="";if(u(mn,Ao)>1&&(l=`scale(${1/u(mn,Ao)})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:c}=o,{canvasWidth:d,fontSize:p}=i;(r!==p||a!==c)&&(s.font=`${p*u(this,wo)}px ${c}`,t.prevFontSize=p,t.prevFontFamily=c);const{width:m}=s.measureText(e.textContent);m>0&&(l=`scaleX(${d*u(this,wo)/m}) ${l}`)}i.angle!==0&&(l=`rotate(${i.angle}deg) ${l}`),l.length>0&&(o.transform=l)},Hr=new WeakSet,mg=function(t=null){let e=u(this,Ol).get(t||(t=""));if(!e){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),u(this,Ol).set(t,e)}return e},Sy=function(){if(u(this,Ao)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),k(this,Ao,t.getBoundingClientRect().height),t.remove()},xy=function(t,e){const i=u(this,Fl).get(t);if(i)return i;const s=R(this,Hr,mg).call(this,e),r=s.font;s.canvas.width=s.canvas.height=Dn,s.font=`${Dn}px ${t}`;const a=s.measureText("");let o=a.fontBoundingBoxAscent,l=Math.abs(a.fontBoundingBoxDescent);if(o){const p=o/(o+l);return u(this,Fl).set(t,p),s.canvas.width=s.canvas.height=0,s.font=r,p}s.strokeStyle="red",s.clearRect(0,0,Dn,Dn),s.strokeText("g",0,0);let c=s.getImageData(0,0,Dn,Dn).data;l=0;for(let p=c.length-1-3;p>=0;p-=4)if(c[p]>0){l=Math.ceil(p/4/Dn);break}s.clearRect(0,0,Dn,Dn),s.strokeText("A",0,Dn),c=s.getImageData(0,0,Dn,Dn).data,o=0;for(let p=0,m=c.length;p<m;p+=4)if(c[p]>0){o=Dn-Math.floor(p/4/Dn);break}s.canvas.width=s.canvas.height=0,s.font=r;const d=o?o/(o+l):Cx;return u(this,Fl).set(t,d),d},O(mn,Hr),O(mn,Fl,new Map),O(mn,Ol,new Map),O(mn,Ao,null),O(mn,qh,new Set);let kd=mn;class Nd{static textContent(t){const e=[],i={items:e,styles:Object.create(null)};function s(r){var l;if(!r)return;let a=null;const o=r.name;if(o==="#text")a=r.value;else if(Nd.shouldBuildText(o))(l=r==null?void 0:r.attributes)!=null&&l.textContent?a=r.attributes.textContent:r.value&&(a=r.value);else return;if(a!==null&&e.push({str:a}),!!r.children)for(const c of r.children)s(c)}return s(t),i}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const Ex=65536,Px=100,kx=5e3,Nx=yn?HS:kS,Tx=yn?VS:Fb,Ix=yn?zS:PS,Mx=yn?US:Ob;function Rx(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const t=new q0,{docId:e}=t,i=n.url?Fx(n.url):null,s=n.data?Ox(n.data):null,r=n.httpHeaders||null,a=n.withCredentials===!0,o=n.password??null,l=n.range instanceof Ly?n.range:null,c=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:Ex;let d=n.worker instanceof vh?n.worker:null;const p=n.verbosity,m=typeof n.docBaseUrl=="string"&&!Bm(n.docBaseUrl)?n.docBaseUrl:null,f=typeof n.cMapUrl=="string"?n.cMapUrl:null,b=n.cMapPacked!==!1,w=n.CMapReaderFactory||Tx,S=typeof n.standardFontDataUrl=="string"?n.standardFontDataUrl:null,A=n.StandardFontDataFactory||Mx,x=n.stopAtErrors!==!0,M=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,q=n.isEvalSupported!==!1,U=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!yn,X=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,G=typeof n.disableFontFace=="boolean"?n.disableFontFace:yn,B=n.fontExtraProperties===!0,Q=n.enableXfa===!0,ct=n.ownerDocument||globalThis.document,P=n.disableRange===!0,N=n.disableStream===!0,V=n.disableAutoFetch===!0,j=n.pdfBug===!0,J=n.enableHWA===!0,at=l?l.length:n.length??NaN,st=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!yn&&!G,tt=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:w===Fb&&A===Ob&&f&&S&&hd(f,document.baseURI)&&hd(S,document.baseURI),vt=n.canvasFactory||new Nx({ownerDocument:ct,enableHWA:J}),ht=n.filterFactory||new Ix({docId:e,ownerDocument:ct}),At=null;mS(p);const E={canvasFactory:vt,filterFactory:ht};if(tt||(E.cMapReaderFactory=new w({baseUrl:f,isCompressed:b}),E.standardFontDataFactory=new A({baseUrl:S})),!d){const K={verbosity:p,port:Na.workerPort};d=K.port?vh.fromPort(K):new vh(K),t._worker=d}const z={docId:e,apiVersion:"4.6.82",data:s,password:o,disableAutoFetch:V,rangeChunkSize:c,length:at,docBaseUrl:m,enableXfa:Q,evaluatorOptions:{maxImageSize:M,disableFontFace:G,ignoreErrors:x,isEvalSupported:q,isOffscreenCanvasSupported:U,canvasMaxAreaInBytes:X,fontExtraProperties:B,useSystemFonts:st,cMapUrl:tt?f:null,standardFontDataUrl:tt?S:null}},$={disableFontFace:G,fontExtraProperties:B,ownerDocument:ct,pdfBug:j,styleElement:At,loadingParams:{disableAutoFetch:V,enableXfa:Q}};return d.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const K=d.messageHandler.sendWithPromise("GetDocRequest",z,s?[s.buffer]:null);let Z;if(l)Z=new ox(l,{disableRange:P,disableStream:N});else if(!s){if(!i)throw new Error("getDocument - no `url` parameter provided.");Z=(ft=>yn?function(){return typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype}()&&hd(ft.url)?new b5(ft):new wx(ft):hd(ft.url)?new b5(ft):new gx(ft))({url:i,length:at,httpHeaders:r,withCredentials:a,rangeChunkSize:c,disableRange:P,disableStream:N})}return K.then(ot=>{if(t.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const ft=new fd(e,ot,d.port),mt=new qx(ft,t,Z,$,E);t._transport=mt,ft.send("Ready",null)})}).catch(t._capability.reject),t}function Fx(n){if(n instanceof URL)return n.href;try{return new URL(n,window.location).href}catch{if(yn&&typeof n=="string")return n}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Ox(n){if(yn&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return Om(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function y5(n){return typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0}var fm;const pm=class pm{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${On(pm,fm)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var t,e,i;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(s){throw(i=this._worker)!=null&&i.port&&delete this._worker._pendingDestroy,s}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};fm=new WeakMap,O(pm,fm,0);let q0=pm;class Ly{constructor(t,e,i=!1,s=null){this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const i of this._rangeListeners)i(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){Mi("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class Dx{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Le(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var _o,ma,Ss,oh,vg;class Bx{constructor(t,e,i,s=!1){O(this,Ss);O(this,_o,null);O(this,ma,!1);this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=s?new r5:null,this._pdfBug=s,this.commonObjs=i.commonObjs,this.objs=new Cy,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:s=0,dontFlip:r=!1}={}){return new ip({viewBox:this.view,scale:t,rotation:e,offsetX:i,offsetY:s,dontFlip:r})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Le(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:i="display",annotationMode:s=oo.ENABLE,transform:r=null,background:a=null,optionalContentConfigPromise:o=null,annotationCanvasMap:l=null,pageColors:c=null,printAnnotationStorage:d=null,isEditing:p=!1}){var q,U;(q=this._stats)==null||q.time("Overall");const m=this._transport.getRenderingIntent(i,s,d,p),{renderingIntent:f,cacheKey:b}=m;k(this,ma,!1),R(this,Ss,vg).call(this),o||(o=this._transport.getOptionalContentConfig(f));let w=this._intentStates.get(b);w||(w=Object.create(null),this._intentStates.set(b,w)),w.streamReaderCancelTimeout&&(clearTimeout(w.streamReaderCancelTimeout),w.streamReaderCancelTimeout=null);const S=!!(f&ns.PRINT);w.displayReadyCapability||(w.displayReadyCapability=Promise.withResolvers(),w.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(U=this._stats)==null||U.time("Page Request"),this._pumpOperatorList(m));const A=X=>{var G;w.renderTasks.delete(x),(this._maybeCleanupAfterRender||S)&&k(this,ma,!0),R(this,Ss,oh).call(this,!S),X?(x.capability.reject(X),this._abortOperatorList({intentState:w,reason:X instanceof Error?X:new Error(X)})):x.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(G=globalThis.Stats)!=null&&G.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},x=new H0({callback:A,params:{canvasContext:t,viewport:e,transform:r,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:w.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!S,pdfBug:this._pdfBug,pageColors:c});(w.renderTasks||(w.renderTasks=new Set)).add(x);const M=x.task;return Promise.all([w.displayReadyCapability.promise,o]).then(([X,G])=>{var B;if(this.destroyed){A();return}if((B=this._stats)==null||B.time("Rendering"),!(G.renderingIntent&f))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");x.initializeGraphics({transparency:X,optionalContentConfig:G}),x.operatorListChanged()}).catch(A),M}getOperatorList({intent:t="display",annotationMode:e=oo.ENABLE,printAnnotationStorage:i=null,isEditing:s=!1}={}){var c;function r(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(l))}const a=this._transport.getRenderingIntent(t,e,i,s,!0);let o=this._intentStates.get(a.cacheKey);o||(o=Object.create(null),this._intentStates.set(a.cacheKey,o));let l;return o.opListReadCapability||(l=Object.create(null),l.operatorListChanged=r,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(l),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(c=this._stats)==null||c.time("Page Request"),this._pumpOperatorList(a)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>Nd.textContent(i));const e=this.streamTextContent(t);return new Promise(function(i,s){function r(){a.read().then(function({value:l,done:c}){if(c){i(o);return}o.lang??(o.lang=l.lang),Object.assign(o.styles,l.styles),o.items.push(...l.items),r()},s)}const a=e.getReader(),o={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),k(this,ma,!1),R(this,Ss,vg).call(this),Promise.all(t)}cleanup(t=!1){k(this,ma,!0);const e=R(this,Ss,oh).call(this,!1);return t&&e&&this._stats&&(this._stats=new r5),e}_startRenderPage(t,e){var s,r;const i=this._intentStates.get(e);i&&((s=this._stats)==null||s.timeEnd("Page Request"),(r=i.displayReadyCapability)==null||r.resolve(t))}_renderPageChunk(t,e){for(let i=0,s=t.length;i<s;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const i of e.renderTasks)i.operatorListChanged();t.lastChunk&&R(this,Ss,oh).call(this,!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:i,modifiedIds:s}){const{map:r,transfer:a}=i,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:r,modifiedIds:s},a).getReader(),c=this._intentStates.get(e);c.streamReader=l;const d=()=>{l.read().then(({value:p,done:m})=>{if(m){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(p,c),d())},p=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(const m of c.renderTasks)m.operatorListChanged();R(this,Ss,oh).call(this,!0)}if(c.displayReadyCapability)c.displayReadyCapability.reject(p);else if(c.opListReadCapability)c.opListReadCapability.reject(p);else throw p}})};d()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(e instanceof J2){let s=Px;e.extraDelay>0&&e.extraDelay<1e3&&(s+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},s);return}}if(t.streamReader.cancel(new Sc(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[s,r]of this._intentStates)if(r===t){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}_o=new WeakMap,ma=new WeakMap,Ss=new WeakSet,oh=function(t=!1){if(R(this,Ss,vg).call(this),!u(this,ma)||this.destroyed)return!1;if(t)return k(this,_o,setTimeout(()=>{k(this,_o,null),R(this,Ss,oh).call(this,!1)},kx)),!1;for(const{renderTasks:e,operatorList:i}of this._intentStates.values())if(e.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),k(this,ma,!1),!0},vg=function(){u(this,_o)&&(clearTimeout(u(this,_o)),k(this,_o,null))};var Dl,gm;class jx{constructor(){O(this,Dl,new Set);O(this,gm,Promise.resolve())}postMessage(t,e){const i={data:structuredClone(t,e?{transfer:e}:null)};u(this,gm).then(()=>{for(const s of u(this,Dl))s.call(this,i)})}addEventListener(t,e){u(this,Dl).add(e)}removeEventListener(t,e){u(this,Dl).delete(e)}terminate(){u(this,Dl).clear()}}Dl=new WeakMap,gm=new WeakMap;var mm,Bl,jl,zh,bg,Hh,yg;const ii=class ii{constructor({name:t=null,port:e=null,verbosity:i=vS()}={}){O(this,zh);var s;if(this.name=t,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if((s=u(ii,jl))!=null&&s.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(u(ii,jl)||k(ii,jl,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return yn?Promise.all([Bo.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new fd("main","worker",t),this._messageHandler.on("ready",function(){}),R(this,zh,bg).call(this)}_initialize(){if(u(ii,Bl)||u(ii,Hh,yg)){this._setupFakeWorker();return}let{workerSrc:t}=ii;try{ii._isSameOrigin(window.location.href,t)||(t=ii._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),i=new fd("main","worker",e),s=()=>{r.abort(),i.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;e.addEventListener("error",()=>{this._webWorker||s()},{signal:r.signal}),i.on("test",o=>{if(r.abort(),this.destroyed||!o){s();return}this._messageHandler=i,this._port=e,this._webWorker=e,R(this,zh,bg).call(this)}),i.on("ready",o=>{if(r.abort(),this.destroyed){s();return}try{a()}catch{this._setupFakeWorker()}});const a=()=>{const o=new Uint8Array;i.send("test",o,[o.buffer])};a();return}catch{Rm("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){u(ii,Bl)||(ve("Setting up fake worker."),k(ii,Bl,!0)),ii._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new jx;this._port=e;const i=`fake${On(ii,mm)._++}`,s=new fd(i+"_worker",i,e);t.setup(s,e),this._messageHandler=new fd(i,i+"_worker",e),R(this,zh,bg).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(t=u(ii,jl))==null||t.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){var i;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const e=(i=u(this,jl))==null?void 0:i.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new ii(t)}static get workerSrc(){if(Na.workerSrc)return Na.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Le(this,"_setupFakeWorkerGlobal",(async()=>u(this,Hh,yg)?u(this,Hh,yg):(await import(this.workerSrc)).WorkerMessageHandler)())}};mm=new WeakMap,Bl=new WeakMap,jl=new WeakMap,zh=new WeakSet,bg=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Hh=new WeakSet,yg=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},O(ii,Hh),O(ii,mm,0),O(ii,Bl,!1),O(ii,jl),yn&&(k(ii,Bl,!0),Na.workerSrc||(Na.workerSrc="./pdf.worker.mjs")),ii._isSameOrigin=(t,e)=>{let i;try{if(i=new URL(t),!i.origin||i.origin==="null")return!1}catch{return!1}const s=new URL(e,i);return i.origin===s.origin},ii._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};let vh=ii;var va,Pr,Vh,Uh,kr,ql,pd;class qx{constructor(t,e,i,s,r){O(this,ql);O(this,va,new Map);O(this,Pr,new Map);O(this,Vh,new Map);O(this,Uh,new Map);O(this,kr,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new Cy,this.fontLoader=new jS({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Le(this,"annotationStorage",new tv)}getRenderingIntent(t,e=oo.ENABLE,i=null,s=!1,r=!1){let a=ns.DISPLAY,o=I0;switch(t){case"any":a=ns.ANY;break;case"display":break;case"print":a=ns.PRINT;break;default:ve(`getRenderingIntent - invalid intent: ${t}`)}const l=a&ns.PRINT&&i instanceof hy?i:this.annotationStorage;switch(e){case oo.DISABLE:a+=ns.ANNOTATIONS_DISABLE;break;case oo.ENABLE:break;case oo.ENABLE_FORMS:a+=ns.ANNOTATIONS_FORMS;break;case oo.ENABLE_STORAGE:a+=ns.ANNOTATIONS_STORAGE,o=l.serializable;break;default:ve(`getRenderingIntent - invalid annotationMode: ${e}`)}s&&(a+=ns.IS_EDITING),r&&(a+=ns.OPLIST);const{ids:c,hash:d}=l.modifiedIds,p=[a,o.hash,d];return{renderingIntent:a,cacheKey:p.join("_"),annotationStorageSerializable:o,modifiedIds:c}}destroy(){var i;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(i=u(this,kr))==null||i.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of u(this,Pr).values())t.push(s._destroy());u(this,Pr).clear(),u(this,Vh).clear(),u(this,Uh).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var s;this.commonObjs.clear(),this.fontLoader.clear(),u(this,va).clear(),this.filterFactory.destroy(),kd.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new Sc("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(i,s)=>{Hi(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},s.onPull=()=>{this._fullReader.read().then(function({value:r,done:a}){if(a){s.close();return}Hi(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{s.error(r)})},s.onCancel=r=>{this._fullReader.cancel(r),s.ready.catch(a=>{if(!this.destroyed)throw a})}}),t.on("ReaderHeadersReady",i=>{const s=Promise.withResolvers(),r=this._fullReader;return r.headersReady.then(()=>{var a;(!r.isStreamingSupported||!r.isRangeSupported)&&(this._lastProgress&&((a=e.onProgress)==null||a.call(e,this._lastProgress)),r.onProgress=o=>{var l;(l=e.onProgress)==null||l.call(e,{loaded:o.loaded,total:o.total})}),s.resolve({isStreamingSupported:r.isStreamingSupported,isRangeSupported:r.isRangeSupported,contentLength:r.contentLength})},s.reject),s.promise}),t.on("GetRangeReader",(i,s)=>{Hi(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(i.begin,i.end);if(!r){s.close();return}s.onPull=()=>{r.read().then(function({value:a,done:o}){if(o){s.close();return}Hi(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{s.error(a)})},s.onCancel=a=>{r.cancel(a),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,e._capability.resolve(new Dx(i,this))}),t.on("DocException",function(i){let s;switch(i.name){case"PasswordException":s=new l0(i.message,i.code);break;case"InvalidPDFException":s=new Eb(i.message);break;case"MissingPDFException":s=new _c(i.message);break;case"UnexpectedResponseException":s=new Fm(i.message,i.status);break;case"UnknownErrorException":s=new c0(i.message,i.details);break;default:Mi("DocException - expected a valid Error.")}e._capability.reject(s)}),t.on("PasswordRequest",i=>{if(k(this,kr,Promise.withResolvers()),e.onPassword){const s=r=>{r instanceof Error?u(this,kr).reject(r):u(this,kr).resolve({password:r})};try{e.onPassword(s,i.code)}catch(r){u(this,kr).reject(r)}}else u(this,kr).reject(new l0(i.message,i.code));return u(this,kr).promise}),t.on("DataLoaded",i=>{var s;(s=e.onProgress)==null||s.call(e,{loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),t.on("StartRenderPage",i=>{if(this.destroyed)return;u(this,Pr).get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),t.on("commonobj",([i,s,r])=>{var a;if(this.destroyed||this.commonObjs.has(i))return null;switch(s){case"Font":const{disableFontFace:o,fontExtraProperties:l,pdfBug:c}=this._params;if("error"in r){const f=r.error;ve(`Error during font loading: ${f}`),this.commonObjs.resolve(i,f);break}const d=c&&((a=globalThis.FontInspector)!=null&&a.enabled)?(f,b)=>globalThis.FontInspector.fontAdded(f,b):null,p=new qS(r,{disableFontFace:o,inspectFont:d});this.fontLoader.bind(p).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!l&&p.data&&(p.data=null),this.commonObjs.resolve(i,p)});break;case"CopyLocalImage":const{imageRef:m}=r;Hi(m,"The imageRef must be defined.");for(const f of u(this,Pr).values())for(const[,b]of f.objs)if((b==null?void 0:b.ref)===m)return b.dataLen?(this.commonObjs.resolve(i,structuredClone(b)),b.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,r);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),t.on("obj",([i,s,r,a])=>{var l;if(this.destroyed)return;const o=u(this,Pr).get(s);if(!o.objs.has(i)){if(o._intentStates.size===0){(l=a==null?void 0:a.bitmap)==null||l.close();return}switch(r){case"Image":o.objs.resolve(i,a),(a==null?void 0:a.dataLen)>dS&&(o._maybeCleanupAfterRender=!0);break;case"Pattern":o.objs.resolve(i,a);break;default:throw new Error(`Got unknown object type ${r}`)}}}),t.on("DocProgress",i=>{var s;this.destroyed||(s=e.onProgress)==null||s.call(e,{loaded:i.loaded,total:i.total})}),t.on("FetchBuiltInCMap",i=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(i):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),t.on("FetchStandardFontData",i=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(i):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var i;this.annotationStorage.size<=0&&ve("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((i=this._fullReader)==null?void 0:i.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,i=u(this,Vh).get(e);if(i)return i;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&u(this,Uh).set(r.refStr,t);const a=new Bx(e,r,this,this._params.pdfBug);return u(this,Pr).set(e,a),a});return u(this,Vh).set(e,s),s}getPageIndex(t){return y5(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return R(this,ql,pd).call(this,"GetFieldObjects")}hasJSActions(){return R(this,ql,pd).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return R(this,ql,pd).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return R(this,ql,pd).call(this,"GetOptionalContentConfig").then(e=>new ax(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=u(this,va).get(t);if(e)return e;const i=this.messageHandler.sendWithPromise(t,null).then(s=>{var r,a;return{info:s[0],metadata:s[1]?new sx(s[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null}});return u(this,va).set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of u(this,Pr).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),u(this,va).clear(),this.filterFactory.destroy(!0),kd.cleanup()}}cachedPageNumber(t){if(!y5(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return u(this,Uh).get(e)??null}}va=new WeakMap,Pr=new WeakMap,Vh=new WeakMap,Uh=new WeakMap,kr=new WeakMap,ql=new WeakSet,pd=function(t,e=null){const i=u(this,va).get(t);if(i)return i;const s=this.messageHandler.sendWithPromise(t,e);return u(this,va).set(t,s),s};const Qp=Symbol("INITIAL_DATA");var Ks,vf,z0;class Cy{constructor(){O(this,vf);O(this,Ks,Object.create(null))}get(t,e=null){if(e){const s=R(this,vf,z0).call(this,t);return s.promise.then(()=>e(s.data)),null}const i=u(this,Ks)[t];if(!i||i.data===Qp)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){const e=u(this,Ks)[t];return!!e&&e.data!==Qp}resolve(t,e=null){const i=R(this,vf,z0).call(this,t);i.data=e,i.resolve()}clear(){var t;for(const e in u(this,Ks)){const{data:i}=u(this,Ks)[e];(t=i==null?void 0:i.bitmap)==null||t.close()}k(this,Ks,Object.create(null))}*[Symbol.iterator](){for(const t in u(this,Ks)){const{data:e}=u(this,Ks)[t];e!==Qp&&(yield[t,e])}}}Ks=new WeakMap,vf=new WeakSet,z0=function(t){var e;return(e=u(this,Ks))[t]||(e[t]={...Promise.withResolvers(),data:Qp})};var So;class zx{constructor(t){O(this,So,null);k(this,So,t),this.onContinue=null}get promise(){return u(this,So).capability.promise}cancel(t=0){u(this,So).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=u(this,So).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=u(this,So);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}So=new WeakMap;var xo,zl;const cl=class cl{constructor({callback:t,params:e,objs:i,commonObjs:s,annotationCanvasMap:r,operatorList:a,pageIndex:o,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:d=!1,pdfBug:p=!1,pageColors:m=null}){O(this,xo,null);this.callback=t,this.params=e,this.objs=i,this.commonObjs=s,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=p,this.pageColors=m,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=d===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new zx(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var o,l;if(this.cancelled)return;if(this._canvas){if(u(cl,zl).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");u(cl,zl).add(this._canvas)}this._pdfBug&&((o=globalThis.StepperManager)!=null&&o.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:s,transform:r,background:a}=this.params;this.gfx=new mh(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:s,transparency:t,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,(l=this.graphicsReadyCallback)==null||l.call(this)}cancel(t=null,e=0){var i;this.running=!1,this.cancelled=!0,(i=this.gfx)==null||i.endDrawing(),u(this,xo)&&(window.cancelAnimationFrame(u(this,xo)),k(this,xo,null)),u(cl,zl).delete(this._canvas),this.callback(t||new J2(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?k(this,xo,window.requestAnimationFrame(()=>{k(this,xo,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),u(cl,zl).delete(this._canvas),this.callback())))}};xo=new WeakMap,zl=new WeakMap,O(cl,zl,new WeakSet);let H0=cl;const Hx="4.6.82",Vx="9b541910f";function w5(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function nd(n){return Math.max(0,Math.min(255,255*n))}class A5{static CMYK_G([t,e,i,s]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+s)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=nd(t),[t,t,t]}static G_HTML([t]){const e=w5(t);return`#${e}${e}${e}`}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_rgb(t){return t.map(nd)}static RGB_HTML(t){return`#${t.map(w5).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,i,s]){return["RGB",1-Math.min(1,t+s),1-Math.min(1,i+s),1-Math.min(1,e+s)]}static CMYK_rgb([t,e,i,s]){return[nd(1-Math.min(1,t+s)),nd(1-Math.min(1,i+s)),nd(1-Math.min(1,e+s))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,i]){const s=1-t,r=1-e,a=1-i,o=Math.min(s,r,a);return["CMYK",s,r,a,o]}}class Ey{static setupStorage(t,e,i,s,r){const a=s.getValue(e,{value:null});switch(i.name){case"textarea":if(a.value!==null&&(t.textContent=a.value),r==="print")break;t.addEventListener("input",o=>{s.setValue(e,{value:o.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(a.value===i.attributes.xfaOn?t.setAttribute("checked",!0):a.value===i.attributes.xfaOff&&t.removeAttribute("checked"),r==="print")break;t.addEventListener("change",o=>{s.setValue(e,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&t.setAttribute("value",a.value),r==="print")break;t.addEventListener("input",o=>{s.setValue(e,{value:o.target.value})})}break;case"select":if(a.value!==null){t.setAttribute("value",a.value);for(const o of i.children)o.attributes.value===a.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}t.addEventListener("input",o=>{const l=o.target.options,c=l.selectedIndex===-1?"":l[l.selectedIndex].value;s.setValue(e,{value:c})});break}}static setAttributes({html:t,element:e,storage:i=null,intent:s,linkService:r}){const{attributes:a}=e,o=t instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${s}`);for(const[l,c]of Object.entries(a))if(c!=null)switch(l){case"class":c.length&&t.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",c);break;case"style":Object.assign(t.style,c);break;case"textContent":t.textContent=c;break;default:(!o||l!=="href"&&l!=="newWindow")&&t.setAttribute(l,c)}o&&r.addLinkAttributes(t,a.href,a.newWindow),i&&a.dataId&&this.setupStorage(t,a.dataId,e,i)}static render(t){var p,m;const e=t.annotationStorage,i=t.linkService,s=t.xfaHtml,r=t.intent||"display",a=document.createElement(s.name);s.attributes&&this.setAttributes({html:a,element:s,intent:r,linkService:i});const o=r!=="richText",l=t.div;if(l.append(a),t.viewport){const f=`matrix(${t.viewport.transform.join(",")})`;l.style.transform=f}o&&l.setAttribute("class","xfaLayer xfaFont");const c=[];if(s.children.length===0){if(s.value){const f=document.createTextNode(s.value);a.append(f),o&&Nd.shouldBuildText(s.name)&&c.push(f)}return{textDivs:c}}const d=[[s,-1,a]];for(;d.length>0;){const[f,b,w]=d.at(-1);if(b+1===f.children.length){d.pop();continue}const S=f.children[++d.at(-1)[1]];if(S===null)continue;const{name:A}=S;if(A==="#text"){const M=document.createTextNode(S.value);c.push(M),w.append(M);continue}const x=(p=S==null?void 0:S.attributes)!=null&&p.xmlns?document.createElementNS(S.attributes.xmlns,A):document.createElement(A);if(w.append(x),S.attributes&&this.setAttributes({html:x,element:S,storage:e,intent:r,linkService:i}),((m=S.children)==null?void 0:m.length)>0)d.push([S,-1,x]);else if(S.value){const M=document.createTextNode(S.value);o&&Nd.shouldBuildText(A)&&c.push(M),x.append(M)}}for(const f of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))f.setAttribute("readOnly",!0);return{textDivs:c}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const sp=1e3,Ux=9,vc=new WeakSet;function Ia(n){return{width:n[2]-n[0],height:n[3]-n[1]}}class Wx{static create(t){switch(t.data.annotationType){case Oi.LINK:return new Py(t);case Oi.TEXT:return new Gx(t);case Oi.WIDGET:switch(t.data.fieldType){case"Tx":return new $x(t);case"Btn":return t.data.radioButton?new Ty(t):t.data.checkBox?new Yx(t):new Kx(t);case"Ch":return new Jx(t);case"Sig":return new Xx(t)}return new xc(t);case Oi.POPUP:return new U0(t);case Oi.FREETEXT:return new Oy(t);case Oi.LINE:return new Zx(t);case Oi.SQUARE:return new t3(t);case Oi.CIRCLE:return new e3(t);case Oi.POLYLINE:return new Dy(t);case Oi.CARET:return new n3(t);case Oi.INK:return new By(t);case Oi.POLYGON:return new i3(t);case Oi.HIGHLIGHT:return new s3(t);case Oi.UNDERLINE:return new r3(t);case Oi.SQUIGGLY:return new a3(t);case Oi.STRIKEOUT:return new o3(t);case Oi.STAMP:return new jy(t);case Oi.FILEATTACHMENT:return new l3(t);default:return new Li(t)}}}var Hl,Wh,Gh,bf,V0;const Av=class Av{constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:s=!1}={}){O(this,bf);O(this,Hl,null);O(this,Wh,!1);O(this,Gh,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(i)),s&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:i}){return!!(t!=null&&t.str||e!=null&&e.str||i!=null&&i.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Av._hasPopupData(this.data)}updateEdited(t){var i;if(!this.container)return;u(this,Hl)||k(this,Hl,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&R(this,bf,V0).call(this,e),(i=u(this,Gh))==null||i.popup.updateEdited(t)}resetEdited(){var t;u(this,Hl)&&(R(this,bf,V0).call(this,u(this,Hl).rect),(t=u(this,Gh))==null||t.popup.resetEdited(),k(this,Hl,null))}_createContainer(t){const{data:e,parent:{page:i,viewport:s}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),this instanceof xc||(r.tabIndex=sp);const{style:a}=r;if(a.zIndex=this.parent.zIndex++,e.popupRef&&r.setAttribute("aria-haspopup","dialog"),e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof U0){const{rotation:w}=e;return!e.hasOwnCanvas&&w!==0&&this.setRotation(w,r),r}const{width:o,height:l}=Ia(e.rect);if(!t&&e.borderStyle.width>0){a.borderWidth=`${e.borderStyle.width}px`;const w=e.borderStyle.horizontalCornerRadius,S=e.borderStyle.verticalCornerRadius;if(w>0||S>0){const x=`calc(${w}px * var(--scale-factor)) / calc(${S}px * var(--scale-factor))`;a.borderRadius=x}else if(this instanceof Ty){const x=`calc(${o}px * var(--scale-factor)) / calc(${l}px * var(--scale-factor))`;a.borderRadius=x}switch(e.borderStyle.style){case ed.SOLID:a.borderStyle="solid";break;case ed.DASHED:a.borderStyle="dashed";break;case ed.BEVELED:ve("Unimplemented border style: beveled");break;case ed.INSET:ve("Unimplemented border style: inset");break;case ed.UNDERLINE:a.borderBottomStyle="solid";break}const A=e.borderColor||null;A?(k(this,Wh,!0),a.borderColor=$t.makeHexColor(A[0]|0,A[1]|0,A[2]|0)):a.borderWidth=0}const c=$t.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:d,pageHeight:p,pageX:m,pageY:f}=s.rawDims;a.left=`${100*(c[0]-m)/d}%`,a.top=`${100*(c[1]-f)/p}%`;const{rotation:b}=e;return e.hasOwnCanvas||b===0?(a.width=`${100*o/d}%`,a.height=`${100*l/p}%`):this.setRotation(b,r),r}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:s}=this.parent.viewport.rawDims,{width:r,height:a}=Ia(this.data.rect);let o,l;t%180===0?(o=100*r/i,l=100*a/s):(o=100*a/i,l=100*r/s),e.style.width=`${o}%`,e.style.height=`${l}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,i,s)=>{const r=s.detail[e],a=r[0],o=r.slice(1);s.target.style[i]=A5[`${a}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[i]:A5[`${a}_rgb`](o)})};return Le(this,"_commonActions",{display:e=>{const{display:i}=e.detail,s=i%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:i===1||i===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:i}=e.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const i=e.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(t,e){const i=this._commonActions;for(const s of Object.keys(e.detail)){const r=t[s]||i[s];r==null||r(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[s,r]of Object.entries(e)){const a=i[s];if(a){const o={detail:{[s]:r},target:t};a(o),delete e[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,i,s,r]=this.data.rect.map(w=>Math.fround(w));if(t.length===8){const[w,S,A,x]=t.subarray(2,6);if(s===w&&r===S&&e===A&&i===x)return}const{style:a}=this.container;let o;if(u(this,Wh)){const{borderColor:w,borderWidth:S}=a;a.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${w}" stroke-width="${S}">`],this.container.classList.add("hasBorder")}const l=s-e,c=r-i,{svgFactory:d}=this,p=d.createElement("svg");p.classList.add("quadrilateralsContainer"),p.setAttribute("width",0),p.setAttribute("height",0);const m=d.createElement("defs");p.append(m);const f=d.createElement("clipPath"),b=`clippath_${this.data.id}`;f.setAttribute("id",b),f.setAttribute("clipPathUnits","objectBoundingBox"),m.append(f);for(let w=2,S=t.length;w<S;w+=8){const A=t[w],x=t[w+1],M=t[w+2],q=t[w+3],U=d.createElement("rect"),X=(M-e)/l,G=(r-x)/c,B=(A-M)/l,Q=(x-q)/c;U.setAttribute("x",X),U.setAttribute("y",G),U.setAttribute("width",B),U.setAttribute("height",Q),f.append(U),o==null||o.push(`<rect vector-effect="non-scaling-stroke" x="${X}" y="${G}" width="${B}" height="${Q}"/>`)}u(this,Wh)&&(o.push("</g></svg>')"),a.backgroundImage=o.join("")),this.container.append(p),this.container.style.clipPath=`url(#${b})`}_createPopup(){const{container:t,data:e}=this;t.setAttribute("aria-haspopup","dialog");const i=k(this,Gh,new U0({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(i.render())}render(){Mi("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const i=[];if(this._fieldObjects){const s=this._fieldObjects[t];if(s)for(const{page:r,id:a,exportValues:o}of s){if(r===-1||a===e)continue;const l=typeof o=="string"?o:null,c=document.querySelector(`[data-element-id="${a}"]`);if(c&&!vc.has(c)){ve(`_getElementsByName - element not allowed: ${a}`);continue}i.push({id:a,exportValue:l,domElement:c})}return i}for(const s of document.getElementsByName(t)){const{exportValue:r}=s,a=s.getAttribute("data-element-id");a!==e&&vc.has(s)&&i.push({id:a,exportValue:r,domElement:s})}return i}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var i;(i=this.linkService.eventBus)==null||i.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}};Hl=new WeakMap,Wh=new WeakMap,Gh=new WeakMap,bf=new WeakSet,V0=function(t){const{container:{style:e},data:{rect:i,rotation:s},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:a,pageX:o,pageY:l}}}}=this;i==null||i.splice(0,4,...t);const{width:c,height:d}=Ia(t);e.left=`${100*(t[0]-o)/r}%`,e.top=`${100*(a-t[3]+l)/a}%`,s===0?(e.width=`${100*c/r}%`,e.height=`${100*d/a}%`):this.setRotation(s)};let Li=Av;var ss,nl,ky,Ny;class Py extends Li{constructor(e,i=null){super(e,{isRenderable:!0,ignoreBorder:!!(i!=null&&i.ignoreBorder),createQuadrilaterals:!0});O(this,ss);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:i}=this,s=document.createElement("a");s.setAttribute("data-element-id",e.id);let r=!1;return e.url?(i.addLinkAttributes(s,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(s,e.action),r=!0):e.attachment?(R(this,ss,ky).call(this,s,e.attachment,e.attachmentDest),r=!0):e.setOCGState?(R(this,ss,Ny).call(this,s,e.setOCGState),r=!0):e.dest?(this._bindLink(s,e.dest),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,e),r=!0),e.resetForm?(this._bindResetFormAction(s,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(s,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(s),this.container}_bindLink(e,i){e.href=this.linkService.getDestinationHash(i),e.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&R(this,ss,nl).call(this)}_bindNamedAction(e,i){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(i),!1),R(this,ss,nl).call(this)}_bindJSAction(e,i){e.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(i.actions)){const a=s.get(r);a&&(e[a]=()=>{var o;return(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:r}}),!1})}e.onclick||(e.onclick=()=>!1),R(this,ss,nl).call(this)}_bindResetFormAction(e,i){const s=e.onclick;if(s||(e.href=this.linkService.getAnchorUrl("")),R(this,ss,nl).call(this),!this._fieldObjects){ve('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(e.onclick=()=>!1);return}e.onclick=()=>{var p;s==null||s();const{fields:r,refs:a,include:o}=i,l=[];if(r.length!==0||a.length!==0){const m=new Set(a);for(const f of r){const b=this._fieldObjects[f]||[];for(const{id:w}of b)m.add(w)}for(const f of Object.values(this._fieldObjects))for(const b of f)m.has(b.id)===o&&l.push(b)}else for(const m of Object.values(this._fieldObjects))l.push(...m);const c=this.annotationStorage,d=[];for(const m of l){const{id:f}=m;switch(d.push(f),m.type){case"text":{const w=m.defaultValue||"";c.setValue(f,{value:w});break}case"checkbox":case"radiobutton":{const w=m.defaultValue===m.exportValues;c.setValue(f,{value:w});break}case"combobox":case"listbox":{const w=m.defaultValue||"";c.setValue(f,{value:w});break}default:continue}const b=document.querySelector(`[data-element-id="${f}"]`);if(b){if(!vc.has(b)){ve(`_bindResetFormAction - element not allowed: ${f}`);continue}}else continue;b.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}})),!1}}}ss=new WeakSet,nl=function(){this.container.setAttribute("data-internal-link","")},ky=function(e,i,s=null){e.href=this.linkService.getAnchorUrl(""),i.description&&(e.title=i.description),e.onclick=()=>{var r;return(r=this.downloadManager)==null||r.openOrDownloadData(i.content,i.filename,s),!1},R(this,ss,nl).call(this)},Ny=function(e,i){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(i),!1),R(this,ss,nl).call(this)};class Gx extends Li{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class xc extends Li{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return zn.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,s,r){i.includes("mouse")?t.addEventListener(i,a=>{var o;(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):t.addEventListener(i,a=>{var o;if(i==="blur"){if(!e.focused||!a.relatedTarget)return;e.focused=!1}else if(i==="focus"){if(e.focused)return;e.focused=!0}r&&((o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(a)}}))})}_setEventListeners(t,e,i,s){var r,a,o;for(const[l,c]of i)(c==="Action"||(r=this.data.actions)!=null&&r[c])&&((c==="Focus"||c==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,l,c,s),c==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(t,e,"blur","Blur",null):c==="Blur"&&!((o=this.data.actions)!=null&&o.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":$t.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||Ux,r=t.style;let a;const o=2,l=c=>Math.round(10*c)/10;if(this.data.multiLine){const c=Math.abs(this.data.rect[3]-this.data.rect[1]-o),d=Math.round(c/(D1*s))||1,p=c/d;a=Math.min(s,l(p/D1))}else{const c=Math.abs(this.data.rect[3]-this.data.rect[1]-o);a=Math.min(s,l(c/D1))}r.fontSize=`calc(${a}px * var(--scale-factor))`,r.color=$t.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class $x extends xc{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,i,s){const r=this.annotationStorage;for(const a of this._getElementsByName(t.name,t.id))a.domElement&&(a.domElement[e]=i),r.setValue(a.id,{[s]:i})}render(){var s,r;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const a=t.getValue(e,{value:this.data.fieldValue});let o=a.value||"";const l=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let c=a.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const d={userValue:o,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=c??o,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",c??o),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),vc.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=sp,this._setRequired(i,this.data.required),l&&(i.maxLength=l),i.addEventListener("input",m=>{t.setValue(e,{value:m.target.value}),this.setPropertyOnSiblings(i,"value",m.target.value,"value"),d.formattedValue=null}),i.addEventListener("resetform",m=>{const f=this.data.defaultFieldValue??"";i.value=d.userValue=f,d.formattedValue=null});let p=m=>{const{formattedValue:f}=d;f!=null&&(m.target.value=f),m.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",f=>{var w;if(d.focused)return;const{target:b}=f;d.userValue&&(b.value=d.userValue),d.lastCommittedValue=b.value,d.commitKey=1,(w=this.data.actions)!=null&&w.Focus||(d.focused=!0)}),i.addEventListener("updatefromsandbox",f=>{this.showElementAndHideCanvas(f.target);const b={value(w){d.userValue=w.detail.value??"",t.setValue(e,{value:d.userValue.toString()}),w.target.value=d.userValue},formattedValue(w){const{formattedValue:S}=w.detail;d.formattedValue=S,S!=null&&w.target!==document.activeElement&&(w.target.value=S),t.setValue(e,{formattedValue:S})},selRange(w){w.target.setSelectionRange(...w.detail.selRange)},charLimit:w=>{var M;const{charLimit:S}=w.detail,{target:A}=w;if(S===0){A.removeAttribute("maxLength");return}A.setAttribute("maxLength",S);let x=d.userValue;!x||x.length<=S||(x=x.slice(0,S),A.value=d.userValue=x,t.setValue(e,{value:x}),(M=this.linkService.eventBus)==null||M.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:x,willCommit:!0,commitKey:1,selStart:A.selectionStart,selEnd:A.selectionEnd}}))}};this._dispatchEventFromSandbox(b,f)}),i.addEventListener("keydown",f=>{var S;d.commitKey=1;let b=-1;if(f.key==="Escape"?b=0:f.key==="Enter"&&!this.data.multiLine?b=2:f.key==="Tab"&&(d.commitKey=3),b===-1)return;const{value:w}=f.target;d.lastCommittedValue!==w&&(d.lastCommittedValue=w,d.userValue=w,(S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:w,willCommit:!0,commitKey:b,selStart:f.target.selectionStart,selEnd:f.target.selectionEnd}}))});const m=p;p=null,i.addEventListener("blur",f=>{var w,S;if(!d.focused||!f.relatedTarget)return;(w=this.data.actions)!=null&&w.Blur||(d.focused=!1);const{value:b}=f.target;d.userValue=b,d.lastCommittedValue!==b&&((S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:b,willCommit:!0,commitKey:d.commitKey,selStart:f.target.selectionStart,selEnd:f.target.selectionEnd}})),m(f)}),(r=this.data.actions)!=null&&r.Keystroke&&i.addEventListener("beforeinput",f=>{var U;d.lastCommittedValue=null;const{data:b,target:w}=f,{value:S,selectionStart:A,selectionEnd:x}=w;let M=A,q=x;switch(f.inputType){case"deleteWordBackward":{const X=S.substring(0,A).match(/\w*[^\w]*$/);X&&(M-=X[0].length);break}case"deleteWordForward":{const X=S.substring(A).match(/^[^\w]*\w*/);X&&(q+=X[0].length);break}case"deleteContentBackward":A===x&&(M-=1);break;case"deleteContentForward":A===x&&(q+=1);break}f.preventDefault(),(U=this.linkService.eventBus)==null||U.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:S,change:b||"",willCommit:!1,selStart:M,selEnd:q}})}),this._setEventListeners(i,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],f=>f.target.value)}if(p&&i.addEventListener("blur",p),this.data.comb){const f=(this.data.rect[2]-this.data.rect[0])/l;i.classList.add("comb"),i.style.letterSpacing=`calc(${f}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class Xx extends xc{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class Yx extends xc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let s=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",t.setValue(i,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return vc.add(r),r.setAttribute("data-element-id",i),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,s&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=sp,r.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const c of this._getElementsByName(o,i)){const d=l&&c.exportValue===e.exportValue;c.domElement&&(c.domElement.checked=d),t.setValue(c.id,{value:d})}t.setValue(i,{value:l})}),r.addEventListener("resetform",a=>{const o=e.defaultFieldValue||"Off";a.target.checked=o===e.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",a=>{const o={value(l){l.target.checked=l.detail.value!=="Off",t.setValue(i,{value:l.target.checked})}};this._dispatchEventFromSandbox(o,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Ty extends xc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,i=e.id;let s=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if(typeof s=="string"&&(s=s!==e.buttonValue,t.setValue(i,{value:s})),s)for(const a of this._getElementsByName(e.fieldName,i))t.setValue(a.id,{value:!1});const r=document.createElement("input");if(vc.add(r),r.setAttribute("data-element-id",i),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,s&&r.setAttribute("checked",!0),r.tabIndex=sp,r.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const c of this._getElementsByName(o,i))t.setValue(c.id,{value:!1});t.setValue(i,{value:l})}),r.addEventListener("resetform",a=>{const o=e.defaultFieldValue;a.target.checked=o!=null&&o===e.buttonValue}),this.enableScripting&&this.hasJSActions){const a=e.buttonValue;r.addEventListener("updatefromsandbox",o=>{const l={value:c=>{const d=a===c.detail.value;for(const p of this._getElementsByName(c.target.name)){const m=d&&p.id===i;p.domElement&&(p.domElement.checked=m),t.setValue(p.id,{value:m})}}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Kx extends Py{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),t}}class Jx extends xc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),s=document.createElement("select");vc.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=sp;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",d=>{const p=this.data.defaultFieldValue;for(const m of s.options)m.selected=m.value===p});for(const d of this.data.options){const p=document.createElement("option");p.textContent=d.displayValue,p.value=d.exportValue,i.value.includes(d.exportValue)&&(p.setAttribute("selected",!0),r=!1),s.append(p)}let a=null;if(r){const d=document.createElement("option");d.value=" ",d.setAttribute("hidden",!0),d.setAttribute("selected",!0),s.prepend(d),a=()=>{d.remove(),s.removeEventListener("input",a),a=null},s.addEventListener("input",a)}const o=d=>{const p=d?"value":"textContent",{options:m,multiple:f}=s;return f?Array.prototype.filter.call(m,b=>b.selected).map(b=>b[p]):m.selectedIndex===-1?null:m[m.selectedIndex][p]};let l=o(!1);const c=d=>{const p=d.target.options;return Array.prototype.map.call(p,m=>({displayValue:m.textContent,exportValue:m.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",d=>{const p={value(m){a==null||a();const f=m.detail.value,b=new Set(Array.isArray(f)?f:[f]);for(const w of s.options)w.selected=b.has(w.value);t.setValue(e,{value:o(!0)}),l=o(!1)},multipleSelection(m){s.multiple=!0},remove(m){const f=s.options,b=m.detail.remove;f[b].selected=!1,s.remove(b),f.length>0&&Array.prototype.findIndex.call(f,S=>S.selected)===-1&&(f[0].selected=!0),t.setValue(e,{value:o(!0),items:c(m)}),l=o(!1)},clear(m){for(;s.length!==0;)s.remove(0);t.setValue(e,{value:null,items:[]}),l=o(!1)},insert(m){const{index:f,displayValue:b,exportValue:w}=m.detail.insert,S=s.children[f],A=document.createElement("option");A.textContent=b,A.value=w,S?S.before(A):s.append(A),t.setValue(e,{value:o(!0),items:c(m)}),l=o(!1)},items(m){const{items:f}=m.detail;for(;s.length!==0;)s.remove(0);for(const b of f){const{displayValue:w,exportValue:S}=b,A=document.createElement("option");A.textContent=w,A.value=S,s.append(A)}s.options.length>0&&(s.options[0].selected=!0),t.setValue(e,{value:o(!0),items:c(m)}),l=o(!1)},indices(m){const f=new Set(m.detail.indices);for(const b of m.target.options)b.selected=f.has(b.index);t.setValue(e,{value:o(!0)}),l=o(!1)},editable(m){m.target.disabled=!m.detail.editable}};this._dispatchEventFromSandbox(p,d)}),s.addEventListener("input",d=>{var f;const p=o(!0),m=o(!1);t.setValue(e,{value:p}),d.preventDefault(),(f=this.linkService.eventBus)==null||f.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:l,change:m,changeEx:p,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],d=>d.target.value)):s.addEventListener("input",function(d){t.setValue(e,{value:o(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class U0 extends Li{constructor(t){const{data:e,elements:i}=t;super(t,{isRenderable:Li._hasPopupData(e)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new Qx({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const i of this.elements)i.popup=t,e.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(i=>`${kb}${i}`).join(",")),this.container}}var $h,vm,bm,Xh,Vl,fi,ba,Yh,yf,wf,Kh,ya,Js,wa,Af,Aa,_f,Ul,Wl,We,wg,W0,Iy,My,Ry,Fy,Ag,_g,G0;class Qx{constructor({container:t,color:e,elements:i,titleObj:s,modificationDate:r,contentsObj:a,richText:o,parent:l,rect:c,parentRect:d,open:p}){O(this,We);O(this,$h,R(this,We,Ry).bind(this));O(this,vm,R(this,We,G0).bind(this));O(this,bm,R(this,We,_g).bind(this));O(this,Xh,R(this,We,Ag).bind(this));O(this,Vl,null);O(this,fi,null);O(this,ba,null);O(this,Yh,null);O(this,yf,null);O(this,wf,null);O(this,Kh,null);O(this,ya,!1);O(this,Js,null);O(this,wa,null);O(this,Af,null);O(this,Aa,null);O(this,_f,null);O(this,Ul,null);O(this,Wl,!1);var m;k(this,fi,t),k(this,_f,s),k(this,ba,a),k(this,Aa,o),k(this,wf,l),k(this,Vl,e),k(this,Af,c),k(this,Kh,d),k(this,yf,i),k(this,Yh,Db.toDateObject(r)),this.trigger=i.flatMap(f=>f.getElementsToTriggerPopup());for(const f of this.trigger)f.addEventListener("click",u(this,Xh)),f.addEventListener("mouseenter",u(this,bm)),f.addEventListener("mouseleave",u(this,vm)),f.classList.add("popupTriggerArea");for(const f of i)(m=f.container)==null||m.addEventListener("keydown",u(this,$h));u(this,fi).hidden=!0,p&&R(this,We,Ag).call(this)}render(){if(u(this,Js))return;const t=k(this,Js,document.createElement("div"));if(t.className="popup",u(this,Vl)){const r=t.style.outlineColor=$t.makeHexColor(...u(this,Vl));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`:t.style.backgroundColor=$t.makeHexColor(...u(this,Vl).map(o=>Math.floor(.7*(255-o)+o)))}const e=document.createElement("span");e.className="header";const i=document.createElement("h1");if(e.append(i),{dir:i.dir,str:i.textContent}=u(this,_f),t.append(e),u(this,Yh)){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:u(this,Yh).valueOf()})),e.append(r)}const s=u(this,We,wg);if(s)Ey.render({xfaHtml:s,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(u(this,ba));t.append(r)}u(this,fi).append(t)}_formatContents({str:t,dir:e}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=e;const s=t.split(/(?:\r\n?|\n)/);for(let r=0,a=s.length;r<a;++r){const o=s[r];i.append(document.createTextNode(o)),r<a-1&&i.append(document.createElement("br"))}return i}updateEdited({rect:t,popupContent:e}){var i;u(this,Ul)||k(this,Ul,{contentsObj:u(this,ba),richText:u(this,Aa)}),t&&k(this,wa,null),e&&(k(this,Aa,R(this,We,My).call(this,e)),k(this,ba,null)),(i=u(this,Js))==null||i.remove(),k(this,Js,null)}resetEdited(){var t;u(this,Ul)&&({contentsObj:On(this,ba)._,richText:On(this,Aa)._}=u(this,Ul),k(this,Ul,null),(t=u(this,Js))==null||t.remove(),k(this,Js,null),k(this,wa,null))}forceHide(){k(this,Wl,this.isVisible),u(this,Wl)&&(u(this,fi).hidden=!0)}maybeShow(){u(this,Wl)&&(u(this,Js)||R(this,We,_g).call(this),k(this,Wl,!1),u(this,fi).hidden=!1)}get isVisible(){return u(this,fi).hidden===!1}}$h=new WeakMap,vm=new WeakMap,bm=new WeakMap,Xh=new WeakMap,Vl=new WeakMap,fi=new WeakMap,ba=new WeakMap,Yh=new WeakMap,yf=new WeakMap,wf=new WeakMap,Kh=new WeakMap,ya=new WeakMap,Js=new WeakMap,wa=new WeakMap,Af=new WeakMap,Aa=new WeakMap,_f=new WeakMap,Ul=new WeakMap,Wl=new WeakMap,We=new WeakSet,wg=function(){const t=u(this,Aa),e=u(this,ba);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&u(this,Aa).html||null},W0=function(){var t,e,i;return((i=(e=(t=u(this,We,wg))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:i.fontSize)||0},Iy=function(){var t,e,i;return((i=(e=(t=u(this,We,wg))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:i.color)||null},My=function(t){const e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},s={style:{color:u(this,We,Iy),fontSize:u(this,We,W0)?`calc(${u(this,We,W0)}px * var(--scale-factor))`:""}};for(const r of t.split(`
`))e.push({name:"span",value:r,attributes:s});return i},Ry=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&u(this,ya))&&R(this,We,Ag).call(this)},Fy=function(){if(u(this,wa)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:s,pageY:r}}}=u(this,wf);let a=!!u(this,Kh),o=a?u(this,Kh):u(this,Af);for(const b of u(this,yf))if(!o||$t.intersect(b.data.rect,o)!==null){o=b.data.rect,a=!0;break}const l=$t.normalizeRect([o[0],t[3]-o[1]+t[1],o[2],t[3]-o[3]+t[1]]),d=a?o[2]-o[0]+5:0,p=l[0]+d,m=l[1];k(this,wa,[100*(p-s)/e,100*(m-r)/i]);const{style:f}=u(this,fi);f.left=`${u(this,wa)[0]}%`,f.top=`${u(this,wa)[1]}%`},Ag=function(){k(this,ya,!u(this,ya)),u(this,ya)?(R(this,We,_g).call(this),u(this,fi).addEventListener("click",u(this,Xh)),u(this,fi).addEventListener("keydown",u(this,$h))):(R(this,We,G0).call(this),u(this,fi).removeEventListener("click",u(this,Xh)),u(this,fi).removeEventListener("keydown",u(this,$h)))},_g=function(){u(this,Js)||this.render(),this.isVisible?u(this,ya)&&u(this,fi).classList.add("focused"):(R(this,We,Fy).call(this),u(this,fi).hidden=!1,u(this,fi).style.zIndex=parseInt(u(this,fi).style.zIndex)+1e3)},G0=function(){u(this,fi).classList.remove("focused"),!(u(this,ya)||!this.isVisible)&&(u(this,fi).hidden=!0,u(this,fi).style.zIndex=parseInt(u(this,fi).style.zIndex)-1e3)};class Oy extends Li{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Se.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Sf;class Zx extends Li{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});O(this,Sf,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:i,height:s}=Ia(e.rect),r=this.svgFactory.create(i,s,!0),a=k(this,Sf,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),a.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),a.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),a.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),a.setAttribute("stroke-width",e.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Sf)}addHighlightArea(){this.container.classList.add("highlightArea")}}Sf=new WeakMap;var xf;class t3 extends Li{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});O(this,xf,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:i,height:s}=Ia(e.rect),r=this.svgFactory.create(i,s,!0),a=e.borderStyle.width,o=k(this,xf,this.svgFactory.createElement("svg:rect"));return o.setAttribute("x",a/2),o.setAttribute("y",a/2),o.setAttribute("width",i-a),o.setAttribute("height",s-a),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,xf)}addHighlightArea(){this.container.classList.add("highlightArea")}}xf=new WeakMap;var Lf;class e3 extends Li{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});O(this,Lf,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:i,height:s}=Ia(e.rect),r=this.svgFactory.create(i,s,!0),a=e.borderStyle.width,o=k(this,Lf,this.svgFactory.createElement("svg:ellipse"));return o.setAttribute("cx",i/2),o.setAttribute("cy",s/2),o.setAttribute("rx",i/2-a/2),o.setAttribute("ry",s/2-a/2),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Lf)}addHighlightArea(){this.container.classList.add("highlightArea")}}Lf=new WeakMap;var Cf;class Dy extends Li{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});O(this,Cf,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:i,borderStyle:s,popupRef:r}}=this;if(!i)return this.container;const{width:a,height:o}=Ia(e),l=this.svgFactory.create(a,o,!0);let c=[];for(let p=0,m=i.length;p<m;p+=2){const f=i[p]-e[0],b=e[3]-i[p+1];c.push(`${f},${b}`)}c=c.join(" ");const d=k(this,Cf,this.svgFactory.createElement(this.svgElementName));return d.setAttribute("points",c),d.setAttribute("stroke-width",s.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),l.append(d),this.container.append(l),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Cf)}addHighlightArea(){this.container.classList.add("highlightArea")}}Cf=new WeakMap;class i3 extends Dy{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class n3 extends Li{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Ef;class By extends Li{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});O(this,Ef,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=Se.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,inkLists:i,borderStyle:s,popupRef:r}}=this,{width:a,height:o}=Ia(e),l=this.svgFactory.create(a,o,!0);for(const c of i){let d=[];for(let m=0,f=c.length;m<f;m+=2){const b=c[m]-e[0],w=e[3]-c[m+1];d.push(`${b},${w}`)}d=d.join(" ");const p=this.svgFactory.createElement(this.svgElementName);u(this,Ef).push(p),p.setAttribute("points",d),p.setAttribute("stroke-width",s.width||1),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),!r&&this.hasPopupData&&this._createPopup(),l.append(p)}return this.container.append(l),this.container}getElementsToTriggerPopup(){return u(this,Ef)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ef=new WeakMap;class s3 extends Li{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class r3 extends Li{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class a3 extends Li{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class o3 extends Li{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class jy extends Li{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Pf,kf,$0;class l3 extends Li{constructor(e){var s;super(e,{isRenderable:!0});O(this,kf);O(this,Pf,null);const{file:i}=this.data;this.filename=i.filename,this.content=i.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:i}=this;let s;i.hasAppearance||i.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),s.addEventListener("dblclick",R(this,kf,$0).bind(this)),k(this,Pf,s);const{isMac:r}=zn.platform;return e.addEventListener("keydown",a=>{a.key==="Enter"&&(r?a.metaKey:a.ctrlKey)&&R(this,kf,$0).call(this)}),!i.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),e.append(s),e}getElementsToTriggerPopup(){return u(this,Pf)}addHighlightArea(){this.container.classList.add("highlightArea")}}Pf=new WeakMap,kf=new WeakSet,$0=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var Nf,Gl,$l,bc,qy,X0;class c3{constructor({div:t,accessibilityManager:e,annotationCanvasMap:i,annotationEditorUIManager:s,page:r,viewport:a}){O(this,bc);O(this,Nf,null);O(this,Gl,null);O(this,$l,new Map);this.div=t,k(this,Nf,e),k(this,Gl,i),this.page=r,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=s}hasEditableAnnotations(){return u(this,$l).size>0}async render(t){var a;const{annotations:e}=t,i=this.div;gc(i,this.viewport);const s=new Map,r={data:null,layer:i,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new K2,annotationStorage:t.annotationStorage||new tv,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const o of e){if(o.noHTML)continue;const l=o.annotationType===Oi.POPUP;if(l){const p=s.get(o.id);if(!p)continue;r.elements=p}else{const{width:p,height:m}=Ia(o.rect);if(p<=0||m<=0)continue}r.data=o;const c=Wx.create(r);if(!c.isRenderable)continue;if(!l&&o.popupRef){const p=s.get(o.popupRef);p?p.push(c):s.set(o.popupRef,[c])}const d=c.render();o.hidden&&(d.style.visibility="hidden"),R(this,bc,qy).call(this,d,o.id),c._isEditable&&(u(this,$l).set(c.data.id,c),(a=this._annotationEditorUIManager)==null||a.renderAnnotationElement(c))}R(this,bc,X0).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,gc(e,{rotation:t.rotation}),R(this,bc,X0).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(u(this,$l).values())}getEditableAnnotation(t){return u(this,$l).get(t)}}Nf=new WeakMap,Gl=new WeakMap,$l=new WeakMap,bc=new WeakSet,qy=function(t,e){var s;const i=t.firstChild||t;i.id=`${kb}${e}`,this.div.append(t),(s=u(this,Nf))==null||s.moveElementInDOM(this.div,t,i,!1)},X0=function(){if(!u(this,Gl))return;const t=this.div;for(const[e,i]of u(this,Gl)){const s=t.querySelector(`[data-annotation-id="${e}"]`);if(!s)continue;i.className="annotationContent";const{firstChild:r}=s;r?r.nodeName==="CANVAS"?r.replaceWith(i):r.classList.contains("annotationContent")?r.after(i):r.before(i):s.append(i)}u(this,Gl).clear()};const Zp=/\r\n?|\n/g;var Qs,Qn,Tf,Xl,Zn,Jh,Ii,zy,Hy,Vy,Sg,Fa,xg,Lg,Uy,K0,Wy;const Qe=class Qe extends De{constructor(e){super({...e,name:"freeTextEditor"});O(this,Ii);O(this,Qs);O(this,Qn,"");O(this,Tf,`${this.id}-editor`);O(this,Xl,null);O(this,Zn);O(this,Jh,null);k(this,Qs,e.color||Qe._defaultColor||De._defaultLineColor),k(this,Zn,e.fontSize||Qe._defaultFontSize)}static get _keyboardManager(){const e=Qe.prototype,i=a=>a.isEmpty(),s=mc.TRANSLATE_SMALL,r=mc.TRANSLATE_BIG;return Le(this,"_keyboardManager",new np([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:i}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[s,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:i}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:i}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,s],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:i}]]))}static initialize(e,i){De.initialize(e,i,{strings:["pdfjs-free-text-default-content"]});const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,i){switch(e){case se.FREETEXT_SIZE:Qe._defaultFontSize=i;break;case se.FREETEXT_COLOR:Qe._defaultColor=i;break}}updateParams(e,i){switch(e){case se.FREETEXT_SIZE:R(this,Ii,zy).call(this,i);break;case se.FREETEXT_COLOR:R(this,Ii,Hy).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[se.FREETEXT_SIZE,Qe._defaultFontSize],[se.FREETEXT_COLOR,Qe._defaultColor||De._defaultLineColor]]}get propertiesToUpdate(){return[[se.FREETEXT_SIZE,u(this,Zn)],[se.FREETEXT_COLOR,u(this,Qs)]]}_translateEmpty(e,i){this._uiManager.translateSelectedEditors(e,i,!0)}getInitialTranslation(){const e=this.parentScale;return[-Qe._internalPadding*e,-(Qe._internalPadding+u(this,Zn))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Se.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),k(this,Xl,new AbortController);const e=this._uiManager.combinedSignal(u(this,Xl));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){var e;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",u(this,Tf)),this._isDraggable=!0,(e=u(this,Xl))==null||e.abort(),k(this,Xl,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var e;this.width||(this.enableEditMode(),this.editorDiv.focus(),(e=this._initialOptions)!=null&&e.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=u(this,Qn),i=k(this,Qn,R(this,Ii,Vy).call(this).trimEnd());if(e===i)return;const s=r=>{if(k(this,Qn,r),!r){this.remove();return}R(this,Ii,Lg).call(this),this._uiManager.rebuild(this),R(this,Ii,Sg).call(this)};this.addCommands({cmd:()=>{s(i)},undo:()=>{s(e)},mustExec:!1}),R(this,Ii,Sg).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Qe._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,i;this.width&&(e=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",u(this,Tf)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),De._l10nPromise.get("pdfjs-free-text-default-content").then(r=>{var a;return(a=this.editorDiv)==null?void 0:a.setAttribute("default-content",r)}),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${u(this,Zn)}px * var(--scale-factor))`,s.color=u(this,Qs),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Wg(this,this.div,["dblclick","keydown"]),this.width){const[r,a]=this.parentDimensions;if(this.annotationElementId){const{position:o}=u(this,Jh);let[l,c]=this.getInitialTranslation();[l,c]=this.pageTranslationToScreen(l,c);const[d,p]=this.pageDimensions,[m,f]=this.pageTranslation;let b,w;switch(this.rotation){case 0:b=e+(o[0]-m)/d,w=i+this.height-(o[1]-f)/p;break;case 90:b=e+(o[0]-m)/d,w=i-(o[1]-f)/p,[l,c]=[c,-l];break;case 180:b=e-this.width+(o[0]-m)/d,w=i-(o[1]-f)/p,[l,c]=[-l,-c];break;case 270:b=e+(o[0]-m-this.height*p)/d,w=i+(o[1]-f-this.width*d)/p,[l,c]=[-c,l];break}this.setAt(b*r,w*a,l,c)}else this.setAt(e*r,i*a,this.width*r,this.height*a);R(this,Ii,Lg).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var b,w,S;const i=e.clipboardData||window.clipboardData,{types:s}=i;if(s.length===1&&s[0]==="text/plain")return;e.preventDefault();const r=R(b=Qe,Fa,K0).call(b,i.getData("text")||"").replaceAll(Zp,`
`);if(!r)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const o=a.getRangeAt(0);if(!r.includes(`
`)){o.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:l,startOffset:c}=o,d=[],p=[];if(l.nodeType===Node.TEXT_NODE){const A=l.parentElement;if(p.push(l.nodeValue.slice(c).replaceAll(Zp,"")),A!==this.editorDiv){let x=d;for(const M of this.editorDiv.childNodes){if(M===A){x=p;continue}x.push(R(w=Qe,Fa,xg).call(w,M))}}d.push(l.nodeValue.slice(0,c).replaceAll(Zp,""))}else if(l===this.editorDiv){let A=d,x=0;for(const M of this.editorDiv.childNodes)x++===c&&(A=p),A.push(R(S=Qe,Fa,xg).call(S,M))}k(this,Qn,`${d.join(`
`)}${r}${p.join(`
`)}`),R(this,Ii,Lg).call(this);const m=new Range;let f=d.reduce((A,x)=>A+x.length,0);for(const{firstChild:A}of this.editorDiv.childNodes)if(A.nodeType===Node.TEXT_NODE){const x=A.nodeValue.length;if(f<=x){m.setStart(A,f),m.setEnd(A,f);break}f-=x}a.removeAllRanges(),a.addRange(m)}get contentDiv(){return this.editorDiv}static deserialize(e,i,s){var o;let r=null;if(e instanceof Oy){const{data:{defaultAppearanceData:{fontSize:l,fontColor:c},rect:d,rotation:p,id:m},textContent:f,textPosition:b,parent:{page:{pageNumber:w}}}=e;if(!f||f.length===0)return null;r=e={annotationType:Se.FREETEXT,color:Array.from(c),fontSize:l,value:f.join(`
`),position:b,pageIndex:w-1,rect:d.slice(0),rotation:p,id:m,deleted:!1}}const a=super.deserialize(e,i,s);return k(a,Zn,e.fontSize),k(a,Qs,$t.makeHexColor(...e.color)),k(a,Qn,R(o=Qe,Fa,K0).call(o,e.value)),a.annotationElementId=e.id||null,k(a,Jh,r),a}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const i=Qe._internalPadding*this.parentScale,s=this.getRect(i,i),r=De._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:u(this,Qs)),a={annotationType:Se.FREETEXT,color:r,fontSize:u(this,Zn),value:R(this,Ii,Uy).call(this),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?a:this.annotationElementId&&!R(this,Ii,Wy).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(e){const i=super.renderAnnotationElement(e);if(this.deleted)return i;const{style:s}=i;s.fontSize=`calc(${u(this,Zn)}px * var(--scale-factor))`,s.color=u(this,Qs),i.replaceChildren();for(const a of u(this,Qn).split(`
`)){const o=document.createElement("div");o.append(a?document.createTextNode(a):document.createElement("br")),i.append(o)}const r=Qe._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(r,r),popupContent:u(this,Qn)}),i}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};Qs=new WeakMap,Qn=new WeakMap,Tf=new WeakMap,Xl=new WeakMap,Zn=new WeakMap,Jh=new WeakMap,Ii=new WeakSet,zy=function(e){const i=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--scale-factor))`,this.translate(0,-(r-u(this,Zn))*this.parentScale),k(this,Zn,r),R(this,Ii,Sg).call(this)},s=u(this,Zn);this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:se.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Hy=function(e){const i=r=>{k(this,Qs,this.editorDiv.style.color=r)},s=u(this,Qs);this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:se.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Vy=function(){var i;const e=[];this.editorDiv.normalize();for(const s of this.editorDiv.childNodes)e.push(R(i=Qe,Fa,xg).call(i,s));return e.join(`
`)},Sg=function(){const[e,i]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:r,div:a}=this,o=a.style.display,l=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",r.div.append(this.div),s=a.getBoundingClientRect(),a.remove(),a.style.display=o,a.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=s.width/e,this.height=s.height/i):(this.width=s.height/e,this.height=s.width/i),this.fixAndSetPosition()},Fa=new WeakSet,xg=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Zp,"")},Lg=function(){if(this.editorDiv.replaceChildren(),!!u(this,Qn))for(const e of u(this,Qn).split(`
`)){const i=document.createElement("div");i.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(i)}},Uy=function(){return u(this,Qn).replaceAll(" "," ")},K0=function(e){return e.replaceAll(" "," ")},Wy=function(e){const{value:i,fontSize:s,color:r,pageIndex:a}=u(this,Jh);return this._hasBeenMoved||e.value!==i||e.fontSize!==s||e.color.some((o,l)=>o!==r[l])||e.pageIndex!==a},O(Qe,Fa),Ut(Qe,"_freeTextDefaultContent",""),Ut(Qe,"_internalPadding",0),Ut(Qe,"_defaultColor",null),Ut(Qe,"_defaultFontSize",10),Ut(Qe,"_type","freetext"),Ut(Qe,"_editorType",Se.FREETEXT);let Y0=Qe;var If,Lo,Zs,Pn,Gy,Cg,$y,Xy,J0;class _5{constructor(t,e=0,i=0,s=!0){O(this,Pn);O(this,If);O(this,Lo,[]);O(this,Zs,[]);let r=1/0,a=-1/0,o=1/0,l=-1/0;const d=10**-4;for(const{x:A,y:x,width:M,height:q}of t){const U=Math.floor((A-e)/d)*d,X=Math.ceil((A+M+e)/d)*d,G=Math.floor((x-e)/d)*d,B=Math.ceil((x+q+e)/d)*d,Q=[U,G,B,!0],ct=[X,G,B,!1];u(this,Lo).push(Q,ct),r=Math.min(r,U),a=Math.max(a,X),o=Math.min(o,G),l=Math.max(l,B)}const p=a-r+2*i,m=l-o+2*i,f=r-i,b=o-i,w=u(this,Lo).at(s?-1:-2),S=[w[0],w[2]];for(const A of u(this,Lo)){const[x,M,q]=A;A[0]=(x-f)/p,A[1]=(M-b)/m,A[2]=(q-b)/m}k(this,If,{x:f,y:b,width:p,height:m,lastPoint:S})}getOutlines(){u(this,Lo).sort((e,i)=>e[0]-i[0]||e[1]-i[1]||e[2]-i[2]);const t=[];for(const e of u(this,Lo))e[3]?(t.push(...R(this,Pn,J0).call(this,e)),R(this,Pn,$y).call(this,e)):(R(this,Pn,Xy).call(this,e),t.push(...R(this,Pn,J0).call(this,e)));return R(this,Pn,Gy).call(this,t)}}If=new WeakMap,Lo=new WeakMap,Zs=new WeakMap,Pn=new WeakSet,Gy=function(t){const e=[],i=new Set;for(const a of t){const[o,l,c]=a;e.push([o,l,a],[o,c,a])}e.sort((a,o)=>a[1]-o[1]||a[0]-o[0]);for(let a=0,o=e.length;a<o;a+=2){const l=e[a][2],c=e[a+1][2];l.push(c),c.push(l),i.add(l),i.add(c)}const s=[];let r;for(;i.size>0;){const a=i.values().next().value;let[o,l,c,d,p]=a;i.delete(a);let m=o,f=l;for(r=[o,c],s.push(r);;){let b;if(i.has(d))b=d;else if(i.has(p))b=p;else break;i.delete(b),[o,l,c,d,p]=b,m!==o&&(r.push(m,f,o,f===l?l:c),m=o),f=f===l?c:l}r.push(m,f)}return new h3(s,u(this,If))},Cg=function(t){const e=u(this,Zs);let i=0,s=e.length-1;for(;i<=s;){const r=i+s>>1,a=e[r][0];if(a===t)return r;a<t?i=r+1:s=r-1}return s+1},$y=function([,t,e]){const i=R(this,Pn,Cg).call(this,t);u(this,Zs).splice(i,0,[t,e])},Xy=function([,t,e]){const i=R(this,Pn,Cg).call(this,t);for(let s=i;s<u(this,Zs).length;s++){const[r,a]=u(this,Zs)[s];if(r!==t)break;if(r===t&&a===e){u(this,Zs).splice(s,1);return}}for(let s=i-1;s>=0;s--){const[r,a]=u(this,Zs)[s];if(r!==t)break;if(r===t&&a===e){u(this,Zs).splice(s,1);return}}},J0=function(t){const[e,i,s]=t,r=[[e,i,s]],a=R(this,Pn,Cg).call(this,s);for(let o=0;o<a;o++){const[l,c]=u(this,Zs)[o];for(let d=0,p=r.length;d<p;d++){const[,m,f]=r[d];if(!(c<=m||f<=l)){if(m>=l){if(f>c)r[d][1]=c;else{if(p===1)return[];r.splice(d,1),d--,p--}continue}r[d][2]=l,f>c&&r.push([e,c,f])}}}return r};class Yy{toSVGPath(){throw new Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw new Error("Abstract getter `box` must be implemented.")}serialize(t,e){throw new Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof Z0}}var Mf,Qh;class h3 extends Yy{constructor(e,i){super();O(this,Mf);O(this,Qh);k(this,Qh,e),k(this,Mf,i)}toSVGPath(){const e=[];for(const i of u(this,Qh)){let[s,r]=i;e.push(`M${s} ${r}`);for(let a=2;a<i.length;a+=2){const o=i[a],l=i[a+1];o===s?(e.push(`V${l}`),r=l):l===r&&(e.push(`H${o}`),s=o)}e.push("Z")}return e.join(" ")}serialize([e,i,s,r],a){const o=[],l=s-e,c=r-i;for(const d of u(this,Qh)){const p=new Array(d.length);for(let m=0;m<d.length;m+=2)p[m]=e+d[m]*l,p[m+1]=r-d[m+1]*c;o.push(p)}return o}get box(){return u(this,Mf)}}Mf=new WeakMap,Qh=new WeakMap;var Nr,_a,Zh,tu,Tr,_e,Yl,Kl,Rf,Ff,eu,iu,Co,Of,ym,wm,Df,Q0;const oa=class oa{constructor({x:t,y:e},i,s,r,a,o=0){O(this,Df);O(this,Nr);O(this,_a,[]);O(this,Zh);O(this,tu);O(this,Tr,[]);O(this,_e,new Float64Array(18));O(this,Yl);O(this,Kl);O(this,Rf);O(this,Ff);O(this,eu);O(this,iu);O(this,Co,[]);k(this,Nr,i),k(this,iu,r*s),k(this,tu,a),u(this,_e).set([NaN,NaN,NaN,NaN,t,e],6),k(this,Zh,o),k(this,Ff,u(oa,Of)*s),k(this,Rf,u(oa,wm)*s),k(this,eu,s),u(this,Co).push(t,e)}get free(){return!0}isEmpty(){return isNaN(u(this,_e)[8])}add({x:t,y:e}){var Q;k(this,Yl,t),k(this,Kl,e);const[i,s,r,a]=u(this,Nr);let[o,l,c,d]=u(this,_e).subarray(8,12);const p=t-c,m=e-d,f=Math.hypot(p,m);if(f<u(this,Rf))return!1;const b=f-u(this,Ff),w=b/f,S=w*p,A=w*m;let x=o,M=l;o=c,l=d,c+=S,d+=A,(Q=u(this,Co))==null||Q.push(t,e);const q=-A/b,U=S/b,X=q*u(this,iu),G=U*u(this,iu);return u(this,_e).set(u(this,_e).subarray(2,8),0),u(this,_e).set([c+X,d+G],4),u(this,_e).set(u(this,_e).subarray(14,18),12),u(this,_e).set([c-X,d-G],16),isNaN(u(this,_e)[6])?(u(this,Tr).length===0&&(u(this,_e).set([o+X,l+G],2),u(this,Tr).push(NaN,NaN,NaN,NaN,(o+X-i)/r,(l+G-s)/a),u(this,_e).set([o-X,l-G],14),u(this,_a).push(NaN,NaN,NaN,NaN,(o-X-i)/r,(l-G-s)/a)),u(this,_e).set([x,M,o,l,c,d],6),!this.isEmpty()):(u(this,_e).set([x,M,o,l,c,d],6),Math.abs(Math.atan2(M-l,x-o)-Math.atan2(A,S))<Math.PI/2?([o,l,c,d]=u(this,_e).subarray(2,6),u(this,Tr).push(NaN,NaN,NaN,NaN,((o+c)/2-i)/r,((l+d)/2-s)/a),[o,l,x,M]=u(this,_e).subarray(14,18),u(this,_a).push(NaN,NaN,NaN,NaN,((x+o)/2-i)/r,((M+l)/2-s)/a),!0):([x,M,o,l,c,d]=u(this,_e).subarray(0,6),u(this,Tr).push(((x+5*o)/6-i)/r,((M+5*l)/6-s)/a,((5*o+c)/6-i)/r,((5*l+d)/6-s)/a,((o+c)/2-i)/r,((l+d)/2-s)/a),[c,d,o,l,x,M]=u(this,_e).subarray(12,18),u(this,_a).push(((x+5*o)/6-i)/r,((M+5*l)/6-s)/a,((5*o+c)/6-i)/r,((5*l+d)/6-s)/a,((o+c)/2-i)/r,((l+d)/2-s)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const t=u(this,Tr),e=u(this,_a),i=u(this,_e).subarray(4,6),s=u(this,_e).subarray(16,18),[r,a,o,l]=u(this,Nr),[c,d,p,m]=R(this,Df,Q0).call(this);if(isNaN(u(this,_e)[6])&&!this.isEmpty())return`M${(u(this,_e)[2]-r)/o} ${(u(this,_e)[3]-a)/l} L${(u(this,_e)[4]-r)/o} ${(u(this,_e)[5]-a)/l} L${c} ${d} L${p} ${m} L${(u(this,_e)[16]-r)/o} ${(u(this,_e)[17]-a)/l} L${(u(this,_e)[14]-r)/o} ${(u(this,_e)[15]-a)/l} Z`;const f=[];f.push(`M${t[4]} ${t[5]}`);for(let b=6;b<t.length;b+=6)isNaN(t[b])?f.push(`L${t[b+4]} ${t[b+5]}`):f.push(`C${t[b]} ${t[b+1]} ${t[b+2]} ${t[b+3]} ${t[b+4]} ${t[b+5]}`);f.push(`L${(i[0]-r)/o} ${(i[1]-a)/l} L${c} ${d} L${p} ${m} L${(s[0]-r)/o} ${(s[1]-a)/l}`);for(let b=e.length-6;b>=6;b-=6)isNaN(e[b])?f.push(`L${e[b+4]} ${e[b+5]}`):f.push(`C${e[b]} ${e[b+1]} ${e[b+2]} ${e[b+3]} ${e[b+4]} ${e[b+5]}`);return f.push(`L${e[4]} ${e[5]} Z`),f.join(" ")}getOutlines(){var A;const t=u(this,Tr),e=u(this,_a),i=u(this,_e),s=i.subarray(4,6),r=i.subarray(16,18),[a,o,l,c]=u(this,Nr),d=new Float64Array((((A=u(this,Co))==null?void 0:A.length)??0)+2);for(let x=0,M=d.length-2;x<M;x+=2)d[x]=(u(this,Co)[x]-a)/l,d[x+1]=(u(this,Co)[x+1]-o)/c;d[d.length-2]=(u(this,Yl)-a)/l,d[d.length-1]=(u(this,Kl)-o)/c;const[p,m,f,b]=R(this,Df,Q0).call(this);if(isNaN(i[6])&&!this.isEmpty()){const x=new Float64Array(36);return x.set([NaN,NaN,NaN,NaN,(i[2]-a)/l,(i[3]-o)/c,NaN,NaN,NaN,NaN,(i[4]-a)/l,(i[5]-o)/c,NaN,NaN,NaN,NaN,p,m,NaN,NaN,NaN,NaN,f,b,NaN,NaN,NaN,NaN,(i[16]-a)/l,(i[17]-o)/c,NaN,NaN,NaN,NaN,(i[14]-a)/l,(i[15]-o)/c],0),new Z0(x,d,u(this,Nr),u(this,eu),u(this,Zh),u(this,tu))}const w=new Float64Array(u(this,Tr).length+24+u(this,_a).length);let S=t.length;for(let x=0;x<S;x+=2){if(isNaN(t[x])){w[x]=w[x+1]=NaN;continue}w[x]=t[x],w[x+1]=t[x+1]}w.set([NaN,NaN,NaN,NaN,(s[0]-a)/l,(s[1]-o)/c,NaN,NaN,NaN,NaN,p,m,NaN,NaN,NaN,NaN,f,b,NaN,NaN,NaN,NaN,(r[0]-a)/l,(r[1]-o)/c],S),S+=24;for(let x=e.length-6;x>=6;x-=6)for(let M=0;M<6;M+=2){if(isNaN(e[x+M])){w[S]=w[S+1]=NaN,S+=2;continue}w[S]=e[x+M],w[S+1]=e[x+M+1],S+=2}return w.set([NaN,NaN,NaN,NaN,e[4],e[5]],S),new Z0(w,d,u(this,Nr),u(this,eu),u(this,Zh),u(this,tu))}};Nr=new WeakMap,_a=new WeakMap,Zh=new WeakMap,tu=new WeakMap,Tr=new WeakMap,_e=new WeakMap,Yl=new WeakMap,Kl=new WeakMap,Rf=new WeakMap,Ff=new WeakMap,eu=new WeakMap,iu=new WeakMap,Co=new WeakMap,Of=new WeakMap,ym=new WeakMap,wm=new WeakMap,Df=new WeakSet,Q0=function(){const t=u(this,_e).subarray(4,6),e=u(this,_e).subarray(16,18),[i,s,r,a]=u(this,Nr);return[(u(this,Yl)+(t[0]-e[0])/2-i)/r,(u(this,Kl)+(t[1]-e[1])/2-s)/a,(u(this,Yl)+(e[0]-t[0])/2-i)/r,(u(this,Kl)+(e[1]-t[1])/2-s)/a]},O(oa,Of,8),O(oa,ym,2),O(oa,wm,u(oa,Of)+u(oa,ym));let $g=oa;var nu,Jl,Sa,Bf,ts,jf,yi,Hn,gd,md,Ky;class Z0 extends Yy{constructor(e,i,s,r,a,o){super();O(this,Hn);O(this,nu);O(this,Jl,null);O(this,Sa);O(this,Bf);O(this,ts);O(this,jf);O(this,yi);k(this,yi,e),k(this,ts,i),k(this,nu,s),k(this,jf,r),k(this,Sa,a),k(this,Bf,o),R(this,Hn,Ky).call(this,o);const{x:l,y:c,width:d,height:p}=u(this,Jl);for(let m=0,f=e.length;m<f;m+=2)e[m]=(e[m]-l)/d,e[m+1]=(e[m+1]-c)/p;for(let m=0,f=i.length;m<f;m+=2)i[m]=(i[m]-l)/d,i[m+1]=(i[m+1]-c)/p}toSVGPath(){const e=[`M${u(this,yi)[4]} ${u(this,yi)[5]}`];for(let i=6,s=u(this,yi).length;i<s;i+=6){if(isNaN(u(this,yi)[i])){e.push(`L${u(this,yi)[i+4]} ${u(this,yi)[i+5]}`);continue}e.push(`C${u(this,yi)[i]} ${u(this,yi)[i+1]} ${u(this,yi)[i+2]} ${u(this,yi)[i+3]} ${u(this,yi)[i+4]} ${u(this,yi)[i+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,i,s,r],a){const o=s-e,l=r-i;let c,d;switch(a){case 0:c=R(this,Hn,gd).call(this,u(this,yi),e,r,o,-l),d=R(this,Hn,gd).call(this,u(this,ts),e,r,o,-l);break;case 90:c=R(this,Hn,md).call(this,u(this,yi),e,i,o,l),d=R(this,Hn,md).call(this,u(this,ts),e,i,o,l);break;case 180:c=R(this,Hn,gd).call(this,u(this,yi),s,i,-o,l),d=R(this,Hn,gd).call(this,u(this,ts),s,i,-o,l);break;case 270:c=R(this,Hn,md).call(this,u(this,yi),s,r,-o,-l),d=R(this,Hn,md).call(this,u(this,ts),s,r,-o,-l);break}return{outline:Array.from(c),points:[Array.from(d)]}}get box(){return u(this,Jl)}getNewOutline(e,i){const{x:s,y:r,width:a,height:o}=u(this,Jl),[l,c,d,p]=u(this,nu),m=a*d,f=o*p,b=s*d+l,w=r*p+c,S=new $g({x:u(this,ts)[0]*m+b,y:u(this,ts)[1]*f+w},u(this,nu),u(this,jf),e,u(this,Bf),i??u(this,Sa));for(let A=2;A<u(this,ts).length;A+=2)S.add({x:u(this,ts)[A]*m+b,y:u(this,ts)[A+1]*f+w});return S.getOutlines()}}nu=new WeakMap,Jl=new WeakMap,Sa=new WeakMap,Bf=new WeakMap,ts=new WeakMap,jf=new WeakMap,yi=new WeakMap,Hn=new WeakSet,gd=function(e,i,s,r,a){const o=new Float64Array(e.length);for(let l=0,c=e.length;l<c;l+=2)o[l]=i+e[l]*r,o[l+1]=s+e[l+1]*a;return o},md=function(e,i,s,r,a){const o=new Float64Array(e.length);for(let l=0,c=e.length;l<c;l+=2)o[l]=i+e[l+1]*r,o[l+1]=s+e[l]*a;return o},Ky=function(e){const i=u(this,yi);let s=i[4],r=i[5],a=s,o=r,l=s,c=r,d=s,p=r;const m=e?Math.max:Math.min;for(let A=6,x=i.length;A<x;A+=6){if(isNaN(i[A]))a=Math.min(a,i[A+4]),o=Math.min(o,i[A+5]),l=Math.max(l,i[A+4]),c=Math.max(c,i[A+5]),p<i[A+5]?(d=i[A+4],p=i[A+5]):p===i[A+5]&&(d=m(d,i[A+4]));else{const M=$t.bezierBoundingBox(s,r,...i.slice(A,A+6));a=Math.min(a,M[0]),o=Math.min(o,M[1]),l=Math.max(l,M[2]),c=Math.max(c,M[3]),p<M[3]?(d=M[2],p=M[3]):p===M[3]&&(d=m(d,M[2]))}s=i[A+4],r=i[A+5]}const f=a-u(this,Sa),b=o-u(this,Sa),w=l-a+2*u(this,Sa),S=c-o+2*u(this,Sa);k(this,Jl,{x:f,y:b,width:w,height:S,lastPoint:[d,p]})};var qf,zf,tr,Ql,su,Bi,Hf,ru,Vf,Uf,er,au,Ye,t2,e2,Jy,sl,Qy,ro;const la=class la{constructor({editor:t=null,uiManager:e=null}){O(this,Ye);O(this,qf,R(this,Ye,Jy).bind(this));O(this,zf,R(this,Ye,Qy).bind(this));O(this,tr,null);O(this,Ql,null);O(this,su);O(this,Bi,null);O(this,Hf,!1);O(this,ru,!1);O(this,Vf,null);O(this,Uf);O(this,er,null);O(this,au);var i;t?(k(this,ru,!1),k(this,au,se.HIGHLIGHT_COLOR),k(this,Vf,t)):(k(this,ru,!0),k(this,au,se.HIGHLIGHT_DEFAULT_COLOR)),k(this,er,(t==null?void 0:t._uiManager)||e),k(this,Uf,u(this,er)._eventBus),k(this,su,(t==null?void 0:t.color)||((i=u(this,er))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98")}static get _keyboardManager(){return Le(this,"_keyboardManager",new np([[["Escape","mac+Escape"],la.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],la.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],la.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],la.prototype._moveToPrevious],[["Home","mac+Home"],la.prototype._moveToBeginning],[["End","mac+End"],la.prototype._moveToEnd]]))}renderButton(){const t=k(this,tr,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=u(this,er)._signal;t.addEventListener("click",R(this,Ye,sl).bind(this),{signal:e}),t.addEventListener("keydown",u(this,qf),{signal:e});const i=k(this,Ql,document.createElement("span"));return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=u(this,su),t.append(i),t}renderMainDropdown(){const t=k(this,Bi,R(this,Ye,t2).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===u(this,tr)){R(this,Ye,sl).call(this,t);return}const e=t.target.getAttribute("data-color");e&&R(this,Ye,e2).call(this,e,t)}_moveToNext(t){var e,i;if(!u(this,Ye,ro)){R(this,Ye,sl).call(this,t);return}if(t.target===u(this,tr)){(e=u(this,Bi).firstChild)==null||e.focus();return}(i=t.target.nextSibling)==null||i.focus()}_moveToPrevious(t){var e,i;if(t.target===((e=u(this,Bi))==null?void 0:e.firstChild)||t.target===u(this,tr)){u(this,Ye,ro)&&this._hideDropdownFromKeyboard();return}u(this,Ye,ro)||R(this,Ye,sl).call(this,t),(i=t.target.previousSibling)==null||i.focus()}_moveToBeginning(t){var e;if(!u(this,Ye,ro)){R(this,Ye,sl).call(this,t);return}(e=u(this,Bi).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!u(this,Ye,ro)){R(this,Ye,sl).call(this,t);return}(e=u(this,Bi).lastChild)==null||e.focus()}hideDropdown(){var t;(t=u(this,Bi))==null||t.classList.add("hidden"),window.removeEventListener("pointerdown",u(this,zf))}_hideDropdownFromKeyboard(){var t;if(!u(this,ru)){if(!u(this,Ye,ro)){(t=u(this,Vf))==null||t.unselect();return}this.hideDropdown(),u(this,tr).focus({preventScroll:!0,focusVisible:u(this,Hf)})}}updateColor(t){if(u(this,Ql)&&(u(this,Ql).style.backgroundColor=t),!u(this,Bi))return;const e=u(this,er).highlightColors.values();for(const i of u(this,Bi).children)i.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=u(this,tr))==null||t.remove(),k(this,tr,null),k(this,Ql,null),(e=u(this,Bi))==null||e.remove(),k(this,Bi,null)}};qf=new WeakMap,zf=new WeakMap,tr=new WeakMap,Ql=new WeakMap,su=new WeakMap,Bi=new WeakMap,Hf=new WeakMap,ru=new WeakMap,Vf=new WeakMap,Uf=new WeakMap,er=new WeakMap,au=new WeakMap,Ye=new WeakSet,t2=function(){const t=document.createElement("div"),e=u(this,er)._signal;t.addEventListener("contextmenu",Cs,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[i,s]of u(this,er).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",s),r.title=i,r.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${i}`);const a=document.createElement("span");r.append(a),a.className="swatch",a.style.backgroundColor=s,r.setAttribute("aria-selected",s===u(this,su)),r.addEventListener("click",R(this,Ye,e2).bind(this,s),{signal:e}),t.append(r)}return t.addEventListener("keydown",u(this,qf),{signal:e}),t},e2=function(t,e){e.stopPropagation(),u(this,Uf).dispatch("switchannotationeditorparams",{source:this,type:u(this,au),value:t})},Jy=function(t){la._keyboardManager.exec(this,t)},sl=function(t){if(u(this,Ye,ro)){this.hideDropdown();return}if(k(this,Hf,t.detail===0),window.addEventListener("pointerdown",u(this,zf),{signal:u(this,er)._signal}),u(this,Bi)){u(this,Bi).classList.remove("hidden");return}const e=k(this,Bi,R(this,Ye,t2).call(this));u(this,tr).append(e)},Qy=function(t){var e;(e=u(this,Bi))!=null&&e.contains(t.target)||this.hideDropdown()},ro=function(){return u(this,Bi)&&!u(this,Bi).classList.contains("hidden")};let Xg=la;var ou,Wf,Eo,Zl,lu,ws,Gf,$f,tc,ir,xn,es,cu,ec,ji,hu,Ir,Xf,ye,i2,n2,Zy,tw,ew,s2,vd,xs,lh,iw,Eg,bd,nw,sw,rw,aw;const Me=class Me extends De{constructor(e){super({...e,name:"highlightEditor"});O(this,ye);O(this,ou,null);O(this,Wf,0);O(this,Eo);O(this,Zl,null);O(this,lu,null);O(this,ws,null);O(this,Gf,null);O(this,$f,0);O(this,tc,null);O(this,ir,null);O(this,xn,null);O(this,es,!1);O(this,cu,null);O(this,ec);O(this,ji,null);O(this,hu,"");O(this,Ir);O(this,Xf,"");this.color=e.color||Me._defaultColor,k(this,Ir,e.thickness||Me._defaultThickness),k(this,ec,e.opacity||Me._defaultOpacity),k(this,Eo,e.boxes||null),k(this,Xf,e.methodOfCreation||""),k(this,hu,e.text||""),this._isDraggable=!1,e.highlightId>-1?(k(this,es,!0),R(this,ye,n2).call(this,e),R(this,ye,vd).call(this)):(k(this,ou,e.anchorNode),k(this,Wf,e.anchorOffset),k(this,Gf,e.focusNode),k(this,$f,e.focusOffset),R(this,ye,i2).call(this),R(this,ye,vd).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=Me.prototype;return Le(this,"_keyboardManager",new np([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:u(this,es)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:u(this,Ir),methodOfCreation:u(this,Xf)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,i){var s;De.initialize(e,i),Me._defaultColor||(Me._defaultColor=((s=i.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(e,i){switch(e){case se.HIGHLIGHT_DEFAULT_COLOR:Me._defaultColor=i;break;case se.HIGHLIGHT_THICKNESS:Me._defaultThickness=i;break}}translateInPage(e,i){}get toolbarPosition(){return u(this,cu)}updateParams(e,i){switch(e){case se.HIGHLIGHT_COLOR:R(this,ye,Zy).call(this,i);break;case se.HIGHLIGHT_THICKNESS:R(this,ye,tw).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[se.HIGHLIGHT_DEFAULT_COLOR,Me._defaultColor],[se.HIGHLIGHT_THICKNESS,Me._defaultThickness]]}get propertiesToUpdate(){return[[se.HIGHLIGHT_COLOR,this.color||Me._defaultColor],[se.HIGHLIGHT_THICKNESS,u(this,Ir)||Me._defaultThickness],[se.HIGHLIGHT_FREE,u(this,es)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(k(this,lu,new Xg({editor:this})),e.addColorPicker(u(this,lu))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(R(this,ye,bd).call(this))}getBaseTranslation(){return[0,0]}getRect(e,i){return super.getRect(e,i,R(this,ye,bd).call(this))}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){R(this,ye,s2).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(R(this,ye,vd).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var s;let i=!1;this.parent&&!e?R(this,ye,s2).call(this):e&&(R(this,ye,vd).call(this,e),i=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),i&&this.select()}rotate(e){var r,a,o;const{drawLayer:i}=this.parent;let s;u(this,es)?(e=(e-this.rotation+360)%360,s=R(r=Me,xs,lh).call(r,u(this,ir).box,e)):s=R(a=Me,xs,lh).call(a,this,e),i.rotate(u(this,xn),e),i.rotate(u(this,ji),e),i.updateBox(u(this,xn),s),i.updateBox(u(this,ji),R(o=Me,xs,lh).call(o,u(this,ws).box,e))}render(){if(this.div)return this.div;const e=super.render();u(this,hu)&&(e.setAttribute("aria-label",u(this,hu)),e.setAttribute("role","mark")),u(this,es)?e.classList.add("free"):this.div.addEventListener("keydown",R(this,ye,iw).bind(this),{signal:this._uiManager._signal});const i=k(this,tc,document.createElement("div"));e.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=u(this,Zl);const[s,r]=this.parentDimensions;return this.setDims(this.width*s,this.height*r),Wg(this,u(this,tc),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.parent.drawLayer.addClass(u(this,ji),"hovered")}pointerleave(){this.parent.drawLayer.removeClass(u(this,ji),"hovered")}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:R(this,ye,Eg).call(this,!0);break;case 1:case 3:R(this,ye,Eg).call(this,!1);break}}select(){var e,i;super.select(),u(this,ji)&&((e=this.parent)==null||e.drawLayer.removeClass(u(this,ji),"hovered"),(i=this.parent)==null||i.drawLayer.addClass(u(this,ji),"selected"))}unselect(){var e;super.unselect(),u(this,ji)&&((e=this.parent)==null||e.drawLayer.removeClass(u(this,ji),"selected"),u(this,es)||R(this,ye,Eg).call(this,!1))}get _mustFixPosition(){return!u(this,es)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.show(u(this,xn),e),this.parent.drawLayer.show(u(this,ji),e))}static startHighlighting(e,i,{target:s,x:r,y:a}){const{x:o,y:l,width:c,height:d}=s.getBoundingClientRect(),p=new AbortController,m=e.combinedSignal(p),f=w=>{w.preventDefault(),w.stopPropagation()},b=w=>{p.abort(),R(this,xs,aw).call(this,e,w)};window.addEventListener("blur",b,{signal:m}),window.addEventListener("pointerup",b,{signal:m}),window.addEventListener("pointerdown",f,{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",Cs,{signal:m}),s.addEventListener("pointermove",R(this,xs,rw).bind(this,e),{signal:m}),this._freeHighlight=new $g({x:r,y:a},[o,l,c,d],e.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static deserialize(e,i,s){var w;const r=super.deserialize(e,i,s),{rect:[a,o,l,c],color:d,quadPoints:p}=e;r.color=$t.makeHexColor(...d),k(r,ec,e.opacity);const[m,f]=r.pageDimensions;r.width=(l-a)/m,r.height=(c-o)/f;const b=k(r,Eo,[]);for(let S=0;S<p.length;S+=8)b.push({x:(p[4]-l)/m,y:(c-(1-p[S+5]))/f,width:(p[S+2]-p[S])/m,height:(p[S+5]-p[S+1])/f});return R(w=r,ye,i2).call(w),r}serialize(e=!1){if(this.isEmpty()||e)return null;const i=this.getRect(0,0),s=De._colorManager.convert(this.color);return{annotationType:Se.HIGHLIGHT,color:s,opacity:u(this,ec),thickness:u(this,Ir),quadPoints:R(this,ye,nw).call(this),outlines:R(this,ye,sw).call(this,i),pageIndex:this.pageIndex,rect:i,rotation:R(this,ye,bd).call(this),structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}};ou=new WeakMap,Wf=new WeakMap,Eo=new WeakMap,Zl=new WeakMap,lu=new WeakMap,ws=new WeakMap,Gf=new WeakMap,$f=new WeakMap,tc=new WeakMap,ir=new WeakMap,xn=new WeakMap,es=new WeakMap,cu=new WeakMap,ec=new WeakMap,ji=new WeakMap,hu=new WeakMap,Ir=new WeakMap,Xf=new WeakMap,ye=new WeakSet,i2=function(){const e=new _5(u(this,Eo),.001);k(this,ir,e.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=u(this,ir).box;const i=new _5(u(this,Eo),.0025,.001,this._uiManager.direction==="ltr");k(this,ws,i.getOutlines());const{lastPoint:s}=u(this,ws).box;k(this,cu,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},n2=function({highlightOutlines:e,highlightId:i,clipPathId:s}){var p,m;if(k(this,ir,e),k(this,ws,e.getNewOutline(u(this,Ir)/2+1.5,.0025)),i>=0)k(this,xn,i),k(this,Zl,s),this.parent.drawLayer.finalizeLine(i,e),k(this,ji,this.parent.drawLayer.highlightOutline(u(this,ws)));else if(this.parent){const f=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(u(this,xn),e),this.parent.drawLayer.updateBox(u(this,xn),R(p=Me,xs,lh).call(p,u(this,ir).box,(f-this.rotation+360)%360)),this.parent.drawLayer.updateLine(u(this,ji),u(this,ws)),this.parent.drawLayer.updateBox(u(this,ji),R(m=Me,xs,lh).call(m,u(this,ws).box,f))}const{x:a,y:o,width:l,height:c}=e.box;switch(this.rotation){case 0:this.x=a,this.y=o,this.width=l,this.height=c;break;case 90:{const[f,b]=this.parentDimensions;this.x=o,this.y=1-a,this.width=l*b/f,this.height=c*f/b;break}case 180:this.x=1-a,this.y=1-o,this.width=l,this.height=c;break;case 270:{const[f,b]=this.parentDimensions;this.x=1-o,this.y=a,this.width=l*b/f,this.height=c*f/b;break}}const{lastPoint:d}=u(this,ws).box;k(this,cu,[(d[0]-a)/l,(d[1]-o)/c])},Zy=function(e){const i=r=>{var a,o;this.color=r,(a=this.parent)==null||a.drawLayer.changeColor(u(this,xn),r),(o=u(this,lu))==null||o.updateColor(r)},s=this.color;this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:se.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},tw=function(e){const i=u(this,Ir),s=r=>{k(this,Ir,r),R(this,ye,ew).call(this,r)};this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:se.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},ew=function(e){if(!u(this,es))return;R(this,ye,n2).call(this,{highlightOutlines:u(this,ir).getNewOutline(e/2)}),this.fixAndSetPosition();const[i,s]=this.parentDimensions;this.setDims(this.width*i,this.height*s)},s2=function(){u(this,xn)===null||!this.parent||(this.parent.drawLayer.remove(u(this,xn)),k(this,xn,null),this.parent.drawLayer.remove(u(this,ji)),k(this,ji,null))},vd=function(e=this.parent){u(this,xn)===null&&({id:On(this,xn)._,clipPathId:On(this,Zl)._}=e.drawLayer.highlight(u(this,ir),this.color,u(this,ec)),k(this,ji,e.drawLayer.highlightOutline(u(this,ws))),u(this,tc)&&(u(this,tc).style.clipPath=u(this,Zl)))},xs=new WeakSet,lh=function({x:e,y:i,width:s,height:r},a){switch(a){case 90:return{x:1-i-r,y:e,width:r,height:s};case 180:return{x:1-e-s,y:1-i-r,width:s,height:r};case 270:return{x:i,y:1-e-s,width:r,height:s}}return{x:e,y:i,width:s,height:r}},iw=function(e){Me._keyboardManager.exec(this,e)},Eg=function(e){if(!u(this,ou))return;const i=window.getSelection();e?i.setPosition(u(this,ou),u(this,Wf)):i.setPosition(u(this,Gf),u(this,$f))},bd=function(){return u(this,es)?this.rotation:0},nw=function(){if(u(this,es))return null;const[e,i]=this.pageDimensions,[s,r]=this.pageTranslation,a=u(this,Eo),o=new Float32Array(a.length*8);let l=0;for(const{x:c,y:d,width:p,height:m}of a){const f=c*e+s,b=(1-d-m)*i+r;o[l]=o[l+4]=f,o[l+1]=o[l+3]=b,o[l+2]=o[l+6]=f+p*e,o[l+5]=o[l+7]=b+m*i,l+=8}return o},sw=function(e){return u(this,ir).serialize(e,R(this,ye,bd).call(this))},rw=function(e,i){this._freeHighlight.add(i)&&e.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},aw=function(e,i){this._freeHighlight.isEmpty()?e.drawLayer.removeFreeHighlight(this._freeHighlightId):e.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},O(Me,xs),Ut(Me,"_defaultColor",null),Ut(Me,"_defaultOpacity",1),Ut(Me,"_defaultThickness",12),Ut(Me,"_l10nPromise"),Ut(Me,"_type","highlight"),Ut(Me,"_editorType",Se.HIGHLIGHT),Ut(Me,"_freeHighlightId",-1),Ut(Me,"_freeHighlight",null),Ut(Me,"_freeHighlightClipId","");let Yg=Me;var ic,nc,Mr,xa,As,sc,rc,ac,La,uu,oc,lc,Po,Mt,ow,lw,cw,hw,a2,uw,o2,dw,fw,pw,gw,mw,rl,l2,c2,h2,Pg,kg,ch,u2,Ng,Da,vw,d2,bw,yw,f2,Tg,yd;const ai=class ai extends De{constructor(e){super({...e,name:"inkEditor"});O(this,Mt);O(this,ic,0);O(this,nc,0);O(this,Mr,null);O(this,xa,new Path2D);O(this,As,!1);O(this,sc,null);O(this,rc,!1);O(this,ac,!1);O(this,La,null);O(this,uu,null);O(this,oc,0);O(this,lc,0);O(this,Po,null);this.color=e.color||null,this.thickness=e.thickness||null,this.opacity=e.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(e,i){De.initialize(e,i)}static updateDefaultParams(e,i){switch(e){case se.INK_THICKNESS:ai._defaultThickness=i;break;case se.INK_COLOR:ai._defaultColor=i;break;case se.INK_OPACITY:ai._defaultOpacity=i/100;break}}updateParams(e,i){switch(e){case se.INK_THICKNESS:R(this,Mt,ow).call(this,i);break;case se.INK_COLOR:R(this,Mt,lw).call(this,i);break;case se.INK_OPACITY:R(this,Mt,cw).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[se.INK_THICKNESS,ai._defaultThickness],[se.INK_COLOR,ai._defaultColor||De._defaultLineColor],[se.INK_OPACITY,Math.round(ai._defaultOpacity*100)]]}get propertiesToUpdate(){return[[se.INK_THICKNESS,this.thickness||ai._defaultThickness],[se.INK_COLOR,this.color||ai._defaultColor||De._defaultLineColor],[se.INK_OPACITY,Math.round(100*(this.opacity??ai._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(R(this,Mt,Pg).call(this),R(this,Mt,kg).call(this)),this.isAttachedToDOM||(this.parent.add(this),R(this,Mt,ch).call(this)),R(this,Mt,yd).call(this)))}remove(){var e;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,u(this,Mr)&&(clearTimeout(u(this,Mr)),k(this,Mr,null)),(e=u(this,La))==null||e.disconnect(),k(this,La,null),super.remove())}setParent(e){!this.parent&&e?this._uiManager.removeShouldRescale(this):this.parent&&e===null&&this._uiManager.addShouldRescale(this),super.setParent(e)}onScaleChanging(){const[e,i]=this.parentDimensions,s=this.width*e,r=this.height*i;this.setDimensions(s,r)}enableEditMode(){u(this,As)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,R(this,Mt,l2).call(this))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),R(this,Mt,c2).call(this))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){u(this,As)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),k(this,As,!0),this.div.classList.add("disabled"),R(this,Mt,yd).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),this.enableEditMode())}canvasPointerdown(e){e.button!==0||!this.isInEditMode()||u(this,As)||(this.setInForeground(),e.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),R(this,Mt,uw).call(this,e.offsetX,e.offsetY))}canvasPointermove(e){e.preventDefault(),R(this,Mt,o2).call(this,e.offsetX,e.offsetY)}canvasPointerup(e){e.preventDefault(),R(this,Mt,h2).call(this,e)}canvasPointerleave(e){R(this,Mt,h2).call(this,e)}get isResizable(){return!this.isEmpty()&&u(this,As)}render(){if(this.div)return this.div;let e,i;this.width&&(e=this.x,i=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[s,r,a,o]=R(this,Mt,hw).call(this);if(this.setAt(s,r,0,0),this.setDims(a,o),R(this,Mt,Pg).call(this),this.width){const[l,c]=this.parentDimensions;this.setAspectRatio(this.width*l,this.height*c),this.setAt(e*l,i*c,this.width*l,this.height*c),k(this,ac,!0),R(this,Mt,ch).call(this),this.setDims(this.width*l,this.height*c),R(this,Mt,rl).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return R(this,Mt,kg).call(this),this.div}setDimensions(e,i){const s=Math.round(e),r=Math.round(i);if(u(this,oc)===s&&u(this,lc)===r)return;k(this,oc,s),k(this,lc,r),this.canvas.style.visibility="hidden";const[a,o]=this.parentDimensions;this.width=e/a,this.height=i/o,this.fixAndSetPosition(),u(this,As)&&R(this,Mt,u2).call(this,e,i),R(this,Mt,ch).call(this),R(this,Mt,rl).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(e,i,s){var S,A,x;if(e instanceof By)return null;const r=super.deserialize(e,i,s);r.thickness=e.thickness,r.color=$t.makeHexColor(...e.color),r.opacity=e.opacity;const[a,o]=r.pageDimensions,l=r.width*a,c=r.height*o,d=r.parentScale,p=e.thickness/2;k(r,As,!0),k(r,oc,Math.round(l)),k(r,lc,Math.round(c));const{paths:m,rect:f,rotation:b}=e;for(let{bezier:M}of m){M=R(S=ai,Da,bw).call(S,M,f,b);const q=[];r.paths.push(q);let U=d*(M[0]-p),X=d*(M[1]-p);for(let B=2,Q=M.length;B<Q;B+=6){const ct=d*(M[B]-p),P=d*(M[B+1]-p),N=d*(M[B+2]-p),V=d*(M[B+3]-p),j=d*(M[B+4]-p),J=d*(M[B+5]-p);q.push([[U,X],[ct,P],[N,V],[j,J]]),U=j,X=J}const G=R(this,Da,vw).call(this,q);r.bezierPath2D.push(G)}const w=R(A=r,Mt,f2).call(A);return k(r,nc,Math.max(De.MIN_SIZE,w[2]-w[0])),k(r,ic,Math.max(De.MIN_SIZE,w[3]-w[1])),R(x=r,Mt,u2).call(x,l,c),r}serialize(){if(this.isEmpty())return null;const e=this.getRect(0,0),i=De._colorManager.convert(this.ctx.strokeStyle);return{annotationType:Se.INK,color:i,thickness:this.thickness,opacity:this.opacity,paths:R(this,Mt,yw).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,e),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};ic=new WeakMap,nc=new WeakMap,Mr=new WeakMap,xa=new WeakMap,As=new WeakMap,sc=new WeakMap,rc=new WeakMap,ac=new WeakMap,La=new WeakMap,uu=new WeakMap,oc=new WeakMap,lc=new WeakMap,Po=new WeakMap,Mt=new WeakSet,ow=function(e){const i=r=>{this.thickness=r,R(this,Mt,yd).call(this)},s=this.thickness;this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:se.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},lw=function(e){const i=r=>{this.color=r,R(this,Mt,rl).call(this)},s=this.color;this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:se.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},cw=function(e){const i=r=>{this.opacity=r,R(this,Mt,rl).call(this)};e/=100;const s=this.opacity;this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:se.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},hw=function(){const{parentRotation:e,parentDimensions:[i,s]}=this;switch(e){case 90:return[0,s,s,i];case 180:return[i,s,i,s];case 270:return[i,0,s,i];default:return[0,0,i,s]}},a2=function(){const{ctx:e,color:i,opacity:s,thickness:r,parentScale:a,scaleFactor:o}=this;e.lineWidth=r*a/o,e.lineCap="round",e.lineJoin="round",e.miterLimit=10,e.strokeStyle=`${i}${FS(s)}`},uw=function(e,i){this.canvas.addEventListener("contextmenu",Cs,{signal:this._uiManager._signal}),R(this,Mt,c2).call(this),k(this,sc,new AbortController);const s=this._uiManager.combinedSignal(u(this,sc));this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:s}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:s}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:s}),this.isEditing=!0,u(this,ac)||(k(this,ac,!0),R(this,Mt,ch).call(this),this.thickness||(this.thickness=ai._defaultThickness),this.color||(this.color=ai._defaultColor||De._defaultLineColor),this.opacity??(this.opacity=ai._defaultOpacity)),this.currentPath.push([e,i]),k(this,rc,!1),R(this,Mt,a2).call(this),k(this,Po,()=>{R(this,Mt,pw).call(this),u(this,Po)&&window.requestAnimationFrame(u(this,Po))}),window.requestAnimationFrame(u(this,Po))},o2=function(e,i){const[s,r]=this.currentPath.at(-1);if(this.currentPath.length>1&&e===s&&i===r)return;const a=this.currentPath;let o=u(this,xa);if(a.push([e,i]),k(this,rc,!0),a.length<=2){o.moveTo(...a[0]),o.lineTo(e,i);return}a.length===3&&(k(this,xa,o=new Path2D),o.moveTo(...a[0])),R(this,Mt,gw).call(this,o,...a.at(-3),...a.at(-2),e,i)},dw=function(){if(this.currentPath.length===0)return;const e=this.currentPath.at(-1);u(this,xa).lineTo(...e)},fw=function(e,i){k(this,Po,null),e=Math.min(Math.max(e,0),this.canvas.width),i=Math.min(Math.max(i,0),this.canvas.height),R(this,Mt,o2).call(this,e,i),R(this,Mt,dw).call(this);let s;if(this.currentPath.length!==1)s=R(this,Mt,mw).call(this);else{const c=[e,i];s=[[c,c.slice(),c.slice(),c]]}const r=u(this,xa),a=this.currentPath;this.currentPath=[],k(this,xa,new Path2D);const o=()=>{this.allRawPaths.push(a),this.paths.push(s),this.bezierPath2D.push(r),this._uiManager.rebuild(this)},l=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(R(this,Mt,Pg).call(this),R(this,Mt,kg).call(this)),R(this,Mt,yd).call(this))};this.addCommands({cmd:o,undo:l,mustExec:!0})},pw=function(){if(!u(this,rc))return;k(this,rc,!1);const e=Math.ceil(this.thickness*this.parentScale),i=this.currentPath.slice(-3),s=i.map(o=>o[0]),r=i.map(o=>o[1]);Math.min(...s)-e,Math.max(...s)+e,Math.min(...r)-e,Math.max(...r)+e;const{ctx:a}=this;a.save(),a.clearRect(0,0,this.canvas.width,this.canvas.height);for(const o of this.bezierPath2D)a.stroke(o);a.stroke(u(this,xa)),a.restore()},gw=function(e,i,s,r,a,o,l){const c=(i+r)/2,d=(s+a)/2,p=(r+o)/2,m=(a+l)/2;e.bezierCurveTo(c+2*(r-c)/3,d+2*(a-d)/3,p+2*(r-p)/3,m+2*(a-m)/3,p,m)},mw=function(){const e=this.currentPath;if(e.length<=2)return[[e[0],e[0],e.at(-1),e.at(-1)]];const i=[];let s,[r,a]=e[0];for(s=1;s<e.length-2;s++){const[f,b]=e[s],[w,S]=e[s+1],A=(f+w)/2,x=(b+S)/2,M=[r+2*(f-r)/3,a+2*(b-a)/3],q=[A+2*(f-A)/3,x+2*(b-x)/3];i.push([[r,a],M,q,[A,x]]),[r,a]=[A,x]}const[o,l]=e[s],[c,d]=e[s+1],p=[r+2*(o-r)/3,a+2*(l-a)/3],m=[c+2*(o-c)/3,d+2*(l-d)/3];return i.push([[r,a],p,m,[c,d]]),i},rl=function(){if(this.isEmpty()){R(this,Mt,Ng).call(this);return}R(this,Mt,a2).call(this);const{canvas:e,ctx:i}=this;i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,e.width,e.height),R(this,Mt,Ng).call(this);for(const s of this.bezierPath2D)i.stroke(s)},l2=function(){if(u(this,uu))return;k(this,uu,new AbortController);const e=this._uiManager.combinedSignal(u(this,uu));this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:e})},c2=function(){var e;(e=this.pointerdownAC)==null||e.abort(),this.pointerdownAC=null},h2=function(e){var i;(i=u(this,sc))==null||i.abort(),k(this,sc,null),R(this,Mt,l2).call(this),u(this,Mr)&&clearTimeout(u(this,Mr)),k(this,Mr,setTimeout(()=>{k(this,Mr,null),this.canvas.removeEventListener("contextmenu",Cs)},10)),R(this,Mt,fw).call(this,e.offsetX,e.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Pg=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},kg=function(){k(this,La,new ResizeObserver(e=>{const i=e[0].contentRect;i.width&&i.height&&this.setDimensions(i.width,i.height)})),u(this,La).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var e;(e=u(this,La))==null||e.disconnect(),k(this,La,null)},{once:!0})},ch=function(){if(!u(this,ac))return;const[e,i]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*i),R(this,Mt,Ng).call(this)},u2=function(e,i){const s=R(this,Mt,Tg).call(this),r=(e-s)/u(this,nc),a=(i-s)/u(this,ic);this.scaleFactor=Math.min(r,a)},Ng=function(){const e=R(this,Mt,Tg).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)},Da=new WeakSet,vw=function(e){const i=new Path2D;for(let s=0,r=e.length;s<r;s++){const[a,o,l,c]=e[s];s===0&&i.moveTo(...a),i.bezierCurveTo(o[0],o[1],l[0],l[1],c[0],c[1])}return i},d2=function(e,i,s){const[r,a,o,l]=i;switch(s){case 0:for(let c=0,d=e.length;c<d;c+=2)e[c]+=r,e[c+1]=l-e[c+1];break;case 90:for(let c=0,d=e.length;c<d;c+=2){const p=e[c];e[c]=e[c+1]+r,e[c+1]=p+a}break;case 180:for(let c=0,d=e.length;c<d;c+=2)e[c]=o-e[c],e[c+1]+=a;break;case 270:for(let c=0,d=e.length;c<d;c+=2){const p=e[c];e[c]=o-e[c+1],e[c+1]=l-p}break;default:throw new Error("Invalid rotation")}return e},bw=function(e,i,s){const[r,a,o,l]=i;switch(s){case 0:for(let c=0,d=e.length;c<d;c+=2)e[c]-=r,e[c+1]=l-e[c+1];break;case 90:for(let c=0,d=e.length;c<d;c+=2){const p=e[c];e[c]=e[c+1]-a,e[c+1]=p-r}break;case 180:for(let c=0,d=e.length;c<d;c+=2)e[c]=o-e[c],e[c+1]-=a;break;case 270:for(let c=0,d=e.length;c<d;c+=2){const p=e[c];e[c]=l-e[c+1],e[c+1]=o-p}break;default:throw new Error("Invalid rotation")}return e},yw=function(e,i,s,r){var d,p;const a=[],o=this.thickness/2,l=e*i+o,c=e*s+o;for(const m of this.paths){const f=[],b=[];for(let w=0,S=m.length;w<S;w++){const[A,x,M,q]=m[w];if(A[0]===q[0]&&A[1]===q[1]&&S===1){const V=e*A[0]+l,j=e*A[1]+c;f.push(V,j),b.push(V,j);break}const U=e*A[0]+l,X=e*A[1]+c,G=e*x[0]+l,B=e*x[1]+c,Q=e*M[0]+l,ct=e*M[1]+c,P=e*q[0]+l,N=e*q[1]+c;w===0&&(f.push(U,X),b.push(U,X)),f.push(G,B,Q,ct,P,N),b.push(G,B),w===S-1&&b.push(P,N)}a.push({bezier:R(d=ai,Da,d2).call(d,f,r,this.rotation),points:R(p=ai,Da,d2).call(p,b,r,this.rotation)})}return a},f2=function(){let e=1/0,i=-1/0,s=1/0,r=-1/0;for(const a of this.paths)for(const[o,l,c,d]of a){const p=$t.bezierBoundingBox(...o,...l,...c,...d);e=Math.min(e,p[0]),s=Math.min(s,p[1]),i=Math.max(i,p[2]),r=Math.max(r,p[3])}return[e,s,i,r]},Tg=function(){return u(this,As)?Math.ceil(this.thickness*this.parentScale):0},yd=function(e=!1){if(this.isEmpty())return;if(!u(this,As)){R(this,Mt,rl).call(this);return}const i=R(this,Mt,f2).call(this),s=R(this,Mt,Tg).call(this);k(this,nc,Math.max(De.MIN_SIZE,i[2]-i[0])),k(this,ic,Math.max(De.MIN_SIZE,i[3]-i[1]));const r=Math.ceil(s+u(this,nc)*this.scaleFactor),a=Math.ceil(s+u(this,ic)*this.scaleFactor),[o,l]=this.parentDimensions;this.width=r/o,this.height=a/l,this.setAspectRatio(r,a);const c=this.translationX,d=this.translationY;this.translationX=-i[0],this.translationY=-i[1],R(this,Mt,ch).call(this),R(this,Mt,rl).call(this),k(this,oc,r),k(this,lc,a),this.setDims(r,a);const p=e?s/this.scaleFactor/2:0;this.translate(c-this.translationX-p,d-this.translationY-p)},O(ai,Da),Ut(ai,"_defaultColor",null),Ut(ai,"_defaultOpacity",1),Ut(ai,"_defaultThickness",1),Ut(ai,"_type","ink"),Ut(ai,"_editorType",Se.INK);let r2=ai;var wi,rn,ko,Ca,No,du,Rr,Ea,Fr,_s,Yf,Pe,wd,Ad,Ig,g2,ww,m2,v2,Mg,Aw;const Cd=class Cd extends De{constructor(e){super({...e,name:"stampEditor"});O(this,Pe);O(this,wi,null);O(this,rn,null);O(this,ko,null);O(this,Ca,null);O(this,No,null);O(this,du,"");O(this,Rr,null);O(this,Ea,null);O(this,Fr,null);O(this,_s,!1);O(this,Yf,!1);k(this,Ca,e.bitmapUrl),k(this,No,e.bitmapFile)}static initialize(e,i){De.initialize(e,i)}static get supportedTypes(){return Le(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(i=>`image/${i}`))}static get supportedTypesStr(){return Le(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,i){i.pasteEditor(Se.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const i=e.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}async mlGuessAltText(e=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:a,height:o}=e||this.copyCanvas(null,!0).imageData,l=await s.guess({name:"altText",request:{data:r,width:a,height:o,channels:r.length/(a*o)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const c=l.output;return await this.setGuessedAltText(c),i&&!this.hasAltTextData()&&(this.altTextData={alt:c,decorative:!1}),c}remove(){var e,i;u(this,rn)&&(k(this,wi,null),this._uiManager.imageManager.deleteId(u(this,rn)),(e=u(this,Rr))==null||e.remove(),k(this,Rr,null),(i=u(this,Ea))==null||i.disconnect(),k(this,Ea,null),u(this,Fr)&&(clearTimeout(u(this,Fr)),k(this,Fr,null))),super.remove()}rebuild(){if(!this.parent){u(this,rn)&&R(this,Pe,Ig).call(this);return}super.rebuild(),this.div!==null&&(u(this,rn)&&u(this,Rr)===null&&R(this,Pe,Ig).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(u(this,ko)||u(this,wi)||u(this,Ca)||u(this,No)||u(this,rn))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,i;if(this.width&&(e=this.x,i=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),u(this,wi)?R(this,Pe,g2).call(this):R(this,Pe,Ig).call(this),this.width){const[s,r]=this.parentDimensions;this.setAt(e*s,i*r,this.width*s,this.height*r)}return this.div}copyCanvas(e,i=!1){var S;e||(e=224);const{width:s,height:r}=u(this,wi),a=document.createElement("canvas");let o=u(this,wi),l=s,c=r;if(s>e||r>e){const A=Math.min(e/s,e/r);l=Math.floor(s*A),c=Math.floor(r*A),u(this,_s)||(o=R(this,Pe,m2).call(this,l,c))}a.width=l,a.height=c;const d=a.getContext("2d");d.filter=this._uiManager.hcmFilter;let p="white",m="#cfcfd8";this._uiManager.hcmFilter!=="none"?m="black":(S=window.matchMedia)!=null&&S.call(window,"(prefers-color-scheme: dark)").matches&&(p="#8f8f9d",m="#42414d");const f=15,b=new OffscreenCanvas(f*2,f*2),w=b.getContext("2d");if(w.fillStyle=p,w.fillRect(0,0,f*2,f*2),w.fillStyle=m,w.fillRect(0,0,f,f),w.fillRect(f,f,f,f),d.fillStyle=d.createPattern(b,"repeat"),d.fillRect(0,0,l,c),i){const A=new OffscreenCanvas(l,c),x=A.getContext("2d",{willReadFrequently:!0});x.drawImage(o,0,0,o.width,o.height,0,0,l,c);const M=x.getImageData(0,0,l,c).data;return d.drawImage(A,0,0),{canvas:a,imageData:{width:l,height:c,data:M}}}return d.drawImage(o,0,0,o.width,o.height,0,0,l,c),{canvas:a,imageData:null}}getImageForAltText(){return u(this,Rr)}static deserialize(e,i,s){if(e instanceof jy)return null;const r=super.deserialize(e,i,s),{rect:a,bitmapUrl:o,bitmapId:l,isSvg:c,accessibilityData:d}=e;l&&s.imageManager.isValidId(l)?k(r,rn,l):k(r,Ca,o),k(r,_s,c);const[p,m]=r.pageDimensions;return r.width=(a[2]-a[0])/p,r.height=(a[3]-a[1])/m,d&&(r.altTextData=d),r}serialize(e=!1,i=null){if(this.isEmpty())return null;const s={annotationType:Se.STAMP,bitmapId:u(this,rn),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:u(this,_s),structTreeParentId:this._structTreeParentId};if(e)return s.bitmapUrl=R(this,Pe,Mg).call(this,!0),s.accessibilityData=this.serializeAltText(!0),s;const{decorative:r,altText:a}=this.serializeAltText(!1);if(!r&&a&&(s.accessibilityData={type:"Figure",alt:a}),i===null)return s;i.stamps||(i.stamps=new Map);const o=u(this,_s)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!i.stamps.has(u(this,rn)))i.stamps.set(u(this,rn),{area:o,serialized:s}),s.bitmap=R(this,Pe,Mg).call(this,!1);else if(u(this,_s)){const l=i.stamps.get(u(this,rn));o>l.area&&(l.area=o,l.serialized.bitmap.close(),l.serialized.bitmap=R(this,Pe,Mg).call(this,!1))}return s}};wi=new WeakMap,rn=new WeakMap,ko=new WeakMap,Ca=new WeakMap,No=new WeakMap,du=new WeakMap,Rr=new WeakMap,Ea=new WeakMap,Fr=new WeakMap,_s=new WeakMap,Yf=new WeakMap,Pe=new WeakSet,wd=function(e,i=!1){if(!e){this.remove();return}k(this,wi,e.bitmap),i||(k(this,rn,e.id),k(this,_s,e.isSvg)),e.file&&k(this,du,e.file.name),R(this,Pe,g2).call(this)},Ad=function(){if(k(this,ko,null),this._uiManager.enableWaiting(!1),!!u(this,Rr)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,wi)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,wi)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Ig=function(){if(u(this,rn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(u(this,rn)).then(s=>R(this,Pe,wd).call(this,s,!0)).finally(()=>R(this,Pe,Ad).call(this));return}if(u(this,Ca)){const s=u(this,Ca);k(this,Ca,null),this._uiManager.enableWaiting(!0),k(this,ko,this._uiManager.imageManager.getFromUrl(s).then(r=>R(this,Pe,wd).call(this,r)).finally(()=>R(this,Pe,Ad).call(this)));return}if(u(this,No)){const s=u(this,No);k(this,No,null),this._uiManager.enableWaiting(!0),k(this,ko,this._uiManager.imageManager.getFromFile(s).then(r=>R(this,Pe,wd).call(this,r)).finally(()=>R(this,Pe,Ad).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=Cd.supportedTypesStr;const i=this._uiManager._signal;k(this,ko,new Promise(s=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),R(this,Pe,wd).call(this,r)}s()},{signal:i}),e.addEventListener("cancel",()=>{this.remove(),s()},{signal:i})}).finally(()=>R(this,Pe,Ad).call(this))),e.click()},g2=function(){const{div:e}=this;let{width:i,height:s}=u(this,wi);const[r,a]=this.pageDimensions,o=.75;if(this.width)i=this.width*r,s=this.height*a;else if(i>o*r||s>o*a){const p=Math.min(o*r/i,o*a/s);i*=p,s*=p}const[l,c]=this.parentDimensions;this.setDims(i*l/r,s*c/a),this._uiManager.enableWaiting(!1);const d=k(this,Rr,document.createElement("canvas"));e.append(d),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow)&&(e.hidden=!1),R(this,Pe,v2).call(this,i,s),R(this,Pe,Aw).call(this),u(this,Yf)||(this.parent.addUndoableEditor(this),k(this,Yf,!0)),this._reportTelemetry({action:"inserted_image"}),u(this,du)&&d.setAttribute("aria-label",u(this,du))},ww=function(e,i){var o;const[s,r]=this.parentDimensions;this.width=e/s,this.height=i/r,this.setDims(e,i),(o=this._initialOptions)!=null&&o.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,u(this,Fr)!==null&&clearTimeout(u(this,Fr)),k(this,Fr,setTimeout(()=>{k(this,Fr,null),R(this,Pe,v2).call(this,e,i)},200))},m2=function(e,i){const{width:s,height:r}=u(this,wi);let a=s,o=r,l=u(this,wi);for(;a>2*e||o>2*i;){const c=a,d=o;a>2*e&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),o>2*i&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const p=new OffscreenCanvas(a,o);p.getContext("2d").drawImage(l,0,0,c,d,0,0,a,o),l=p.transferToImageBitmap()}return l},v2=function(e,i){e=Math.ceil(e),i=Math.ceil(i);const s=u(this,Rr);if(!s||s.width===e&&s.height===i)return;s.width=e,s.height=i;const r=u(this,_s)?u(this,wi):R(this,Pe,m2).call(this,e,i),a=s.getContext("2d");a.filter=this._uiManager.hcmFilter,a.drawImage(r,0,0,r.width,r.height,0,0,e,i)},Mg=function(e){if(e){if(u(this,_s)){const r=this._uiManager.imageManager.getSvgUrl(u(this,rn));if(r)return r}const i=document.createElement("canvas");return{width:i.width,height:i.height}=u(this,wi),i.getContext("2d").drawImage(u(this,wi),0,0),i.toDataURL()}if(u(this,_s)){const[i,s]=this.pageDimensions,r=Math.round(this.width*i*Do.PDF_TO_CSS_UNITS),a=Math.round(this.height*s*Do.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(r,a);return o.getContext("2d").drawImage(u(this,wi),0,0,u(this,wi).width,u(this,wi).height,0,0,r,a),o.transferToImageBitmap()}return structuredClone(u(this,wi))},Aw=function(){this._uiManager._signal&&(k(this,Ea,new ResizeObserver(e=>{const i=e[0].contentRect;i.width&&i.height&&R(this,Pe,ww).call(this,i.width,i.height)})),u(this,Ea).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var e;(e=u(this,Ea))==null||e.disconnect(),k(this,Ea,null)},{once:!0}))},Ut(Cd,"_type","stamp"),Ut(Cd,"_editorType",Se.STAMP);let p2=Cd;var cc,fu,Or,To,Pa,is,Io,pu,gu,Ln,ka,Kt,Mo,an,_w,y2,w2,A2,Rg;const Hs=class Hs{constructor({uiManager:t,pageIndex:e,div:i,accessibilityManager:s,annotationLayer:r,drawLayer:a,textLayer:o,viewport:l,l10n:c}){O(this,an);O(this,cc);O(this,fu,!1);O(this,Or,null);O(this,To,null);O(this,Pa,null);O(this,is,new Map);O(this,Io,!1);O(this,pu,!1);O(this,gu,!1);O(this,Ln,null);O(this,ka,null);O(this,Kt);const d=[...u(Hs,Mo).values()];if(!Hs._initialized){Hs._initialized=!0;for(const p of d)p.initialize(c,t)}t.registerEditorTypes(d),k(this,Kt,t),this.pageIndex=e,this.div=i,k(this,cc,s),k(this,Or,r),this.viewport=l,k(this,Ln,o),this.drawLayer=a,u(this,Kt).addLayer(this)}get isEmpty(){return u(this,is).size===0}get isInvisible(){return this.isEmpty&&u(this,Kt).getMode()===Se.NONE}updateToolbar(t){u(this,Kt).updateToolbar(t)}updateMode(t=u(this,Kt).getMode()){switch(R(this,an,Rg).call(this),t){case Se.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Se.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case Se.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const i of u(Hs,Mo).values())e.toggle(`${i._type}Editing`,t===i._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=u(this,Ln))==null?void 0:e.div)}addInkEditorIfNeeded(t){if(u(this,Kt).getMode()!==Se.INK)return;if(!t){for(const i of u(this,is).values())if(i.isEmpty()){i.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(t){u(this,Kt).setEditingState(t)}addCommands(t){u(this,Kt).addCommands(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=u(this,Or))==null||e.div.classList.toggle("disabled",!t)}enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const i of u(this,is).values())i.enableEditing(),i.show(!0),i.annotationElementId&&(u(this,Kt).removeChangedExistingAnnotation(i),t.add(i.annotationElementId));if(!u(this,Or))return;const e=u(this,Or).getEditableAnnotations();for(const i of e){if(i.hide(),u(this,Kt).isDeletedAnnotationElement(i.data.id)||t.has(i.data.id))continue;const s=this.deserialize(i);s&&(this.addOrRebuild(s),s.enableEditing())}}disable(){var s;k(this,gu,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const r of u(this,is).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){t.set(r.annotationElementId,r);continue}else e.set(r.annotationElementId,r);(s=this.getEditableAnnotation(r.annotationElementId))==null||s.show(),r.remove()}if(u(this,Or)){const r=u(this,Or).getEditableAnnotations();for(const a of r){const{id:o}=a.data;if(u(this,Kt).isDeletedAnnotationElement(o))continue;let l=e.get(o);if(l){l.resetAnnotationElement(a),l.show(!1),a.show();continue}l=t.get(o),l&&(u(this,Kt).addChangedExistingAnnotation(l),l.renderAnnotationElement(a),l.show(!1)),a.show()}}R(this,an,Rg).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const r of u(Hs,Mo).values())i.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),k(this,gu,!1)}getEditableAnnotation(t){var e;return((e=u(this,Or))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){u(this,Kt).getActive()!==t&&u(this,Kt).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=u(this,Ln))!=null&&t.div&&!u(this,ka)){k(this,ka,new AbortController);const e=u(this,Kt).combinedSignal(u(this,ka));u(this,Ln).div.addEventListener("pointerdown",R(this,an,_w).bind(this),{signal:e}),u(this,Ln).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=u(this,Ln))!=null&&t.div&&u(this,ka)&&(u(this,ka).abort(),k(this,ka,null),u(this,Ln).div.classList.remove("highlighting"))}enableClick(){if(u(this,To))return;k(this,To,new AbortController);const t=u(this,Kt).combinedSignal(u(this,To));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:t})}disableClick(){var t;(t=u(this,To))==null||t.abort(),k(this,To,null)}attach(t){u(this,is).set(t.id,t);const{annotationElementId:e}=t;e&&u(this,Kt).isDeletedAnnotationElement(e)&&u(this,Kt).removeDeletedAnnotationElement(t)}detach(t){var e;u(this,is).delete(t.id),(e=u(this,cc))==null||e.removePointerInTextLayer(t.contentDiv),!u(this,gu)&&t.annotationElementId&&u(this,Kt).addDeletedAnnotationElement(t)}remove(t){this.detach(t),u(this,Kt).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1,u(this,pu)||this.addInkEditorIfNeeded(!1)}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(u(this,Kt).addDeletedAnnotationElement(t.annotationElementId),De.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),u(this,Kt).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(),u(this,Kt).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var i;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!u(this,Pa)&&(t._focusEventsAllowed=!1,k(this,Pa,setTimeout(()=>{k(this,Pa,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:u(this,Kt)._signal}),e.focus())},0))),t._structTreeParentId=(i=u(this,cc))==null?void 0:i.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),i=()=>{t.remove()};this.addCommands({cmd:e,undo:i,mustExec:!1})}getNextId(){return u(this,Kt).getId()}combinedSignal(t){return u(this,Kt).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=u(this,an,y2))==null?void 0:t.canCreateNewEmptyEditor()}pasteEditor(t,e){u(this,Kt).updateToolbar(t),u(this,Kt).updateMode(t);const{offsetX:i,offsetY:s}=R(this,an,A2).call(this),r=this.getNextId(),a=R(this,an,w2).call(this,{parent:this,id:r,x:i,y:s,uiManager:u(this,Kt),isCentered:!0,...e});a&&this.add(a)}deserialize(t){var e;return((e=u(Hs,Mo).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,u(this,Kt)))||null}createAndAddNewEditor(t,e,i={}){const s=this.getNextId(),r=R(this,an,w2).call(this,{parent:this,id:s,x:t.offsetX,y:t.offsetY,uiManager:u(this,Kt),isCentered:e,...i});return r&&this.add(r),r}addNewEditor(){this.createAndAddNewEditor(R(this,an,A2).call(this),!0)}setSelected(t){u(this,Kt).setSelected(t)}toggleSelected(t){u(this,Kt).toggleSelected(t)}isSelected(t){return u(this,Kt).isSelected(t)}unselect(t){u(this,Kt).unselect(t)}pointerup(t){const{isMac:e}=zn.platform;if(!(t.button!==0||t.ctrlKey&&e)&&t.target===this.div&&u(this,Io)){if(k(this,Io,!1),!u(this,fu)){k(this,fu,!0);return}if(u(this,Kt).getMode()===Se.STAMP){u(this,Kt).unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){if(u(this,Kt).getMode()===Se.HIGHLIGHT&&this.enableTextSelection(),u(this,Io)){k(this,Io,!1);return}const{isMac:e}=zn.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;k(this,Io,!0);const i=u(this,Kt).getActive();k(this,fu,!i||i.isEmpty())}findNewParent(t,e,i){const s=u(this,Kt).findParent(e,i);return s===null||s===this?!1:(s.changeParent(t),!0)}destroy(){var t,e;((t=u(this,Kt).getActive())==null?void 0:t.parent)===this&&(u(this,Kt).commitOrRemove(),u(this,Kt).setActiveEditor(null)),u(this,Pa)&&(clearTimeout(u(this,Pa)),k(this,Pa,null));for(const i of u(this,is).values())(e=u(this,cc))==null||e.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,u(this,is).clear(),u(this,Kt).removeLayer(this)}render({viewport:t}){this.viewport=t,gc(this.div,t);for(const e of u(this,Kt).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){u(this,Kt).commitOrRemove(),R(this,an,Rg).call(this);const e=this.viewport.rotation,i=t.rotation;if(this.viewport=t,gc(this.div,{rotation:i}),e!==i)for(const s of u(this,is).values())s.rotate(i);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return u(this,Kt).viewParameters.realScale}};cc=new WeakMap,fu=new WeakMap,Or=new WeakMap,To=new WeakMap,Pa=new WeakMap,is=new WeakMap,Io=new WeakMap,pu=new WeakMap,gu=new WeakMap,Ln=new WeakMap,ka=new WeakMap,Kt=new WeakMap,Mo=new WeakMap,an=new WeakSet,_w=function(t){u(this,Kt).unselectAll();const{target:e}=t;if(e===u(this,Ln).div||e.classList.contains("endOfContent")&&u(this,Ln).div.contains(e)){const{isMac:i}=zn.platform;if(t.button!==0||t.ctrlKey&&i)return;u(this,Kt).showAllEditors("highlight",!0,!0),u(this,Ln).div.classList.add("free"),this.toggleDrawing(),Yg.startHighlighting(this,u(this,Kt).direction==="ltr",t),u(this,Ln).div.addEventListener("pointerup",()=>{u(this,Ln).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:u(this,Kt)._signal}),t.preventDefault()}},y2=function(){return u(Hs,Mo).get(u(this,Kt).getMode())},w2=function(t){const e=u(this,an,y2);return e?new e.prototype.constructor(t):null},A2=function(){const{x:t,y:e,width:i,height:s}=this.div.getBoundingClientRect(),r=Math.max(0,t),a=Math.max(0,e),o=Math.min(window.innerWidth,t+i),l=Math.min(window.innerHeight,e+s),c=(r+o)/2-t,d=(a+l)/2-e,[p,m]=this.viewport.rotation%180===0?[c,d]:[d,c];return{offsetX:p,offsetY:m}},Rg=function(){k(this,pu,!0);for(const t of u(this,is).values())t.isEmpty()&&t.remove();k(this,pu,!1)},Ut(Hs,"_initialized",!1),O(Hs,Mo,new Map([Y0,r2,p2,Yg].map(t=>[t._editorType,t])));let b2=Hs;var Dr,Kf,qi,Ro,Jf,S2,yc,x2,Sw;const en=class en{constructor({pageIndex:t}){O(this,yc);O(this,Dr,null);O(this,Kf,0);O(this,qi,new Map);O(this,Ro,new Map);this.pageIndex=t}setParent(t){if(!u(this,Dr)){k(this,Dr,t);return}if(u(this,Dr)!==t){if(u(this,qi).size>0)for(const e of u(this,qi).values())e.remove(),t.append(e);k(this,Dr,t)}}static get _svgFactory(){return Le(this,"_svgFactory",new K2)}highlight(t,e,i,s=!1){const r=On(this,Kf)._++,a=R(this,yc,x2).call(this,t.box);a.classList.add("highlight"),t.free&&a.classList.add("free");const o=en._svgFactory.createElement("defs");a.append(o);const l=en._svgFactory.createElement("path");o.append(l);const c=`path_p${this.pageIndex}_${r}`;l.setAttribute("id",c),l.setAttribute("d",t.toSVGPath()),s&&u(this,Ro).set(r,l);const d=R(this,yc,Sw).call(this,o,c),p=en._svgFactory.createElement("use");return a.append(p),a.setAttribute("fill",e),a.setAttribute("fill-opacity",i),p.setAttribute("href",`#${c}`),u(this,qi).set(r,a),{id:r,clipPathId:`url(#${d})`}}highlightOutline(t){const e=On(this,Kf)._++,i=R(this,yc,x2).call(this,t.box);i.classList.add("highlightOutline");const s=en._svgFactory.createElement("defs");i.append(s);const r=en._svgFactory.createElement("path");s.append(r);const a=`path_p${this.pageIndex}_${e}`;r.setAttribute("id",a),r.setAttribute("d",t.toSVGPath()),r.setAttribute("vector-effect","non-scaling-stroke");let o;if(t.free){i.classList.add("free");const d=en._svgFactory.createElement("mask");s.append(d),o=`mask_p${this.pageIndex}_${e}`,d.setAttribute("id",o),d.setAttribute("maskUnits","objectBoundingBox");const p=en._svgFactory.createElement("rect");d.append(p),p.setAttribute("width","1"),p.setAttribute("height","1"),p.setAttribute("fill","white");const m=en._svgFactory.createElement("use");d.append(m),m.setAttribute("href",`#${a}`),m.setAttribute("stroke","none"),m.setAttribute("fill","black"),m.setAttribute("fill-rule","nonzero"),m.classList.add("mask")}const l=en._svgFactory.createElement("use");i.append(l),l.setAttribute("href",`#${a}`),o&&l.setAttribute("mask",`url(#${o})`);const c=l.cloneNode();return i.append(c),l.classList.add("mainOutline"),c.classList.add("secondaryOutline"),u(this,qi).set(e,i),e}finalizeLine(t,e){const i=u(this,Ro).get(t);u(this,Ro).delete(t),this.updateBox(t,e.box),i.setAttribute("d",e.toSVGPath())}updateLine(t,e){u(this,qi).get(t).firstChild.firstChild.setAttribute("d",e.toSVGPath())}removeFreeHighlight(t){this.remove(t),u(this,Ro).delete(t)}updatePath(t,e){u(this,Ro).get(t).setAttribute("d",e.toSVGPath())}updateBox(t,e){var i;R(i=en,Jf,S2).call(i,u(this,qi).get(t),e)}show(t,e){u(this,qi).get(t).classList.toggle("hidden",!e)}rotate(t,e){u(this,qi).get(t).setAttribute("data-main-rotation",e)}changeColor(t,e){u(this,qi).get(t).setAttribute("fill",e)}changeOpacity(t,e){u(this,qi).get(t).setAttribute("fill-opacity",e)}addClass(t,e){u(this,qi).get(t).classList.add(e)}removeClass(t,e){u(this,qi).get(t).classList.remove(e)}remove(t){u(this,Dr)!==null&&(u(this,qi).get(t).remove(),u(this,qi).delete(t))}destroy(){k(this,Dr,null);for(const t of u(this,qi).values())t.remove();u(this,qi).clear()}};Dr=new WeakMap,Kf=new WeakMap,qi=new WeakMap,Ro=new WeakMap,Jf=new WeakSet,S2=function(t,{x:e=0,y:i=0,width:s=1,height:r=1}={}){const{style:a}=t;a.top=`${100*i}%`,a.left=`${100*e}%`,a.width=`${100*s}%`,a.height=`${100*r}%`},yc=new WeakSet,x2=function(t){var i;const e=en._svgFactory.create(1,1,!0);return u(this,Dr).append(e),e.setAttribute("aria-hidden",!0),R(i=en,Jf,S2).call(i,e,t),e},Sw=function(t,e){const i=en._svgFactory.createElement("clipPath");t.append(i);const s=`clip_${e}`;i.setAttribute("id",s),i.setAttribute("clipPathUnits","objectBoundingBox");const r=en._svgFactory.createElement("use");return i.append(r),r.setAttribute("href",`#${e}`),r.classList.add("clip"),s},O(en,Jf);let _2=en;he.AbortException;he.AnnotationEditorLayer;he.AnnotationEditorParamsType;he.AnnotationEditorType;he.AnnotationEditorUIManager;he.AnnotationLayer;he.AnnotationMode;he.CMapCompressionType;he.ColorPicker;he.DOMSVGFactory;he.DrawLayer;he.FeatureTest;var u3=he.GlobalWorkerOptions;he.ImageKind;he.InvalidPDFException;he.MissingPDFException;he.OPS;he.PDFDataRangeTransport;he.PDFDateString;he.PDFWorker;he.PasswordResponses;he.PermissionFlag;he.PixelsPerInch;he.RenderingCancelledException;he.TextLayer;he.UnexpectedResponseException;he.Util;he.VerbosityLevel;he.XfaLayer;he.build;he.createValidAbsoluteUrl;he.fetchData;var d3=he.getDocument;he.getFilenameFromUrl;he.getPdfFilenameFromUrl;he.getXfaPageViewport;he.isDataScheme;he.isPdfFile;he.noContextMenu;he.normalizeUnicode;he.setLayerDimensions;he.shadow;he.version;const f3=[null,"default","comfortable","compact"],sv=re({density:{type:String,default:"default",validator:n=>f3.includes(n)}},"density");function rv(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Qf();return{densityClasses:Et(()=>`${t}--density-${n.density}`)}}const p3=["elevated","flat","tonal","outlined","text","plain"];function g3(n,t){return dt(Ba,null,[dt("span",{key:"overlay",class:`${t}__overlay`},null),dt("span",{key:"underlay",class:`${t}__underlay`},null)])}const xw=re({color:String,variant:{type:String,default:"elevated",validator:n=>p3.includes(n)}},"variant");function m3(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Qf();const e=Et(()=>{const{variant:r}=Ed(n);return`${t}--variant-${r}`}),{colorClasses:i,colorStyles:s}=eS(Et(()=>{const{variant:r,color:a}=Ed(n);return{[["elevated","flat"].includes(r)?"background":"text"]:a}}));return{colorClasses:i,colorStyles:s,variantClasses:e}}const Lw=re({baseColor:String,divided:Boolean,...Pm(),...Ci(),...sv(),...km(),..._u(),...kn(),...Es(),...xw()},"VBtnGroup"),S5=Ne()({name:"VBtnGroup",props:Lw(),setup(n,t){let{slots:e}=t;const{themeClasses:i}=Ps(n),{densityClasses:s}=rv(n),{borderClasses:r}=Nm(n),{elevationClasses:a}=Tm(n),{roundedClasses:o}=Su(n);_m({VBtn:{height:"auto",baseColor:ni(n,"baseColor"),color:ni(n,"color"),density:ni(n,"density"),flat:!0,variant:ni(n,"variant")}}),si(()=>dt(n.tag,{class:["v-btn-group",{"v-btn-group--divided":n.divided},i.value,r.value,s.value,a.value,o.value,n.class],style:n.style},e))}}),av=re({modelValue:{type:null,default:void 0},multiple:Boolean,mandatory:[Boolean,String],max:Number,selectedClass:String,disabled:Boolean},"group"),Cw=re({value:null,disabled:Boolean,selectedClass:String},"group-item");function Ew(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const i=ja("useGroupItem");if(!i)throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");const s=fb();Sm(Symbol.for(`${t.description}:id`),s);const r=Zf(t,null);if(!r){if(!e)return r;throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${t.description}`)}const a=ni(n,"value"),o=Et(()=>!!(r.disabled.value||n.disabled));r.register({id:s,value:a,disabled:o},i),tp(()=>{r.unregister(s)});const l=Et(()=>r.isSelected(s)),c=Et(()=>r.items.value[0].id===s),d=Et(()=>r.items.value[r.items.value.length-1].id===s),p=Et(()=>l.value&&[r.selectedClass.value,n.selectedClass]);return gi(l,m=>{i.emit("group:selected",{value:m})},{flush:"sync"}),{id:s,isSelected:l,isFirst:c,isLast:d,toggle:()=>r.select(s,!l.value),select:m=>r.select(s,m),selectedClass:p,value:a,disabled:o,group:r}}function qm(n,t){let e=!1;const i=Pd([]),s=wc(n,"modelValue",[],m=>m==null?[]:Pw(i,M_(m)),m=>{const f=b3(i,m);return n.multiple?f:f[0]}),r=ja("useGroup");function a(m,f){const b=m,w=Symbol.for(`${t.description}:id`),A=R_(w,r==null?void 0:r.vnode).indexOf(f);Ed(b.value)==null&&(b.value=A,b.useIndexAsValue=!0),A>-1?i.splice(A,0,b):i.push(b)}function o(m){if(e)return;l();const f=i.findIndex(b=>b.id===m);i.splice(f,1)}function l(){const m=i.find(f=>!f.disabled);m&&n.mandatory==="force"&&!s.value.length&&(s.value=[m.id])}xm(()=>{l()}),tp(()=>{e=!0}),I_(()=>{for(let m=0;m<i.length;m++)i[m].useIndexAsValue&&(i[m].value=m)});function c(m,f){const b=i.find(w=>w.id===m);if(!(f&&(b!=null&&b.disabled)))if(n.multiple){const w=s.value.slice(),S=w.findIndex(x=>x===m),A=~S;if(f=f??!A,A&&n.mandatory&&w.length<=1||!A&&n.max!=null&&w.length+1>n.max)return;S<0&&f?w.push(m):S>=0&&!f&&w.splice(S,1),s.value=w}else{const w=s.value.includes(m);if(n.mandatory&&w)return;s.value=f??!w?[m]:[]}}function d(m){if(n.multiple,s.value.length){const f=s.value[0],b=i.findIndex(A=>A.id===f);let w=(b+m)%i.length,S=i[w];for(;S.disabled&&w!==b;)w=(w+m)%i.length,S=i[w];if(S.disabled)return;s.value=[i[w].id]}else{const f=i.find(b=>!b.disabled);f&&(s.value=[f.id])}}const p={register:a,unregister:o,selected:s,select:c,disabled:ni(n,"disabled"),prev:()=>d(i.length-1),next:()=>d(1),isSelected:m=>s.value.includes(m),selectedClass:Et(()=>n.selectedClass),items:Et(()=>i),getItemIndex:m=>v3(i,m)};return Sm(t,p),p}function v3(n,t){const e=Pw(n,[t]);return e.length?n.findIndex(i=>i.id===e[0]):-1}function Pw(n,t){const e=[];return t.forEach(i=>{const s=n.find(a=>pb(i,a.value)),r=n[i];(s==null?void 0:s.value)!=null?e.push(s.id):r!=null&&e.push(r.id)}),e}function b3(n,t){const e=[];return t.forEach(i=>{const s=n.findIndex(r=>r.id===i);if(~s){const r=n[s];e.push(r.value!=null?r.value:s)}}),e}const kw=Symbol.for("vuetify:v-btn-toggle"),y3=re({...Lw(),...av()},"VBtnToggle");Ne()({name:"VBtnToggle",props:y3(),emits:{"update:modelValue":n=>!0},setup(n,t){let{slots:e}=t;const{isSelected:i,next:s,prev:r,select:a,selected:o}=qm(n,kw);return si(()=>{const l=S5.filterProps(n);return dt(S5,ti({class:["v-btn-toggle",n.class]},l,{style:n.style}),{default:()=>{var c;return[(c=e.default)==null?void 0:c.call(e,{isSelected:i,next:s,prev:r,select:a,selected:o})]}})}),{next:s,prev:r,select:a}}});const w3=re({defaults:Object,disabled:Boolean,reset:[Number,String],root:[Boolean,String],scoped:Boolean},"VDefaultsProvider"),Ma=Ne(!1)({name:"VDefaultsProvider",props:w3(),setup(n,t){let{slots:e}=t;const{defaults:i,disabled:s,reset:r,root:a,scoped:o}=F_(n);return _m(i,{reset:r,root:a,scoped:o,disabled:s}),()=>{var l;return(l=e.default)==null?void 0:l.call(e)}}}),A3=["x-small","small","default","large","x-large"],zm=re({size:{type:[String,Number],default:"default"}},"size");function ov(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Qf();return gb(()=>{let e,i;return zg(A3,n.size)?e=`${t}--size-${n.size}`:n.size&&(i={width:Ae(n.size),height:Ae(n.size)}),{sizeClasses:e,sizeStyles:i}})}const _3=re({color:String,disabled:Boolean,start:Boolean,end:Boolean,icon:mu,...Ci(),...zm(),...kn({tag:"i"}),...Es()},"VIcon"),uc=Ne()({name:"VIcon",props:_3(),setup(n,t){let{attrs:e,slots:i}=t;const s=Re(),{themeClasses:r}=Ps(n),{iconData:a}=O_(Et(()=>s.value||n.icon)),{sizeClasses:o}=ov(n),{textColorClasses:l,textColorStyles:c}=vu(ni(n,"color"));return si(()=>{var m,f;const d=(m=i.default)==null?void 0:m.call(i);d&&(s.value=(f=D_(d).filter(b=>b.type===B_&&b.children&&typeof b.children=="string")[0])==null?void 0:f.children);const p=!!(e.onClick||e.onClickOnce);return dt(a.value.component,{tag:n.tag,icon:a.value.icon,class:["v-icon","notranslate",r.value,o.value,l.value,{"v-icon--clickable":p,"v-icon--disabled":n.disabled,"v-icon--start":n.start,"v-icon--end":n.end},n.class],style:[o.value?void 0:{fontSize:Ae(n.size),height:Ae(n.size),width:Ae(n.size)},c.value,n.style],role:p?"button":void 0,"aria-hidden":!p,tabindex:p?n.disabled?-1:0:void 0},{default:()=>[d]})}),{}}});function Nw(n,t){const e=Re(),i=xi(!1);if(z2){const s=new IntersectionObserver(r=>{i.value=!!r.find(a=>a.isIntersecting)},t);tp(()=>{s.disconnect()}),gi(e,(r,a)=>{a&&(s.unobserve(a),i.value=!1),r&&s.observe(r)},{flush:"post"})}return{intersectionRef:e,isIntersecting:i}}const S3=re({bgColor:String,color:String,indeterminate:[Boolean,String],modelValue:{type:[Number,String],default:0},rotate:{type:[Number,String],default:0},width:{type:[Number,String],default:4},...Ci(),...zm(),...kn({tag:"div"}),...Es()},"VProgressCircular"),x3=Ne()({name:"VProgressCircular",props:S3(),setup(n,t){let{slots:e}=t;const i=20,s=2*Math.PI*i,r=Re(),{themeClasses:a}=Ps(n),{sizeClasses:o,sizeStyles:l}=ov(n),{textColorClasses:c,textColorStyles:d}=vu(ni(n,"color")),{textColorClasses:p,textColorStyles:m}=vu(ni(n,"bgColor")),{intersectionRef:f,isIntersecting:b}=Nw(),{resizeRef:w,contentRect:S}=n0(),A=Et(()=>Math.max(0,Math.min(100,parseFloat(n.modelValue)))),x=Et(()=>Number(n.width)),M=Et(()=>l.value?Number(n.size):S.value?S.value.width:Math.max(x.value,32)),q=Et(()=>i/(1-x.value/M.value)*2),U=Et(()=>x.value/M.value*q.value),X=Et(()=>Ae((100-A.value)/100*s));return Lm(()=>{f.value=r.value,w.value=r.value}),si(()=>dt(n.tag,{ref:r,class:["v-progress-circular",{"v-progress-circular--indeterminate":!!n.indeterminate,"v-progress-circular--visible":b.value,"v-progress-circular--disable-shrink":n.indeterminate==="disable-shrink"},a.value,o.value,c.value,n.class],style:[l.value,d.value,n.style],role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":n.indeterminate?void 0:A.value},{default:()=>[dt("svg",{style:{transform:`rotate(calc(-90deg + ${Number(n.rotate)}deg))`},xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${q.value} ${q.value}`},[dt("circle",{class:["v-progress-circular__underlay",p.value],style:m.value,fill:"transparent",cx:"50%",cy:"50%",r:i,"stroke-width":U.value,"stroke-dasharray":s,"stroke-dashoffset":0},null),dt("circle",{class:"v-progress-circular__overlay",fill:"transparent",cx:"50%",cy:"50%",r:i,"stroke-width":U.value,"stroke-dasharray":s,"stroke-dashoffset":X.value},null)]),e.default&&dt("div",{class:"v-progress-circular__content"},[e.default({value:A.value})])]})),{}}}),x5={center:"center",top:"bottom",bottom:"top",left:"right",right:"left"},lv=re({location:String},"location");function cv(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,e=arguments.length>2?arguments[2]:void 0;const{isRtl:i}=Ac();return{locationStyles:Et(()=>{if(!n.location)return{};const{side:r,align:a}=r0(n.location.split(" ").length>1?n.location:`${n.location} center`,i.value);function o(c){return e?e(c):0}const l={};return r!=="center"&&(t?l[x5[r]]=`calc(100% - ${o(r)}px)`:l[r]=0),a!=="center"?t?l[x5[a]]=`calc(100% - ${o(a)}px)`:l[a]=0:(r==="center"?l.top=l.left="50%":l[{top:"left",bottom:"left",left:"top",right:"top"}[r]]="50%",l.transform={top:"translateX(-50%)",bottom:"translateX(-50%)",left:"translateY(-50%)",right:"translateY(-50%)",center:"translate(-50%, -50%)"}[r]),l})}}const L3=re({absolute:Boolean,active:{type:Boolean,default:!0},bgColor:String,bgOpacity:[Number,String],bufferValue:{type:[Number,String],default:0},bufferColor:String,bufferOpacity:[Number,String],clickable:Boolean,color:String,height:{type:[Number,String],default:4},indeterminate:Boolean,max:{type:[Number,String],default:100},modelValue:{type:[Number,String],default:0},opacity:[Number,String],reverse:Boolean,stream:Boolean,striped:Boolean,roundedBar:Boolean,...Ci(),...lv({location:"top"}),..._u(),...kn(),...Es()},"VProgressLinear"),C3=Ne()({name:"VProgressLinear",props:L3(),emits:{"update:modelValue":n=>!0},setup(n,t){var P;let{slots:e}=t;const i=wc(n,"modelValue"),{isRtl:s,rtlClasses:r}=Ac(),{themeClasses:a}=Ps(n),{locationStyles:o}=cv(n),{textColorClasses:l,textColorStyles:c}=vu(n,"color"),{backgroundColorClasses:d,backgroundColorStyles:p}=Ta(Et(()=>n.bgColor||n.color)),{backgroundColorClasses:m,backgroundColorStyles:f}=Ta(Et(()=>n.bufferColor||n.bgColor||n.color)),{backgroundColorClasses:b,backgroundColorStyles:w}=Ta(n,"color"),{roundedClasses:S}=Su(n),{intersectionRef:A,isIntersecting:x}=Nw(),M=Et(()=>parseFloat(n.max)),q=Et(()=>parseFloat(n.height)),U=Et(()=>Hg(parseFloat(n.bufferValue)/M.value*100,0,100)),X=Et(()=>Hg(parseFloat(i.value)/M.value*100,0,100)),G=Et(()=>s.value!==n.reverse),B=Et(()=>n.indeterminate?"fade-transition":"slide-x-transition"),Q=Ls&&((P=window.matchMedia)==null?void 0:P.call(window,"(forced-colors: active)").matches);function ct(N){if(!A.value)return;const{left:V,right:j,width:J}=A.value.getBoundingClientRect(),at=G.value?J-N.clientX+(j-J):N.clientX-V;i.value=Math.round(at/J*M.value)}return si(()=>dt(n.tag,{ref:A,class:["v-progress-linear",{"v-progress-linear--absolute":n.absolute,"v-progress-linear--active":n.active&&x.value,"v-progress-linear--reverse":G.value,"v-progress-linear--rounded":n.rounded,"v-progress-linear--rounded-bar":n.roundedBar,"v-progress-linear--striped":n.striped},S.value,a.value,r.value,n.class],style:[{bottom:n.location==="bottom"?0:void 0,top:n.location==="top"?0:void 0,height:n.active?Ae(q.value):0,"--v-progress-linear-height":Ae(q.value),...n.absolute?o.value:{}},n.style],role:"progressbar","aria-hidden":n.active?"false":"true","aria-valuemin":"0","aria-valuemax":n.max,"aria-valuenow":n.indeterminate?void 0:X.value,onClick:n.clickable&&ct},{default:()=>[n.stream&&dt("div",{key:"stream",class:["v-progress-linear__stream",l.value],style:{...c.value,[G.value?"left":"right"]:Ae(-q.value),borderTop:`${Ae(q.value/2)} dotted`,opacity:parseFloat(n.bufferOpacity),top:`calc(50% - ${Ae(q.value/4)})`,width:Ae(100-U.value,"%"),"--v-progress-linear-stream-to":Ae(q.value*(G.value?1:-1))}},null),dt("div",{class:["v-progress-linear__background",Q?void 0:d.value],style:[p.value,{opacity:parseFloat(n.bgOpacity),width:n.stream?0:void 0}]},null),dt("div",{class:["v-progress-linear__buffer",Q?void 0:m.value],style:[f.value,{opacity:parseFloat(n.bufferOpacity),width:Ae(U.value,"%")}]},null),dt(fc,{name:B.value},{default:()=>[n.indeterminate?dt("div",{class:"v-progress-linear__indeterminate"},[["long","short"].map(N=>dt("div",{key:N,class:["v-progress-linear__indeterminate",N,Q?void 0:b.value],style:w.value},null))]):dt("div",{class:["v-progress-linear__determinate",Q?void 0:b.value],style:[w.value,{width:Ae(X.value,"%")}]},null)]}),e.default&&dt("div",{class:"v-progress-linear__content"},[e.default({value:X.value,buffer:U.value})])]})),{}}}),E3=re({loading:[Boolean,String]},"loader");function P3(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Qf();return{loaderClasses:Et(()=>({[`${t}--loading`]:n.loading}))}}const k3=["static","relative","fixed","absolute","sticky"],Tw=re({position:{type:String,validator:n=>k3.includes(n)}},"position");function Iw(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Qf();return{positionClasses:Et(()=>n.position?`${t}--${n.position}`:void 0)}}function N3(){const n=ja("useRoute");return Et(()=>{var t;return(t=n==null?void 0:n.proxy)==null?void 0:t.$route})}function T3(){var n,t;return(t=(n=ja("useRouter"))==null?void 0:n.proxy)==null?void 0:t.$router}function I3(n,t){var p,m;const e=j_("RouterLink"),i=Et(()=>!!(n.href||n.to)),s=Et(()=>(i==null?void 0:i.value)||Jv(t,"click")||Jv(n,"click"));if(typeof e=="string"||!("useLink"in e)){const f=ni(n,"href");return{isLink:i,isClickable:s,href:f,linkProps:Pd({href:f})}}const r=Et(()=>({...n,to:ni(()=>n.to||"")})),a=e.useLink(r.value),o=Et(()=>n.to?a:void 0),l=N3(),c=Et(()=>{var f,b,w;return o.value?n.exact?l.value?((w=o.value.isExactActive)==null?void 0:w.value)&&pb(o.value.route.value.query,l.value.query):((b=o.value.isExactActive)==null?void 0:b.value)??!1:((f=o.value.isActive)==null?void 0:f.value)??!1:!1}),d=Et(()=>{var f;return n.to?(f=o.value)==null?void 0:f.route.value.href:n.href});return{isLink:i,isClickable:s,isActive:c,route:(p=o.value)==null?void 0:p.route,navigate:(m=o.value)==null?void 0:m.navigate,href:d,linkProps:Pd({href:d,"aria-current":Et(()=>c.value?"page":void 0)})}}const M3=re({href:String,replace:Boolean,to:[String,Object],exact:Boolean},"router");let V1=!1;function R3(n,t){let e=!1,i,s;Ls&&(qa(()=>{window.addEventListener("popstate",r),i=n==null?void 0:n.beforeEach((a,o,l)=>{V1?e?t(l):l():setTimeout(()=>e?t(l):l()),V1=!0}),s=n==null?void 0:n.afterEach(()=>{V1=!1})}),Vr(()=>{window.removeEventListener("popstate",r),i==null||i(),s==null||s()}));function r(a){var o;(o=a.state)!=null&&o.replaced||(e=!0,setTimeout(()=>e=!1))}}function F3(n,t){gi(()=>{var e;return(e=n.isActive)==null?void 0:e.value},e=>{n.isLink.value&&e&&t&&qa(()=>{t(!0)})},{immediate:!0})}const L2=Symbol("rippleStop"),O3=80;function L5(n,t){n.style.transform=t,n.style.webkitTransform=t}function C2(n){return n.constructor.name==="TouchEvent"}function Mw(n){return n.constructor.name==="KeyboardEvent"}const D3=function(n,t){var p;let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=0,s=0;if(!Mw(n)){const m=t.getBoundingClientRect(),f=C2(n)?n.touches[n.touches.length-1]:n;i=f.clientX-m.left,s=f.clientY-m.top}let r=0,a=.3;(p=t._ripple)!=null&&p.circle?(a=.15,r=t.clientWidth/2,r=e.center?r:r+Math.sqrt((i-r)**2+(s-r)**2)/4):r=Math.sqrt(t.clientWidth**2+t.clientHeight**2)/2;const o=`${(t.clientWidth-r*2)/2}px`,l=`${(t.clientHeight-r*2)/2}px`,c=e.center?o:`${i-r}px`,d=e.center?l:`${s-r}px`;return{radius:r,scale:a,x:c,y:d,centerX:o,centerY:l}},Kg={show(n,t){var f;let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!((f=t==null?void 0:t._ripple)!=null&&f.enabled))return;const i=document.createElement("span"),s=document.createElement("span");i.appendChild(s),i.className="v-ripple__container",e.class&&(i.className+=` ${e.class}`);const{radius:r,scale:a,x:o,y:l,centerX:c,centerY:d}=D3(n,t,e),p=`${r*2}px`;s.className="v-ripple__animation",s.style.width=p,s.style.height=p,t.appendChild(i);const m=window.getComputedStyle(t);m&&m.position==="static"&&(t.style.position="relative",t.dataset.previousPosition="static"),s.classList.add("v-ripple__animation--enter"),s.classList.add("v-ripple__animation--visible"),L5(s,`translate(${o}, ${l}) scale3d(${a},${a},${a})`),s.dataset.activated=String(performance.now()),setTimeout(()=>{s.classList.remove("v-ripple__animation--enter"),s.classList.add("v-ripple__animation--in"),L5(s,`translate(${c}, ${d}) scale3d(1,1,1)`)},0)},hide(n){var r;if(!((r=n==null?void 0:n._ripple)!=null&&r.enabled))return;const t=n.getElementsByClassName("v-ripple__animation");if(t.length===0)return;const e=t[t.length-1];if(e.dataset.isHiding)return;e.dataset.isHiding="true";const i=performance.now()-Number(e.dataset.activated),s=Math.max(250-i,0);setTimeout(()=>{e.classList.remove("v-ripple__animation--in"),e.classList.add("v-ripple__animation--out"),setTimeout(()=>{var o;n.getElementsByClassName("v-ripple__animation").length===1&&n.dataset.previousPosition&&(n.style.position=n.dataset.previousPosition,delete n.dataset.previousPosition),((o=e.parentNode)==null?void 0:o.parentNode)===n&&n.removeChild(e.parentNode)},300)},s)}};function Rw(n){return typeof n>"u"||!!n}function Td(n){const t={},e=n.currentTarget;if(!(!(e!=null&&e._ripple)||e._ripple.touched||n[L2])){if(n[L2]=!0,C2(n))e._ripple.touched=!0,e._ripple.isTouch=!0;else if(e._ripple.isTouch)return;if(t.center=e._ripple.centered||Mw(n),e._ripple.class&&(t.class=e._ripple.class),C2(n)){if(e._ripple.showTimerCommit)return;e._ripple.showTimerCommit=()=>{Kg.show(n,e,t)},e._ripple.showTimer=window.setTimeout(()=>{var i;(i=e==null?void 0:e._ripple)!=null&&i.showTimerCommit&&(e._ripple.showTimerCommit(),e._ripple.showTimerCommit=null)},O3)}else Kg.show(n,e,t)}}function C5(n){n[L2]=!0}function rs(n){const t=n.currentTarget;if(t!=null&&t._ripple){if(window.clearTimeout(t._ripple.showTimer),n.type==="touchend"&&t._ripple.showTimerCommit){t._ripple.showTimerCommit(),t._ripple.showTimerCommit=null,t._ripple.showTimer=window.setTimeout(()=>{rs(n)});return}window.setTimeout(()=>{t._ripple&&(t._ripple.touched=!1)}),Kg.hide(t)}}function Fw(n){const t=n.currentTarget;t!=null&&t._ripple&&(t._ripple.showTimerCommit&&(t._ripple.showTimerCommit=null),window.clearTimeout(t._ripple.showTimer))}let Id=!1;function Ow(n){!Id&&(n.keyCode===Qv.enter||n.keyCode===Qv.space)&&(Id=!0,Td(n))}function Dw(n){Id=!1,rs(n)}function Bw(n){Id&&(Id=!1,rs(n))}function jw(n,t,e){const{value:i,modifiers:s}=t,r=Rw(i);if(r||Kg.hide(n),n._ripple=n._ripple??{},n._ripple.enabled=r,n._ripple.centered=s.center,n._ripple.circle=s.circle,mb(i)&&i.class&&(n._ripple.class=i.class),r&&!e){if(s.stop){n.addEventListener("touchstart",C5,{passive:!0}),n.addEventListener("mousedown",C5);return}n.addEventListener("touchstart",Td,{passive:!0}),n.addEventListener("touchend",rs,{passive:!0}),n.addEventListener("touchmove",Fw,{passive:!0}),n.addEventListener("touchcancel",rs),n.addEventListener("mousedown",Td),n.addEventListener("mouseup",rs),n.addEventListener("mouseleave",rs),n.addEventListener("keydown",Ow),n.addEventListener("keyup",Dw),n.addEventListener("blur",Bw),n.addEventListener("dragstart",rs,{passive:!0})}else!r&&e&&qw(n)}function qw(n){n.removeEventListener("mousedown",Td),n.removeEventListener("touchstart",Td),n.removeEventListener("touchend",rs),n.removeEventListener("touchmove",Fw),n.removeEventListener("touchcancel",rs),n.removeEventListener("mouseup",rs),n.removeEventListener("mouseleave",rs),n.removeEventListener("keydown",Ow),n.removeEventListener("keyup",Dw),n.removeEventListener("dragstart",rs),n.removeEventListener("blur",Bw)}function B3(n,t){jw(n,t,!1)}function j3(n){delete n._ripple,qw(n)}function q3(n,t){if(t.value===t.oldValue)return;const e=Rw(t.oldValue);jw(n,t,e)}const z3={mounted:B3,unmounted:j3,updated:q3},zw=re({active:{type:Boolean,default:void 0},activeColor:String,baseColor:String,symbol:{type:null,default:kw},flat:Boolean,icon:[Boolean,String,Function,Object],prependIcon:mu,appendIcon:mu,block:Boolean,readonly:Boolean,slim:Boolean,stacked:Boolean,ripple:{type:[Boolean,Object],default:!0},text:String,...Pm(),...Ci(),...sv(),...yu(),...km(),...Cw(),...E3(),...lv(),...Tw(),..._u(),...M3(),...zm(),...kn({tag:"button"}),...Es(),...xw({variant:"elevated"})},"VBtn"),nr=Ne()({name:"VBtn",props:zw(),emits:{"group:selected":n=>!0},setup(n,t){let{attrs:e,slots:i}=t;const{themeClasses:s}=Ps(n),{borderClasses:r}=Nm(n),{densityClasses:a}=rv(n),{dimensionStyles:o}=wu(n),{elevationClasses:l}=Tm(n),{loaderClasses:c}=P3(n),{locationStyles:d}=cv(n),{positionClasses:p}=Iw(n),{roundedClasses:m}=Su(n),{sizeClasses:f,sizeStyles:b}=ov(n),w=Ew(n,n.symbol,!1),S=I3(n,e),A=Et(()=>{var P;return n.active!==void 0?n.active:S.isLink.value?(P=S.isActive)==null?void 0:P.value:w==null?void 0:w.isSelected.value}),x=Et(()=>A.value?n.activeColor??n.color:n.color),M=Et(()=>{var N,V;return{color:(w==null?void 0:w.isSelected.value)&&(!S.isLink.value||((N=S.isActive)==null?void 0:N.value))||!w||((V=S.isActive)==null?void 0:V.value)?x.value??n.baseColor:n.baseColor,variant:n.variant}}),{colorClasses:q,colorStyles:U,variantClasses:X}=m3(M),G=Et(()=>(w==null?void 0:w.disabled.value)||n.disabled),B=Et(()=>n.variant==="elevated"&&!(n.disabled||n.flat||n.border)),Q=Et(()=>{if(!(n.value===void 0||typeof n.value=="symbol"))return Object(n.value)===n.value?JSON.stringify(n.value,null,0):n.value});function ct(P){var N;G.value||S.isLink.value&&(P.metaKey||P.ctrlKey||P.shiftKey||P.button!==0||e.target==="_blank")||((N=S.navigate)==null||N.call(S,P),w==null||w.toggle())}return F3(S,w==null?void 0:w.select),si(()=>{const P=S.isLink.value?"a":n.tag,N=!!(n.prependIcon||i.prepend),V=!!(n.appendIcon||i.append),j=!!(n.icon&&n.icon!==!0);return pc(dt(P,ti({type:P==="a"?void 0:"button",class:["v-btn",w==null?void 0:w.selectedClass.value,{"v-btn--active":A.value,"v-btn--block":n.block,"v-btn--disabled":G.value,"v-btn--elevated":B.value,"v-btn--flat":n.flat,"v-btn--icon":!!n.icon,"v-btn--loading":n.loading,"v-btn--readonly":n.readonly,"v-btn--slim":n.slim,"v-btn--stacked":n.stacked},s.value,r.value,q.value,a.value,l.value,c.value,p.value,m.value,f.value,X.value,n.class],style:[U.value,o.value,d.value,b.value,n.style],"aria-busy":n.loading?!0:void 0,disabled:G.value||void 0,tabindex:n.loading||n.readonly?-1:void 0,onClick:ct,value:Q.value},S.linkProps),{default:()=>{var J;return[g3(!0,"v-btn"),!n.icon&&N&&dt("span",{key:"prepend",class:"v-btn__prepend"},[i.prepend?dt(Ma,{key:"prepend-defaults",disabled:!n.prependIcon,defaults:{VIcon:{icon:n.prependIcon}}},i.prepend):dt(uc,{key:"prepend-icon",icon:n.prependIcon},null)]),dt("span",{class:"v-btn__content","data-no-activator":""},[!i.default&&j?dt(uc,{key:"content-icon",icon:n.icon},null):dt(Ma,{key:"content-defaults",disabled:!j,defaults:{VIcon:{icon:n.icon}}},{default:()=>{var at;return[((at=i.default)==null?void 0:at.call(i))??n.text]}})]),!n.icon&&V&&dt("span",{key:"append",class:"v-btn__append"},[i.append?dt(Ma,{key:"append-defaults",disabled:!n.appendIcon,defaults:{VIcon:{icon:n.appendIcon}}},i.append):dt(uc,{key:"append-icon",icon:n.appendIcon},null)]),!!n.loading&&dt("span",{key:"loader",class:"v-btn__loader"},[((J=i.loader)==null?void 0:J.call(i))??dt(x3,{color:typeof n.loading=="boolean"?void 0:n.loading,indeterminate:!0,width:"2"},null)])]}}),[[z3,!G.value&&n.ripple,"",{center:!!n.icon}]])}),{group:w}}}),E2=Au({__name:"TButton",props:{label:{},block:{type:Boolean,default:!1},variant:{default:"elevated"},color:{default:"primary"},icon:{},size:{},disabled:{type:Boolean,default:!1}},emits:["click"],setup(n,{emit:t}){return(e,i)=>(Oo(),ep(nr,ti({block:e.block,color:e.color,variant:e.variant,icon:e.icon,text:e.label,size:e.size,disabled:e.disabled},e.$attrs,{onClick:i[0]||(i[0]=s=>e.$emit("click"))}),null,16,["block","color","variant","icon","text","size","disabled"]))}});function U1(n,t){return{x:n.x+t.x,y:n.y+t.y}}function H3(n,t){return{x:n.x-t.x,y:n.y-t.y}}function E5(n,t){if(n.side==="top"||n.side==="bottom"){const{side:e,align:i}=n,s=i==="left"?0:i==="center"?t.width/2:i==="right"?t.width:i,r=e==="top"?0:e==="bottom"?t.height:e;return U1({x:s,y:r},t)}else if(n.side==="left"||n.side==="right"){const{side:e,align:i}=n,s=e==="left"?0:e==="right"?t.width:e,r=i==="top"?0:i==="center"?t.height/2:i==="bottom"?t.height:i;return U1({x:s,y:r},t)}return U1({x:t.width/2,y:t.height/2},t)}const Hw={static:W3,connected:$3},V3=re({locationStrategy:{type:[String,Function],default:"static",validator:n=>typeof n=="function"||n in Hw},location:{type:String,default:"bottom"},origin:{type:String,default:"auto"},offset:[Number,String,Array]},"VOverlay-location-strategies");function U3(n,t){const e=Re({}),i=Re();Ls&&H2(()=>!!(t.isActive.value&&n.locationStrategy),r=>{var a,o;gi(()=>n.locationStrategy,r),Vr(()=>{window.removeEventListener("resize",s),i.value=void 0}),window.addEventListener("resize",s,{passive:!0}),typeof n.locationStrategy=="function"?i.value=(a=n.locationStrategy(t,n,e))==null?void 0:a.updateLocation:i.value=(o=Hw[n.locationStrategy](t,n,e))==null?void 0:o.updateLocation});function s(r){var a;(a=i.value)==null||a.call(i,r)}return{contentStyles:e,updateLocation:i}}function W3(){}function G3(n,t){const e=xb(n);return t?e.x+=parseFloat(n.style.right||0):e.x-=parseFloat(n.style.left||0),e.y-=parseFloat(n.style.top||0),e}function $3(n,t,e){(Array.isArray(n.target.value)||uS(n.target.value))&&Object.assign(e.value,{position:"fixed",top:0,[n.isRtl.value?"right":"left"]:0});const{preferredAnchor:s,preferredOrigin:r}=gb(()=>{const b=r0(t.location,n.isRtl.value),w=t.origin==="overlap"?b:t.origin==="auto"?F1(b):r0(t.origin,n.isRtl.value);return b.side===w.side&&b.align===O1(w).align?{preferredAnchor:e5(b),preferredOrigin:e5(w)}:{preferredAnchor:b,preferredOrigin:w}}),[a,o,l,c]=["minWidth","minHeight","maxWidth","maxHeight"].map(b=>Et(()=>{const w=parseFloat(t[b]);return isNaN(w)?1/0:w})),d=Et(()=>{if(Array.isArray(t.offset))return t.offset;if(typeof t.offset=="string"){const b=t.offset.split(" ").map(parseFloat);return b.length<2&&b.push(0),b}return typeof t.offset=="number"?[t.offset,0]:[0,0]});let p=!1;const m=new ResizeObserver(()=>{p&&f()});gi([n.target,n.contentEl],(b,w)=>{let[S,A]=b,[x,M]=w;x&&!Array.isArray(x)&&m.unobserve(x),S&&!Array.isArray(S)&&m.observe(S),M&&m.unobserve(M),A&&m.observe(A)},{immediate:!0}),Vr(()=>{m.disconnect()});function f(){if(p=!1,requestAnimationFrame(()=>p=!0),!n.target.value||!n.contentEl.value)return;const b=Sb(n.target.value),w=G3(n.contentEl.value,n.isRtl.value),S=Ug(n.contentEl.value),A=12;S.length||(S.push(document.documentElement),n.contentEl.value.style.top&&n.contentEl.value.style.left||(w.x-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-x")||0),w.y-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-y")||0)));const x=S.reduce((P,N)=>{const V=N.getBoundingClientRect(),j=new hc({x:N===document.documentElement?0:V.x,y:N===document.documentElement?0:V.y,width:N.clientWidth,height:N.clientHeight});return P?new hc({x:Math.max(P.left,j.left),y:Math.max(P.top,j.top),width:Math.min(P.right,j.right)-Math.max(P.left,j.left),height:Math.min(P.bottom,j.bottom)-Math.max(P.top,j.top)}):j},void 0);x.x+=A,x.y+=A,x.width-=A*2,x.height-=A*2;let M={anchor:s.value,origin:r.value};function q(P){const N=new hc(w),V=E5(P.anchor,b),j=E5(P.origin,N);let{x:J,y:at}=H3(V,j);switch(P.anchor.side){case"top":at-=d.value[0];break;case"bottom":at+=d.value[0];break;case"left":J-=d.value[0];break;case"right":J+=d.value[0];break}switch(P.anchor.align){case"top":at-=d.value[1];break;case"bottom":at+=d.value[1];break;case"left":J-=d.value[1];break;case"right":J+=d.value[1];break}return N.x+=J,N.y+=at,N.width=Math.min(N.width,l.value),N.height=Math.min(N.height,c.value),{overflows:n5(N,x),x:J,y:at}}let U=0,X=0;const G={x:0,y:0},B={x:!1,y:!1};let Q=-1;for(;!(Q++>10);){const{x:P,y:N,overflows:V}=q(M);U+=P,X+=N,w.x+=P,w.y+=N;{const j=i5(M.anchor),J=V.x.before||V.x.after,at=V.y.before||V.y.after;let st=!1;if(["x","y"].forEach(tt=>{if(tt==="x"&&J&&!B.x||tt==="y"&&at&&!B.y){const vt={anchor:{...M.anchor},origin:{...M.origin}},ht=tt==="x"?j==="y"?O1:F1:j==="y"?F1:O1;vt.anchor=ht(vt.anchor),vt.origin=ht(vt.origin);const{overflows:At}=q(vt);(At[tt].before<=V[tt].before&&At[tt].after<=V[tt].after||At[tt].before+At[tt].after<(V[tt].before+V[tt].after)/2)&&(M=vt,st=B[tt]=!0)}}),st)continue}V.x.before&&(U+=V.x.before,w.x+=V.x.before),V.x.after&&(U-=V.x.after,w.x-=V.x.after),V.y.before&&(X+=V.y.before,w.y+=V.y.before),V.y.after&&(X-=V.y.after,w.y-=V.y.after);{const j=n5(w,x);G.x=x.width-j.x.before-j.x.after,G.y=x.height-j.y.before-j.y.after,U+=j.x.before,w.x+=j.x.before,X+=j.y.before,w.y+=j.y.before}break}const ct=i5(M.anchor);return Object.assign(e.value,{"--v-overlay-anchor-origin":`${M.anchor.side} ${M.anchor.align}`,transformOrigin:`${M.origin.side} ${M.origin.align}`,top:Ae(W1(X)),left:n.isRtl.value?void 0:Ae(W1(U)),right:n.isRtl.value?Ae(W1(-U)):void 0,minWidth:Ae(ct==="y"?Math.min(a.value,b.width):a.value),maxWidth:Ae(P5(Hg(G.x,a.value===1/0?0:a.value,l.value))),maxHeight:Ae(P5(Hg(G.y,o.value===1/0?0:o.value,c.value)))}),{available:G,contentBox:w}}return gi(()=>[s.value,r.value,t.offset,t.minWidth,t.minHeight,t.maxWidth,t.maxHeight],()=>f()),qa(()=>{const b=f();if(!b)return;const{available:w,contentBox:S}=b;S.height>w.y&&requestAnimationFrame(()=>{f(),requestAnimationFrame(()=>{f()})})}),{updateLocation:f}}function W1(n){return Math.round(n*devicePixelRatio)/devicePixelRatio}function P5(n){return Math.ceil(n*devicePixelRatio)/devicePixelRatio}let P2=!0;const Jg=[];function X3(n){!P2||Jg.length?(Jg.push(n),k2()):(P2=!1,n(),k2())}let k5=-1;function k2(){cancelAnimationFrame(k5),k5=requestAnimationFrame(()=>{const n=Jg.shift();n&&n(),Jg.length?k2():P2=!0})}const Fg={none:null,close:J3,block:Q3,reposition:Z3},Y3=re({scrollStrategy:{type:[String,Function],default:"block",validator:n=>typeof n=="function"||n in Fg}},"VOverlay-scroll-strategies");function K3(n,t){if(!Ls)return;let e;Lm(async()=>{e==null||e.stop(),t.isActive.value&&n.scrollStrategy&&(e=vb(),await new Promise(i=>setTimeout(i)),e.active&&e.run(()=>{var i;typeof n.scrollStrategy=="function"?n.scrollStrategy(t,n,e):(i=Fg[n.scrollStrategy])==null||i.call(Fg,t,n,e)}))}),Vr(()=>{e==null||e.stop()})}function J3(n){function t(e){n.isActive.value=!1}Vw(n.targetEl.value??n.contentEl.value,t)}function Q3(n,t){var a;const e=(a=n.root.value)==null?void 0:a.offsetParent,i=[...new Set([...Ug(n.targetEl.value,t.contained?e:void 0),...Ug(n.contentEl.value,t.contained?e:void 0)])].filter(o=>!o.classList.contains("v-overlay-scroll-blocked")),s=window.innerWidth-document.documentElement.offsetWidth,r=(o=>X2(o)&&o)(e||document.documentElement);r&&n.root.value.classList.add("v-overlay--scroll-blocked"),i.forEach((o,l)=>{o.style.setProperty("--v-body-scroll-x",Ae(-o.scrollLeft)),o.style.setProperty("--v-body-scroll-y",Ae(-o.scrollTop)),o!==document.documentElement&&o.style.setProperty("--v-scrollbar-offset",Ae(s)),o.classList.add("v-overlay-scroll-blocked")}),Vr(()=>{i.forEach((o,l)=>{const c=parseFloat(o.style.getPropertyValue("--v-body-scroll-x")),d=parseFloat(o.style.getPropertyValue("--v-body-scroll-y")),p=o.style.scrollBehavior;o.style.scrollBehavior="auto",o.style.removeProperty("--v-body-scroll-x"),o.style.removeProperty("--v-body-scroll-y"),o.style.removeProperty("--v-scrollbar-offset"),o.classList.remove("v-overlay-scroll-blocked"),o.scrollLeft=-c,o.scrollTop=-d,o.style.scrollBehavior=p}),r&&n.root.value.classList.remove("v-overlay--scroll-blocked")})}function Z3(n,t,e){let i=!1,s=-1,r=-1;function a(o){X3(()=>{var d,p;const l=performance.now();(p=(d=n.updateLocation).value)==null||p.call(d,o),i=(performance.now()-l)/(1e3/60)>2})}r=(typeof requestIdleCallback>"u"?o=>o():requestIdleCallback)(()=>{e.run(()=>{Vw(n.targetEl.value??n.contentEl.value,o=>{i?(cancelAnimationFrame(s),s=requestAnimationFrame(()=>{s=requestAnimationFrame(()=>{a(o)})})):a(o)})})}),Vr(()=>{typeof cancelIdleCallback<"u"&&cancelIdleCallback(r),cancelAnimationFrame(s)})}function Vw(n,t){const e=[document,...Ug(n)];e.forEach(i=>{i.addEventListener("scroll",t,{passive:!0})}),Vr(()=>{e.forEach(i=>{i.removeEventListener("scroll",t)})})}const t4=Symbol.for("vuetify:v-menu"),e4=re({closeDelay:[Number,String],openDelay:[Number,String]},"delay");function i4(n,t){let e=()=>{};function i(a){e==null||e();const o=Number(a?n.openDelay:n.closeDelay);return new Promise(l=>{e=q_(o,()=>{t==null||t(a),l(a)})})}function s(){return i(!0)}function r(){return i(!1)}return{clearDelay:e,runOpenDelay:s,runCloseDelay:r}}const n4=re({target:[String,Object],activator:[String,Object],activatorProps:{type:Object,default:()=>({})},openOnClick:{type:Boolean,default:void 0},openOnHover:Boolean,openOnFocus:{type:Boolean,default:void 0},closeOnContentClick:Boolean,...e4()},"VOverlay-activator");function s4(n,t){let{isActive:e,isTop:i,contentEl:s}=t;const r=ja("useActivator"),a=Re();let o=!1,l=!1,c=!0;const d=Et(()=>n.openOnFocus||n.openOnFocus==null&&n.openOnHover),p=Et(()=>n.openOnClick||n.openOnClick==null&&!n.openOnHover&&!d.value),{runOpenDelay:m,runCloseDelay:f}=i4(n,B=>{B===(n.openOnHover&&o||d.value&&l)&&!(n.openOnHover&&e.value&&!i.value)&&(e.value!==B&&(c=!0),e.value=B)}),b=Re(),w={onClick:B=>{B.stopPropagation(),a.value=B.currentTarget||B.target,e.value||(b.value=[B.clientX,B.clientY]),e.value=!e.value},onMouseenter:B=>{var Q;(Q=B.sourceCapabilities)!=null&&Q.firesTouchEvents||(o=!0,a.value=B.currentTarget||B.target,m())},onMouseleave:B=>{o=!1,f()},onFocus:B=>{z_(B.target,":focus-visible")!==!1&&(l=!0,B.stopPropagation(),a.value=B.currentTarget||B.target,m())},onBlur:B=>{l=!1,B.stopPropagation(),f()}},S=Et(()=>{const B={};return p.value&&(B.onClick=w.onClick),n.openOnHover&&(B.onMouseenter=w.onMouseenter,B.onMouseleave=w.onMouseleave),d.value&&(B.onFocus=w.onFocus,B.onBlur=w.onBlur),B}),A=Et(()=>{const B={};if(n.openOnHover&&(B.onMouseenter=()=>{o=!0,m()},B.onMouseleave=()=>{o=!1,f()}),d.value&&(B.onFocusin=()=>{l=!0,m()},B.onFocusout=()=>{l=!1,f()}),n.closeOnContentClick){const Q=Zf(t4,null);B.onClick=()=>{e.value=!1,Q==null||Q.closeParents()}}return B}),x=Et(()=>{const B={};return n.openOnHover&&(B.onMouseenter=()=>{c&&(o=!0,c=!1,m())},B.onMouseleave=()=>{o=!1,f()}),B});gi(i,B=>{var Q;B&&(n.openOnHover&&!o&&(!d.value||!l)||d.value&&!l&&(!n.openOnHover||!o))&&!((Q=s.value)!=null&&Q.contains(document.activeElement))&&(e.value=!1)}),gi(e,B=>{B||setTimeout(()=>{b.value=void 0})},{flush:"post"});const M=Zv();Lm(()=>{M.value&&qa(()=>{a.value=M.el})});const q=Zv(),U=Et(()=>n.target==="cursor"&&b.value?b.value:q.value?q.el:Uw(n.target,r)||a.value),X=Et(()=>Array.isArray(U.value)?void 0:U.value);let G;return gi(()=>!!n.activator,B=>{B&&Ls?(G=vb(),G.run(()=>{r4(n,r,{activatorEl:a,activatorEvents:S})})):G&&G.stop()},{flush:"post",immediate:!0}),Vr(()=>{G==null||G.stop()}),{activatorEl:a,activatorRef:M,target:U,targetEl:X,targetRef:q,activatorEvents:S,contentEvents:A,scrimEvents:x}}function r4(n,t,e){let{activatorEl:i,activatorEvents:s}=e;gi(()=>n.activator,(l,c)=>{if(c&&l!==c){const d=o(c);d&&a(d)}l&&qa(()=>r())},{immediate:!0}),gi(()=>n.activatorProps,()=>{r()}),Vr(()=>{a()});function r(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:o(),c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n.activatorProps;l&&sS(l,ti(s.value,c))}function a(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:o(),c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n.activatorProps;l&&rS(l,ti(s.value,c))}function o(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:n.activator;const c=Uw(l,t);return i.value=(c==null?void 0:c.nodeType)===Node.ELEMENT_NODE?c:void 0,i.value}}function Uw(n,t){var i,s;if(!n)return;let e;if(n==="parent"){let r=(s=(i=t==null?void 0:t.proxy)==null?void 0:i.$el)==null?void 0:s.parentNode;for(;r!=null&&r.hasAttribute("data-no-activator");)r=r.parentNode;e=r}else typeof n=="string"?e=document.querySelector(n):"$el"in n?e=n.$el:e=n;return e}function a4(){if(!Ls)return xi(!1);const{ssr:n}=V2();if(n){const t=xi(!1);return xm(()=>{t.value=!0}),t}else return xi(!0)}const Ww=re({eager:Boolean},"lazy");function Gw(n,t){const e=xi(!1),i=Et(()=>e.value||n.eager||t.value);gi(t,()=>e.value=!0);function s(){n.eager||(e.value=!1)}return{isBooted:e,hasContent:i,onAfterLeave:s}}function Hm(){const t=ja("useScopeId").vnode.scopeId;return{scopeId:t?{[t]:""}:void 0}}const N5=Symbol.for("vuetify:stack"),sd=Pd([]);function o4(n,t,e){const i=ja("useStack"),s=!e,r=Zf(N5,void 0),a=Pd({activeChildren:new Set});Sm(N5,a);const o=xi(+t.value);H2(n,()=>{var p;const d=(p=sd.at(-1))==null?void 0:p[1];o.value=d?d+10:+t.value,s&&sd.push([i.uid,o.value]),r==null||r.activeChildren.add(i.uid),Vr(()=>{if(s){const m=V_(sd).findIndex(f=>f[0]===i.uid);sd.splice(m,1)}r==null||r.activeChildren.delete(i.uid)})});const l=xi(!0);s&&Lm(()=>{var p;const d=((p=sd.at(-1))==null?void 0:p[0])===i.uid;setTimeout(()=>l.value=d)});const c=Et(()=>!a.activeChildren.size);return{globalTop:H_(l),localTop:c,stackStyles:Et(()=>({zIndex:o.value}))}}function l4(n){return{teleportTarget:Et(()=>{const e=n();if(e===!0||!Ls)return;const i=e===!1?document.body:typeof e=="string"?document.querySelector(e):e;if(i==null)return;let s=[...i.children].find(r=>r.matches(".v-overlay-container"));return s||(s=document.createElement("div"),s.className="v-overlay-container",i.appendChild(s)),s})}}const $w=re({transition:{type:[Boolean,String,Object],default:"fade-transition",validator:n=>n!==!0}},"transition"),fh=(n,t)=>{let{slots:e}=t;const{transition:i,disabled:s,group:r,...a}=n,{component:o=r?U2:fc,...l}=typeof i=="object"?i:{};return bu(o,ti(typeof i=="string"?{name:s?"":i}:l,typeof i=="string"?{}:Object.fromEntries(Object.entries({disabled:s,group:r}).filter(c=>{let[d,p]=c;return p!==void 0})),a),e)};function c4(){return!0}function Xw(n,t,e){if(!n||Yw(n,e)===!1)return!1;const i=Lb(t);if(typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&i.host===n.target)return!1;const s=(typeof e.value=="object"&&e.value.include||(()=>[]))();return s.push(t),!s.some(r=>r==null?void 0:r.contains(n.target))}function Yw(n,t){return(typeof t.value=="object"&&t.value.closeConditional||c4)(n)}function h4(n,t,e){const i=typeof e.value=="function"?e.value:e.value.handler;n.shadowTarget=n.target,t._clickOutside.lastMousedownWasOutside&&Xw(n,t,e)&&setTimeout(()=>{Yw(n,e)&&i&&i(n)},0)}function T5(n,t){const e=Lb(n);t(document),typeof ShadowRoot<"u"&&e instanceof ShadowRoot&&t(e)}const u4={mounted(n,t){const e=s=>h4(s,n,t),i=s=>{n._clickOutside.lastMousedownWasOutside=Xw(s,n,t)};T5(n,s=>{s.addEventListener("click",e,!0),s.addEventListener("mousedown",i,!0)}),n._clickOutside||(n._clickOutside={lastMousedownWasOutside:!1}),n._clickOutside[t.instance.$.uid]={onClick:e,onMousedown:i}},beforeUnmount(n,t){n._clickOutside&&(T5(n,e=>{var r;if(!e||!((r=n._clickOutside)!=null&&r[t.instance.$.uid]))return;const{onClick:i,onMousedown:s}=n._clickOutside[t.instance.$.uid];e.removeEventListener("click",i,!0),e.removeEventListener("mousedown",s,!0)}),delete n._clickOutside[t.instance.$.uid])}};function d4(n){const{modelValue:t,color:e,...i}=n;return dt(fc,{name:"fade-transition",appear:!0},{default:()=>[n.modelValue&&dt("div",ti({class:["v-overlay__scrim",n.color.backgroundColorClasses.value],style:n.color.backgroundColorStyles.value},i),null)]})}const hv=re({absolute:Boolean,attach:[Boolean,String,Object],closeOnBack:{type:Boolean,default:!0},contained:Boolean,contentClass:null,contentProps:null,disabled:Boolean,opacity:[Number,String],noClickAnimation:Boolean,modelValue:Boolean,persistent:Boolean,scrim:{type:[Boolean,String],default:!0},zIndex:{type:[Number,String],default:2e3},...n4(),...Ci(),...yu(),...Ww(),...V3(),...Y3(),...Es(),...$w()},"VOverlay"),Qg=Ne()({name:"VOverlay",directives:{ClickOutside:u4},inheritAttrs:!1,props:{_disableGlobalStack:Boolean,...hv()},emits:{"click:outside":n=>!0,"update:modelValue":n=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(n,t){let{slots:e,attrs:i,emit:s}=t;const r=ja("VOverlay"),a=Re(),o=Re(),l=Re(),c=wc(n,"modelValue"),d=Et({get:()=>c.value,set:Z=>{Z&&n.disabled||(c.value=Z)}}),{themeClasses:p}=Ps(n),{rtlClasses:m,isRtl:f}=Ac(),{hasContent:b,onAfterLeave:w}=Gw(n,d),S=Ta(Et(()=>typeof n.scrim=="string"?n.scrim:null)),{globalTop:A,localTop:x,stackStyles:M}=o4(d,ni(n,"zIndex"),n._disableGlobalStack),{activatorEl:q,activatorRef:U,target:X,targetEl:G,targetRef:B,activatorEvents:Q,contentEvents:ct,scrimEvents:P}=s4(n,{isActive:d,isTop:x,contentEl:l}),{teleportTarget:N}=l4(()=>{var ft,mt,Nt;const Z=n.attach||n.contained;if(Z)return Z;const ot=((ft=q==null?void 0:q.value)==null?void 0:ft.getRootNode())||((Nt=(mt=r.proxy)==null?void 0:mt.$el)==null?void 0:Nt.getRootNode());return ot instanceof ShadowRoot?ot:!1}),{dimensionStyles:V}=wu(n),j=a4(),{scopeId:J}=Hm();gi(()=>n.disabled,Z=>{Z&&(d.value=!1)});const{contentStyles:at,updateLocation:st}=U3(n,{isRtl:f,contentEl:l,target:X,isActive:d});K3(n,{root:a,contentEl:l,targetEl:G,isActive:d,updateLocation:st});function tt(Z){s("click:outside",Z),n.persistent?z():d.value=!1}function vt(Z){return d.value&&A.value&&(!n.scrim||Z.target===o.value||Z instanceof MouseEvent&&Z.shadowTarget===o.value)}Ls&&gi(d,Z=>{Z?window.addEventListener("keydown",ht):window.removeEventListener("keydown",ht)},{immediate:!0}),tp(()=>{Ls&&window.removeEventListener("keydown",ht)});function ht(Z){var ot,ft;Z.key==="Escape"&&A.value&&(n.persistent?z():(d.value=!1,(ot=l.value)!=null&&ot.contains(document.activeElement)&&((ft=q.value)==null||ft.focus())))}const At=T3();H2(()=>n.closeOnBack,()=>{R3(At,Z=>{A.value&&d.value?(Z(!1),n.persistent?z():d.value=!1):Z()})});const E=Re();gi(()=>d.value&&(n.absolute||n.contained)&&N.value==null,Z=>{if(Z){const ot=cS(a.value);ot&&ot!==document.scrollingElement&&(E.value=ot.scrollTop)}});function z(){n.noClickAnimation||l.value&&dh(l.value,[{transformOrigin:"center"},{transform:"scale(1.03)"},{transformOrigin:"center"}],{duration:150,easing:Vg})}function $(){s("afterEnter")}function K(){w(),s("afterLeave")}return si(()=>{var Z;return dt(Ba,null,[(Z=e.activator)==null?void 0:Z.call(e,{isActive:d.value,targetRef:B,props:ti({ref:U},Q.value,n.activatorProps)}),j.value&&b.value&&dt(U_,{disabled:!N.value,to:N.value},{default:()=>[dt("div",ti({class:["v-overlay",{"v-overlay--absolute":n.absolute||n.contained,"v-overlay--active":d.value,"v-overlay--contained":n.contained},p.value,m.value,n.class],style:[M.value,{"--v-overlay-opacity":n.opacity,top:Ae(E.value)},n.style],ref:a},J,i),[dt(d4,ti({color:S,modelValue:d.value&&!!n.scrim,ref:o},P.value),null),dt(fh,{appear:!0,persisted:!0,transition:n.transition,target:X.value,onAfterEnter:$,onAfterLeave:K},{default:()=>{var ot;return[pc(dt("div",ti({ref:l,class:["v-overlay__content",n.contentClass],style:[V.value,at.value]},ct.value,n.contentProps),[(ot=e.default)==null?void 0:ot.call(e,{isActive:d})]),[[W2,d.value],[Cm("click-outside"),{handler:tt,closeConditional:vt,include:()=>[q.value]}]])]}})])]})])}),{activatorEl:q,scrimEl:o,target:X,animateClick:z,contentEl:l,globalTop:A,localTop:x,updateLocation:st}}}),G1=Symbol("Forwarded refs");function $1(n,t){let e=n;for(;e;){const i=Reflect.getOwnPropertyDescriptor(e,t);if(i)return i;e=Object.getPrototypeOf(e)}}function uv(n){for(var t=arguments.length,e=new Array(t>1?t-1:0),i=1;i<t;i++)e[i-1]=arguments[i];return n[G1]=e,new Proxy(n,{get(s,r){if(Reflect.has(s,r))return Reflect.get(s,r);if(!(typeof r=="symbol"||r.startsWith("$")||r.startsWith("__"))){for(const a of e)if(a.value&&Reflect.has(a.value,r)){const o=Reflect.get(a.value,r);return typeof o=="function"?o.bind(a.value):o}}},has(s,r){if(Reflect.has(s,r))return!0;if(typeof r=="symbol"||r.startsWith("$")||r.startsWith("__"))return!1;for(const a of e)if(a.value&&Reflect.has(a.value,r))return!0;return!1},set(s,r,a){if(Reflect.has(s,r))return Reflect.set(s,r,a);if(typeof r=="symbol"||r.startsWith("$")||r.startsWith("__"))return!1;for(const o of e)if(o.value&&Reflect.has(o.value,r))return Reflect.set(o.value,r,a);return!1},getOwnPropertyDescriptor(s,r){var o;const a=Reflect.getOwnPropertyDescriptor(s,r);if(a)return a;if(!(typeof r=="symbol"||r.startsWith("$")||r.startsWith("__"))){for(const l of e){if(!l.value)continue;const c=$1(l.value,r)??("_"in l.value?$1((o=l.value._)==null?void 0:o.setupState,r):void 0);if(c)return c}for(const l of e){const c=l.value&&l.value[G1];if(!c)continue;const d=c.slice();for(;d.length;){const p=d.shift(),m=$1(p.value,r);if(m)return m;const f=p.value&&p.value[G1];f&&d.push(...f)}}}}})}const f4=re({id:String,text:String,...G2(hv({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent"])},"VTooltip"),p4=Ne()({name:"VTooltip",props:f4(),emits:{"update:modelValue":n=>!0},setup(n,t){let{slots:e}=t;const i=wc(n,"modelValue"),{scopeId:s}=Hm(),r=fb(),a=Et(()=>n.id||`v-tooltip-${r}`),o=Re(),l=Et(()=>n.location.split(" ").length>1?n.location:n.location+" center"),c=Et(()=>n.origin==="auto"||n.origin==="overlap"||n.origin.split(" ").length>1||n.location.split(" ").length>1?n.origin:n.origin+" center"),d=Et(()=>n.transition?n.transition:i.value?"scale-transition":"fade-transition"),p=Et(()=>ti({"aria-describedby":a.value},n.activatorProps));return si(()=>{const m=Qg.filterProps(n);return dt(Qg,ti({ref:o,class:["v-tooltip",n.class],style:n.style,id:a.value},m,{modelValue:i.value,"onUpdate:modelValue":f=>i.value=f,transition:d.value,absolute:!0,location:l.value,origin:c.value,persistent:!0,role:"tooltip",activatorProps:p.value,_disableGlobalStack:!0},s),{activator:e.activator,default:function(){var S;for(var f=arguments.length,b=new Array(f),w=0;w<f;w++)b[w]=arguments[w];return((S=e.default)==null?void 0:S.call(e,...b))??n.text}})}),uv({},o)}}),xd=Au({__name:"THintButton",props:{hint:{},hintPosition:{default:"top"},label:{},block:{type:Boolean,default:!1},variant:{default:"elevated"},color:{default:"primary"},icon:{},size:{},disabled:{type:Boolean,default:!1}},emits:["click"],setup(n,{emit:t}){return(e,i)=>(Oo(),ep(p4,{location:e.hintPosition},{activator:zi(({props:s})=>[dt(E2,ti({block:e.block,color:e.color,variant:e.variant,icon:e.icon,text:e.label,size:e.size,disabled:e.disabled,class:"class"},{...s,...e.$attrs},{onClick:i[0]||(i[0]=r=>e.$emit("click"))}),null,16,["block","color","variant","icon","text","size","disabled"])]),default:zi(()=>[ao("span",null,s0(e.hint),1)]),_:1},8,["location"]))}}),g4=re({color:String,inset:Boolean,length:[Number,String],opacity:[Number,String],thickness:[Number,String],vertical:Boolean,...Ci(),...Es()},"VDivider"),Og=Ne()({name:"VDivider",props:g4(),setup(n,t){let{attrs:e,slots:i}=t;const{themeClasses:s}=Ps(n),{textColorClasses:r,textColorStyles:a}=vu(ni(n,"color")),o=Et(()=>{const l={};return n.length&&(l[n.vertical?"height":"width"]=Ae(n.length)),n.thickness&&(l[n.vertical?"borderRightWidth":"borderTopWidth"]=Ae(n.thickness)),l});return si(()=>{const l=dt("hr",{class:[{"v-divider":!0,"v-divider--inset":n.inset,"v-divider--vertical":n.vertical},s.value,r.value,n.class],style:[o.value,a.value,{"--v-border-opacity":n.opacity},n.style],"aria-orientation":!e.role||e.role==="separator"?n.vertical?"vertical":"horizontal":void 0,role:`${e.role||"separator"}`},null);return i.default?dt("div",{class:["v-divider__wrapper",{"v-divider__wrapper--vertical":n.vertical,"v-divider__wrapper--inset":n.inset}]},[l,dt("div",{class:"v-divider__content"},[i.default()]),l]):l}),{}}}),m4=re({fluid:{type:Boolean,default:!1},...Ci(),...yu(),...kn()},"VContainer"),Kw=Ne()({name:"VContainer",props:m4(),setup(n,t){let{slots:e}=t;const{rtlClasses:i}=Ac(),{dimensionStyles:s}=wu(n);return si(()=>dt(n.tag,{class:["v-container",{"v-container--fluid":n.fluid},i.value,n.class],style:[s.value,n.style]},e)),{}}}),Jw=Em.reduce((n,t)=>(n[t]={type:[Boolean,String,Number],default:!1},n),{}),Qw=Em.reduce((n,t)=>{const e="offset"+Am(t);return n[e]={type:[String,Number],default:null},n},{}),Zw=Em.reduce((n,t)=>{const e="order"+Am(t);return n[e]={type:[String,Number],default:null},n},{}),I5={col:Object.keys(Jw),offset:Object.keys(Qw),order:Object.keys(Zw)};function v4(n,t,e){let i=n;if(!(e==null||e===!1)){if(t){const s=t.replace(n,"");i+=`-${s}`}return n==="col"&&(i="v-"+i),n==="col"&&(e===""||e===!0)||(i+=`-${e}`),i.toLowerCase()}}const b4=["auto","start","end","center","baseline","stretch"],y4=re({cols:{type:[Boolean,String,Number],default:!1},...Jw,offset:{type:[String,Number],default:null},...Qw,order:{type:[String,Number],default:null},...Zw,alignSelf:{type:String,default:null,validator:n=>b4.includes(n)},...Ci(),...kn()},"VCol"),w4=Ne()({name:"VCol",props:y4(),setup(n,t){let{slots:e}=t;const i=Et(()=>{const s=[];let r;for(r in I5)I5[r].forEach(o=>{const l=n[o],c=v4(r,o,l);c&&s.push(c)});const a=s.some(o=>o.startsWith("v-col-"));return s.push({"v-col":!a||!n.cols,[`v-col-${n.cols}`]:n.cols,[`offset-${n.offset}`]:n.offset,[`order-${n.order}`]:n.order,[`align-self-${n.alignSelf}`]:n.alignSelf}),s});return()=>{var s;return bu(n.tag,{class:[i.value,n.class],style:n.style},(s=e.default)==null?void 0:s.call(e))}}}),dv=["start","end","center"],tA=["space-between","space-around","space-evenly"];function fv(n,t){return Em.reduce((e,i)=>{const s=n+Am(i);return e[s]=t(),e},{})}const A4=[...dv,"baseline","stretch"],eA=n=>A4.includes(n),iA=fv("align",()=>({type:String,default:null,validator:eA})),_4=[...dv,...tA],nA=n=>_4.includes(n),sA=fv("justify",()=>({type:String,default:null,validator:nA})),S4=[...dv,...tA,"stretch"],rA=n=>S4.includes(n),aA=fv("alignContent",()=>({type:String,default:null,validator:rA})),M5={align:Object.keys(iA),justify:Object.keys(sA),alignContent:Object.keys(aA)},x4={align:"align",justify:"justify",alignContent:"align-content"};function L4(n,t,e){let i=x4[n];if(e!=null){if(t){const s=t.replace(n,"");i+=`-${s}`}return i+=`-${e}`,i.toLowerCase()}}const C4=re({dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:eA},...iA,justify:{type:String,default:null,validator:nA},...sA,alignContent:{type:String,default:null,validator:rA},...aA,...Ci(),...kn()},"VRow"),E4=Ne()({name:"VRow",props:C4(),setup(n,t){let{slots:e}=t;const i=Et(()=>{const s=[];let r;for(r in M5)M5[r].forEach(a=>{const o=n[a],l=L4(r,a,o);l&&s.push(l)});return s.push({"v-row--no-gutters":n.noGutters,"v-row--dense":n.dense,[`align-${n.align}`]:n.align,[`justify-${n.justify}`]:n.justify,[`align-content-${n.alignContent}`]:n.alignContent}),s});return()=>{var s;return bu(n.tag,{class:["v-row",i.value,n.class],style:n.style},(s=e.default)==null?void 0:s.call(e))}}}),oA=aS("v-spacer","div","VSpacer"),P4=Symbol.for("vuetify:v-item-group"),k4=re({...Ci(),...av({selectedClass:"v-item--selected"}),...kn(),...Es()},"VItemGroup"),N4=Ne()({name:"VItemGroup",props:k4(),emits:{"update:modelValue":n=>!0},setup(n,t){let{slots:e}=t;const{themeClasses:i}=Ps(n),{isSelected:s,select:r,next:a,prev:o,selected:l}=qm(n,P4);return()=>dt(n.tag,{class:["v-item-group",i.value,n.class],style:n.style},{default:()=>{var c;return[(c=e.default)==null?void 0:c.call(e,{isSelected:s,select:r,next:a,prev:o,selected:l.value})]}})}}),T4=re({text:String,...Ci(),...kn()},"VToolbarTitle"),lA=Ne()({name:"VToolbarTitle",props:T4(),setup(n,t){let{slots:e}=t;return si(()=>{const i=!!(e.default||e.text||n.text);return dt(n.tag,{class:["v-toolbar-title",n.class],style:n.style},{default:()=>{var s;return[i&&dt("div",{class:"v-toolbar-title__placeholder"},[e.text?e.text():n.text,(s=e.default)==null?void 0:s.call(e)])]}})}),{}}}),I4=re({disabled:Boolean,group:Boolean,hideOnLeave:Boolean,leaveAbsolute:Boolean,mode:String,origin:String},"transition");function os(n,t,e){return Ne()({name:n,props:I4({mode:e,origin:t}),setup(i,s){let{slots:r}=s;const a={onBeforeEnter(o){i.origin&&(o.style.transformOrigin=i.origin)},onLeave(o){if(i.leaveAbsolute){const{offsetTop:l,offsetLeft:c,offsetWidth:d,offsetHeight:p}=o;o._transitionInitialStyles={position:o.style.position,top:o.style.top,left:o.style.left,width:o.style.width,height:o.style.height},o.style.position="absolute",o.style.top=`${l}px`,o.style.left=`${c}px`,o.style.width=`${d}px`,o.style.height=`${p}px`}i.hideOnLeave&&o.style.setProperty("display","none","important")},onAfterLeave(o){if(i.leaveAbsolute&&(o!=null&&o._transitionInitialStyles)){const{position:l,top:c,left:d,width:p,height:m}=o._transitionInitialStyles;delete o._transitionInitialStyles,o.style.position=l||"",o.style.top=c||"",o.style.left=d||"",o.style.width=p||"",o.style.height=m||""}}};return()=>{const o=i.group?U2:fc;return bu(o,{name:i.disabled?"":n,css:!i.disabled,...i.group?void 0:{mode:i.mode},...i.disabled?{}:a},r.default)}}})}function cA(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"in-out";return Ne()({name:n,props:{mode:{type:String,default:e},disabled:Boolean,group:Boolean},setup(i,s){let{slots:r}=s;const a=i.group?U2:fc;return()=>bu(a,{name:i.disabled?"":n,css:!i.disabled,...i.disabled?{}:t},r.default)}})}function hA(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const e=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?"width":"height",i=db(`offset-${e}`);return{onBeforeEnter(a){a._parent=a.parentNode,a._initialStyle={transition:a.style.transition,overflow:a.style.overflow,[e]:a.style[e]}},onEnter(a){const o=a._initialStyle;a.style.setProperty("transition","none","important"),a.style.overflow="hidden";const l=`${a[i]}px`;a.style[e]="0",a.offsetHeight,a.style.transition=o.transition,n&&a._parent&&a._parent.classList.add(n),requestAnimationFrame(()=>{a.style[e]=l})},onAfterEnter:r,onEnterCancelled:r,onLeave(a){a._initialStyle={transition:"",overflow:a.style.overflow,[e]:a.style[e]},a.style.overflow="hidden",a.style[e]=`${a[i]}px`,a.offsetHeight,requestAnimationFrame(()=>a.style[e]="0")},onAfterLeave:s,onLeaveCancelled:s};function s(a){n&&a._parent&&a._parent.classList.remove(n),r(a)}function r(a){const o=a._initialStyle[e];a.style.overflow=a._initialStyle.overflow,o!=null&&(a.style[e]=o),delete a._initialStyle}}const M4=re({target:[Object,Array]},"v-dialog-transition"),R4=Ne()({name:"VDialogTransition",props:M4(),setup(n,t){let{slots:e}=t;const i={onBeforeEnter(s){s.style.pointerEvents="none",s.style.visibility="hidden"},async onEnter(s,r){var m;await new Promise(f=>requestAnimationFrame(f)),await new Promise(f=>requestAnimationFrame(f)),s.style.visibility="";const{x:a,y:o,sx:l,sy:c,speed:d}=F5(n.target,s),p=dh(s,[{transform:`translate(${a}px, ${o}px) scale(${l}, ${c})`,opacity:0},{}],{duration:225*d,easing:oS});(m=R5(s))==null||m.forEach(f=>{dh(f,[{opacity:0},{opacity:0,offset:.33},{}],{duration:225*2*d,easing:Vg})}),p.finished.then(()=>r())},onAfterEnter(s){s.style.removeProperty("pointer-events")},onBeforeLeave(s){s.style.pointerEvents="none"},async onLeave(s,r){var m;await new Promise(f=>requestAnimationFrame(f));const{x:a,y:o,sx:l,sy:c,speed:d}=F5(n.target,s);dh(s,[{},{transform:`translate(${a}px, ${o}px) scale(${l}, ${c})`,opacity:0}],{duration:125*d,easing:lS}).finished.then(()=>r()),(m=R5(s))==null||m.forEach(f=>{dh(f,[{},{opacity:0,offset:.2},{opacity:0}],{duration:125*2*d,easing:Vg})})},onAfterLeave(s){s.style.removeProperty("pointer-events")}};return()=>n.target?dt(fc,ti({name:"dialog-transition"},i,{css:!1}),e):dt(fc,{name:"dialog-transition"},e)}});function R5(n){var e;const t=(e=n.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list"))==null?void 0:e.children;return t&&[...t]}function F5(n,t){const e=Sb(n),i=xb(t),[s,r]=getComputedStyle(t).transformOrigin.split(" ").map(A=>parseFloat(A)),[a,o]=getComputedStyle(t).getPropertyValue("--v-overlay-anchor-origin").split(" ");let l=e.left+e.width/2;a==="left"||o==="left"?l-=e.width/2:(a==="right"||o==="right")&&(l+=e.width/2);let c=e.top+e.height/2;a==="top"||o==="top"?c-=e.height/2:(a==="bottom"||o==="bottom")&&(c+=e.height/2);const d=e.width/i.width,p=e.height/i.height,m=Math.max(1,d,p),f=d/m||0,b=p/m||0,w=i.width*i.height/(window.innerWidth*window.innerHeight),S=w>.12?Math.min(1.5,(w-.12)*10+1):1;return{x:l-(s+i.left),y:c-(r+i.top),sx:f,sy:b,speed:S}}os("fab-transition","center center","out-in");os("dialog-bottom-transition");os("dialog-top-transition");const O5=os("fade-transition");os("scale-transition");os("scroll-x-transition");os("scroll-x-reverse-transition");os("scroll-y-transition");os("scroll-y-reverse-transition");os("slide-x-transition");os("slide-x-reverse-transition");os("slide-y-transition");os("slide-y-reverse-transition");const F4=cA("expand-transition",hA());cA("expand-x-transition",hA("",!0));function O4(n){return{aspectStyles:Et(()=>{const t=Number(n.aspectRatio);return t?{paddingBottom:String(1/t*100)+"%"}:void 0})}}const uA=re({aspectRatio:[String,Number],contentClass:null,inline:Boolean,...Ci(),...yu()},"VResponsive"),D5=Ne()({name:"VResponsive",props:uA(),setup(n,t){let{slots:e}=t;const{aspectStyles:i}=O4(n),{dimensionStyles:s}=wu(n);return si(()=>{var r;return dt("div",{class:["v-responsive",{"v-responsive--inline":n.inline},n.class],style:[s.value,n.style]},[dt("div",{class:"v-responsive__sizer",style:i.value},null),(r=e.additional)==null?void 0:r.call(e),e.default&&dt("div",{class:["v-responsive__content",n.contentClass]},[e.default()])])}),{}}});function D4(n,t){if(!z2)return;const e=t.modifiers||{},i=t.value,{handler:s,options:r}=typeof i=="object"?i:{handler:i,options:{}},a=new IntersectionObserver(function(){var p;let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],l=arguments.length>1?arguments[1]:void 0;const c=(p=n._observe)==null?void 0:p[t.instance.$.uid];if(!c)return;const d=o.some(m=>m.isIntersecting);s&&(!e.quiet||c.init)&&(!e.once||d||c.init)&&s(d,o,l),d&&e.once?dA(n,t):c.init=!0},r);n._observe=Object(n._observe),n._observe[t.instance.$.uid]={init:!1,observer:a},a.observe(n)}function dA(n,t){var i;const e=(i=n._observe)==null?void 0:i[t.instance.$.uid];e&&(e.observer.unobserve(n),delete n._observe[t.instance.$.uid])}const B4={mounted:D4,unmounted:dA},j4=re({absolute:Boolean,alt:String,cover:Boolean,color:String,draggable:{type:[Boolean,String],default:void 0},eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},crossorigin:String,referrerpolicy:String,srcset:String,position:String,...uA(),...Ci(),..._u(),...$w()},"VImg"),fA=Ne()({name:"VImg",directives:{intersect:B4},props:j4(),emits:{loadstart:n=>!0,load:n=>!0,error:n=>!0},setup(n,t){let{emit:e,slots:i}=t;const{backgroundColorClasses:s,backgroundColorStyles:r}=Ta(ni(n,"color")),{roundedClasses:a}=Su(n),o=ja("VImg"),l=xi(""),c=Re(),d=xi(n.eager?"loading":"idle"),p=xi(),m=xi(),f=Et(()=>n.src&&typeof n.src=="object"?{src:n.src.src,srcset:n.srcset||n.src.srcset,lazySrc:n.lazySrc||n.src.lazySrc,aspect:Number(n.aspectRatio||n.src.aspect||0)}:{src:n.src,srcset:n.srcset,lazySrc:n.lazySrc,aspect:Number(n.aspectRatio||0)}),b=Et(()=>f.value.aspect||p.value/m.value||0);gi(()=>n.src,()=>{w(d.value!=="idle")}),gi(b,(N,V)=>{!N&&V&&c.value&&q(c.value)}),W_(()=>w());function w(N){if(!(n.eager&&N)&&!(z2&&!N&&!n.eager)){if(d.value="loading",f.value.lazySrc){const V=new Image;V.src=f.value.lazySrc,q(V,null)}f.value.src&&qa(()=>{var V;e("loadstart",((V=c.value)==null?void 0:V.currentSrc)||f.value.src),setTimeout(()=>{var j;if(!o.isUnmounted)if((j=c.value)!=null&&j.complete){if(c.value.naturalWidth||A(),d.value==="error")return;b.value||q(c.value,null),d.value==="loading"&&S()}else b.value||q(c.value),x()})})}}function S(){var N;o.isUnmounted||(x(),q(c.value),d.value="loaded",e("load",((N=c.value)==null?void 0:N.currentSrc)||f.value.src))}function A(){var N;o.isUnmounted||(d.value="error",e("error",((N=c.value)==null?void 0:N.currentSrc)||f.value.src))}function x(){const N=c.value;N&&(l.value=N.currentSrc||N.src)}let M=-1;tp(()=>{clearTimeout(M)});function q(N){let V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const j=()=>{if(clearTimeout(M),o.isUnmounted)return;const{naturalHeight:J,naturalWidth:at}=N;J||at?(p.value=at,m.value=J):!N.complete&&d.value==="loading"&&V!=null?M=window.setTimeout(j,V):(N.currentSrc.endsWith(".svg")||N.currentSrc.startsWith("data:image/svg+xml"))&&(p.value=1,m.value=1)};j()}const U=Et(()=>({"v-img__img--cover":n.cover,"v-img__img--contain":!n.cover})),X=()=>{var j;if(!f.value.src||d.value==="idle")return null;const N=dt("img",{class:["v-img__img",U.value],style:{objectPosition:n.position},src:f.value.src,srcset:f.value.srcset,alt:n.alt,crossorigin:n.crossorigin,referrerpolicy:n.referrerpolicy,draggable:n.draggable,sizes:n.sizes,ref:c,onLoad:S,onError:A},null),V=(j=i.sources)==null?void 0:j.call(i);return dt(fh,{transition:n.transition,appear:!0},{default:()=>[pc(V?dt("picture",{class:"v-img__picture"},[V,N]):N,[[W2,d.value==="loaded"]])]})},G=()=>dt(fh,{transition:n.transition},{default:()=>[f.value.lazySrc&&d.value!=="loaded"&&dt("img",{class:["v-img__img","v-img__img--preload",U.value],style:{objectPosition:n.position},src:f.value.lazySrc,alt:n.alt,crossorigin:n.crossorigin,referrerpolicy:n.referrerpolicy,draggable:n.draggable},null)]}),B=()=>i.placeholder?dt(fh,{transition:n.transition,appear:!0},{default:()=>[(d.value==="loading"||d.value==="error"&&!i.error)&&dt("div",{class:"v-img__placeholder"},[i.placeholder()])]}):null,Q=()=>i.error?dt(fh,{transition:n.transition,appear:!0},{default:()=>[d.value==="error"&&dt("div",{class:"v-img__error"},[i.error()])]}):null,ct=()=>n.gradient?dt("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${n.gradient})`}},null):null,P=xi(!1);{const N=gi(b,V=>{V&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{P.value=!0})}),N())})}return si(()=>{const N=D5.filterProps(n);return pc(dt(D5,ti({class:["v-img",{"v-img--absolute":n.absolute,"v-img--booting":!P.value},s.value,a.value,n.class],style:[{width:Ae(n.width==="auto"?p.value:n.width)},r.value,n.style]},N,{aspectRatio:b.value,"aria-label":n.alt,role:n.alt?"img":void 0}),{additional:()=>dt(Ba,null,[dt(X,null,null),dt(G,null,null),dt(ct,null,null),dt(B,null,null),dt(Q,null,null)]),default:i.default}),[[Cm("intersect"),{handler:w,options:n.options},null,{once:!0}]])}),{currentSrc:l,image:c,state:d,naturalWidth:p,naturalHeight:m}}}),q4=[null,"prominent","default","comfortable","compact"],z4=re({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:n=>q4.includes(n)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...Pm(),...Ci(),...km(),..._u(),...kn({tag:"header"}),...Es()},"VToolbar"),pA=Ne()({name:"VToolbar",props:z4(),setup(n,t){var f;let{slots:e}=t;const{backgroundColorClasses:i,backgroundColorStyles:s}=Ta(ni(n,"color")),{borderClasses:r}=Nm(n),{elevationClasses:a}=Tm(n),{roundedClasses:o}=Su(n),{themeClasses:l}=Ps(n),{rtlClasses:c}=Ac(),d=xi(!!(n.extended||(f=e.extension)!=null&&f.call(e))),p=Et(()=>parseInt(Number(n.height)+(n.density==="prominent"?Number(n.height):0)-(n.density==="comfortable"?8:0)-(n.density==="compact"?16:0),10)),m=Et(()=>d.value?parseInt(Number(n.extensionHeight)+(n.density==="prominent"?Number(n.extensionHeight):0)-(n.density==="comfortable"?4:0)-(n.density==="compact"?8:0),10):0);return _m({VBtn:{variant:"text"}}),si(()=>{var A;const b=!!(n.title||e.title),w=!!(e.image||n.image),S=(A=e.extension)==null?void 0:A.call(e);return d.value=!!(n.extended||S),dt(n.tag,{class:["v-toolbar",{"v-toolbar--absolute":n.absolute,"v-toolbar--collapse":n.collapse,"v-toolbar--flat":n.flat,"v-toolbar--floating":n.floating,[`v-toolbar--density-${n.density}`]:!0},i.value,r.value,a.value,o.value,l.value,c.value,n.class],style:[s.value,n.style]},{default:()=>[w&&dt("div",{key:"image",class:"v-toolbar__image"},[e.image?dt(Ma,{key:"image-defaults",disabled:!n.image,defaults:{VImg:{cover:!0,src:n.image}}},e.image):dt(fA,{key:"image-img",cover:!0,src:n.image},null)]),dt(Ma,{defaults:{VTabs:{height:Ae(p.value)}}},{default:()=>{var x,M,q;return[dt("div",{class:"v-toolbar__content",style:{height:Ae(p.value)}},[e.prepend&&dt("div",{class:"v-toolbar__prepend"},[(x=e.prepend)==null?void 0:x.call(e)]),b&&dt(lA,{key:"title",text:n.title},{text:e.title}),(M=e.default)==null?void 0:M.call(e),e.append&&dt("div",{class:"v-toolbar__append"},[(q=e.append)==null?void 0:q.call(e)])])]}}),dt(Ma,{defaults:{VTabs:{height:Ae(m.value)}}},{default:()=>[dt(F4,null,{default:()=>[d.value&&dt("div",{class:"v-toolbar__extension",style:{height:Ae(m.value)}},[S])]})]})]})}),{contentHeight:p,extensionHeight:m}}}),H4=["max","disabled"],tg=1.5,V4="###############",U4=Au({__name:"PdfViewer",props:{pdfPath:{}},emits:["beforePrintPages","afterPrintPages","onPrintPagesError","onResize"],setup(n,{expose:t,emit:e}){const i=n,s=e,r=Re(),a=Re(),o=Re(!0),l=Re(0),c=Re(0),d=Et(()=>new URL(i.pdfPath,import.meta.url).href),p=Et(()=>d.value.split("/").pop()),m=G_(),f=Re([]),b={default:{width:0,height:0},initial:{width:0,height:0}};let w,S=Re(2.5);const A=window.devicePixelRatio||1;xm(async()=>{o.value=!0,u3.workerSrc=new URL("/tek-eSignature/assets/pdf.worker-eDZEDl3N.mjs",import.meta.url).href,w=await x();const j=await w.getPage(1);let J=j.getViewport({scale:1});b.default.width=J.width,b.default.height=J.height,J=j.getViewport({scale:S.value}),b.initial.width=J.width,b.initial.height=J.height,c.value=w.numPages,l.value=1,f.value=[],await G()?await X():await M(),o.value=!1});async function x(){return d3(d.value).promise}async function M(){s("beforePrintPages");try{for(let j=1;j<=w.numPages;j++){const J=document.getElementById(`page-${j}`)?document.getElementById(`page-${j}`):q(j);await B(j,J)}}finally{s("afterPrintPages")}}function q(j){const J=document.createElement("canvas");return J.className="pdf-page",J.id=`page-${j.toString()}`,U(J),f.value.push(J),J}function U(j){const J=document.createElement("div");J.className="pdf-page-wrapper",J.appendChild(j),a.value.appendChild(J)}async function X(){const J=(await w.getPage(1)).getViewport({scale:1}),at=r.value.clientWidth*tg/A,st=Math.floor(at/J.width);S.value=st,await M(),s("onResize")}async function G(){return(await w.getPage(1)).getViewport({scale:S.value}).width*A/tg>r.value.clientWidth}async function B(j,J){const at=await w.getPage(j),st=at.getViewport({scale:S.value});J.width=Math.floor(st.width*A),J.height=Math.floor(st.height*A),J.style.width=`${J.width/tg}px`,J.style.height=`${J.height/tg}px`;const tt=A!==1?[A,0,0,A,0,0]:void 0;try{await at.render({canvasContext:J.getContext("2d"),transform:tt,viewport:st}).promise}catch(vt){o.value=!1,s("onPrintPagesError",vt instanceof Error?vt:new Error(String(vt)))}}function Q(){l.value--,P(l.value)}function ct(){l.value++,P(l.value)}function P(j){j<1?j=1:j>c.value&&(j=c.value),l.value=j,m.push(`#page-${l.value}`)}async function N(){S.value*=4/3,await M(),s("onResize")}async function V(){S.value*=2/3,await M(),s("onResize")}return t({pagesCanvas:f,loadingPdfDoc:o,viewports:b}),(j,J)=>{const at=Cm("mask");return Oo(),$2(Ba,null,[dt(pA,{color:"#323639",id:"pdf-viewer-toolbar",height:"40",class:"pa-2"},{default:zi(()=>[dt(lA,null,{default:zi(()=>[bb(s0(p.value),1)]),_:1}),dt(oA),dt(Og,{vertical:"",class:"mx-1"}),ao("div",null,[dt(E2,{density:"compact",variant:"text",icon:"mdi-menu-left",color:"white",disabled:l.value===1,onClick:Q},null,8,["disabled"]),pc(ao("input",{id:"pdf-viewer-toolbar-current-page",type:"tel",class:"pa-1",style:{color:"white"},min:"1",max:c.value,"onUpdate:modelValue":J[0]||(J[0]=st=>l.value=st),disabled:o.value,onChange:J[1]||(J[1]=st=>P(l.value))},null,40,H4),[[at,V4],[$_,l.value]]),ao("span",null," / "+s0(c.value),1),dt(E2,{density:"compact",variant:"text",icon:"mdi-menu-right",color:"white",disabled:l.value===c.value||o.value,onClick:ct},null,8,["disabled"])]),dt(Og,{vertical:"",class:"mx-1"}),dt(N4,null,{default:zi(()=>[dt(xd,{hint:"Aumentar zoom","hint-position":"bottom",density:"compact",variant:"text",icon:"mdi-magnify-plus-outline",color:"white",disabled:Ed(S)>5||o.value,onClick:N},null,8,["disabled"]),dt(xd,{hint:"Diminuir zoom","hint-position":"bottom",density:"compact",variant:"text",icon:"mdi-magnify-minus-outline",color:"white",disabled:Ed(S)<.5||o.value,onClick:V},null,8,["disabled"]),dt(xd,{hint:"Ajustar a tela","hint-position":"bottom",density:"compact",variant:"text",icon:"mdi-fit-to-screen-outline",color:"white",disabled:o.value,onClick:X},null,8,["disabled"])]),_:1}),dt(Og,{vertical:"",class:"mx-1"}),X_(j.$slots,"toolbarButtons")]),_:3}),o.value?(Oo(),ep(C3,{key:0,indeterminate:"",class:"pt-15",color:"primary"})):yb("",!0),ao("div",{id:"pdf-viewer",ref_key:"pdfViewer",ref:r},[ao("div",{id:"pdf-viewer-container",ref_key:"pdfViewerContainer",ref:a,style:Y_(o.value?"visibility: hidden":"")},null,4)],512)],64)}}});/*!
 * Signature Pad v5.0.3 | https://github.com/szimek/signature_pad
 * (c) 2024 Szymon Nowak | Released under the MIT license
 */class Zg{constructor(t,e,i,s){if(isNaN(t)||isNaN(e))throw new Error(`Point is invalid: (${t}, ${e})`);this.x=+t,this.y=+e,this.pressure=i||0,this.time=s||Date.now()}distanceTo(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))}equals(t){return this.x===t.x&&this.y===t.y&&this.pressure===t.pressure&&this.time===t.time}velocityFrom(t){return this.time!==t.time?this.distanceTo(t)/(this.time-t.time):0}}class pv{static fromPoints(t,e){const i=this.calculateControlPoints(t[0],t[1],t[2]).c2,s=this.calculateControlPoints(t[1],t[2],t[3]).c1;return new pv(t[1],i,s,t[2],e.start,e.end)}static calculateControlPoints(t,e,i){const s=t.x-e.x,r=t.y-e.y,a=e.x-i.x,o=e.y-i.y,l={x:(t.x+e.x)/2,y:(t.y+e.y)/2},c={x:(e.x+i.x)/2,y:(e.y+i.y)/2},d=Math.sqrt(s*s+r*r),p=Math.sqrt(a*a+o*o),m=l.x-c.x,f=l.y-c.y,b=d+p==0?0:p/(d+p),w={x:c.x+m*b,y:c.y+f*b},S=e.x-w.x,A=e.y-w.y;return{c1:new Zg(l.x+S,l.y+A),c2:new Zg(c.x+S,c.y+A)}}constructor(t,e,i,s,r,a){this.startPoint=t,this.control2=e,this.control1=i,this.endPoint=s,this.startWidth=r,this.endWidth=a}length(){let e=0,i,s;for(let r=0;r<=10;r+=1){const a=r/10,o=this.point(a,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),l=this.point(a,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(r>0){const c=o-i,d=l-s;e+=Math.sqrt(c*c+d*d)}i=o,s=l}return e}point(t,e,i,s,r){return e*(1-t)*(1-t)*(1-t)+3*i*(1-t)*(1-t)*t+3*s*(1-t)*t*t+r*t*t*t}}class W4{constructor(){try{this._et=new EventTarget}catch{this._et=document}}addEventListener(t,e,i){this._et.addEventListener(t,e,i)}dispatchEvent(t){return this._et.dispatchEvent(t)}removeEventListener(t,e,i){this._et.removeEventListener(t,e,i)}}function G4(n,t=250){let e=0,i=null,s,r,a;const o=()=>{e=Date.now(),i=null,s=n.apply(r,a),i||(r=null,a=[])};return function(...c){const d=Date.now(),p=t-(d-e);return r=this,a=c,p<=0||p>t?(i&&(clearTimeout(i),i=null),e=d,s=n.apply(r,a),i||(r=null,a=[])):i||(i=window.setTimeout(o,p)),s}}class tm extends W4{constructor(t,e={}){var i,s,r;super(),this.canvas=t,this._drawingStroke=!1,this._isEmpty=!0,this._lastPoints=[],this._data=[],this._lastVelocity=0,this._lastWidth=0,this._handleMouseDown=a=>{!this._isLeftButtonPressed(a,!0)||this._drawingStroke||this._strokeBegin(this._pointerEventToSignatureEvent(a))},this._handleMouseMove=a=>{if(!this._isLeftButtonPressed(a,!0)||!this._drawingStroke){this._strokeEnd(this._pointerEventToSignatureEvent(a),!1);return}this._strokeMoveUpdate(this._pointerEventToSignatureEvent(a))},this._handleMouseUp=a=>{this._isLeftButtonPressed(a)||this._strokeEnd(this._pointerEventToSignatureEvent(a))},this._handleTouchStart=a=>{a.targetTouches.length!==1||this._drawingStroke||(a.cancelable&&a.preventDefault(),this._strokeBegin(this._touchEventToSignatureEvent(a)))},this._handleTouchMove=a=>{if(a.targetTouches.length===1){if(a.cancelable&&a.preventDefault(),!this._drawingStroke){this._strokeEnd(this._touchEventToSignatureEvent(a),!1);return}this._strokeMoveUpdate(this._touchEventToSignatureEvent(a))}},this._handleTouchEnd=a=>{a.targetTouches.length===0&&(a.cancelable&&a.preventDefault(),this.canvas.removeEventListener("touchmove",this._handleTouchMove),this._strokeEnd(this._touchEventToSignatureEvent(a)))},this._handlePointerDown=a=>{!this._isLeftButtonPressed(a)||this._drawingStroke||(a.preventDefault(),this._strokeBegin(this._pointerEventToSignatureEvent(a)))},this._handlePointerMove=a=>{if(!this._isLeftButtonPressed(a,!0)||!this._drawingStroke){this._strokeEnd(this._pointerEventToSignatureEvent(a),!1);return}a.preventDefault(),this._strokeMoveUpdate(this._pointerEventToSignatureEvent(a))},this._handlePointerUp=a=>{this._isLeftButtonPressed(a)||(a.preventDefault(),this._strokeEnd(this._pointerEventToSignatureEvent(a)))},this.velocityFilterWeight=e.velocityFilterWeight||.7,this.minWidth=e.minWidth||.5,this.maxWidth=e.maxWidth||2.5,this.throttle=(i=e.throttle)!==null&&i!==void 0?i:16,this.minDistance=(s=e.minDistance)!==null&&s!==void 0?s:5,this.dotSize=e.dotSize||0,this.penColor=e.penColor||"black",this.backgroundColor=e.backgroundColor||"rgba(0,0,0,0)",this.compositeOperation=e.compositeOperation||"source-over",this.canvasContextOptions=(r=e.canvasContextOptions)!==null&&r!==void 0?r:{},this._strokeMoveUpdate=this.throttle?G4(tm.prototype._strokeUpdate,this.throttle):tm.prototype._strokeUpdate,this._ctx=t.getContext("2d",this.canvasContextOptions),this.clear(),this.on()}clear(){const{_ctx:t,canvas:e}=this;t.fillStyle=this.backgroundColor,t.clearRect(0,0,e.width,e.height),t.fillRect(0,0,e.width,e.height),this._data=[],this._reset(this._getPointGroupOptions()),this._isEmpty=!0}fromDataURL(t,e={}){return new Promise((i,s)=>{const r=new Image,a=e.ratio||window.devicePixelRatio||1,o=e.width||this.canvas.width/a,l=e.height||this.canvas.height/a,c=e.xOffset||0,d=e.yOffset||0;this._reset(this._getPointGroupOptions()),r.onload=()=>{this._ctx.drawImage(r,c,d,o,l),i()},r.onerror=p=>{s(p)},r.crossOrigin="anonymous",r.src=t,this._isEmpty=!1})}toDataURL(t="image/png",e){switch(t){case"image/svg+xml":return typeof e!="object"&&(e=void 0),`data:image/svg+xml;base64,${btoa(this.toSVG(e))}`;default:return typeof e!="number"&&(e=void 0),this.canvas.toDataURL(t,e)}}on(){this.canvas.style.touchAction="none",this.canvas.style.msTouchAction="none",this.canvas.style.userSelect="none";const t=/Macintosh/.test(navigator.userAgent)&&"ontouchstart"in document;window.PointerEvent&&!t?this._handlePointerEvents():(this._handleMouseEvents(),"ontouchstart"in window&&this._handleTouchEvents())}off(){this.canvas.style.touchAction="auto",this.canvas.style.msTouchAction="auto",this.canvas.style.userSelect="auto",this.canvas.removeEventListener("pointerdown",this._handlePointerDown),this.canvas.removeEventListener("mousedown",this._handleMouseDown),this.canvas.removeEventListener("touchstart",this._handleTouchStart),this._removeMoveUpEventListeners()}_getListenerFunctions(){var t;const e=window.document===this.canvas.ownerDocument?window:(t=this.canvas.ownerDocument.defaultView)!==null&&t!==void 0?t:this.canvas.ownerDocument;return{addEventListener:e.addEventListener.bind(e),removeEventListener:e.removeEventListener.bind(e)}}_removeMoveUpEventListeners(){const{removeEventListener:t}=this._getListenerFunctions();t("pointermove",this._handlePointerMove),t("pointerup",this._handlePointerUp),t("mousemove",this._handleMouseMove),t("mouseup",this._handleMouseUp),t("touchmove",this._handleTouchMove),t("touchend",this._handleTouchEnd)}isEmpty(){return this._isEmpty}fromData(t,{clear:e=!0}={}){e&&this.clear(),this._fromData(t,this._drawCurve.bind(this),this._drawDot.bind(this)),this._data=this._data.concat(t)}toData(){return this._data}_isLeftButtonPressed(t,e){return e?t.buttons===1:(t.buttons&1)===1}_pointerEventToSignatureEvent(t){return{event:t,type:t.type,x:t.clientX,y:t.clientY,pressure:"pressure"in t?t.pressure:0}}_touchEventToSignatureEvent(t){const e=t.changedTouches[0];return{event:t,type:t.type,x:e.clientX,y:e.clientY,pressure:e.force}}_getPointGroupOptions(t){return{penColor:t&&"penColor"in t?t.penColor:this.penColor,dotSize:t&&"dotSize"in t?t.dotSize:this.dotSize,minWidth:t&&"minWidth"in t?t.minWidth:this.minWidth,maxWidth:t&&"maxWidth"in t?t.maxWidth:this.maxWidth,velocityFilterWeight:t&&"velocityFilterWeight"in t?t.velocityFilterWeight:this.velocityFilterWeight,compositeOperation:t&&"compositeOperation"in t?t.compositeOperation:this.compositeOperation}}_strokeBegin(t){if(!this.dispatchEvent(new CustomEvent("beginStroke",{detail:t,cancelable:!0})))return;const{addEventListener:i}=this._getListenerFunctions();switch(t.event.type){case"mousedown":i("mousemove",this._handleMouseMove),i("mouseup",this._handleMouseUp);break;case"touchstart":i("touchmove",this._handleTouchMove),i("touchend",this._handleTouchEnd);break;case"pointerdown":i("pointermove",this._handlePointerMove),i("pointerup",this._handlePointerUp);break}this._drawingStroke=!0;const s=this._getPointGroupOptions(),r=Object.assign(Object.assign({},s),{points:[]});this._data.push(r),this._reset(s),this._strokeUpdate(t)}_strokeUpdate(t){if(!this._drawingStroke)return;if(this._data.length===0){this._strokeBegin(t);return}this.dispatchEvent(new CustomEvent("beforeUpdateStroke",{detail:t}));const e=this._createPoint(t.x,t.y,t.pressure),i=this._data[this._data.length-1],s=i.points,r=s.length>0&&s[s.length-1],a=r?e.distanceTo(r)<=this.minDistance:!1,o=this._getPointGroupOptions(i);if(!r||!(r&&a)){const l=this._addPoint(e,o);r?l&&this._drawCurve(l,o):this._drawDot(e,o),s.push({time:e.time,x:e.x,y:e.y,pressure:e.pressure})}this.dispatchEvent(new CustomEvent("afterUpdateStroke",{detail:t}))}_strokeEnd(t,e=!0){this._removeMoveUpEventListeners(),this._drawingStroke&&(e&&this._strokeUpdate(t),this._drawingStroke=!1,this.dispatchEvent(new CustomEvent("endStroke",{detail:t})))}_handlePointerEvents(){this._drawingStroke=!1,this.canvas.addEventListener("pointerdown",this._handlePointerDown)}_handleMouseEvents(){this._drawingStroke=!1,this.canvas.addEventListener("mousedown",this._handleMouseDown)}_handleTouchEvents(){this.canvas.addEventListener("touchstart",this._handleTouchStart)}_reset(t){this._lastPoints=[],this._lastVelocity=0,this._lastWidth=(t.minWidth+t.maxWidth)/2,this._ctx.fillStyle=t.penColor,this._ctx.globalCompositeOperation=t.compositeOperation}_createPoint(t,e,i){const s=this.canvas.getBoundingClientRect();return new Zg(t-s.left,e-s.top,i,new Date().getTime())}_addPoint(t,e){const{_lastPoints:i}=this;if(i.push(t),i.length>2){i.length===3&&i.unshift(i[0]);const s=this._calculateCurveWidths(i[1],i[2],e),r=pv.fromPoints(i,s);return i.shift(),r}return null}_calculateCurveWidths(t,e,i){const s=i.velocityFilterWeight*e.velocityFrom(t)+(1-i.velocityFilterWeight)*this._lastVelocity,r=this._strokeWidth(s,i),a={end:r,start:this._lastWidth};return this._lastVelocity=s,this._lastWidth=r,a}_strokeWidth(t,e){return Math.max(e.maxWidth/(t+1),e.minWidth)}_drawCurveSegment(t,e,i){const s=this._ctx;s.moveTo(t,e),s.arc(t,e,i,0,2*Math.PI,!1),this._isEmpty=!1}_drawCurve(t,e){const i=this._ctx,s=t.endWidth-t.startWidth,r=Math.ceil(t.length())*2;i.beginPath(),i.fillStyle=e.penColor;for(let a=0;a<r;a+=1){const o=a/r,l=o*o,c=l*o,d=1-o,p=d*d,m=p*d;let f=m*t.startPoint.x;f+=3*p*o*t.control1.x,f+=3*d*l*t.control2.x,f+=c*t.endPoint.x;let b=m*t.startPoint.y;b+=3*p*o*t.control1.y,b+=3*d*l*t.control2.y,b+=c*t.endPoint.y;const w=Math.min(t.startWidth+c*s,e.maxWidth);this._drawCurveSegment(f,b,w)}i.closePath(),i.fill()}_drawDot(t,e){const i=this._ctx,s=e.dotSize>0?e.dotSize:(e.minWidth+e.maxWidth)/2;i.beginPath(),this._drawCurveSegment(t.x,t.y,s),i.closePath(),i.fillStyle=e.penColor,i.fill()}_fromData(t,e,i){for(const s of t){const{points:r}=s,a=this._getPointGroupOptions(s);if(r.length>1)for(let o=0;o<r.length;o+=1){const l=r[o],c=new Zg(l.x,l.y,l.pressure,l.time);o===0&&this._reset(a);const d=this._addPoint(c,a);d&&e(d,a)}else this._reset(a),i(r[0],a)}}toSVG({includeBackgroundColor:t=!1}={}){const e=this._data,i=Math.max(window.devicePixelRatio||1,1),s=0,r=0,a=this.canvas.width/i,o=this.canvas.height/i,l=document.createElementNS("http://www.w3.org/2000/svg","svg");if(l.setAttribute("xmlns","http://www.w3.org/2000/svg"),l.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),l.setAttribute("viewBox",`${s} ${r} ${a} ${o}`),l.setAttribute("width",a.toString()),l.setAttribute("height",o.toString()),t&&this.backgroundColor){const c=document.createElement("rect");c.setAttribute("width","100%"),c.setAttribute("height","100%"),c.setAttribute("fill",this.backgroundColor),l.appendChild(c)}return this._fromData(e,(c,{penColor:d})=>{const p=document.createElement("path");if(!isNaN(c.control1.x)&&!isNaN(c.control1.y)&&!isNaN(c.control2.x)&&!isNaN(c.control2.y)){const m=`M ${c.startPoint.x.toFixed(3)},${c.startPoint.y.toFixed(3)} C ${c.control1.x.toFixed(3)},${c.control1.y.toFixed(3)} ${c.control2.x.toFixed(3)},${c.control2.y.toFixed(3)} ${c.endPoint.x.toFixed(3)},${c.endPoint.y.toFixed(3)}`;p.setAttribute("d",m),p.setAttribute("stroke-width",(c.endWidth*2.25).toFixed(3)),p.setAttribute("stroke",d),p.setAttribute("fill","none"),p.setAttribute("stroke-linecap","round"),l.appendChild(p)}},(c,{penColor:d,dotSize:p,minWidth:m,maxWidth:f})=>{const b=document.createElement("circle"),w=p>0?p:(m+f)/2;b.setAttribute("r",w.toString()),b.setAttribute("cx",c.x.toString()),b.setAttribute("cy",c.y.toString()),b.setAttribute("fill",d),l.appendChild(b)}),l.outerHTML}}const $4=re({color:String,...Pm(),...Ci(),...yu(),...km(),...lv(),...Tw(),..._u(),...kn(),...Es()},"VSheet"),B5=Ne()({name:"VSheet",props:$4(),setup(n,t){let{slots:e}=t;const{themeClasses:i}=Ps(n),{backgroundColorClasses:s,backgroundColorStyles:r}=Ta(ni(n,"color")),{borderClasses:a}=Nm(n),{dimensionStyles:o}=wu(n),{elevationClasses:l}=Tm(n),{locationStyles:c}=cv(n),{positionClasses:d}=Iw(n),{roundedClasses:p}=Su(n);return si(()=>dt(n.tag,{class:["v-sheet",i.value,s.value,a.value,l.value,d.value,p.value,n.class],style:[r.value,o.value,c.value,n.style]},e)),{}}}),gv=Symbol.for("vuetify:v-tabs"),X4=re({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...G2(zw({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),gA=Ne()({name:"VTab",props:X4(),setup(n,t){let{slots:e,attrs:i}=t;const{textColorClasses:s,textColorStyles:r}=vu(n,"sliderColor"),a=Re(),o=Re(),l=Et(()=>n.direction==="horizontal"),c=Et(()=>{var p,m;return((m=(p=a.value)==null?void 0:p.group)==null?void 0:m.isSelected.value)??!1});function d(p){var f,b;let{value:m}=p;if(m){const w=(b=(f=a.value)==null?void 0:f.$el.parentElement)==null?void 0:b.querySelector(".v-tab--selected .v-tab__slider"),S=o.value;if(!w||!S)return;const A=getComputedStyle(w).color,x=w.getBoundingClientRect(),M=S.getBoundingClientRect(),q=l.value?"x":"y",U=l.value?"X":"Y",X=l.value?"right":"bottom",G=l.value?"width":"height",B=x[q],Q=M[q],ct=B>Q?x[X]-M[X]:x[q]-M[q],P=Math.sign(ct)>0?l.value?"right":"bottom":Math.sign(ct)<0?l.value?"left":"top":"center",V=(Math.abs(ct)+(Math.sign(ct)<0?x[G]:M[G]))/Math.max(x[G],M[G])||0,j=x[G]/M[G]||0,J=1.5;dh(S,{backgroundColor:[A,"currentcolor"],transform:[`translate${U}(${ct}px) scale${U}(${j})`,`translate${U}(${ct/J}px) scale${U}(${(V-1)/J+1})`,"none"],transformOrigin:Array(3).fill(P)},{duration:225,easing:Vg})}}return si(()=>{const p=nr.filterProps(n);return dt(nr,ti({symbol:gv,ref:a,class:["v-tab",n.class],style:n.style,tabindex:c.value?0:-1,role:"tab","aria-selected":String(c.value),active:!1},p,i,{block:n.fixed,maxWidth:n.fixed?300:void 0,"onGroup:selected":d}),{...e,default:()=>{var m;return dt(Ba,null,[((m=e.default)==null?void 0:m.call(e))??n.text,!n.hideSlider&&dt("div",{ref:o,class:["v-tab__slider",s.value],style:r.value},null)])}})}),uv({},a)}}),Y4=n=>{const{touchstartX:t,touchendX:e,touchstartY:i,touchendY:s}=n,r=.5,a=16;n.offsetX=e-t,n.offsetY=s-i,Math.abs(n.offsetY)<r*Math.abs(n.offsetX)&&(n.left&&e<t-a&&n.left(n),n.right&&e>t+a&&n.right(n)),Math.abs(n.offsetX)<r*Math.abs(n.offsetY)&&(n.up&&s<i-a&&n.up(n),n.down&&s>i+a&&n.down(n))};function K4(n,t){var i;const e=n.changedTouches[0];t.touchstartX=e.clientX,t.touchstartY=e.clientY,(i=t.start)==null||i.call(t,{originalEvent:n,...t})}function J4(n,t){var i;const e=n.changedTouches[0];t.touchendX=e.clientX,t.touchendY=e.clientY,(i=t.end)==null||i.call(t,{originalEvent:n,...t}),Y4(t)}function Q4(n,t){var i;const e=n.changedTouches[0];t.touchmoveX=e.clientX,t.touchmoveY=e.clientY,(i=t.move)==null||i.call(t,{originalEvent:n,...t})}function Z4(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:n.left,right:n.right,up:n.up,down:n.down,start:n.start,move:n.move,end:n.end};return{touchstart:e=>K4(e,t),touchend:e=>J4(e,t),touchmove:e=>Q4(e,t)}}function tL(n,t){var o;const e=t.value,i=e!=null&&e.parent?n.parentElement:n,s=(e==null?void 0:e.options)??{passive:!0},r=(o=t.instance)==null?void 0:o.$.uid;if(!i||!r)return;const a=Z4(t.value);i._touchHandlers=i._touchHandlers??Object.create(null),i._touchHandlers[r]=a,wb(a).forEach(l=>{i.addEventListener(l,a[l],s)})}function eL(n,t){var r,a;const e=(r=t.value)!=null&&r.parent?n.parentElement:n,i=(a=t.instance)==null?void 0:a.$.uid;if(!(e!=null&&e._touchHandlers)||!i)return;const s=e._touchHandlers[i];wb(s).forEach(o=>{e.removeEventListener(o,s[o])}),delete e._touchHandlers[i]}const mA={mounted:tL,unmounted:eL},vA=Symbol.for("vuetify:v-window"),bA=Symbol.for("vuetify:v-window-group"),yA=re({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:n=>typeof n=="boolean"||n==="hover"},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...Ci(),...kn(),...Es()},"VWindow"),j5=Ne()({name:"VWindow",directives:{Touch:mA},props:yA(),emits:{"update:modelValue":n=>!0},setup(n,t){let{slots:e}=t;const{themeClasses:i}=Ps(n),{isRtl:s}=Ac(),{t:r}=K_(),a=qm(n,bA),o=Re(),l=Et(()=>s.value?!n.reverse:n.reverse),c=xi(!1),d=Et(()=>{const q=n.direction==="vertical"?"y":"x",X=(l.value?!c.value:c.value)?"-reverse":"";return`v-window-${q}${X}-transition`}),p=xi(0),m=Re(void 0),f=Et(()=>a.items.value.findIndex(q=>a.selected.value.includes(q.id)));gi(f,(q,U)=>{const X=a.items.value.length,G=X-1;X<=2?c.value=q<U:q===G&&U===0?c.value=!0:q===0&&U===G?c.value=!1:c.value=q<U}),Sm(vA,{transition:d,isReversed:c,transitionCount:p,transitionHeight:m,rootRef:o});const b=Et(()=>n.continuous||f.value!==0),w=Et(()=>n.continuous||f.value!==a.items.value.length-1);function S(){b.value&&a.prev()}function A(){w.value&&a.next()}const x=Et(()=>{const q=[],U={icon:s.value?n.nextIcon:n.prevIcon,class:`v-window__${l.value?"right":"left"}`,onClick:a.prev,"aria-label":r("$vuetify.carousel.prev")};q.push(b.value?e.prev?e.prev({props:U}):dt(nr,U,null):dt("div",null,null));const X={icon:s.value?n.prevIcon:n.nextIcon,class:`v-window__${l.value?"left":"right"}`,onClick:a.next,"aria-label":r("$vuetify.carousel.next")};return q.push(w.value?e.next?e.next({props:X}):dt(nr,X,null):dt("div",null,null)),q}),M=Et(()=>n.touch===!1?n.touch:{...{left:()=>{l.value?S():A()},right:()=>{l.value?A():S()},start:U=>{let{originalEvent:X}=U;X.stopPropagation()}},...n.touch===!0?{}:n.touch});return si(()=>pc(dt(n.tag,{ref:o,class:["v-window",{"v-window--show-arrows-on-hover":n.showArrows==="hover"},i.value,n.class],style:n.style},{default:()=>{var q,U;return[dt("div",{class:"v-window__container",style:{height:m.value}},[(q=e.default)==null?void 0:q.call(e,{group:a}),n.showArrows!==!1&&dt("div",{class:"v-window__controls"},[x.value])]),(U=e.additional)==null?void 0:U.call(e,{group:a})]}}),[[Cm("touch"),M.value]])),{group:a}}}),iL=re({...G2(yA(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),wA=Ne()({name:"VTabsWindow",props:iL(),emits:{"update:modelValue":n=>!0},setup(n,t){let{slots:e}=t;const i=Zf(gv,null),s=wc(n,"modelValue"),r=Et({get(){var a;return s.value!=null||!i?s.value:(a=i.items.value.find(o=>i.selected.value.includes(o.id)))==null?void 0:a.value},set(a){s.value=a}});return si(()=>{const a=j5.filterProps(n);return dt(j5,ti({_as:"VTabsWindow"},a,{modelValue:r.value,"onUpdate:modelValue":o=>r.value=o,class:["v-tabs-window",n.class],style:n.style,mandatory:!1,touch:!1}),e)}),{}}}),AA=re({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...Ci(),...Cw(),...Ww()},"VWindowItem"),q5=Ne()({name:"VWindowItem",directives:{Touch:mA},props:AA(),emits:{"group:selected":n=>!0},setup(n,t){let{slots:e}=t;const i=Zf(vA),s=Ew(n,bA),{isBooted:r}=J_();if(!i||!s)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const a=xi(!1),o=Et(()=>r.value&&(i.isReversed.value?n.reverseTransition!==!1:n.transition!==!1));function l(){!a.value||!i||(a.value=!1,i.transitionCount.value>0&&(i.transitionCount.value-=1,i.transitionCount.value===0&&(i.transitionHeight.value=void 0)))}function c(){var b;a.value||!i||(a.value=!0,i.transitionCount.value===0&&(i.transitionHeight.value=Ae((b=i.rootRef.value)==null?void 0:b.clientHeight)),i.transitionCount.value+=1)}function d(){l()}function p(b){a.value&&qa(()=>{!o.value||!a.value||!i||(i.transitionHeight.value=Ae(b.clientHeight))})}const m=Et(()=>{const b=i.isReversed.value?n.reverseTransition:n.transition;return o.value?{name:typeof b!="string"?i.transition.value:b,onBeforeEnter:c,onAfterEnter:l,onEnterCancelled:d,onBeforeLeave:c,onAfterLeave:l,onLeaveCancelled:d,onEnter:p}:!1}),{hasContent:f}=Gw(n,s.isSelected);return si(()=>dt(fh,{transition:m.value,disabled:!r.value},{default:()=>{var b;return[pc(dt("div",{class:["v-window-item",s.selectedClass.value,n.class],style:n.style},[f.value&&((b=e.default)==null?void 0:b.call(e))]),[[W2,s.isSelected.value]])]}})),{groupItem:s}}}),nL=re({...AA()},"VTabsWindowItem"),_A=Ne()({name:"VTabsWindowItem",props:nL(),setup(n,t){let{slots:e}=t;return si(()=>{const i=q5.filterProps(n);return dt(q5,ti({_as:"VTabsWindowItem"},i,{class:["v-tabs-window-item",n.class],style:n.style}),e)}),{}}});function sL(n){let{selectedElement:t,containerElement:e,isRtl:i,isHorizontal:s}=n;const r=Md(s,e),a=SA(s,i,e),o=Md(s,t),l=xA(s,t),c=o*.4;return a>l?l-c:a+r<l+o?l-r+o+c:a}function rL(n){let{selectedElement:t,containerElement:e,isHorizontal:i}=n;const s=Md(i,e),r=xA(i,t),a=Md(i,t);return r-s/2+a/2}function z5(n,t){const e=n?"scrollWidth":"scrollHeight";return(t==null?void 0:t[e])||0}function aL(n,t){const e=n?"clientWidth":"clientHeight";return(t==null?void 0:t[e])||0}function SA(n,t,e){if(!e)return 0;const{scrollLeft:i,offsetWidth:s,scrollWidth:r}=e;return n?t?r-s+i:i:e.scrollTop}function Md(n,t){const e=n?"offsetWidth":"offsetHeight";return(t==null?void 0:t[e])||0}function xA(n,t){const e=n?"offsetLeft":"offsetTop";return(t==null?void 0:t[e])||0}const oL=Symbol.for("vuetify:v-slide-group"),LA=re({centerActive:Boolean,direction:{type:String,default:"horizontal"},symbol:{type:null,default:oL},nextIcon:{type:mu,default:"$next"},prevIcon:{type:mu,default:"$prev"},showArrows:{type:[Boolean,String],validator:n=>typeof n=="boolean"||["always","desktop","mobile"].includes(n)},...Ci(),...Q_({mobile:null}),...kn(),...av({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),H5=Ne()({name:"VSlideGroup",props:LA(),emits:{"update:modelValue":n=>!0},setup(n,t){let{slots:e}=t;const{isRtl:i}=Ac(),{displayClasses:s,mobile:r}=V2(n),a=qm(n,n.symbol),o=xi(!1),l=xi(0),c=xi(0),d=xi(0),p=Et(()=>n.direction==="horizontal"),{resizeRef:m,contentRect:f}=n0(),{resizeRef:b,contentRect:w}=n0(),S=Z_(),A=Et(()=>({container:m.el,duration:200,easing:"easeOutQuart"})),x=Et(()=>a.selected.value.length?a.items.value.findIndex(ht=>ht.id===a.selected.value[0]):-1),M=Et(()=>a.selected.value.length?a.items.value.findIndex(ht=>ht.id===a.selected.value[a.selected.value.length-1]):-1);if(Ls){let ht=-1;gi(()=>[a.selected.value,f.value,w.value,p.value],()=>{cancelAnimationFrame(ht),ht=requestAnimationFrame(()=>{if(f.value&&w.value){const At=p.value?"width":"height";c.value=f.value[At],d.value=w.value[At],o.value=c.value+1<d.value}if(x.value>=0&&b.el){const At=b.el.children[M.value];U(At,n.centerActive)}})})}const q=xi(!1);function U(ht,At){let E=0;At?E=rL({containerElement:m.el,isHorizontal:p.value,selectedElement:ht}):E=sL({containerElement:m.el,isHorizontal:p.value,isRtl:i.value,selectedElement:ht}),X(E)}function X(ht){if(!Ls||!m.el)return;const At=Md(p.value,m.el),E=SA(p.value,i.value,m.el);if(!(z5(p.value,m.el)<=At||Math.abs(ht-E)<16)){if(p.value&&i.value&&m.el){const{scrollWidth:$,offsetWidth:K}=m.el;ht=$-K-ht}p.value?S.horizontal(ht,A.value):S(ht,A.value)}}function G(ht){const{scrollTop:At,scrollLeft:E}=ht.target;l.value=p.value?E:At}function B(ht){if(q.value=!0,!(!o.value||!b.el)){for(const At of ht.composedPath())for(const E of b.el.children)if(E===At){U(E);return}}}function Q(ht){q.value=!1}let ct=!1;function P(ht){var At;!ct&&!q.value&&!(ht.relatedTarget&&((At=b.el)!=null&&At.contains(ht.relatedTarget)))&&j(),ct=!1}function N(){ct=!0}function V(ht){if(!b.el)return;function At(E){ht.preventDefault(),j(E)}p.value?ht.key==="ArrowRight"?At(i.value?"prev":"next"):ht.key==="ArrowLeft"&&At(i.value?"next":"prev"):ht.key==="ArrowDown"?At("next"):ht.key==="ArrowUp"&&At("prev"),ht.key==="Home"?At("first"):ht.key==="End"&&At("last")}function j(ht){var E,z;if(!b.el)return;let At;if(!ht)At=Ab(b.el)[0];else if(ht==="next"){if(At=(E=b.el.querySelector(":focus"))==null?void 0:E.nextElementSibling,!At)return j("first")}else if(ht==="prev"){if(At=(z=b.el.querySelector(":focus"))==null?void 0:z.previousElementSibling,!At)return j("last")}else ht==="first"?At=b.el.firstElementChild:ht==="last"&&(At=b.el.lastElementChild);At&&At.focus({preventScroll:!0})}function J(ht){const At=p.value&&i.value?-1:1,E=(ht==="prev"?-At:At)*c.value;let z=l.value+E;if(p.value&&i.value&&m.el){const{scrollWidth:$,offsetWidth:K}=m.el;z+=$-K}X(z)}const at=Et(()=>({next:a.next,prev:a.prev,select:a.select,isSelected:a.isSelected})),st=Et(()=>{switch(n.showArrows){case"always":return!0;case"desktop":return!r.value;case!0:return o.value||Math.abs(l.value)>0;case"mobile":return r.value||o.value||Math.abs(l.value)>0;default:return!r.value&&(o.value||Math.abs(l.value)>0)}}),tt=Et(()=>Math.abs(l.value)>1),vt=Et(()=>{if(!m.value)return!1;const ht=z5(p.value,m.el),At=aL(p.value,m.el);return ht-At-Math.abs(l.value)>1});return si(()=>dt(n.tag,{class:["v-slide-group",{"v-slide-group--vertical":!p.value,"v-slide-group--has-affixes":st.value,"v-slide-group--is-overflowing":o.value},s.value,n.class],style:n.style,tabindex:q.value||a.selected.value.length?-1:0,onFocus:P},{default:()=>{var ht,At,E;return[st.value&&dt("div",{key:"prev",class:["v-slide-group__prev",{"v-slide-group__prev--disabled":!tt.value}],onMousedown:N,onClick:()=>tt.value&&J("prev")},[((ht=e.prev)==null?void 0:ht.call(e,at.value))??dt(O5,null,{default:()=>[dt(uc,{icon:i.value?n.nextIcon:n.prevIcon},null)]})]),dt("div",{key:"container",ref:m,class:"v-slide-group__container",onScroll:G},[dt("div",{ref:b,class:"v-slide-group__content",onFocusin:B,onFocusout:Q,onKeydown:V},[(At=e.default)==null?void 0:At.call(e,at.value)])]),st.value&&dt("div",{key:"next",class:["v-slide-group__next",{"v-slide-group__next--disabled":!vt.value}],onMousedown:N,onClick:()=>vt.value&&J("next")},[((E=e.next)==null?void 0:E.call(e,at.value))??dt(O5,null,{default:()=>[dt(uc,{icon:i.value?n.prevIcon:n.nextIcon},null)]})])]}})),{selected:a.selected,scrollTo:J,scrollOffset:l,focus:j,hasPrev:tt,hasNext:vt}}});function lL(n){return n?n.map(t=>mb(t)?t:{text:t,value:t}):[]}const cL=re({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...LA({mandatory:"force",selectedClass:"v-tab-item--selected"}),...sv(),...kn()},"VTabs"),hL=Ne()({name:"VTabs",props:cL(),emits:{"update:modelValue":n=>!0},setup(n,t){let{attrs:e,slots:i}=t;const s=wc(n,"modelValue"),r=Et(()=>lL(n.items)),{densityClasses:a}=rv(n),{backgroundColorClasses:o,backgroundColorStyles:l}=Ta(ni(n,"bgColor")),{scopeId:c}=Hm();return _m({VTab:{color:ni(n,"color"),direction:ni(n,"direction"),stacked:ni(n,"stacked"),fixed:ni(n,"fixedTabs"),sliderColor:ni(n,"sliderColor"),hideSlider:ni(n,"hideSlider")}}),si(()=>{const d=H5.filterProps(n),p=!!(i.window||n.items.length>0);return dt(Ba,null,[dt(H5,ti(d,{modelValue:s.value,"onUpdate:modelValue":m=>s.value=m,class:["v-tabs",`v-tabs--${n.direction}`,`v-tabs--align-tabs-${n.alignTabs}`,{"v-tabs--fixed-tabs":n.fixedTabs,"v-tabs--grow":n.grow,"v-tabs--stacked":n.stacked},a.value,o.value,n.class],style:[{"--v-tabs-height":Ae(n.height)},l.value,n.style],role:"tablist",symbol:gv},c,e),{default:()=>{var m;return[((m=i.default)==null?void 0:m.call(i))??r.value.map(f=>{var b;return((b=i.tab)==null?void 0:b.call(i,{item:f}))??dt(gA,ti(f,{key:f.text,value:f.value}),{default:i[`tab.${f.value}`]?()=>{var w;return(w=i[`tab.${f.value}`])==null?void 0:w.call(i,{item:f})}:void 0})})]}}),p&&dt(wA,ti({modelValue:s.value,"onUpdate:modelValue":m=>s.value=m,key:"tabs-window"},c),{default:()=>{var m;return[r.value.map(f=>{var b;return((b=i.item)==null?void 0:b.call(i,{item:f}))??dt(_A,{value:f.value},{default:()=>{var w;return(w=i[`item.${f.value}`])==null?void 0:w.call(i,{item:f})}})}),(m=i.window)==null?void 0:m.call(i)]}})])}),{}}}),uL=["width","height"],dL={class:"pb-2 d-flex justify-end"},fL=Au({__name:"ESignature",props:{width:{default:400},height:{default:120},signatureType:{default:"svg"}},emits:["onSave","onCancel"],setup(n,{emit:t}){const e=t,i=Re("draw"),s=Re(null);let r=[],a;xm(()=>{a=new tm(s.value),a.clear(),a.on(),a.addEventListener("beginStroke",()=>{r=[]}),window.addEventListener("resize",d),d()}),tS(()=>{a.off(),window.removeEventListener("resize",d)});function o(){r=a.toData(),a.clear()}function l(){const m=a.toData();m.length!==0&&(r.push(m.pop()),a.fromData(m))}function c(){if(r.length===0)return;const m=a.toData();m.push(r.pop()),a.fromData(m)}function d(){var m=Math.max(window.devicePixelRatio||1,1);s.value.width=s.value.offsetWidth*m,s.value.height=s.value.offsetHeight*m,s.value.getContext("2d").scale(m,m),a.clear()}function p(){var m;switch(n.signatureType){case"jpeg":m="image/jpeg";break;case"png":m="";break;case"svg":m="image/svg+xml";break}e("onSave",{width:n.width,height:n.height,type:n.signatureType,dataURL:a.toDataURL(m)})}return(m,f)=>(Oo(),ep(Kw,{class:"fill-height justify-center"},{default:zi(()=>[dt(B5,{width:"fit-content",height:"fit-content",elevation:3,class:"px-5",rounded:""},{default:zi(()=>[dt(pA,{height:"40",color:"white"},{default:zi(()=>[dt(hL,{density:"compact",modelValue:i.value,"onUpdate:modelValue":f[0]||(f[0]=b=>i.value=b),color:"primary"},{default:zi(()=>[dt(gA,{value:"draw"},{default:zi(()=>[dt(uc,{size:"x-large"},{default:zi(()=>f[3]||(f[3]=[bb(" mdi-draw ")])),_:1})]),_:1})]),_:1},8,["modelValue"]),dt(oA),dt(nr,{size:"small",density:"comfortable",icon:"mdi-arrow-u-left-top",onClick:td(l,["stop"])}),dt(nr,{size:"small",density:"comfortable",icon:"mdi-arrow-u-right-top",onClick:td(c,["stop"])}),dt(nr,{size:"small",density:"comfortable",icon:"mdi-eraser",onClick:td(o,["stop"])})]),_:1}),dt(wA,{modelValue:i.value,"onUpdate:modelValue":f[1]||(f[1]=b=>i.value=b)},{default:zi(()=>[dt(_A,{class:"py-2",value:"draw",id:"draw-tab"},{default:zi(()=>[dt(B5,{id:"draw-tab-content",width:m.width,height:m.height},{default:zi(()=>[ao("canvas",{ref_key:"canvas",ref:s,id:"signature-canvas",width:m.width,height:m.height},null,8,uL)]),_:1},8,["width","height"])]),_:1})]),_:1},8,["modelValue"]),ao("div",dL,[dt(nr,{class:"mr-2",size:"small",text:"Cancelar",color:"error",variant:"text",onClick:f[2]||(f[2]=td(b=>m.$emit("onCancel"),["stop"]))}),dt(nr,{size:"small",text:"Confirmar",variant:"elevated",color:"success",onClick:td(p,["stop"])})])]),_:1})]),_:1}))}}),pL=iS(fL,[["__scopeId","data-v-4cd1dff2"]]);class eg{constructor(){Ut(this,"x",0);Ut(this,"y",0);Ut(this,"radius",5);Ut(this,"cursor","default");Ut(this,"isMouseOver");this.isMouseOver=(t,e)=>Math.sqrt((t-this.x)**2+(e-this.y)**2)<=this.radius}draw(t){t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.closePath(),t.fill()}lineTo(t,e,i){t.beginPath(),t.moveTo(this.x,this.y),t.lineTo(e,i),t.closePath(),t.stroke()}}class gL{constructor(){Ut(this,"corners");Ut(this,"img");Ut(this,"_currentWidth",0);Ut(this,"_currentHeight",0);this.img=new Image,this.corners={topLeft:new eg,topRight:new eg,bottomRight:new eg,bottomLeft:new eg},this.corners.topLeft.cursor="nw-resize",this.corners.topRight.cursor="ne-resize",this.corners.bottomRight.cursor="se-resize",this.corners.bottomLeft.cursor="sw-resize"}draw(t,e,i,s,r,a=!0){t.drawImage(this.img,e,i,s,r),this._currentWidth=s,this._currentHeight=r,a&&(this.corners.topLeft.x=e,this.corners.topLeft.y=i,this.corners.topLeft.draw(t),this.corners.topRight.x=e+s,this.corners.topRight.y=i,this.corners.topRight.draw(t),this.corners.bottomRight.x=e+s,this.corners.bottomRight.y=i+r,this.corners.bottomRight.draw(t),this.corners.bottomLeft.x=e,this.corners.bottomLeft.y=i+r,this.corners.bottomLeft.draw(t),this.corners.topLeft.lineTo(t,this.corners.topRight.x,this.corners.topRight.y),this.corners.topRight.lineTo(t,this.corners.bottomRight.x,this.corners.bottomRight.y),this.corners.bottomRight.lineTo(t,this.corners.bottomLeft.x,this.corners.bottomLeft.y),this.corners.bottomLeft.lineTo(t,this.corners.topLeft.x,this.corners.topLeft.y))}isMouseOver(t,e){return t>this.corners.topLeft.x&&t<this.corners.bottomRight.x&&e>this.corners.topLeft.y&&e<this.corners.bottomRight.y}get currentWidth(){return this._currentWidth}get currentHeight(){return this._currentHeight}}class mL{constructor(t,e,i,s){Ut(this,"canvas");Ut(this,"canvas2dContext");Ut(this,"contextColor","#3183c8");Ut(this,"canvasWidthRatio");Ut(this,"canvasHeightRatio");Ut(this,"signature");Ut(this,"draggingSignature",!1);Ut(this,"resizingSignature",!1);Ut(this,"resizingCorner");Ut(this,"lastMousePosition",{x:0,y:0});this.width=t,this.height=e,this.styleWidth=i,this.styleHeight=s,this.canvas=document.createElement("canvas"),this.canvas.width=t,this.canvas.height=e,this.canvas.style.width=i,this.canvas.style.height=s,this.canvasWidthRatio=this.canvas.width/parseInt(this.canvas.style.width),this.canvasHeightRatio=this.canvas.height/parseInt(this.canvas.style.height),this.canvas.addEventListener("mousemove",this.mouseMouveHandler.bind(this)),this.canvas.addEventListener("mousedown",this.mouseDownHandler.bind(this)),this.canvas.addEventListener("mouseup",this.mouseUpHandler.bind(this)),this.canvas2dContext=this.canvas.getContext("2d"),this.signature=new gL}drawSignature(t,e,i,s,r){this.clearSignature(),this.canvas2dContext.strokeStyle=this.contextColor,this.canvas2dContext.fillStyle=this.contextColor,this.signature.img.crossOrigin="anonymous",this.signature.img.src=t,this.signature.img.onload=()=>{this.signature.draw(this.canvas2dContext,e,i,s,r)}}clearSignature(){this.canvas2dContext.clearRect(0,0,this.canvas.width,this.canvas.height)}mouseMouveHandler(t){const{x:e,y:i}=this.getMouseXYInCanvasScale(t.clientX,t.clientY);if(this.draggingSignature){this.moveSignature(e-this.lastMousePosition.x,i-this.lastMousePosition.y),this.lastMousePosition.x=e,this.lastMousePosition.y=i;return}if(this.resizingSignature){this.resizeSignature(e,i),this.lastMousePosition.x=e,this.lastMousePosition.y=i;return}const s=Object.values(this.signature.corners).find(r=>r.isMouseOver(e,i));this.canvas.style.cursor="default",s?this.canvas.style.cursor=s.cursor:this.signature.isMouseOver(e,i)&&(this.canvas.style.cursor="move")}moveSignature(t,e){this.clearSignature(),this.signature.draw(this.canvas2dContext,this.signature.corners.topLeft.x+t,this.signature.corners.topLeft.y+e,this.signature.currentWidth,this.signature.currentHeight)}resizeSignature(t,e){if(this.resizingCorner)switch(this.clearSignature(),this.resizingCorner){case"topLeft":this.signature.draw(this.canvas2dContext,t,e,this.signature.corners.bottomRight.x-t,this.signature.corners.bottomRight.y-e);return;case"topRight":this.signature.draw(this.canvas2dContext,this.signature.corners.topLeft.x,e,t-this.signature.corners.bottomLeft.x,this.signature.corners.bottomLeft.y-e);return;case"bottomRight":this.signature.draw(this.canvas2dContext,this.signature.corners.topLeft.x,this.signature.corners.topLeft.y,t-this.signature.corners.topLeft.x,e-this.signature.corners.topLeft.y);return;case"bottomLeft":this.signature.draw(this.canvas2dContext,t,this.signature.corners.topLeft.y,this.signature.corners.topRight.x-t,e-this.signature.corners.topRight.y);return}}mouseDownHandler(t){var r;this.clearSignature();const{x:e,y:i}=this.getMouseXYInCanvasScale(t.clientX,t.clientY);let s=(r=Object.entries(this.signature.corners).find(a=>a[1].isMouseOver(e,i)))==null?void 0:r[0];if(s||this.signature.isMouseOver(e,i)){this.signature.draw(this.canvas2dContext,this.signature.corners.topLeft.x,this.signature.corners.topLeft.y,this.signature.currentWidth,this.signature.currentHeight,!0),this.lastMousePosition.x=e,this.lastMousePosition.y=i,this.resizingSignature=s!==void 0,this.resizingCorner=s,this.draggingSignature=!this.resizingSignature;return}this.signature.draw(this.canvas2dContext,this.signature.corners.topLeft.x,this.signature.corners.topLeft.y,this.signature.currentWidth,this.signature.currentHeight,!1)}mouseUpHandler(t){this.draggingSignature=!1,this.resizingSignature=!1}getMouseXYInCanvasScale(t,e){const i=this.canvas.getBoundingClientRect();return{x:(t-i.x)*this.canvasWidthRatio,y:(e-i.top)*this.canvasHeightRatio}}get(){return this.canvas}getSignature(){return this.signature}}function ze(n){"@babel/helpers - typeof";return ze=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ze(n)}var bn=Uint8Array,as=Uint16Array,mv=Int32Array,Vm=new bn([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Um=new bn([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),N2=new bn([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),CA=function(n,t){for(var e=new as(31),i=0;i<31;++i)e[i]=t+=1<<n[i-1];for(var s=new mv(e[30]),i=1;i<30;++i)for(var r=e[i];r<e[i+1];++r)s[r]=r-e[i]<<5|i;return{b:e,r:s}},EA=CA(Vm,2),PA=EA.b,T2=EA.r;PA[28]=258,T2[258]=28;var kA=CA(Um,0),vL=kA.b,V5=kA.r,I2=new as(32768);for(var Ze=0;Ze<32768;++Ze){var eo=(Ze&43690)>>1|(Ze&21845)<<1;eo=(eo&52428)>>2|(eo&13107)<<2,eo=(eo&61680)>>4|(eo&3855)<<4,I2[Ze]=((eo&65280)>>8|(eo&255)<<8)>>1}var jr=function(n,t,e){for(var i=n.length,s=0,r=new as(t);s<i;++s)n[s]&&++r[n[s]-1];var a=new as(t);for(s=1;s<t;++s)a[s]=a[s-1]+r[s-1]<<1;var o;if(e){o=new as(1<<t);var l=15-t;for(s=0;s<i;++s)if(n[s])for(var c=s<<4|n[s],d=t-n[s],p=a[n[s]-1]++<<d,m=p|(1<<d)-1;p<=m;++p)o[I2[p]>>l]=c}else for(o=new as(i),s=0;s<i;++s)n[s]&&(o[s]=I2[a[n[s]-1]++]>>15-n[s]);return o},jo=new bn(288);for(var Ze=0;Ze<144;++Ze)jo[Ze]=8;for(var Ze=144;Ze<256;++Ze)jo[Ze]=9;for(var Ze=256;Ze<280;++Ze)jo[Ze]=7;for(var Ze=280;Ze<288;++Ze)jo[Ze]=8;var Rd=new bn(32);for(var Ze=0;Ze<32;++Ze)Rd[Ze]=5;var bL=jr(jo,9,0),yL=jr(jo,9,1),wL=jr(Rd,5,0),AL=jr(Rd,5,1),X1=function(n){for(var t=n[0],e=1;e<n.length;++e)n[e]>t&&(t=n[e]);return t},qs=function(n,t,e){var i=t/8|0;return(n[i]|n[i+1]<<8)>>(t&7)&e},Y1=function(n,t){var e=t/8|0;return(n[e]|n[e+1]<<8|n[e+2]<<16)>>(t&7)},vv=function(n){return(n+7)/8|0},NA=function(n,t,e){return(e==null||e>n.length)&&(e=n.length),new bn(n.subarray(t,e))},_L=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Us=function(n,t,e){var i=new Error(t||_L[n]);if(i.code=n,Error.captureStackTrace&&Error.captureStackTrace(i,Us),!e)throw i;return i},SL=function(n,t,e,i){var s=n.length,r=0;if(!s||t.f&&!t.l)return e||new bn(0);var a=!e,o=a||t.i!=2,l=t.i;a&&(e=new bn(s*3));var c=function(kt){var Bt=e.length;if(kt>Bt){var Rt=new bn(Math.max(Bt*2,kt));Rt.set(e),e=Rt}},d=t.f||0,p=t.p||0,m=t.b||0,f=t.l,b=t.d,w=t.m,S=t.n,A=s*8;do{if(!f){d=qs(n,p,1);var x=qs(n,p+1,3);if(p+=3,x)if(x==1)f=yL,b=AL,w=9,S=5;else if(x==2){var X=qs(n,p,31)+257,G=qs(n,p+10,15)+4,B=X+qs(n,p+5,31)+1;p+=14;for(var Q=new bn(B),ct=new bn(19),P=0;P<G;++P)ct[N2[P]]=qs(n,p+P*3,7);p+=G*3;for(var N=X1(ct),V=(1<<N)-1,j=jr(ct,N,1),P=0;P<B;){var J=j[qs(n,p,V)];p+=J&15;var M=J>>4;if(M<16)Q[P++]=M;else{var at=0,st=0;for(M==16?(st=3+qs(n,p,3),p+=2,at=Q[P-1]):M==17?(st=3+qs(n,p,7),p+=3):M==18&&(st=11+qs(n,p,127),p+=7);st--;)Q[P++]=at}}var tt=Q.subarray(0,X),vt=Q.subarray(X);w=X1(tt),S=X1(vt),f=jr(tt,w,1),b=jr(vt,S,1)}else Us(1);else{var M=vv(p)+4,q=n[M-4]|n[M-3]<<8,U=M+q;if(U>s){l&&Us(0);break}o&&c(m+q),e.set(n.subarray(M,U),m),t.b=m+=q,t.p=p=U*8,t.f=d;continue}if(p>A){l&&Us(0);break}}o&&c(m+131072);for(var ht=(1<<w)-1,At=(1<<S)-1,E=p;;E=p){var at=f[Y1(n,p)&ht],z=at>>4;if(p+=at&15,p>A){l&&Us(0);break}if(at||Us(2),z<256)e[m++]=z;else if(z==256){E=p,f=null;break}else{var $=z-254;if(z>264){var P=z-257,K=Vm[P];$=qs(n,p,(1<<K)-1)+PA[P],p+=K}var Z=b[Y1(n,p)&At],ot=Z>>4;Z||Us(3),p+=Z&15;var vt=vL[ot];if(ot>3){var K=Um[ot];vt+=Y1(n,p)&(1<<K)-1,p+=K}if(p>A){l&&Us(0);break}o&&c(m+131072);var ft=m+$;if(m<vt){var mt=r-vt,Nt=Math.min(vt,ft);for(mt+m<0&&Us(3);m<Nt;++m)e[m]=i[mt+m]}for(;m<ft;++m)e[m]=e[m-vt]}}t.l=f,t.p=E,t.b=m,t.f=d,f&&(d=1,t.m=w,t.d=b,t.n=S)}while(!d);return m!=e.length&&a?NA(e,0,m):e.subarray(0,m)},sa=function(n,t,e){e<<=t&7;var i=t/8|0;n[i]|=e,n[i+1]|=e>>8},rd=function(n,t,e){e<<=t&7;var i=t/8|0;n[i]|=e,n[i+1]|=e>>8,n[i+2]|=e>>16},K1=function(n,t){for(var e=[],i=0;i<n.length;++i)n[i]&&e.push({s:i,f:n[i]});var s=e.length,r=e.slice();if(!s)return{t:IA,l:0};if(s==1){var a=new bn(e[0].s+1);return a[e[0].s]=1,{t:a,l:1}}e.sort(function(U,X){return U.f-X.f}),e.push({s:-1,f:25001});var o=e[0],l=e[1],c=0,d=1,p=2;for(e[0]={s:-1,f:o.f+l.f,l:o,r:l};d!=s-1;)o=e[e[c].f<e[p].f?c++:p++],l=e[c!=d&&e[c].f<e[p].f?c++:p++],e[d++]={s:-1,f:o.f+l.f,l:o,r:l};for(var m=r[0].s,i=1;i<s;++i)r[i].s>m&&(m=r[i].s);var f=new as(m+1),b=M2(e[d-1],f,0);if(b>t){var i=0,w=0,S=b-t,A=1<<S;for(r.sort(function(X,G){return f[G.s]-f[X.s]||X.f-G.f});i<s;++i){var x=r[i].s;if(f[x]>t)w+=A-(1<<b-f[x]),f[x]=t;else break}for(w>>=S;w>0;){var M=r[i].s;f[M]<t?w-=1<<t-f[M]++-1:++i}for(;i>=0&&w;--i){var q=r[i].s;f[q]==t&&(--f[q],++w)}b=t}return{t:new bn(f),l:b}},M2=function(n,t,e){return n.s==-1?Math.max(M2(n.l,t,e+1),M2(n.r,t,e+1)):t[n.s]=e},U5=function(n){for(var t=n.length;t&&!n[--t];);for(var e=new as(++t),i=0,s=n[0],r=1,a=function(l){e[i++]=l},o=1;o<=t;++o)if(n[o]==s&&o!=t)++r;else{if(!s&&r>2){for(;r>138;r-=138)a(32754);r>2&&(a(r>10?r-11<<5|28690:r-3<<5|12305),r=0)}else if(r>3){for(a(s),--r;r>6;r-=6)a(8304);r>2&&(a(r-3<<5|8208),r=0)}for(;r--;)a(s);r=1,s=n[o]}return{c:e.subarray(0,i),n:t}},ad=function(n,t){for(var e=0,i=0;i<t.length;++i)e+=n[i]*t[i];return e},TA=function(n,t,e){var i=e.length,s=vv(t+2);n[s]=i&255,n[s+1]=i>>8,n[s+2]=n[s]^255,n[s+3]=n[s+1]^255;for(var r=0;r<i;++r)n[s+r+4]=e[r];return(s+4+i)*8},W5=function(n,t,e,i,s,r,a,o,l,c,d){sa(t,d++,e),++s[256];for(var p=K1(s,15),m=p.t,f=p.l,b=K1(r,15),w=b.t,S=b.l,A=U5(m),x=A.c,M=A.n,q=U5(w),U=q.c,X=q.n,G=new as(19),B=0;B<x.length;++B)++G[x[B]&31];for(var B=0;B<U.length;++B)++G[U[B]&31];for(var Q=K1(G,7),ct=Q.t,P=Q.l,N=19;N>4&&!ct[N2[N-1]];--N);var V=c+5<<3,j=ad(s,jo)+ad(r,Rd)+a,J=ad(s,m)+ad(r,w)+a+14+3*N+ad(G,ct)+2*G[16]+3*G[17]+7*G[18];if(l>=0&&V<=j&&V<=J)return TA(t,d,n.subarray(l,l+c));var at,st,tt,vt;if(sa(t,d,1+(J<j)),d+=2,J<j){at=jr(m,f,0),st=m,tt=jr(w,S,0),vt=w;var ht=jr(ct,P,0);sa(t,d,M-257),sa(t,d+5,X-1),sa(t,d+10,N-4),d+=14;for(var B=0;B<N;++B)sa(t,d+3*B,ct[N2[B]]);d+=3*N;for(var At=[x,U],E=0;E<2;++E)for(var z=At[E],B=0;B<z.length;++B){var $=z[B]&31;sa(t,d,ht[$]),d+=ct[$],$>15&&(sa(t,d,z[B]>>5&127),d+=z[B]>>12)}}else at=bL,st=jo,tt=wL,vt=Rd;for(var B=0;B<o;++B){var K=i[B];if(K>255){var $=K>>18&31;rd(t,d,at[$+257]),d+=st[$+257],$>7&&(sa(t,d,K>>23&31),d+=Vm[$]);var Z=K&31;rd(t,d,tt[Z]),d+=vt[Z],Z>3&&(rd(t,d,K>>5&8191),d+=Um[Z])}else rd(t,d,at[K]),d+=st[K]}return rd(t,d,at[256]),d+st[256]},xL=new mv([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),IA=new bn(0),LL=function(n,t,e,i,s,r){var a=r.z||n.length,o=new bn(i+a+5*(1+Math.ceil(a/7e3))+s),l=o.subarray(i,o.length-s),c=r.l,d=(r.r||0)&7;if(t){d&&(l[0]=r.r>>3);for(var p=xL[t-1],m=p>>13,f=p&8191,b=(1<<e)-1,w=r.p||new as(32768),S=r.h||new as(b+1),A=Math.ceil(e/3),x=2*A,M=function(Zt){return(n[Zt]^n[Zt+1]<<A^n[Zt+2]<<x)&b},q=new mv(25e3),U=new as(288),X=new as(32),G=0,B=0,Q=r.i||0,ct=0,P=r.w||0,N=0;Q+2<a;++Q){var V=M(Q),j=Q&32767,J=S[V];if(w[j]=J,S[V]=j,P<=Q){var at=a-Q;if((G>7e3||ct>24576)&&(at>423||!c)){d=W5(n,l,0,q,U,X,B,ct,N,Q-N,d),ct=G=B=0,N=Q;for(var st=0;st<286;++st)U[st]=0;for(var st=0;st<30;++st)X[st]=0}var tt=2,vt=0,ht=f,At=j-J&32767;if(at>2&&V==M(Q-At))for(var E=Math.min(m,at)-1,z=Math.min(32767,Q),$=Math.min(258,at);At<=z&&--ht&&j!=J;){if(n[Q+tt]==n[Q+tt-At]){for(var K=0;K<$&&n[Q+K]==n[Q+K-At];++K);if(K>tt){if(tt=K,vt=At,K>E)break;for(var Z=Math.min(At,K-2),ot=0,st=0;st<Z;++st){var ft=Q-At+st&32767,mt=w[ft],Nt=ft-mt&32767;Nt>ot&&(ot=Nt,J=ft)}}}j=J,J=w[j],At+=j-J&32767}if(vt){q[ct++]=268435456|T2[tt]<<18|V5[vt];var kt=T2[tt]&31,Bt=V5[vt]&31;B+=Vm[kt]+Um[Bt],++U[257+kt],++X[Bt],P=Q+tt,++G}else q[ct++]=n[Q],++U[n[Q]]}}for(Q=Math.max(Q,P);Q<a;++Q)q[ct++]=n[Q],++U[n[Q]];d=W5(n,l,c,q,U,X,B,ct,N,Q-N,d),c||(r.r=d&7|l[d/8|0]<<3,d-=7,r.h=S,r.p=w,r.i=Q,r.w=P)}else{for(var Q=r.w||0;Q<a+c;Q+=65535){var Rt=Q+65535;Rt>=a&&(l[d/8|0]=c,Rt=a),d=TA(l,d+1,n.subarray(Q,Rt))}r.i=a}return NA(o,0,i+vv(d)+s)},MA=function(){var n=1,t=0;return{p:function(e){for(var i=n,s=t,r=e.length|0,a=0;a!=r;){for(var o=Math.min(a+2655,r);a<o;++a)s+=i+=e[a];i=(i&65535)+15*(i>>16),s=(s&65535)+15*(s>>16)}n=i,t=s},d:function(){return n%=65521,t%=65521,(n&255)<<24|(n&65280)<<8|(t&255)<<8|t>>8}}},CL=function(n,t,e,i,s){if(!s&&(s={l:1},t.dictionary)){var r=t.dictionary.subarray(-32768),a=new bn(r.length+n.length);a.set(r),a.set(n,r.length),n=a,s.w=r.length}return LL(n,t.level==null?6:t.level,t.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+t.mem,e,i,s)},RA=function(n,t,e){for(;e;++t)n[t]=e,e>>>=8},EL=function(n,t){var e=t.level,i=e==0?0:e<6?1:e==9?3:2;if(n[0]=120,n[1]=i<<6|(t.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,t.dictionary){var s=MA();s.p(t.dictionary),RA(n,2,s.d())}},PL=function(n,t){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&Us(6,"invalid zlib data"),(n[1]>>5&1)==+!t&&Us(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function R2(n,t){t||(t={});var e=MA();e.p(n);var i=CL(n,t,t.dictionary?6:2,4);return EL(i,t),RA(i,i.length-4,e.d()),i}function kL(n,t){return SL(n.subarray(PL(n,t),-4),{i:2},t,t)}var NL=typeof TextDecoder<"u"&&new TextDecoder,TL=0;try{NL.decode(IA,{stream:!0}),TL=1}catch{}var ee=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function J1(){ee.console&&typeof ee.console.log=="function"&&ee.console.log.apply(ee.console,arguments)}var Xe={log:J1,warn:function(n){ee.console&&(typeof ee.console.warn=="function"?ee.console.warn.apply(ee.console,arguments):J1.call(null,arguments))},error:function(n){ee.console&&(typeof ee.console.error=="function"?ee.console.error.apply(ee.console,arguments):J1(n))}};function Q1(n,t,e){var i=new XMLHttpRequest;i.open("GET",n),i.responseType="blob",i.onload=function(){al(i.response,t,e)},i.onerror=function(){Xe.error("could not download file")},i.send()}function G5(n){var t=new XMLHttpRequest;t.open("HEAD",n,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function ig(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(t)}}var Ld,F2,al=ee.saveAs||((typeof window>"u"?"undefined":ze(window))!=="object"||window!==ee?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,t,e){var i=ee.URL||ee.webkitURL,s=document.createElement("a");t=t||n.name||"download",s.download=t,s.rel="noopener",typeof n=="string"?(s.href=n,s.origin!==location.origin?G5(s.href)?Q1(n,t,e):ig(s,s.target="_blank"):ig(s)):(s.href=i.createObjectURL(n),setTimeout(function(){i.revokeObjectURL(s.href)},4e4),setTimeout(function(){ig(s)},0))}:"msSaveOrOpenBlob"in navigator?function(n,t,e){if(t=t||n.name||"download",typeof n=="string")if(G5(n))Q1(n,t,e);else{var i=document.createElement("a");i.href=n,i.target="_blank",setTimeout(function(){ig(i)})}else navigator.msSaveOrOpenBlob(function(s,r){return r===void 0?r={autoBom:!1}:ze(r)!=="object"&&(Xe.warn("Deprecated: Expected third argument to be a object"),r={autoBom:!r}),r.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(n,e),t)}:function(n,t,e,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof n=="string")return Q1(n,t,e);var s=n.type==="application/octet-stream",r=/constructor/i.test(ee.HTMLElement)||ee.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||s&&r)&&(typeof FileReader>"u"?"undefined":ze(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var d=o.result;d=a?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=d:location=d,i=null},o.readAsDataURL(n)}else{var l=ee.URL||ee.webkitURL,c=l.createObjectURL(n);i?i.location=c:location.href=c,i=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function FA(n){var t;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var e=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],i=0;i<e.length;i++){var s=e[i].re,r=e[i].process,a=s.exec(n);a&&(t=r(a),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+o+l+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Z1(n,t){var e=n[0],i=n[1],s=n[2],r=n[3];e=hn(e,i,s,r,t[0],7,-680876936),r=hn(r,e,i,s,t[1],12,-389564586),s=hn(s,r,e,i,t[2],17,606105819),i=hn(i,s,r,e,t[3],22,-1044525330),e=hn(e,i,s,r,t[4],7,-176418897),r=hn(r,e,i,s,t[5],12,1200080426),s=hn(s,r,e,i,t[6],17,-1473231341),i=hn(i,s,r,e,t[7],22,-45705983),e=hn(e,i,s,r,t[8],7,1770035416),r=hn(r,e,i,s,t[9],12,-1958414417),s=hn(s,r,e,i,t[10],17,-42063),i=hn(i,s,r,e,t[11],22,-1990404162),e=hn(e,i,s,r,t[12],7,1804603682),r=hn(r,e,i,s,t[13],12,-40341101),s=hn(s,r,e,i,t[14],17,-1502002290),e=un(e,i=hn(i,s,r,e,t[15],22,1236535329),s,r,t[1],5,-165796510),r=un(r,e,i,s,t[6],9,-1069501632),s=un(s,r,e,i,t[11],14,643717713),i=un(i,s,r,e,t[0],20,-373897302),e=un(e,i,s,r,t[5],5,-701558691),r=un(r,e,i,s,t[10],9,38016083),s=un(s,r,e,i,t[15],14,-660478335),i=un(i,s,r,e,t[4],20,-405537848),e=un(e,i,s,r,t[9],5,568446438),r=un(r,e,i,s,t[14],9,-1019803690),s=un(s,r,e,i,t[3],14,-187363961),i=un(i,s,r,e,t[8],20,1163531501),e=un(e,i,s,r,t[13],5,-1444681467),r=un(r,e,i,s,t[2],9,-51403784),s=un(s,r,e,i,t[7],14,1735328473),e=dn(e,i=un(i,s,r,e,t[12],20,-1926607734),s,r,t[5],4,-378558),r=dn(r,e,i,s,t[8],11,-2022574463),s=dn(s,r,e,i,t[11],16,1839030562),i=dn(i,s,r,e,t[14],23,-35309556),e=dn(e,i,s,r,t[1],4,-1530992060),r=dn(r,e,i,s,t[4],11,1272893353),s=dn(s,r,e,i,t[7],16,-155497632),i=dn(i,s,r,e,t[10],23,-1094730640),e=dn(e,i,s,r,t[13],4,681279174),r=dn(r,e,i,s,t[0],11,-358537222),s=dn(s,r,e,i,t[3],16,-722521979),i=dn(i,s,r,e,t[6],23,76029189),e=dn(e,i,s,r,t[9],4,-640364487),r=dn(r,e,i,s,t[12],11,-421815835),s=dn(s,r,e,i,t[15],16,530742520),e=fn(e,i=dn(i,s,r,e,t[2],23,-995338651),s,r,t[0],6,-198630844),r=fn(r,e,i,s,t[7],10,1126891415),s=fn(s,r,e,i,t[14],15,-1416354905),i=fn(i,s,r,e,t[5],21,-57434055),e=fn(e,i,s,r,t[12],6,1700485571),r=fn(r,e,i,s,t[3],10,-1894986606),s=fn(s,r,e,i,t[10],15,-1051523),i=fn(i,s,r,e,t[1],21,-2054922799),e=fn(e,i,s,r,t[8],6,1873313359),r=fn(r,e,i,s,t[15],10,-30611744),s=fn(s,r,e,i,t[6],15,-1560198380),i=fn(i,s,r,e,t[13],21,1309151649),e=fn(e,i,s,r,t[4],6,-145523070),r=fn(r,e,i,s,t[11],10,-1120210379),s=fn(s,r,e,i,t[2],15,718787259),i=fn(i,s,r,e,t[9],21,-343485551),n[0]=Fo(e,n[0]),n[1]=Fo(i,n[1]),n[2]=Fo(s,n[2]),n[3]=Fo(r,n[3])}function Wm(n,t,e,i,s,r){return t=Fo(Fo(t,n),Fo(i,r)),Fo(t<<s|t>>>32-s,e)}function hn(n,t,e,i,s,r,a){return Wm(t&e|~t&i,n,t,s,r,a)}function un(n,t,e,i,s,r,a){return Wm(t&i|e&~i,n,t,s,r,a)}function dn(n,t,e,i,s,r,a){return Wm(t^e^i,n,t,s,r,a)}function fn(n,t,e,i,s,r,a){return Wm(e^(t|~i),n,t,s,r,a)}function OA(n){var t,e=n.length,i=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=n.length;t+=64)Z1(i,IL(n.substring(t-64,t)));n=n.substring(t-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<n.length;t++)s[t>>2]|=n.charCodeAt(t)<<(t%4<<3);if(s[t>>2]|=128<<(t%4<<3),t>55)for(Z1(i,s),t=0;t<16;t++)s[t]=0;return s[14]=8*e,Z1(i,s),i}function IL(n){var t,e=[];for(t=0;t<64;t+=4)e[t>>2]=n.charCodeAt(t)+(n.charCodeAt(t+1)<<8)+(n.charCodeAt(t+2)<<16)+(n.charCodeAt(t+3)<<24);return e}Ld=ee.atob.bind(ee),F2=ee.btoa.bind(ee);var $5="0123456789abcdef".split("");function ML(n){for(var t="",e=0;e<4;e++)t+=$5[n>>8*e+4&15]+$5[n>>8*e&15];return t}function RL(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function O2(n){return OA(n).map(RL).join("")}var FL=function(n){for(var t=0;t<n.length;t++)n[t]=ML(n[t]);return n.join("")}(OA("hello"))!="5d41402abc4b2a76b9719d911017c592";function Fo(n,t){if(FL){var e=(65535&n)+(65535&t);return(n>>16)+(t>>16)+(e>>16)<<16|65535&e}return n+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function D2(n,t){var e,i,s,r;if(n!==e){for(var a=(s=n,r=1+(256/n.length>>0),new Array(r+1).join(s)),o=[],l=0;l<256;l++)o[l]=l;var c=0;for(l=0;l<256;l++){var d=o[l];c=(c+d+a.charCodeAt(l))%256,o[l]=o[c],o[c]=d}e=n,i=o}else o=i;var p=t.length,m=0,f=0,b="";for(l=0;l<p;l++)f=(f+(d=o[m=(m+1)%256]))%256,o[m]=o[f],o[f]=d,a=o[(o[m]+o[f])%256],b+=String.fromCharCode(t.charCodeAt(l)^a);return b}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var X5={print:4,modify:8,copy:16,"annot-forms":32};function hh(n,t,e,i){this.v=1,this.r=2;var s=192;n.forEach(function(o){if(X5.perm!==void 0)throw new Error("Invalid permission: "+o);s+=X5[o]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var r=(t+this.padding).substr(0,32),a=(e+this.padding).substr(0,32);this.O=this.processOwnerPassword(r,a),this.P=-(1+(255^s)),this.encryptionKey=O2(r+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=D2(this.encryptionKey,this.padding)}function uh(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var t="",e=n.length,i=0;i<e;i++){var s=n.charCodeAt(i);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?t+="#"+("0"+s.toString(16)).slice(-2):t+=n[i]}return t}function Y5(n){if(ze(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,i,s){if(s=s||!1,typeof e!="string"||typeof i!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var r=Math.random().toString(35);return t[e][r]=[i,!!s],r},this.unsubscribe=function(e){for(var i in t)if(t[i][e])return delete t[i][e],Object.keys(t[i]).length===0&&delete t[i],!0;return!1},this.publish=function(e){if(t.hasOwnProperty(e)){var i=Array.prototype.slice.call(arguments,1),s=[];for(var r in t[e]){var a=t[e][r];try{a[0].apply(n,i)}catch(o){ee.console&&Xe.error("jsPDF PubSub Error",o.message,o)}a[1]&&s.push(r)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function em(n){if(!(this instanceof em))return new em(n);var t="opacity,stroke-opacity".split(",");for(var e in n)n.hasOwnProperty(e)&&t.indexOf(e)>=0&&(this[e]=n[e]);this.id="",this.objectNumber=-1}function DA(n,t){this.gState=n,this.matrix=t,this.id="",this.objectNumber=-1}function ol(n,t,e,i,s){if(!(this instanceof ol))return new ol(n,t,e,i,s);this.type=n==="axial"?2:3,this.coords=t,this.colors=e,DA.call(this,i,s)}function ph(n,t,e,i,s){if(!(this instanceof ph))return new ph(n,t,e,i,s);this.boundingBox=n,this.xStep=t,this.yStep=e,this.stream="",this.cloneIndex=0,DA.call(this,i,s)}function te(n){var t,e=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],s=arguments[2],r=arguments[3],a=[],o=1,l=16,c="S",d=null;ze(n=n||{})==="object"&&(e=n.orientation,i=n.unit||i,s=n.format||s,r=n.compress||n.compressPdf||r,(d=n.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(t=n.precision),n.floatPrecision!==void 0&&(l=n.floatPrecision),c=n.defaultPathOperation||"S"),a=n.filters||(r===!0?["FlateEncode"]:a),i=i||"mm",e=(""+(e||"P")).toLowerCase();var p=n.putOnlyUsedFonts||!1,m={},f={internal:{},__private__:{}};f.__private__.PubSub=Y5;var b="1.3",w=f.__private__.getPdfVersion=function(){return b};f.__private__.setPdfVersion=function(v){b=v};var S={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return S};var A=f.__private__.getPageFormat=function(v){return S[v]};s=s||"a4";var x={COMPAT:"compat",ADVANCED:"advanced"},M=x.COMPAT;function q(){this.saveGraphicsState(),Y(new Qt(qt,0,0,-qt,0,Va()*qt).toString()+" cm"),this.setFontSize(this.getFontSize()/qt),c="n",M=x.ADVANCED}function U(){this.restoreGraphicsState(),c="S",M=x.COMPAT}var X=f.__private__.combineFontStyleAndFontWeight=function(v,C){if(v=="bold"&&C=="normal"||v=="bold"&&C==400||v=="normal"&&C=="italic"||v=="bold"&&C=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return C&&(v=C==400||C==="normal"?v==="italic"?"italic":"normal":C!=700&&C!=="bold"||v!=="normal"?(C==700?"bold":C)+""+v:"bold"),v};f.advancedAPI=function(v){var C=M===x.COMPAT;return C&&q.call(this),typeof v!="function"||(v(this),C&&U.call(this)),this},f.compatAPI=function(v){var C=M===x.ADVANCED;return C&&U.call(this),typeof v!="function"||(v(this),C&&q.call(this)),this},f.isAdvancedAPI=function(){return M===x.ADVANCED};var G,B=function(v){if(M!==x.ADVANCED)throw new Error(v+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Q=f.roundToPrecision=f.__private__.roundToPrecision=function(v,C){var W=t||C;if(isNaN(v)||isNaN(W))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return v.toFixed(W).replace(/0+$/,"")};G=f.hpf=f.__private__.hpf=typeof l=="number"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return Q(v,l)}:l==="smart"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return Q(v,v>-1&&v<1?16:5)}:function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return Q(v,16)};var ct=f.f2=f.__private__.f2=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f2");return Q(v,2)},P=f.__private__.f3=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f3");return Q(v,3)},N=f.scale=f.__private__.scale=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.scale");return M===x.COMPAT?v*qt:M===x.ADVANCED?v:void 0},V=function(v){return M===x.COMPAT?Va()-v:M===x.ADVANCED?v:void 0},j=function(v){return N(V(v))};f.__private__.setPrecision=f.setPrecision=function(v){typeof parseInt(v,10)=="number"&&(t=parseInt(v,10))};var J,at="00000000000000000000000000000000",st=f.__private__.getFileId=function(){return at},tt=f.__private__.setFileId=function(v){return at=v!==void 0&&/^[a-fA-F0-9]{32}$/.test(v)?v.toUpperCase():at.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(ln=new hh(d.userPermissions,d.userPassword,d.ownerPassword,at)),at};f.setFileId=function(v){return tt(v),this},f.getFileId=function(){return st()};var vt=f.__private__.convertDateToPDFDate=function(v){var C=v.getTimezoneOffset(),W=C<0?"+":"-",et=Math.floor(Math.abs(C/60)),ut=Math.abs(C%60),yt=[W,$(et),"'",$(ut),"'"].join("");return["D:",v.getFullYear(),$(v.getMonth()+1),$(v.getDate()),$(v.getHours()),$(v.getMinutes()),$(v.getSeconds()),yt].join("")},ht=f.__private__.convertPDFDateToDate=function(v){var C=parseInt(v.substr(2,4),10),W=parseInt(v.substr(6,2),10)-1,et=parseInt(v.substr(8,2),10),ut=parseInt(v.substr(10,2),10),yt=parseInt(v.substr(12,2),10),Ct=parseInt(v.substr(14,2),10);return new Date(C,W,et,ut,yt,Ct,0)},At=f.__private__.setCreationDate=function(v){var C;if(v===void 0&&(v=new Date),v instanceof Date)C=vt(v);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(v))throw new Error("Invalid argument passed to jsPDF.setCreationDate");C=v}return J=C},E=f.__private__.getCreationDate=function(v){var C=J;return v==="jsDate"&&(C=ht(J)),C};f.setCreationDate=function(v){return At(v),this},f.getCreationDate=function(v){return E(v)};var z,$=f.__private__.padd2=function(v){return("0"+parseInt(v)).slice(-2)},K=f.__private__.padd2Hex=function(v){return("00"+(v=v.toString())).substr(v.length)},Z=0,ot=[],ft=[],mt=0,Nt=[],kt=[],Bt=!1,Rt=ft,Zt=function(){Z=0,mt=0,ft=[],ot=[],Nt=[],Gr=Ei(),Is=Ei()};f.__private__.setCustomOutputDestination=function(v){Bt=!0,Rt=v};var wt=function(v){Bt||(Rt=v)};f.__private__.resetCustomOutputDestination=function(){Bt=!1,Rt=ft};var Y=f.__private__.out=function(v){return v=v.toString(),mt+=v.length+1,Rt.push(v),Rt},ue=f.__private__.write=function(v){return Y(arguments.length===1?v.toString():Array.prototype.join.call(arguments," "))},Gt=f.__private__.getArrayBuffer=function(v){for(var C=v.length,W=new ArrayBuffer(C),et=new Uint8Array(W);C--;)et[C]=v.charCodeAt(C);return W},Pt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return Pt};var Tt=n.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(v){return Tt=M===x.ADVANCED?v/qt:v,this};var jt,Dt=f.__private__.getFontSize=f.getFontSize=function(){return M===x.COMPAT?Tt:Tt*qt},Xt=n.R2L||!1;f.__private__.setR2L=f.setR2L=function(v){return Xt=v,this},f.__private__.getR2L=f.getR2L=function(){return Xt};var ae,pe=f.__private__.setZoomMode=function(v){var C=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(v))jt=v;else if(isNaN(v)){if(C.indexOf(v)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+v+'" is not recognized.');jt=v}else jt=parseInt(v,10)};f.__private__.getZoomMode=function(){return jt};var me,Ce=f.__private__.setPageMode=function(v){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(v)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+v+'" is not recognized.');ae=v};f.__private__.getPageMode=function(){return ae};var He=f.__private__.setLayoutMode=function(v){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(v)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+v+'" is not recognized.');me=v};f.__private__.getLayoutMode=function(){return me},f.__private__.setDisplayMode=f.setDisplayMode=function(v,C,W){return pe(v),He(C),Ce(W),this};var ie={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(v){if(Object.keys(ie).indexOf(v)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ie[v]},f.__private__.getDocumentProperties=function(){return ie},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(v){for(var C in ie)ie.hasOwnProperty(C)&&v[C]&&(ie[C]=v[C]);return this},f.__private__.setDocumentProperty=function(v,C){if(Object.keys(ie).indexOf(v)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ie[v]=C};var be,qt,on,ke,ks,Ge={},ei={},ar=[],Fe={},Uo={},ci={},Ns={},Wr=null,hi=0,oe=[],Oe=new Y5(f),Wo=n.hotfixes||[],Qi={},or={},lr=[],Qt=function v(C,W,et,ut,yt,Ct){if(!(this instanceof v))return new v(C,W,et,ut,yt,Ct);isNaN(C)&&(C=1),isNaN(W)&&(W=0),isNaN(et)&&(et=0),isNaN(ut)&&(ut=1),isNaN(yt)&&(yt=0),isNaN(Ct)&&(Ct=0),this._matrix=[C,W,et,ut,yt,Ct]};Object.defineProperty(Qt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(Qt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(Qt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(Qt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(Qt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(Qt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(Qt.prototype,"a",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(Qt.prototype,"b",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(Qt.prototype,"c",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(Qt.prototype,"d",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(Qt.prototype,"e",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(Qt.prototype,"f",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(Qt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Qt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Qt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Qt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Qt.prototype.join=function(v){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(G).join(v)},Qt.prototype.multiply=function(v){var C=v.sx*this.sx+v.shy*this.shx,W=v.sx*this.shy+v.shy*this.sy,et=v.shx*this.sx+v.sy*this.shx,ut=v.shx*this.shy+v.sy*this.sy,yt=v.tx*this.sx+v.ty*this.shx+this.tx,Ct=v.tx*this.shy+v.ty*this.sy+this.ty;return new Qt(C,W,et,ut,yt,Ct)},Qt.prototype.decompose=function(){var v=this.sx,C=this.shy,W=this.shx,et=this.sy,ut=this.tx,yt=this.ty,Ct=Math.sqrt(v*v+C*C),zt=(v/=Ct)*W+(C/=Ct)*et;W-=v*zt,et-=C*zt;var Yt=Math.sqrt(W*W+et*et);return zt/=Yt,v*(et/=Yt)<C*(W/=Yt)&&(v=-v,C=-C,zt=-zt,Ct=-Ct),{scale:new Qt(Ct,0,0,Yt,0,0),translate:new Qt(1,0,0,1,ut,yt),rotate:new Qt(v,C,-C,v,0,0),skew:new Qt(1,0,zt,1,0,0)}},Qt.prototype.toString=function(v){return this.join(" ")},Qt.prototype.inversed=function(){var v=this.sx,C=this.shy,W=this.shx,et=this.sy,ut=this.tx,yt=this.ty,Ct=1/(v*et-C*W),zt=et*Ct,Yt=-C*Ct,de=-W*Ct,le=v*Ct;return new Qt(zt,Yt,de,le,-zt*ut-de*yt,-Yt*ut-le*yt)},Qt.prototype.applyToPoint=function(v){var C=v.x*this.sx+v.y*this.shx+this.tx,W=v.x*this.shy+v.y*this.sy+this.ty;return new jc(C,W)},Qt.prototype.applyToRectangle=function(v){var C=this.applyToPoint(v),W=this.applyToPoint(new jc(v.x+v.w,v.y+v.h));return new Ru(C.x,C.y,W.x-C.x,W.y-C.y)},Qt.prototype.clone=function(){var v=this.sx,C=this.shy,W=this.shx,et=this.sy,ut=this.tx,yt=this.ty;return new Qt(v,C,W,et,ut,yt)},f.Matrix=Qt;var Ts=f.matrixMult=function(v,C){return C.multiply(v)},cr=new Qt(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=cr;var Nn=function(v,C){if(!Uo[v]){var W=(C instanceof ol?"Sh":"P")+(Object.keys(Fe).length+1).toString(10);C.id=W,Uo[v]=W,Fe[W]=C,Oe.publish("addPattern",C)}};f.ShadingPattern=ol,f.TilingPattern=ph,f.addShadingPattern=function(v,C){return B("addShadingPattern()"),Nn(v,C),this},f.beginTilingPattern=function(v){B("beginTilingPattern()"),Sp(v.boundingBox[0],v.boundingBox[1],v.boundingBox[2]-v.boundingBox[0],v.boundingBox[3]-v.boundingBox[1],v.matrix)},f.endTilingPattern=function(v,C){B("endTilingPattern()"),C.stream=kt[z].join(`
`),Nn(v,C),Oe.publish("endTilingPattern",C),lr.pop().restore()};var Ri=f.__private__.newObject=function(){var v=Ei();return Un(v,!0),v},Ei=f.__private__.newObjectDeferred=function(){return Z++,ot[Z]=function(){return mt},Z},Un=function(v,C){return C=typeof C=="boolean"&&C,ot[v]=mt,C&&Y(v+" 0 obj"),v},Cc=f.__private__.newAdditionalObject=function(){var v={objId:Ei(),content:""};return Nt.push(v),v},Gr=Ei(),Is=Ei(),Ms=f.__private__.decodeColorString=function(v){var C=v.split(" ");if(C.length!==2||C[1]!=="g"&&C[1]!=="G")C.length===5&&(C[4]==="k"||C[4]==="K")&&(C=[(1-C[0])*(1-C[3]),(1-C[1])*(1-C[3]),(1-C[2])*(1-C[3]),"r"]);else{var W=parseFloat(C[0]);C=[W,W,W,"r"]}for(var et="#",ut=0;ut<3;ut++)et+=("0"+Math.floor(255*parseFloat(C[ut])).toString(16)).slice(-2);return et},Rs=f.__private__.encodeColorString=function(v){var C;typeof v=="string"&&(v={ch1:v});var W=v.ch1,et=v.ch2,ut=v.ch3,yt=v.ch4,Ct=v.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof W=="string"&&W.charAt(0)!=="#"){var zt=new FA(W);if(zt.ok)W=zt.toHex();else if(!/^\d*\.?\d*$/.test(W))throw new Error('Invalid color "'+W+'" passed to jsPDF.encodeColorString.')}if(typeof W=="string"&&/^#[0-9A-Fa-f]{3}$/.test(W)&&(W="#"+W[1]+W[1]+W[2]+W[2]+W[3]+W[3]),typeof W=="string"&&/^#[0-9A-Fa-f]{6}$/.test(W)){var Yt=parseInt(W.substr(1),16);W=Yt>>16&255,et=Yt>>8&255,ut=255&Yt}if(et===void 0||yt===void 0&&W===et&&et===ut)if(typeof W=="string")C=W+" "+Ct[0];else switch(v.precision){case 2:C=ct(W/255)+" "+Ct[0];break;case 3:default:C=P(W/255)+" "+Ct[0]}else if(yt===void 0||ze(yt)==="object"){if(yt&&!isNaN(yt.a)&&yt.a===0)return C=["1.","1.","1.",Ct[1]].join(" ");if(typeof W=="string")C=[W,et,ut,Ct[1]].join(" ");else switch(v.precision){case 2:C=[ct(W/255),ct(et/255),ct(ut/255),Ct[1]].join(" ");break;default:case 3:C=[P(W/255),P(et/255),P(ut/255),Ct[1]].join(" ")}}else if(typeof W=="string")C=[W,et,ut,yt,Ct[2]].join(" ");else switch(v.precision){case 2:C=[ct(W),ct(et),ct(ut),ct(yt),Ct[2]].join(" ");break;case 3:default:C=[P(W),P(et),P(ut),P(yt),Ct[2]].join(" ")}return C},hr=f.__private__.getFilters=function(){return a},ls=f.__private__.putStream=function(v){var C=(v=v||{}).data||"",W=v.filters||hr(),et=v.alreadyAppliedFilters||[],ut=v.addLength1||!1,yt=C.length,Ct=v.objectId,zt=function(cn){return cn};if(d!==null&&Ct===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(zt=ln.encryptor(Ct,0));var Yt={};W===!0&&(W=["FlateEncode"]);var de=v.additionalKeyValues||[],le=(Yt=te.API.processDataByFilters!==void 0?te.API.processDataByFilters(C,W):{data:C,reverseChain:[]}).reverseChain+(Array.isArray(et)?et.join(" "):et.toString());if(Yt.data.length!==0&&(de.push({key:"Length",value:Yt.data.length}),ut===!0&&de.push({key:"Length1",value:yt})),le.length!=0)if(le.split("/").length-1==1)de.push({key:"Filter",value:le});else{de.push({key:"Filter",value:"["+le+"]"});for(var xe=0;xe<de.length;xe+=1)if(de[xe].key==="DecodeParms"){for(var ri=[],ui=0;ui<Yt.reverseChain.split("/").length-1;ui+=1)ri.push("null");ri.push(de[xe].value),de[xe].value="["+ri.join(" ")+"]"}}Y("<<");for(var Pi=0;Pi<de.length;Pi++)Y("/"+de[Pi].key+" "+de[Pi].value);Y(">>"),Yt.data.length!==0&&(Y("stream"),Y(zt(Yt.data)),Y("endstream"))},ur=f.__private__.putPage=function(v){var C=v.number,W=v.data,et=v.objId,ut=v.contentsObjId;Un(et,!0),Y("<</Type /Page"),Y("/Parent "+v.rootDictionaryObjId+" 0 R"),Y("/Resources "+v.resourceDictionaryObjId+" 0 R"),Y("/MediaBox ["+parseFloat(G(v.mediaBox.bottomLeftX))+" "+parseFloat(G(v.mediaBox.bottomLeftY))+" "+G(v.mediaBox.topRightX)+" "+G(v.mediaBox.topRightY)+"]"),v.cropBox!==null&&Y("/CropBox ["+G(v.cropBox.bottomLeftX)+" "+G(v.cropBox.bottomLeftY)+" "+G(v.cropBox.topRightX)+" "+G(v.cropBox.topRightY)+"]"),v.bleedBox!==null&&Y("/BleedBox ["+G(v.bleedBox.bottomLeftX)+" "+G(v.bleedBox.bottomLeftY)+" "+G(v.bleedBox.topRightX)+" "+G(v.bleedBox.topRightY)+"]"),v.trimBox!==null&&Y("/TrimBox ["+G(v.trimBox.bottomLeftX)+" "+G(v.trimBox.bottomLeftY)+" "+G(v.trimBox.topRightX)+" "+G(v.trimBox.topRightY)+"]"),v.artBox!==null&&Y("/ArtBox ["+G(v.artBox.bottomLeftX)+" "+G(v.artBox.bottomLeftY)+" "+G(v.artBox.topRightX)+" "+G(v.artBox.topRightY)+"]"),typeof v.userUnit=="number"&&v.userUnit!==1&&Y("/UserUnit "+v.userUnit),Oe.publish("putPage",{objId:et,pageContext:oe[C],pageNumber:C,page:W}),Y("/Contents "+ut+" 0 R"),Y(">>"),Y("endobj");var yt=W.join(`
`);return M===x.ADVANCED&&(yt+=`
Q`),Un(ut,!0),ls({data:yt,filters:hr(),objectId:ut}),Y("endobj"),et},Go=f.__private__.putPages=function(){var v,C,W=[];for(v=1;v<=hi;v++)oe[v].objId=Ei(),oe[v].contentsObjId=Ei();for(v=1;v<=hi;v++)W.push(ur({number:v,data:kt[v],objId:oe[v].objId,contentsObjId:oe[v].contentsObjId,mediaBox:oe[v].mediaBox,cropBox:oe[v].cropBox,bleedBox:oe[v].bleedBox,trimBox:oe[v].trimBox,artBox:oe[v].artBox,userUnit:oe[v].userUnit,rootDictionaryObjId:Gr,resourceDictionaryObjId:Is}));Un(Gr,!0),Y("<</Type /Pages");var et="/Kids [";for(C=0;C<hi;C++)et+=W[C]+" 0 R ";Y(et+"]"),Y("/Count "+hi),Y(">>"),Y("endobj"),Oe.publish("postPutPages")},Ec=function(v){Oe.publish("putFont",{font:v,out:Y,newObject:Ri,putStream:ls}),v.isAlreadyPutted!==!0&&(v.objectNumber=Ri(),Y("<<"),Y("/Type /Font"),Y("/BaseFont /"+uh(v.postScriptName)),Y("/Subtype /Type1"),typeof v.encoding=="string"&&Y("/Encoding /"+v.encoding),Y("/FirstChar 32"),Y("/LastChar 255"),Y(">>"),Y("endobj"))},Pc=function(){for(var v in Ge)Ge.hasOwnProperty(v)&&(p===!1||p===!0&&m.hasOwnProperty(v))&&Ec(Ge[v])},kc=function(v){v.objectNumber=Ri();var C=[];C.push({key:"Type",value:"/XObject"}),C.push({key:"Subtype",value:"/Form"}),C.push({key:"BBox",value:"["+[G(v.x),G(v.y),G(v.x+v.width),G(v.y+v.height)].join(" ")+"]"}),C.push({key:"Matrix",value:"["+v.matrix.toString()+"]"});var W=v.pages[1].join(`
`);ls({data:W,additionalKeyValues:C,objectId:v.objectNumber}),Y("endobj")},Nc=function(){for(var v in Qi)Qi.hasOwnProperty(v)&&kc(Qi[v])},rp=function(v,C){var W,et=[],ut=1/(C-1);for(W=0;W<1;W+=ut)et.push(W);if(et.push(1),v[0].offset!=0){var yt={offset:0,color:v[0].color};v.unshift(yt)}if(v[v.length-1].offset!=1){var Ct={offset:1,color:v[v.length-1].color};v.push(Ct)}for(var zt="",Yt=0,de=0;de<et.length;de++){for(W=et[de];W>v[Yt+1].offset;)Yt++;var le=v[Yt].offset,xe=(W-le)/(v[Yt+1].offset-le),ri=v[Yt].color,ui=v[Yt+1].color;zt+=K(Math.round((1-xe)*ri[0]+xe*ui[0]).toString(16))+K(Math.round((1-xe)*ri[1]+xe*ui[1]).toString(16))+K(Math.round((1-xe)*ri[2]+xe*ui[2]).toString(16))}return zt.trim()},Gm=function(v,C){C||(C=21);var W=Ri(),et=rp(v.colors,C),ut=[];ut.push({key:"FunctionType",value:"0"}),ut.push({key:"Domain",value:"[0.0 1.0]"}),ut.push({key:"Size",value:"["+C+"]"}),ut.push({key:"BitsPerSample",value:"8"}),ut.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ut.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ls({data:et,additionalKeyValues:ut,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:W}),Y("endobj"),v.objectNumber=Ri(),Y("<< /ShadingType "+v.type),Y("/ColorSpace /DeviceRGB");var yt="/Coords ["+G(parseFloat(v.coords[0]))+" "+G(parseFloat(v.coords[1]))+" ";v.type===2?yt+=G(parseFloat(v.coords[2]))+" "+G(parseFloat(v.coords[3])):yt+=G(parseFloat(v.coords[2]))+" "+G(parseFloat(v.coords[3]))+" "+G(parseFloat(v.coords[4]))+" "+G(parseFloat(v.coords[5])),Y(yt+="]"),v.matrix&&Y("/Matrix ["+v.matrix.toString()+"]"),Y("/Function "+W+" 0 R"),Y("/Extend [true true]"),Y(">>"),Y("endobj")},$m=function(v,C){var W=Ei(),et=Ri();C.push({resourcesOid:W,objectOid:et}),v.objectNumber=et;var ut=[];ut.push({key:"Type",value:"/Pattern"}),ut.push({key:"PatternType",value:"1"}),ut.push({key:"PaintType",value:"1"}),ut.push({key:"TilingType",value:"1"}),ut.push({key:"BBox",value:"["+v.boundingBox.map(G).join(" ")+"]"}),ut.push({key:"XStep",value:G(v.xStep)}),ut.push({key:"YStep",value:G(v.yStep)}),ut.push({key:"Resources",value:W+" 0 R"}),v.matrix&&ut.push({key:"Matrix",value:"["+v.matrix.toString()+"]"}),ls({data:v.stream,additionalKeyValues:ut,objectId:v.objectNumber}),Y("endobj")},Tc=function(v){var C;for(C in Fe)Fe.hasOwnProperty(C)&&(Fe[C]instanceof ol?Gm(Fe[C]):Fe[C]instanceof ph&&$m(Fe[C],v))},ap=function(v){for(var C in v.objectNumber=Ri(),Y("<<"),v)switch(C){case"opacity":Y("/ca "+ct(v[C]));break;case"stroke-opacity":Y("/CA "+ct(v[C]))}Y(">>"),Y("endobj")},Xm=function(){var v;for(v in ci)ci.hasOwnProperty(v)&&ap(ci[v])},xu=function(){for(var v in Y("/XObject <<"),Qi)Qi.hasOwnProperty(v)&&Qi[v].objectNumber>=0&&Y("/"+v+" "+Qi[v].objectNumber+" 0 R");Oe.publish("putXobjectDict"),Y(">>")},Ym=function(){ln.oid=Ri(),Y("<<"),Y("/Filter /Standard"),Y("/V "+ln.v),Y("/R "+ln.r),Y("/U <"+ln.toHexString(ln.U)+">"),Y("/O <"+ln.toHexString(ln.O)+">"),Y("/P "+ln.P),Y(">>"),Y("endobj")},op=function(){for(var v in Y("/Font <<"),Ge)Ge.hasOwnProperty(v)&&(p===!1||p===!0&&m.hasOwnProperty(v))&&Y("/"+v+" "+Ge[v].objectNumber+" 0 R");Y(">>")},Km=function(){if(Object.keys(Fe).length>0){for(var v in Y("/Shading <<"),Fe)Fe.hasOwnProperty(v)&&Fe[v]instanceof ol&&Fe[v].objectNumber>=0&&Y("/"+v+" "+Fe[v].objectNumber+" 0 R");Oe.publish("putShadingPatternDict"),Y(">>")}},Ic=function(v){if(Object.keys(Fe).length>0){for(var C in Y("/Pattern <<"),Fe)Fe.hasOwnProperty(C)&&Fe[C]instanceof f.TilingPattern&&Fe[C].objectNumber>=0&&Fe[C].objectNumber<v&&Y("/"+C+" "+Fe[C].objectNumber+" 0 R");Oe.publish("putTilingPatternDict"),Y(">>")}},Jm=function(){if(Object.keys(ci).length>0){var v;for(v in Y("/ExtGState <<"),ci)ci.hasOwnProperty(v)&&ci[v].objectNumber>=0&&Y("/"+v+" "+ci[v].objectNumber+" 0 R");Oe.publish("putGStateDict"),Y(">>")}},mi=function(v){Un(v.resourcesOid,!0),Y("<<"),Y("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),op(),Km(),Ic(v.objectOid),Jm(),xu(),Y(">>"),Y("endobj")},lp=function(){var v=[];Pc(),Xm(),Nc(),Tc(v),Oe.publish("putResources"),v.forEach(mi),mi({resourcesOid:Is,objectOid:Number.MAX_SAFE_INTEGER}),Oe.publish("postPutResources")},cp=function(){Oe.publish("putAdditionalObjects");for(var v=0;v<Nt.length;v++){var C=Nt[v];Un(C.objId,!0),Y(C.content),Y("endobj")}Oe.publish("postPutAdditionalObjects")},hp=function(v){ei[v.fontName]=ei[v.fontName]||{},ei[v.fontName][v.fontStyle]=v.id},Lu=function(v,C,W,et,ut){var yt={id:"F"+(Object.keys(Ge).length+1).toString(10),postScriptName:v,fontName:C,fontStyle:W,encoding:et,isStandardFont:ut||!1,metadata:{}};return Oe.publish("addFont",{font:yt,instance:this}),Ge[yt.id]=yt,hp(yt),yt.id},Qm=function(v){for(var C=0,W=Pt.length;C<W;C++){var et=Lu.call(this,v[C][0],v[C][1],v[C][2],Pt[C][3],!0);p===!1&&(m[et]=!0);var ut=v[C][0].split("-");hp({id:et,fontName:ut[0],fontStyle:ut[1]||""})}Oe.publish("addFonts",{fonts:Ge,dictionary:ei})},Fs=function(v){return v.foo=function(){try{return v.apply(this,arguments)}catch(et){var C=et.stack||"";~C.indexOf(" at ")&&(C=C.split(" at ")[1]);var W="Error in function "+C.split(`
`)[0].split("<")[0]+": "+et.message;if(!ee.console)throw new Error(W);ee.console.error(W,et),ee.alert&&alert(W)}},v.foo.bar=v,v.foo},Mc=function(v,C){var W,et,ut,yt,Ct,zt,Yt,de,le;if(ut=(C=C||{}).sourceEncoding||"Unicode",Ct=C.outputEncoding,(C.autoencode||Ct)&&Ge[be].metadata&&Ge[be].metadata[ut]&&Ge[be].metadata[ut].encoding&&(yt=Ge[be].metadata[ut].encoding,!Ct&&Ge[be].encoding&&(Ct=Ge[be].encoding),!Ct&&yt.codePages&&(Ct=yt.codePages[0]),typeof Ct=="string"&&(Ct=yt[Ct]),Ct)){for(Yt=!1,zt=[],W=0,et=v.length;W<et;W++)(de=Ct[v.charCodeAt(W)])?zt.push(String.fromCharCode(de)):zt.push(v[W]),zt[W].charCodeAt(0)>>8&&(Yt=!0);v=zt.join("")}for(W=v.length;Yt===void 0&&W!==0;)v.charCodeAt(W-1)>>8&&(Yt=!0),W--;if(!Yt)return v;for(zt=C.noBOM?[]:[254,255],W=0,et=v.length;W<et;W++){if((le=(de=v.charCodeAt(W))>>8)>>8)throw new Error("Character at position "+W+" of string '"+v+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");zt.push(le),zt.push(de-(le<<8))}return String.fromCharCode.apply(void 0,zt)},Tn=f.__private__.pdfEscape=f.pdfEscape=function(v,C){return Mc(v,C).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Cu=f.__private__.beginPage=function(v){kt[++hi]=[],oe[hi]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(v[0]),topRightY:Number(v[1])}},dp(hi),wt(kt[z])},up=function(v,C){var W,et,ut;switch(e=C||e,typeof v=="string"&&(W=A(v.toLowerCase()),Array.isArray(W)&&(et=W[0],ut=W[1])),Array.isArray(v)&&(et=v[0]*qt,ut=v[1]*qt),isNaN(et)&&(et=s[0],ut=s[1]),(et>14400||ut>14400)&&(Xe.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),et=Math.min(14400,et),ut=Math.min(14400,ut)),s=[et,ut],e.substr(0,1)){case"l":ut>et&&(s=[ut,et]);break;case"p":et>ut&&(s=[ut,et])}Cu(s),bp(Nu),Y(Os),Iu!==0&&Y(Iu+" J"),Mu!==0&&Y(Mu+" j"),Oe.publish("addPage",{pageNumber:hi})},Zm=function(v){v>0&&v<=hi&&(kt.splice(v,1),oe.splice(v,1),hi--,z>hi&&(z=hi),this.setPage(z))},dp=function(v){v>0&&v<=hi&&(z=v)},t1=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return kt.length-1},fp=function(v,C,W){var et,ut=void 0;return W=W||{},v=v!==void 0?v:Ge[be].fontName,C=C!==void 0?C:Ge[be].fontStyle,et=v.toLowerCase(),ei[et]!==void 0&&ei[et][C]!==void 0?ut=ei[et][C]:ei[v]!==void 0&&ei[v][C]!==void 0?ut=ei[v][C]:W.disableWarning===!1&&Xe.warn("Unable to look up font label for font '"+v+"', '"+C+"'. Refer to getFontList() for available fonts."),ut||W.noFallback||(ut=ei.times[C])==null&&(ut=ei.times.normal),ut},e1=f.__private__.putInfo=function(){var v=Ri(),C=function(et){return et};for(var W in d!==null&&(C=ln.encryptor(v,0)),Y("<<"),Y("/Producer ("+Tn(C("jsPDF "+te.version))+")"),ie)ie.hasOwnProperty(W)&&ie[W]&&Y("/"+W.substr(0,1).toUpperCase()+W.substr(1)+" ("+Tn(C(ie[W]))+")");Y("/CreationDate ("+Tn(C(J))+")"),Y(">>"),Y("endobj")},Eu=f.__private__.putCatalog=function(v){var C=(v=v||{}).rootDictionaryObjId||Gr;switch(Ri(),Y("<<"),Y("/Type /Catalog"),Y("/Pages "+C+" 0 R"),jt||(jt="fullwidth"),jt){case"fullwidth":Y("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Y("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Y("/OpenAction [3 0 R /Fit]");break;case"original":Y("/OpenAction [3 0 R /XYZ null null 1]");break;default:var W=""+jt;W.substr(W.length-1)==="%"&&(jt=parseInt(jt)/100),typeof jt=="number"&&Y("/OpenAction [3 0 R /XYZ null null "+ct(jt)+"]")}switch(me||(me="continuous"),me){case"continuous":Y("/PageLayout /OneColumn");break;case"single":Y("/PageLayout /SinglePage");break;case"two":case"twoleft":Y("/PageLayout /TwoColumnLeft");break;case"tworight":Y("/PageLayout /TwoColumnRight")}ae&&Y("/PageMode /"+ae),Oe.publish("putCatalog"),Y(">>"),Y("endobj")},i1=f.__private__.putTrailer=function(){Y("trailer"),Y("<<"),Y("/Size "+(Z+1)),Y("/Root "+Z+" 0 R"),Y("/Info "+(Z-1)+" 0 R"),d!==null&&Y("/Encrypt "+ln.oid+" 0 R"),Y("/ID [ <"+at+"> <"+at+"> ]"),Y(">>")},n1=f.__private__.putHeader=function(){Y("%PDF-"+b),Y("%ºß¬à")},s1=f.__private__.putXRef=function(){var v="0000000000";Y("xref"),Y("0 "+(Z+1)),Y("0000000000 65535 f ");for(var C=1;C<=Z;C++)typeof ot[C]=="function"?Y((v+ot[C]()).slice(-10)+" 00000 n "):ot[C]!==void 0?Y((v+ot[C]).slice(-10)+" 00000 n "):Y("0000000000 00000 n ")},$r=f.__private__.buildDocument=function(){Zt(),wt(ft),Oe.publish("buildDocument"),n1(),Go(),cp(),lp(),d!==null&&Ym(),e1(),Eu();var v=mt;return s1(),i1(),Y("startxref"),Y(""+v),Y("%%EOF"),wt(kt[z]),ft.join(`
`)},Rc=f.__private__.getBlob=function(v){return new Blob([Gt(v)],{type:"application/pdf"})},Fc=f.output=f.__private__.output=Fs(function(v,C){switch(typeof(C=C||{})=="string"?C={filename:C}:C.filename=C.filename||"generated.pdf",v){case void 0:return $r();case"save":f.save(C.filename);break;case"arraybuffer":return Gt($r());case"blob":return Rc($r());case"bloburi":case"bloburl":if(ee.URL!==void 0&&typeof ee.URL.createObjectURL=="function")return ee.URL&&ee.URL.createObjectURL(Rc($r()))||void 0;Xe.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var W="",et=$r();try{W=F2(et)}catch{W=F2(unescape(encodeURIComponent(et)))}return"data:application/pdf;filename="+C.filename+";base64,"+W;case"pdfobjectnewwindow":if(Object.prototype.toString.call(ee)==="[object Window]"){var ut="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",yt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';C.pdfObjectUrl&&(ut=C.pdfObjectUrl,yt="");var Ct='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ut+'"'+yt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(C)+");<\/script></body></html>",zt=ee.open();return zt!==null&&zt.document.write(Ct),zt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(ee)==="[object Window]"){var Yt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(C.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+C.filename+'" width="500px" height="400px" /></body></html>',de=ee.open();if(de!==null){de.document.write(Yt);var le=this;de.document.documentElement.querySelector("#pdfViewer").onload=function(){de.document.title=C.filename,de.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(le.output("bloburl"))}}return de}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(ee)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var xe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",C)+'"></iframe></body></html>',ri=ee.open();if(ri!==null&&(ri.document.write(xe),ri.document.title=C.filename),ri||typeof safari>"u")return ri;break;case"datauri":case"dataurl":return ee.document.location.href=this.output("datauristring",C);default:return null}}),pp=function(v){return Array.isArray(Wo)===!0&&Wo.indexOf(v)>-1};switch(i){case"pt":qt=1;break;case"mm":qt=72/25.4;break;case"cm":qt=72/2.54;break;case"in":qt=72;break;case"px":qt=pp("px_scaling")==1?.75:96/72;break;case"pc":case"em":qt=12;break;case"ex":qt=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);qt=i}var ln=null;At(),tt();var r1=function(v){return d!==null?ln.encryptor(v,0):function(C){return C}},gp=f.__private__.getPageInfo=f.getPageInfo=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:oe[v].objId,pageNumber:v,pageContext:oe[v]}},ne=f.__private__.getPageInfoByObjId=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var C in oe)if(oe[C].objId===v)break;return gp(C)},a1=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:oe[z].objId,pageNumber:z,pageContext:oe[z]}};f.addPage=function(){return up.apply(this,arguments),this},f.setPage=function(){return dp.apply(this,arguments),wt.call(this,kt[z]),this},f.insertPage=function(v){return this.addPage(),this.movePage(z,v),this},f.movePage=function(v,C){var W,et;if(v>C){W=kt[v],et=oe[v];for(var ut=v;ut>C;ut--)kt[ut]=kt[ut-1],oe[ut]=oe[ut-1];kt[C]=W,oe[C]=et,this.setPage(C)}else if(v<C){W=kt[v],et=oe[v];for(var yt=v;yt<C;yt++)kt[yt]=kt[yt+1],oe[yt]=oe[yt+1];kt[C]=W,oe[C]=et,this.setPage(C)}return this},f.deletePage=function(){return Zm.apply(this,arguments),this},f.__private__.text=f.text=function(v,C,W,et,ut){var yt,Ct,zt,Yt,de,le,xe,ri,ui,Pi=(et=et||{}).scope||this;if(typeof v=="number"&&typeof C=="number"&&(typeof W=="string"||Array.isArray(W))){var cn=W;W=C,C=v,v=cn}if(arguments[3]instanceof Qt?(B("The transform parameter of text() with a Matrix value"),ui=ut):(zt=arguments[4],Yt=arguments[5],ze(xe=arguments[3])==="object"&&xe!==null||(typeof zt=="string"&&(Yt=zt,zt=null),typeof xe=="string"&&(Yt=xe,xe=null),typeof xe=="number"&&(zt=xe,xe=null),et={flags:xe,angle:zt,align:Yt})),isNaN(C)||isNaN(W)||v==null)throw new Error("Invalid arguments passed to jsPDF.text");if(v.length===0)return Pi;var Vi="",Ds=!1,Wn=typeof et.lineHeightFactor=="number"?et.lineHeightFactor:Xo,pr=Pi.internal.scaleFactor;function xp(Ke){return Ke=Ke.split("	").join(Array(et.TabLen||9).join(" ")),Tn(Ke,xe)}function Bu(Ke){for(var Je,bi=Ke.concat(),Fi=[],Qr=bi.length;Qr--;)typeof(Je=bi.shift())=="string"?Fi.push(Je):Array.isArray(Ke)&&(Je.length===1||Je[1]===void 0&&Je[2]===void 0)?Fi.push(Je[0]):Fi.push([Je[0],Je[1],Je[2]]);return Fi}function ju(Ke,Je){var bi;if(typeof Ke=="string")bi=Je(Ke)[0];else if(Array.isArray(Ke)){for(var Fi,Qr,$u=Ke.concat(),Kc=[],kp=$u.length;kp--;)typeof(Fi=$u.shift())=="string"?Kc.push(Je(Fi)[0]):Array.isArray(Fi)&&typeof Fi[0]=="string"&&(Qr=Je(Fi[0],Fi[1],Fi[2]),Kc.push([Qr[0],Qr[1],Qr[2]]));bi=Kc}return bi}var zc=!1,qu=!0;if(typeof v=="string")zc=!0;else if(Array.isArray(v)){var zu=v.concat();Ct=[];for(var Hc,Zi=zu.length;Zi--;)(typeof(Hc=zu.shift())!="string"||Array.isArray(Hc)&&typeof Hc[0]!="string")&&(qu=!1);zc=qu}if(zc===!1)throw new Error('Type of text must be string or Array. "'+v+'" is not recognized.');typeof v=="string"&&(v=v.match(/[\r?\n]/)?v.split(/\r\n|\r|\n/g):[v]);var Vc=Tt/Pi.internal.scaleFactor,Uc=Vc*(Wn-1);switch(et.baseline){case"bottom":W-=Uc;break;case"top":W+=Vc-Uc;break;case"hanging":W+=Vc-2*Uc;break;case"middle":W+=Vc/2-Uc}if((le=et.maxWidth||0)>0&&(typeof v=="string"?v=Pi.splitTextToSize(v,le):Object.prototype.toString.call(v)==="[object Array]"&&(v=v.reduce(function(Ke,Je){return Ke.concat(Pi.splitTextToSize(Je,le))},[]))),yt={text:v,x:C,y:W,options:et,mutex:{pdfEscape:Tn,activeFontKey:be,fonts:Ge,activeFontSize:Tt}},Oe.publish("preProcessText",yt),v=yt.text,zt=(et=yt.options).angle,!(ui instanceof Qt)&&zt&&typeof zt=="number"){zt*=Math.PI/180,et.rotationDirection===0&&(zt=-zt),M===x.ADVANCED&&(zt=-zt);var Wc=Math.cos(zt),Hu=Math.sin(zt);ui=new Qt(Wc,Hu,-Hu,Wc,0,0)}else zt&&zt instanceof Qt&&(ui=zt);M!==x.ADVANCED||ui||(ui=cr),(de=et.charSpace||Bc)!==void 0&&(Vi+=G(N(de))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ri=et.horizontalScale)!==void 0&&(Vi+=G(100*ri)+` Tz
`),et.lang;var In=-1,m1=et.renderingMode!==void 0?et.renderingMode:et.stroke,Vu=Pi.internal.getCurrentPageInfo().pageContext;switch(m1){case 0:case!1:case"fill":In=0;break;case 1:case!0:case"stroke":In=1;break;case 2:case"fillThenStroke":In=2;break;case 3:case"invisible":In=3;break;case 4:case"fillAndAddForClipping":In=4;break;case 5:case"strokeAndAddPathForClipping":In=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":In=6;break;case 7:case"addToPathForClipping":In=7}var Lp=Vu.usedRenderingMode!==void 0?Vu.usedRenderingMode:-1;In!==-1?Vi+=In+` Tr
`:Lp!==-1&&(Vi+=`0 Tr
`),In!==-1&&(Vu.usedRenderingMode=In),Yt=et.align||"left";var cs,Gc=Tt*Wn,Cp=Pi.internal.pageSize.getWidth(),Ep=Ge[be];de=et.charSpace||Bc,le=et.maxWidth||0,xe=Object.assign({autoencode:!0,noBOM:!0},et.flags);var Ua=[],Jo=function(Ke){return Pi.getStringUnitWidth(Ke,{font:Ep,charSpace:de,fontSize:Tt,doKerning:!1})*Tt/pr};if(Object.prototype.toString.call(v)==="[object Array]"){var Mn;Ct=Bu(v),Yt!=="left"&&(cs=Ct.map(Jo));var wn,Wa=0;if(Yt==="right"){C-=cs[0],v=[],Zi=Ct.length;for(var Yr=0;Yr<Zi;Yr++)Yr===0?(wn=fr(C),Mn=Xr(W)):(wn=N(Wa-cs[Yr]),Mn=-Gc),v.push([Ct[Yr],wn,Mn]),Wa=cs[Yr]}else if(Yt==="center"){C-=cs[0]/2,v=[],Zi=Ct.length;for(var Kr=0;Kr<Zi;Kr++)Kr===0?(wn=fr(C),Mn=Xr(W)):(wn=N((Wa-cs[Kr])/2),Mn=-Gc),v.push([Ct[Kr],wn,Mn]),Wa=cs[Kr]}else if(Yt==="left"){v=[],Zi=Ct.length;for(var $c=0;$c<Zi;$c++)v.push(Ct[$c])}else if(Yt==="justify"&&Ep.encoding==="Identity-H"){v=[],Zi=Ct.length,le=le!==0?le:Cp;for(var Jr=0,vi=0;vi<Zi;vi++)if(Mn=vi===0?Xr(W):-Gc,wn=vi===0?fr(C):Jr,vi<Zi-1){var Uu=N((le-cs[vi])/(Ct[vi].split(" ").length-1)),An=Ct[vi].split(" ");v.push([An[0]+" ",wn,Mn]),Jr=0;for(var hs=1;hs<An.length;hs++){var Xc=(Jo(An[hs-1]+" "+An[hs])-Jo(An[hs]))*pr+Uu;hs==An.length-1?v.push([An[hs],Xc,0]):v.push([An[hs]+" ",Xc,0]),Jr-=Xc}}else v.push([Ct[vi],wn,Mn]);v.push(["",Jr,0])}else{if(Yt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(v=[],Zi=Ct.length,le=le!==0?le:Cp,vi=0;vi<Zi;vi++)Mn=vi===0?Xr(W):-Gc,wn=vi===0?fr(C):0,vi<Zi-1?Ua.push(G(N((le-cs[vi])/(Ct[vi].split(" ").length-1)))):Ua.push(0),v.push([Ct[vi],wn,Mn])}}var Pp=typeof et.R2L=="boolean"?et.R2L:Xt;Pp===!0&&(v=ju(v,function(Ke,Je,bi){return[Ke.split("").reverse().join(""),Je,bi]})),yt={text:v,x:C,y:W,options:et,mutex:{pdfEscape:Tn,activeFontKey:be,fonts:Ge,activeFontSize:Tt}},Oe.publish("postProcessText",yt),v=yt.text,Ds=yt.mutex.isHex||!1;var Wu=Ge[be].encoding;Wu!=="WinAnsiEncoding"&&Wu!=="StandardEncoding"||(v=ju(v,function(Ke,Je,bi){return[xp(Ke),Je,bi]})),Ct=Bu(v),v=[];for(var Qo,Zo,Ga,tl=0,Yc=1,el=Array.isArray(Ct[0])?Yc:tl,$a="",Gu=function(Ke,Je,bi){var Fi="";return bi instanceof Qt?(bi=typeof et.angle=="number"?Ts(bi,new Qt(1,0,0,1,Ke,Je)):Ts(new Qt(1,0,0,1,Ke,Je),bi),M===x.ADVANCED&&(bi=Ts(new Qt(1,0,0,-1,0,0),bi)),Fi=bi.join(" ")+` Tm
`):Fi=G(Ke)+" "+G(Je)+` Td
`,Fi},us=0;us<Ct.length;us++){switch($a="",el){case Yc:Ga=(Ds?"<":"(")+Ct[us][0]+(Ds?">":")"),Qo=parseFloat(Ct[us][1]),Zo=parseFloat(Ct[us][2]);break;case tl:Ga=(Ds?"<":"(")+Ct[us]+(Ds?">":")"),Qo=fr(C),Zo=Xr(W)}Ua!==void 0&&Ua[us]!==void 0&&($a=Ua[us]+` Tw
`),us===0?v.push($a+Gu(Qo,Zo,ui)+Ga):el===tl?v.push($a+Ga):el===Yc&&v.push($a+Gu(Qo,Zo,ui)+Ga)}v=el===tl?v.join(` Tj
T* `):v.join(` Tj
`),v+=` Tj
`;var ds=`BT
/`;return ds+=be+" "+Tt+` Tf
`,ds+=G(Tt*Wn)+` TL
`,ds+=Yo+`
`,ds+=Vi,ds+=v,Y(ds+="ET"),m[be]=!0,Pi};var o1=f.__private__.clip=f.clip=function(v){return Y(v==="evenodd"?"W*":"W"),this};f.clipEvenOdd=function(){return o1("evenodd")},f.__private__.discardPath=f.discardPath=function(){return Y("n"),this};var dr=f.__private__.isValidStyle=function(v){var C=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(v)!==-1&&(C=!0),C};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(v){return dr(v)&&(c=v),this};var mp=f.__private__.getStyle=f.getStyle=function(v){var C=c;switch(v){case"D":case"S":C="S";break;case"F":C="f";break;case"FD":case"DF":C="B";break;case"f":case"f*":case"B":case"B*":C=v}return C},vp=f.close=function(){return Y("h"),this};f.stroke=function(){return Y("S"),this},f.fill=function(v){return Oc("f",v),this},f.fillEvenOdd=function(v){return Oc("f*",v),this},f.fillStroke=function(v){return Oc("B",v),this},f.fillStrokeEvenOdd=function(v){return Oc("B*",v),this};var Oc=function(v,C){ze(C)==="object"?c1(C,v):Y(v)},Pu=function(v){v===null||M===x.ADVANCED&&v===void 0||(v=mp(v),Y(v))};function l1(v,C,W,et,ut){var yt=new ph(C||this.boundingBox,W||this.xStep,et||this.yStep,this.gState,ut||this.matrix);yt.stream=this.stream;var Ct=v+"$$"+this.cloneIndex+++"$$";return Nn(Ct,yt),yt}var c1=function(v,C){var W=Uo[v.key],et=Fe[W];if(et instanceof ol)Y("q"),Y(h1(C)),et.gState&&f.setGState(et.gState),Y(v.matrix.toString()+" cm"),Y("/"+W+" sh"),Y("Q");else if(et instanceof ph){var ut=new Qt(1,0,0,-1,0,Va());v.matrix&&(ut=ut.multiply(v.matrix||cr),W=l1.call(et,v.key,v.boundingBox,v.xStep,v.yStep,ut).id),Y("q"),Y("/Pattern cs"),Y("/"+W+" scn"),et.gState&&f.setGState(et.gState),Y(C),Y("Q")}},h1=function(v){switch(v){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},ku=f.moveTo=function(v,C){return Y(G(N(v))+" "+G(j(C))+" m"),this},$o=f.lineTo=function(v,C){return Y(G(N(v))+" "+G(j(C))+" l"),this},za=f.curveTo=function(v,C,W,et,ut,yt){return Y([G(N(v)),G(j(C)),G(N(W)),G(j(et)),G(N(ut)),G(j(yt)),"c"].join(" ")),this};f.__private__.line=f.line=function(v,C,W,et,ut){if(isNaN(v)||isNaN(C)||isNaN(W)||isNaN(et)||!dr(ut))throw new Error("Invalid arguments passed to jsPDF.line");return M===x.COMPAT?this.lines([[W-v,et-C]],v,C,[1,1],ut||"S"):this.lines([[W-v,et-C]],v,C,[1,1]).stroke()},f.__private__.lines=f.lines=function(v,C,W,et,ut,yt){var Ct,zt,Yt,de,le,xe,ri,ui,Pi,cn,Vi,Ds;if(typeof v=="number"&&(Ds=W,W=C,C=v,v=Ds),et=et||[1,1],yt=yt||!1,isNaN(C)||isNaN(W)||!Array.isArray(v)||!Array.isArray(et)||!dr(ut)||typeof yt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(ku(C,W),Ct=et[0],zt=et[1],de=v.length,cn=C,Vi=W,Yt=0;Yt<de;Yt++)(le=v[Yt]).length===2?(cn=le[0]*Ct+cn,Vi=le[1]*zt+Vi,$o(cn,Vi)):(xe=le[0]*Ct+cn,ri=le[1]*zt+Vi,ui=le[2]*Ct+cn,Pi=le[3]*zt+Vi,cn=le[4]*Ct+cn,Vi=le[5]*zt+Vi,za(xe,ri,ui,Pi,cn,Vi));return yt&&vp(),Pu(ut),this},f.path=function(v){for(var C=0;C<v.length;C++){var W=v[C],et=W.c;switch(W.op){case"m":ku(et[0],et[1]);break;case"l":$o(et[0],et[1]);break;case"c":za.apply(this,et);break;case"h":vp()}}return this},f.__private__.rect=f.rect=function(v,C,W,et,ut){if(isNaN(v)||isNaN(C)||isNaN(W)||isNaN(et)||!dr(ut))throw new Error("Invalid arguments passed to jsPDF.rect");return M===x.COMPAT&&(et=-et),Y([G(N(v)),G(j(C)),G(N(W)),G(N(et)),"re"].join(" ")),Pu(ut),this},f.__private__.triangle=f.triangle=function(v,C,W,et,ut,yt,Ct){if(isNaN(v)||isNaN(C)||isNaN(W)||isNaN(et)||isNaN(ut)||isNaN(yt)||!dr(Ct))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[W-v,et-C],[ut-W,yt-et],[v-ut,C-yt]],v,C,[1,1],Ct,!0),this},f.__private__.roundedRect=f.roundedRect=function(v,C,W,et,ut,yt,Ct){if(isNaN(v)||isNaN(C)||isNaN(W)||isNaN(et)||isNaN(ut)||isNaN(yt)||!dr(Ct))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var zt=4/3*(Math.SQRT2-1);return ut=Math.min(ut,.5*W),yt=Math.min(yt,.5*et),this.lines([[W-2*ut,0],[ut*zt,0,ut,yt-yt*zt,ut,yt],[0,et-2*yt],[0,yt*zt,-ut*zt,yt,-ut,yt],[2*ut-W,0],[-ut*zt,0,-ut,-yt*zt,-ut,-yt],[0,2*yt-et],[0,-yt*zt,ut*zt,-yt,ut,-yt]],v+ut,C,[1,1],Ct,!0),this},f.__private__.ellipse=f.ellipse=function(v,C,W,et,ut){if(isNaN(v)||isNaN(C)||isNaN(W)||isNaN(et)||!dr(ut))throw new Error("Invalid arguments passed to jsPDF.ellipse");var yt=4/3*(Math.SQRT2-1)*W,Ct=4/3*(Math.SQRT2-1)*et;return ku(v+W,C),za(v+W,C-Ct,v+yt,C-et,v,C-et),za(v-yt,C-et,v-W,C-Ct,v-W,C),za(v-W,C+Ct,v-yt,C+et,v,C+et),za(v+yt,C+et,v+W,C+Ct,v+W,C),Pu(ut),this},f.__private__.circle=f.circle=function(v,C,W,et){if(isNaN(v)||isNaN(C)||isNaN(W)||!dr(et))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(v,C,W,W,et)},f.setFont=function(v,C,W){return W&&(C=X(C,W)),be=fp(v,C,{disableWarning:!1}),this};var u1=f.__private__.getFont=f.getFont=function(){return Ge[fp.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var v,C,W={};for(v in ei)if(ei.hasOwnProperty(v))for(C in W[v]=[],ei[v])ei[v].hasOwnProperty(C)&&W[v].push(C);return W},f.addFont=function(v,C,W,et,ut){var yt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&yt.indexOf(arguments[3])!==-1?ut=arguments[3]:arguments[3]&&yt.indexOf(arguments[3])==-1&&(W=X(W,et)),ut=ut||"Identity-H",Lu.call(this,v,C,W,ut)};var Xo,Nu=n.lineWidth||.200025,Dc=f.__private__.getLineWidth=f.getLineWidth=function(){return Nu},bp=f.__private__.setLineWidth=f.setLineWidth=function(v){return Nu=v,Y(G(N(v))+" w"),this};f.__private__.setLineDash=te.API.setLineDash=te.API.setLineDashPattern=function(v,C){if(v=v||[],C=C||0,isNaN(C)||!Array.isArray(v))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return v=v.map(function(W){return G(N(W))}).join(" "),C=G(N(C)),Y("["+v+"] "+C+" d"),this};var yp=f.__private__.getLineHeight=f.getLineHeight=function(){return Tt*Xo};f.__private__.getLineHeight=f.getLineHeight=function(){return Tt*Xo};var wp=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(v){return typeof(v=v||1.15)=="number"&&(Xo=v),this},Ap=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return Xo};wp(n.lineHeight);var fr=f.__private__.getHorizontalCoordinate=function(v){return N(v)},Xr=f.__private__.getVerticalCoordinate=function(v){return M===x.ADVANCED?v:oe[z].mediaBox.topRightY-oe[z].mediaBox.bottomLeftY-N(v)},d1=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(v){return G(fr(v))},Ha=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(v){return G(Xr(v))},Os=n.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return Ms(Os)},f.__private__.setStrokeColor=f.setDrawColor=function(v,C,W,et){return Os=Rs({ch1:v,ch2:C,ch3:W,ch4:et,pdfColorType:"draw",precision:2}),Y(Os),this};var Tu=n.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return Ms(Tu)},f.__private__.setFillColor=f.setFillColor=function(v,C,W,et){return Tu=Rs({ch1:v,ch2:C,ch3:W,ch4:et,pdfColorType:"fill",precision:2}),Y(Tu),this};var Yo=n.textColor||"0 g",f1=f.__private__.getTextColor=f.getTextColor=function(){return Ms(Yo)};f.__private__.setTextColor=f.setTextColor=function(v,C,W,et){return Yo=Rs({ch1:v,ch2:C,ch3:W,ch4:et,pdfColorType:"text",precision:3}),this};var Bc=n.charSpace,p1=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(Bc||0)};f.__private__.setCharSpace=f.setCharSpace=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Bc=v,this};var Iu=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(v){var C=f.CapJoinStyles[v];if(C===void 0)throw new Error("Line cap style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Iu=C,Y(C+" J"),this};var Mu=0;f.__private__.setLineJoin=f.setLineJoin=function(v){var C=f.CapJoinStyles[v];if(C===void 0)throw new Error("Line join style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Mu=C,Y(C+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(v){if(v=v||0,isNaN(v))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Y(G(N(v))+" M"),this},f.GState=em,f.setGState=function(v){(v=typeof v=="string"?ci[Ns[v]]:_p(null,v)).equals(Wr)||(Y("/"+v.id+" gs"),Wr=v)};var _p=function(v,C){if(!v||!Ns[v]){var W=!1;for(var et in ci)if(ci.hasOwnProperty(et)&&ci[et].equals(C)){W=!0;break}if(W)C=ci[et];else{var ut="GS"+(Object.keys(ci).length+1).toString(10);ci[ut]=C,C.id=ut}return v&&(Ns[v]=C.id),Oe.publish("addGState",C),C}};f.addGState=function(v,C){return _p(v,C),this},f.saveGraphicsState=function(){return Y("q"),ar.push({key:be,size:Tt,color:Yo}),this},f.restoreGraphicsState=function(){Y("Q");var v=ar.pop();return be=v.key,Tt=v.size,Yo=v.color,Wr=null,this},f.setCurrentTransformationMatrix=function(v){return Y(v.toString()+" cm"),this},f.comment=function(v){return Y("#"+v),this};var jc=function(v,C){var W=v||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return W},set:function(yt){isNaN(yt)||(W=parseFloat(yt))}});var et=C||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return et},set:function(yt){isNaN(yt)||(et=parseFloat(yt))}});var ut="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ut},set:function(yt){ut=yt.toString()}}),this},Ru=function(v,C,W,et){jc.call(this,v,C),this.type="rect";var ut=W||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ut},set:function(Ct){isNaN(Ct)||(ut=parseFloat(Ct))}});var yt=et||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return yt},set:function(Ct){isNaN(Ct)||(yt=parseFloat(Ct))}}),this},Fu=function(){this.page=hi,this.currentPage=z,this.pages=kt.slice(0),this.pagesContext=oe.slice(0),this.x=on,this.y=ke,this.matrix=ks,this.width=Ko(z),this.height=Va(z),this.outputDestination=Rt,this.id="",this.objectNumber=-1};Fu.prototype.restore=function(){hi=this.page,z=this.currentPage,oe=this.pagesContext,kt=this.pages,on=this.x,ke=this.y,ks=this.matrix,Ou(z,this.width),Du(z,this.height),Rt=this.outputDestination};var Sp=function(v,C,W,et,ut){lr.push(new Fu),hi=z=0,kt=[],on=v,ke=C,ks=ut,Cu([W,et])},g1=function(v){if(or[v])lr.pop().restore();else{var C=new Fu,W="Xo"+(Object.keys(Qi).length+1).toString(10);C.id=W,or[v]=W,Qi[W]=C,Oe.publish("addFormObject",C),lr.pop().restore()}};for(var qc in f.beginFormObject=function(v,C,W,et,ut){return Sp(v,C,W,et,ut),this},f.endFormObject=function(v){return g1(v),this},f.doFormObject=function(v,C){var W=Qi[or[v]];return Y("q"),Y(C.toString()+" cm"),Y("/"+W.id+" Do"),Y("Q"),this},f.getFormObject=function(v){var C=Qi[or[v]];return{x:C.x,y:C.y,width:C.width,height:C.height,matrix:C.matrix}},f.save=function(v,C){return v=v||"generated.pdf",(C=C||{}).returnPromise=C.returnPromise||!1,C.returnPromise===!1?(al(Rc($r()),v),typeof al.unload=="function"&&ee.setTimeout&&setTimeout(al.unload,911),this):new Promise(function(W,et){try{var ut=al(Rc($r()),v);typeof al.unload=="function"&&ee.setTimeout&&setTimeout(al.unload,911),W(ut)}catch(yt){et(yt.message)}})},te.API)te.API.hasOwnProperty(qc)&&(qc==="events"&&te.API.events.length?function(v,C){var W,et,ut;for(ut=C.length-1;ut!==-1;ut--)W=C[ut][0],et=C[ut][1],v.subscribe.apply(v,[W].concat(typeof et=="function"?[et]:et))}(Oe,te.API.events):f[qc]=te.API[qc]);var Ko=f.getPageWidth=function(v){return(oe[v=v||z].mediaBox.topRightX-oe[v].mediaBox.bottomLeftX)/qt},Ou=f.setPageWidth=function(v,C){oe[v].mediaBox.topRightX=C*qt+oe[v].mediaBox.bottomLeftX},Va=f.getPageHeight=function(v){return(oe[v=v||z].mediaBox.topRightY-oe[v].mediaBox.bottomLeftY)/qt},Du=f.setPageHeight=function(v,C){oe[v].mediaBox.topRightY=C*qt+oe[v].mediaBox.bottomLeftY};return f.internal={pdfEscape:Tn,getStyle:mp,getFont:u1,getFontSize:Dt,getCharSpace:p1,getTextColor:f1,getLineHeight:yp,getLineHeightFactor:Ap,getLineWidth:Dc,write:ue,getHorizontalCoordinate:fr,getVerticalCoordinate:Xr,getCoordinateString:d1,getVerticalCoordinateString:Ha,collections:{},newObject:Ri,newAdditionalObject:Cc,newObjectDeferred:Ei,newObjectDeferredBegin:Un,getFilters:hr,putStream:ls,events:Oe,scaleFactor:qt,pageSize:{getWidth:function(){return Ko(z)},setWidth:function(v){Ou(z,v)},getHeight:function(){return Va(z)},setHeight:function(v){Du(z,v)}},encryptionOptions:d,encryption:ln,getEncryptor:r1,output:Fc,getNumberOfPages:t1,pages:kt,out:Y,f2:ct,f3:P,getPageInfo:gp,getPageInfoByObjId:ne,getCurrentPageInfo:a1,getPDFVersion:w,Point:jc,Rectangle:Ru,Matrix:Qt,hasHotfix:pp},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return Ko(z)},set:function(v){Ou(z,v)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return Va(z)},set:function(v){Du(z,v)},enumerable:!0,configurable:!0}),Qm.call(f,Pt),be="F1",up(s,e),Oe.publish("initialized"),f}hh.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},hh.prototype.toHexString=function(n){return n.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},hh.prototype.hexToBytes=function(n){for(var t=[],e=0;e<n.length;e+=2)t.push(String.fromCharCode(parseInt(n.substr(e,2),16)));return t.join("")},hh.prototype.processOwnerPassword=function(n,t){return D2(O2(t).substr(0,5),n)},hh.prototype.encryptor=function(n,t){var e=O2(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&t,t>>8&255)).substr(0,10);return function(i){return D2(e,i)}},em.prototype.equals=function(n){var t,e="id,objectNumber,equals";if(!n||ze(n)!==ze(this))return!1;var i=0;for(t in this)if(!(e.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!n.hasOwnProperty(t)||this[t]!==n[t])return!1;i++}for(t in n)n.hasOwnProperty(t)&&e.indexOf(t)<0&&i--;return i===0},te.API={events:[]},te.version="2.5.2";var pi=te.API,bv=1,Lc=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},eh=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},ce=function(n){return n.toFixed(2)},io=function(n){return n.toFixed(5)};pi.__acroform__={};var Vn=function(n,t){n.prototype=Object.create(t.prototype),n.prototype.constructor=n},K5=function(n){return n*bv},vr=function(n){var t=new jA,e=Wt.internal.getHeight(n)||0,i=Wt.internal.getWidth(n)||0;return t.BBox=[0,0,Number(ce(i)),Number(ce(e))],t},OL=pi.__acroform__.setBit=function(n,t){if(n=n||0,t=t||0,isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<t},DL=pi.__acroform__.clearBit=function(n,t){if(n=n||0,t=t||0,isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<t)},BL=pi.__acroform__.getBit=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<t?1:0},Ai=pi.__acroform__.getBitForPdf=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return BL(n,t-1)},_i=pi.__acroform__.setBitForPdf=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return OL(n,t-1)},Si=pi.__acroform__.clearBitForPdf=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return DL(n,t-1)},jL=pi.__acroform__.calculateCoordinates=function(n,t){var e=t.internal.getHorizontalCoordinate,i=t.internal.getVerticalCoordinate,s=n[0],r=n[1],a=n[2],o=n[3],l={};return l.lowerLeft_X=e(s)||0,l.lowerLeft_Y=i(r+o)||0,l.upperRight_X=e(s+a)||0,l.upperRight_Y=i(r)||0,[Number(ce(l.lowerLeft_X)),Number(ce(l.lowerLeft_Y)),Number(ce(l.upperRight_X)),Number(ce(l.upperRight_Y))]},qL=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var t=[],e=n._V||n.DV,i=B2(n,e),s=n.scope.internal.getFont(n.fontName,n.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(n.scope.__private__.encodeColorString(n.color)),t.push("/"+s+" "+ce(i.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(i.text),t.push("ET"),t.push("Q"),t.push("EMC");var r=vr(n);return r.scope=n.scope,r.stream=t.join(`
`),r}},B2=function(n,t){var e=n.fontSize===0?n.maxFontSize:n.fontSize,i={text:"",fontSize:""},s=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");s=n.multiline?s.map(function(P){return P.split(`
`)}):s.map(function(P){return[P]});var r=e,a=Wt.internal.getHeight(n)||0;a=a<0?-a:a;var o=Wt.internal.getWidth(n)||0;o=o<0?-o:o;var l=function(P,N,V){if(P+1<s.length){var j=N+" "+s[P+1][0];return ng(j,n,V).width<=o-4}return!1};r++;t:for(;r>0;){t="",r--;var c,d,p=ng("3",n,r).height,m=n.multiline?a-r:(a-p)/2,f=m+=2,b=0,w=0,S=0;if(r<=0){t=`(...) Tj
`,t+="% Width of Text: "+ng(t,n,r=12).width+", FieldWidth:"+o+`
`;break}for(var A="",x=0,M=0;M<s.length;M++)if(s.hasOwnProperty(M)){var q=!1;if(s[M].length!==1&&S!==s[M].length-1){if((p+2)*(x+2)+2>a)continue t;A+=s[M][S],q=!0,w=M,M--}else{A=(A+=s[M][S]+" ").substr(A.length-1)==" "?A.substr(0,A.length-1):A;var U=parseInt(M),X=l(U,A,r),G=M>=s.length-1;if(X&&!G){A+=" ",S=0;continue}if(X||G){if(G)w=U;else if(n.multiline&&(p+2)*(x+2)+2>a)continue t}else{if(!n.multiline||(p+2)*(x+2)+2>a)continue t;w=U}}for(var B="",Q=b;Q<=w;Q++){var ct=s[Q];if(n.multiline){if(Q===w){B+=ct[S]+" ",S=(S+1)%ct.length;continue}if(Q===b){B+=ct[ct.length-1]+" ";continue}}B+=ct[0]+" "}switch(B=B.substr(B.length-1)==" "?B.substr(0,B.length-1):B,d=ng(B,n,r).width,n.textAlign){case"right":c=o-d-2;break;case"center":c=(o-d)/2;break;case"left":default:c=2}t+=ce(c)+" "+ce(f)+` Td
`,t+="("+Lc(B)+`) Tj
`,t+=-ce(c)+` 0 Td
`,f=-(r+2),d=0,b=q?w:w+1,x++,A=""}break}return i.text=t,i.fontSize=r,i},ng=function(n,t,e){var i=t.scope.internal.getFont(t.fontName,t.fontStyle),s=t.scope.getStringUnitWidth(n,{font:i,fontSize:parseFloat(e),charSpace:0})*parseFloat(e);return{height:t.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(e),charSpace:0})*parseFloat(e)*1.5,width:s}},zL={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},HL=function(n,t){var e={type:"reference",object:n};t.internal.getPageInfo(n.page).pageContext.annotations.find(function(i){return i.type===e.type&&i.object===e.object})===void 0&&t.internal.getPageInfo(n.page).pageContext.annotations.push(e)},VL=function(n,t){for(var e in n)if(n.hasOwnProperty(e)){var i=e,s=n[e];t.internal.newObjectDeferredBegin(s.objId,!0),ze(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete n[i]}},UL=function(n,t){if(t.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(sr.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(zL)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");bv=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new qA,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(e){e.internal.events.unsubscribe(e.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete e.internal.acroformPlugin.acroFormDictionaryRoot._eventID,e.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in i)if(i.hasOwnProperty(s)){var r=i[s];r.objId=void 0,r.hasAnnotation&&HL(r,e)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(e){if(e.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(e){(function(i,s){var r=!i;for(var a in i||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(a)){var o=i[a],l=[],c=o.Rect;if(o.Rect&&(o.Rect=jL(o.Rect,s)),s.internal.newObjectDeferredBegin(o.objId,!0),o.DA=Wt.createDefaultAppearanceStream(o),ze(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=c,o.hasAppearanceStream&&!o.appearanceStreamContent){var d=qL(o);l.push({key:"AP",value:"<</N "+d+">>"}),s.internal.acroformPlugin.xForms.push(d)}if(o.appearanceStreamContent){var p="";for(var m in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(m)){var f=o.appearanceStreamContent[m];if(p+="/"+m+" ",p+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var a in f)if(f.hasOwnProperty(a)){var b=f[a];typeof b=="function"&&(b=b.call(s,o)),p+="/"+a+" "+b+" ",s.internal.acroformPlugin.xForms.indexOf(b)>=0||s.internal.acroformPlugin.xForms.push(b)}}else typeof(b=f)=="function"&&(b=b.call(s,o)),p+="/"+a+" "+b,s.internal.acroformPlugin.xForms.indexOf(b)>=0||s.internal.acroformPlugin.xForms.push(b);p+=">>"}l.push({key:"AP",value:`<<
`+p+">>"})}s.internal.putStream({additionalKeyValues:l,objectId:o.objId}),s.internal.out("endobj")}r&&VL(s.internal.acroformPlugin.xForms,s)})(e,n)}),n.internal.acroformPlugin.isInitialized=!0}},BA=pi.__acroform__.arrayToPdfArray=function(n,t,e){var i=function(a){return a};if(Array.isArray(n)){for(var s="[",r=0;r<n.length;r++)switch(r!==0&&(s+=" "),ze(n[r])){case"boolean":case"number":case"object":s+=n[r].toString();break;case"string":n[r].substr(0,1)!=="/"?(t!==void 0&&e&&(i=e.internal.getEncryptor(t)),s+="("+Lc(i(n[r].toString()))+")"):s+=n[r].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},t0=function(n,t,e){var i=function(s){return s};return t!==void 0&&e&&(i=e.internal.getEncryptor(t)),(n=n||"").toString(),n="("+Lc(i(n))+")"},Br=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Br.prototype.toString=function(){return this.objId+" 0 R"},Br.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},Br.prototype.getKeyValueListForStream=function(){var n=[],t=Object.getOwnPropertyNames(this).filter(function(r){return r!="content"&&r!="appearanceStreamContent"&&r!="scope"&&r!="objId"&&r.substring(0,1)!="_"});for(var e in t)if(Object.getOwnPropertyDescriptor(this,t[e]).configurable===!1){var i=t[e],s=this[i];s&&(Array.isArray(s)?n.push({key:i,value:BA(s,this.objId,this.scope)}):s instanceof Br?(s.scope=this.scope,n.push({key:i,value:s.objId+" 0 R"})):typeof s!="function"&&n.push({key:i,value:s}))}return n};var jA=function(){Br.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(e){n=e.trim()},get:function(){return n||null}})};Vn(jA,Br);var qA=function(){Br.call(this);var n,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var e=function(i){return i};return this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),"("+Lc(e(n))+")"}},set:function(e){n=e}})};Vn(qA,Br);var sr=function n(){Br.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(A){if(isNaN(A))throw new Error('Invalid value "'+A+'" for attribute F supplied.');t=A}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ai(t,3)},set:function(A){A?this.F=_i(t,3):this.F=Si(t,3)}});var e=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return e},set:function(A){if(isNaN(A))throw new Error('Invalid value "'+A+'" for attribute Ff supplied.');e=A}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(A){i=A!==void 0?A:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(A){i[0]=A}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(A){i[1]=A}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(A){i[2]=A}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(A){i[3]=A}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(A){switch(A){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=A;break;default:throw new Error('Invalid value "'+A+'" for attribute FT supplied.')}}});var r=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!r||r.length<1){if(this instanceof im)return;r="FieldObject"+n.FieldNum++}var A=function(x){return x};return this.scope&&(A=this.scope.internal.getEncryptor(this.objId)),"("+Lc(A(r))+")"},set:function(A){r=A.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return r},set:function(A){r=A}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(A){a=A}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(A){o=A}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(A){l=A}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/bv:c},set:function(A){c=A}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(A){d=A}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof im||this instanceof dc))return t0(p,this.objId,this.scope)},set:function(A){A=A.toString(),p=A}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Ji?m:t0(m,this.objId,this.scope)},set:function(A){A=A.toString(),m=this instanceof Ji?A:A.substr(0,1)==="("?eh(A.substr(1,A.length-2)):eh(A)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ji?eh(m.substr(1,m.length-1)):m},set:function(A){A=A.toString(),m=this instanceof Ji?"/"+A:A}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(A){this.V=A}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof Ji?f:t0(f,this.objId,this.scope)},set:function(A){A=A.toString(),f=this instanceof Ji?A:A.substr(0,1)==="("?eh(A.substr(1,A.length-2)):eh(A)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ji?eh(f.substr(1,f.length-1)):f},set:function(A){A=A.toString(),f=this instanceof Ji?"/"+A:A}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var b,w=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return w},set:function(A){A=!!A,w=A}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(b)return b},set:function(A){b=A}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,1)},set:function(A){A?this.Ff=_i(this.Ff,1):this.Ff=Si(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,2)},set:function(A){A?this.Ff=_i(this.Ff,2):this.Ff=Si(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,3)},set:function(A){A?this.Ff=_i(this.Ff,3):this.Ff=Si(this.Ff,3)}});var S=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(S!==null)return S},set:function(A){if([0,1,2].indexOf(A)===-1)throw new Error('Invalid value "'+A+'" for attribute Q supplied.');S=A}}),Object.defineProperty(this,"textAlign",{get:function(){var A;switch(S){case 0:default:A="left";break;case 1:A="center";break;case 2:A="right"}return A},configurable:!0,enumerable:!0,set:function(A){switch(A){case"right":case 2:S=2;break;case"center":case 1:S=1;break;case"left":case 0:default:S=0}}})};Vn(sr,Br);var bh=function(){sr.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){n=e}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return BA(t,this.objId,this.scope)},set:function(e){var i,s;s=[],typeof(i=e)=="string"&&(s=function(r,a,o){o||(o=1);for(var l,c=[];l=a.exec(r);)c.push(l[o]);return c}(i,/\((.*?)\)/g)),t=s}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,i){for(i=i||!1,e=(e=e||"").toString();t.indexOf(e)!==-1&&(t.splice(t.indexOf(e),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,18)},set:function(e){e?this.Ff=_i(this.Ff,18):this.Ff=Si(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,19)},set:function(e){this.combo===!0&&(e?this.Ff=_i(this.Ff,19):this.Ff=Si(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,20)},set:function(e){e?(this.Ff=_i(this.Ff,20),t.sort()):this.Ff=Si(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,22)},set:function(e){e?this.Ff=_i(this.Ff,22):this.Ff=Si(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,23)},set:function(e){e?this.Ff=_i(this.Ff,23):this.Ff=Si(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,27)},set:function(e){e?this.Ff=_i(this.Ff,27):this.Ff=Si(this.Ff,27)}}),this.hasAppearanceStream=!1};Vn(bh,sr);var yh=function(){bh.call(this),this.fontName="helvetica",this.combo=!1};Vn(yh,bh);var wh=function(){yh.call(this),this.combo=!0};Vn(wh,yh);var Dg=function(){wh.call(this),this.edit=!0};Vn(Dg,wh);var Ji=function(){sr.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,15)},set:function(e){e?this.Ff=_i(this.Ff,15):this.Ff=Si(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,16)},set:function(e){e?this.Ff=_i(this.Ff,16):this.Ff=Si(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,17)},set:function(e){e?this.Ff=_i(this.Ff,17):this.Ff=Si(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,26)},set:function(e){e?this.Ff=_i(this.Ff,26):this.Ff=Si(this.Ff,26)}});var n,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(r){return r};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var i,s=[];for(i in s.push("<<"),t)s.push("/"+i+" ("+Lc(e(t[i]))+")");return s.push(">>"),s.join(`
`)}},set:function(e){ze(e)==="object"&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){typeof e=="string"&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(e){n="/"+e}})};Vn(Ji,sr);var Bg=function(){Ji.call(this),this.pushButton=!0};Vn(Bg,Ji);var Ah=function(){Ji.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t!==void 0?t:[]}})};Vn(Ah,Ji);var im=function(){var n,t;sr.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(s){n=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(s){t=s}});var e,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(o){return o};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var r,a=[];for(r in a.push("<<"),i)a.push("/"+r+" ("+Lc(s(i[r]))+")");return a.push(">>"),a.join(`
`)},set:function(s){ze(s)==="object"&&(i=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(s){typeof s=="string"&&(i.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(s){e=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(s){e="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Wt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Vn(im,sr),Ah.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var e=this.Kids[t];e.appearanceStreamContent=n.createAppearanceStream(e.optionName),e.caption=n.getCA()}},Ah.prototype.createOption=function(n){var t=new im;return t.Parent=this,t.optionName=n,this.Kids.push(t),WL.call(this.scope,t),t};var jg=function(){Ji.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Wt.CheckBox.createAppearanceStream()};Vn(jg,Ji);var dc=function(){sr.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,13)},set:function(t){t?this.Ff=_i(this.Ff,13):this.Ff=Si(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,21)},set:function(t){t?this.Ff=_i(this.Ff,21):this.Ff=Si(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,23)},set:function(t){t?this.Ff=_i(this.Ff,23):this.Ff=Si(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,24)},set:function(t){t?this.Ff=_i(this.Ff,24):this.Ff=Si(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,25)},set:function(t){t?this.Ff=_i(this.Ff,25):this.Ff=Si(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,26)},set:function(t){t?this.Ff=_i(this.Ff,26):this.Ff=Si(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){Number.isInteger(t)&&(n=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Vn(dc,sr);var qg=function(){dc.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,14)},set:function(n){n?this.Ff=_i(this.Ff,14):this.Ff=Si(this.Ff,14)}}),this.password=!0};Vn(qg,dc);var Wt={CheckBox:{createAppearanceStream:function(){return{N:{On:Wt.CheckBox.YesNormal},D:{On:Wt.CheckBox.YesPushDown,Off:Wt.CheckBox.OffPushDown}}},YesPushDown:function(n){var t=vr(n);t.scope=n.scope;var e=[],i=n.scope.internal.getFont(n.fontName,n.fontStyle).id,s=n.scope.__private__.encodeColorString(n.color),r=B2(n,n.caption);return e.push("0.749023 g"),e.push("0 0 "+ce(Wt.internal.getWidth(n))+" "+ce(Wt.internal.getHeight(n))+" re"),e.push("f"),e.push("BMC"),e.push("q"),e.push("0 0 1 rg"),e.push("/"+i+" "+ce(r.fontSize)+" Tf "+s),e.push("BT"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC"),t.stream=e.join(`
`),t},YesNormal:function(n){var t=vr(n);t.scope=n.scope;var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),s=[],r=Wt.internal.getHeight(n),a=Wt.internal.getWidth(n),o=B2(n,n.caption);return s.push("1 g"),s.push("0 0 "+ce(a)+" "+ce(r)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+ce(a-1)+" "+ce(r-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+e+" "+ce(o.fontSize)+" Tf "+i),s.push(o.text),s.push("ET"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(n){var t=vr(n);t.scope=n.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+ce(Wt.internal.getWidth(n))+" "+ce(Wt.internal.getHeight(n))+" re"),e.push("f"),t.stream=e.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(n){var t={D:{Off:Wt.RadioButton.Circle.OffPushDown},N:{}};return t.N[n]=Wt.RadioButton.Circle.YesNormal,t.D[n]=Wt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(n){var t=vr(n);t.scope=n.scope;var e=[],i=Wt.internal.getWidth(n)<=Wt.internal.getHeight(n)?Wt.internal.getWidth(n)/4:Wt.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var s=Wt.internal.Bezier_C,r=Number((i*s).toFixed(5));return e.push("q"),e.push("1 0 0 1 "+io(Wt.internal.getWidth(n)/2)+" "+io(Wt.internal.getHeight(n)/2)+" cm"),e.push(i+" 0 m"),e.push(i+" "+r+" "+r+" "+i+" 0 "+i+" c"),e.push("-"+r+" "+i+" -"+i+" "+r+" -"+i+" 0 c"),e.push("-"+i+" -"+r+" -"+r+" -"+i+" 0 -"+i+" c"),e.push(r+" -"+i+" "+i+" -"+r+" "+i+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(n){var t=vr(n);t.scope=n.scope;var e=[],i=Wt.internal.getWidth(n)<=Wt.internal.getHeight(n)?Wt.internal.getWidth(n)/4:Wt.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var s=Number((2*i).toFixed(5)),r=Number((s*Wt.internal.Bezier_C).toFixed(5)),a=Number((i*Wt.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+io(Wt.internal.getWidth(n)/2)+" "+io(Wt.internal.getHeight(n)/2)+" cm"),e.push(s+" 0 m"),e.push(s+" "+r+" "+r+" "+s+" 0 "+s+" c"),e.push("-"+r+" "+s+" -"+s+" "+r+" -"+s+" 0 c"),e.push("-"+s+" -"+r+" -"+r+" -"+s+" 0 -"+s+" c"),e.push(r+" -"+s+" "+s+" -"+r+" "+s+" 0 c"),e.push("f"),e.push("Q"),e.push("0 g"),e.push("q"),e.push("1 0 0 1 "+io(Wt.internal.getWidth(n)/2)+" "+io(Wt.internal.getHeight(n)/2)+" cm"),e.push(i+" 0 m"),e.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),e.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),e.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),e.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},OffPushDown:function(n){var t=vr(n);t.scope=n.scope;var e=[],i=Wt.internal.getWidth(n)<=Wt.internal.getHeight(n)?Wt.internal.getWidth(n)/4:Wt.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var s=Number((2*i).toFixed(5)),r=Number((s*Wt.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+io(Wt.internal.getWidth(n)/2)+" "+io(Wt.internal.getHeight(n)/2)+" cm"),e.push(s+" 0 m"),e.push(s+" "+r+" "+r+" "+s+" 0 "+s+" c"),e.push("-"+r+" "+s+" -"+s+" "+r+" -"+s+" 0 c"),e.push("-"+s+" -"+r+" -"+r+" -"+s+" 0 -"+s+" c"),e.push(r+" -"+s+" "+s+" -"+r+" "+s+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t}},Cross:{createAppearanceStream:function(n){var t={D:{Off:Wt.RadioButton.Cross.OffPushDown},N:{}};return t.N[n]=Wt.RadioButton.Cross.YesNormal,t.D[n]=Wt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(n){var t=vr(n);t.scope=n.scope;var e=[],i=Wt.internal.calculateCross(n);return e.push("q"),e.push("1 1 "+ce(Wt.internal.getWidth(n)-2)+" "+ce(Wt.internal.getHeight(n)-2)+" re"),e.push("W"),e.push("n"),e.push(ce(i.x1.x)+" "+ce(i.x1.y)+" m"),e.push(ce(i.x2.x)+" "+ce(i.x2.y)+" l"),e.push(ce(i.x4.x)+" "+ce(i.x4.y)+" m"),e.push(ce(i.x3.x)+" "+ce(i.x3.y)+" l"),e.push("s"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(n){var t=vr(n);t.scope=n.scope;var e=Wt.internal.calculateCross(n),i=[];return i.push("0.749023 g"),i.push("0 0 "+ce(Wt.internal.getWidth(n))+" "+ce(Wt.internal.getHeight(n))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+ce(Wt.internal.getWidth(n)-2)+" "+ce(Wt.internal.getHeight(n)-2)+" re"),i.push("W"),i.push("n"),i.push(ce(e.x1.x)+" "+ce(e.x1.y)+" m"),i.push(ce(e.x2.x)+" "+ce(e.x2.y)+" l"),i.push(ce(e.x4.x)+" "+ce(e.x4.y)+" m"),i.push(ce(e.x3.x)+" "+ce(e.x3.y)+" l"),i.push("s"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(n){var t=vr(n);t.scope=n.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+ce(Wt.internal.getWidth(n))+" "+ce(Wt.internal.getHeight(n))+" re"),e.push("f"),t.stream=e.join(`
`),t}}},createDefaultAppearanceStream:function(n){var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,e=n.scope.__private__.encodeColorString(n.color);return"/"+t+" "+n.fontSize+" Tf "+e}};Wt.internal={Bezier_C:.551915024494,calculateCross:function(n){var t=Wt.internal.getWidth(n),e=Wt.internal.getHeight(n),i=Math.min(t,e);return{x1:{x:(t-i)/2,y:(e-i)/2+i},x2:{x:(t-i)/2+i,y:(e-i)/2},x3:{x:(t-i)/2,y:(e-i)/2},x4:{x:(t-i)/2+i,y:(e-i)/2+i}}}},Wt.internal.getWidth=function(n){var t=0;return ze(n)==="object"&&(t=K5(n.Rect[2])),t},Wt.internal.getHeight=function(n){var t=0;return ze(n)==="object"&&(t=K5(n.Rect[3])),t};var WL=pi.addField=function(n){if(UL(this,n),!(n instanceof sr))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=n).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};pi.AcroFormChoiceField=bh,pi.AcroFormListBox=yh,pi.AcroFormComboBox=wh,pi.AcroFormEditBox=Dg,pi.AcroFormButton=Ji,pi.AcroFormPushButton=Bg,pi.AcroFormRadioButton=Ah,pi.AcroFormCheckBox=jg,pi.AcroFormTextField=dc,pi.AcroFormPasswordField=qg,pi.AcroFormAppearance=Wt,pi.AcroForm={ChoiceField:bh,ListBox:yh,ComboBox:wh,EditBox:Dg,Button:Ji,PushButton:Bg,RadioButton:Ah,CheckBox:jg,TextField:dc,PasswordField:qg,Appearance:Wt},te.AcroForm={ChoiceField:bh,ListBox:yh,ComboBox:wh,EditBox:Dg,Button:Ji,PushButton:Bg,RadioButton:Ah,CheckBox:jg,TextField:dc,PasswordField:qg,Appearance:Wt};function zA(n){return n.reduce(function(t,e,i){return t[e]=i,t},{})}(function(n){n.__addimage__={};var t="UNKNOWN",e={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=n.__addimage__.getImageFileTypeByImageData=function(P,N){var V,j,J,at,st,tt=t;if((N=N||t)==="RGBA"||P.data!==void 0&&P.data instanceof Uint8ClampedArray&&"height"in P&&"width"in P)return"RGBA";if(X(P))for(st in e)for(J=e[st],V=0;V<J.length;V+=1){for(at=!0,j=0;j<J[V].length;j+=1)if(J[V][j]!==void 0&&J[V][j]!==P[j]){at=!1;break}if(at===!0){tt=st;break}}else for(st in e)for(J=e[st],V=0;V<J.length;V+=1){for(at=!0,j=0;j<J[V].length;j+=1)if(J[V][j]!==void 0&&J[V][j]!==P.charCodeAt(j)){at=!1;break}if(at===!0){tt=st;break}}return tt===t&&N!==t&&(tt=N),tt},s=function P(N){for(var V=this.internal.write,j=this.internal.putStream,J=(0,this.internal.getFilters)();J.indexOf("FlateEncode")!==-1;)J.splice(J.indexOf("FlateEncode"),1);N.objectId=this.internal.newObject();var at=[];if(at.push({key:"Type",value:"/XObject"}),at.push({key:"Subtype",value:"/Image"}),at.push({key:"Width",value:N.width}),at.push({key:"Height",value:N.height}),N.colorSpace===S.INDEXED?at.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(N.palette.length/3-1)+" "+("sMask"in N&&N.sMask!==void 0?N.objectId+2:N.objectId+1)+" 0 R]"}):(at.push({key:"ColorSpace",value:"/"+N.colorSpace}),N.colorSpace===S.DEVICE_CMYK&&at.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),at.push({key:"BitsPerComponent",value:N.bitsPerComponent}),"decodeParameters"in N&&N.decodeParameters!==void 0&&at.push({key:"DecodeParms",value:"<<"+N.decodeParameters+">>"}),"transparency"in N&&Array.isArray(N.transparency)){for(var st="",tt=0,vt=N.transparency.length;tt<vt;tt++)st+=N.transparency[tt]+" "+N.transparency[tt]+" ";at.push({key:"Mask",value:"["+st+"]"})}N.sMask!==void 0&&at.push({key:"SMask",value:N.objectId+1+" 0 R"});var ht=N.filter!==void 0?["/"+N.filter]:void 0;if(j({data:N.data,additionalKeyValues:at,alreadyAppliedFilters:ht,objectId:N.objectId}),V("endobj"),"sMask"in N&&N.sMask!==void 0){var At="/Predictor "+N.predictor+" /Colors 1 /BitsPerComponent "+N.bitsPerComponent+" /Columns "+N.width,E={width:N.width,height:N.height,colorSpace:"DeviceGray",bitsPerComponent:N.bitsPerComponent,decodeParameters:At,data:N.sMask};"filter"in N&&(E.filter=N.filter),P.call(this,E)}if(N.colorSpace===S.INDEXED){var z=this.internal.newObject();j({data:B(new Uint8Array(N.palette)),objectId:z}),V("endobj")}},r=function(){var P=this.internal.collections.addImage_images;for(var N in P)s.call(this,P[N])},a=function(){var P,N=this.internal.collections.addImage_images,V=this.internal.write;for(var j in N)V("/I"+(P=N[j]).index,P.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",r),this.internal.events.subscribe("putXobjectDict",a))},l=function(){var P=this.internal.collections.addImage_images;return o.call(this),P},c=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(P){return typeof n["process"+P.toUpperCase()]=="function"},p=function(P){return ze(P)==="object"&&P.nodeType===1},m=function(P,N){if(P.nodeName==="IMG"&&P.hasAttribute("src")){var V=""+P.getAttribute("src");if(V.indexOf("data:image/")===0)return Ld(unescape(V).split("base64,").pop());var j=n.loadFile(V,!0);if(j!==void 0)return j}if(P.nodeName==="CANVAS"){if(P.width===0||P.height===0)throw new Error("Given canvas must have data. Canvas width: "+P.width+", height: "+P.height);var J;switch(N){case"PNG":J="image/png";break;case"WEBP":J="image/webp";break;case"JPEG":case"JPG":default:J="image/jpeg"}return Ld(P.toDataURL(J,1).split("base64,").pop())}},f=function(P){var N=this.internal.collections.addImage_images;if(N){for(var V in N)if(P===N[V].alias)return N[V]}},b=function(P,N,V){return P||N||(P=-96,N=-96),P<0&&(P=-1*V.width*72/P/this.internal.scaleFactor),N<0&&(N=-1*V.height*72/N/this.internal.scaleFactor),P===0&&(P=N*V.width/V.height),N===0&&(N=P*V.height/V.width),[P,N]},w=function(P,N,V,j,J,at){var st=b.call(this,V,j,J),tt=this.internal.getCoordinateString,vt=this.internal.getVerticalCoordinateString,ht=l.call(this);if(V=st[0],j=st[1],ht[J.index]=J,at){at*=Math.PI/180;var At=Math.cos(at),E=Math.sin(at),z=function(K){return K.toFixed(4)},$=[z(At),z(E),z(-1*E),z(At),0,0,"cm"]}this.internal.write("q"),at?(this.internal.write([1,"0","0",1,tt(P),vt(N+j),"cm"].join(" ")),this.internal.write($.join(" ")),this.internal.write([tt(V),"0","0",tt(j),"0","0","cm"].join(" "))):this.internal.write([tt(V),"0","0",tt(j),tt(P),vt(N+j),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+J.index+" Do"),this.internal.write("Q")},S=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var A=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},x=n.__addimage__.sHashCode=function(P){var N,V,j=0;if(typeof P=="string")for(V=P.length,N=0;N<V;N++)j=(j<<5)-j+P.charCodeAt(N),j|=0;else if(X(P))for(V=P.byteLength/2,N=0;N<V;N++)j=(j<<5)-j+P[N],j|=0;return j},M=n.__addimage__.validateStringAsBase64=function(P){(P=P||"").toString().trim();var N=!0;return P.length===0&&(N=!1),P.length%4!=0&&(N=!1),/^[A-Za-z0-9+/]+$/.test(P.substr(0,P.length-2))===!1&&(N=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(P.substr(-2))===!1&&(N=!1),N},q=n.__addimage__.extractImageFromDataUrl=function(P){var N=(P=P||"").split("base64,"),V=null;if(N.length===2){var j=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(N[0]);Array.isArray(j)&&(V={mimeType:j[1],charset:j[2],data:N[1]})}return V},U=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(P){return U()&&P instanceof ArrayBuffer};var X=n.__addimage__.isArrayBufferView=function(P){return U()&&typeof Uint32Array<"u"&&(P instanceof Int8Array||P instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&P instanceof Uint8ClampedArray||P instanceof Int16Array||P instanceof Uint16Array||P instanceof Int32Array||P instanceof Uint32Array||P instanceof Float32Array||P instanceof Float64Array)},G=n.__addimage__.binaryStringToUint8Array=function(P){for(var N=P.length,V=new Uint8Array(N),j=0;j<N;j++)V[j]=P.charCodeAt(j);return V},B=n.__addimage__.arrayBufferToBinaryString=function(P){for(var N="",V=X(P)?P:new Uint8Array(P),j=0;j<V.length;j+=8192)N+=String.fromCharCode.apply(null,V.subarray(j,j+8192));return N};n.addImage=function(){var P,N,V,j,J,at,st,tt,vt;if(typeof arguments[1]=="number"?(N=t,V=arguments[1],j=arguments[2],J=arguments[3],at=arguments[4],st=arguments[5],tt=arguments[6],vt=arguments[7]):(N=arguments[1],V=arguments[2],j=arguments[3],J=arguments[4],at=arguments[5],st=arguments[6],tt=arguments[7],vt=arguments[8]),ze(P=arguments[0])==="object"&&!p(P)&&"imageData"in P){var ht=P;P=ht.imageData,N=ht.format||N||t,V=ht.x||V||0,j=ht.y||j||0,J=ht.w||ht.width||J,at=ht.h||ht.height||at,st=ht.alias||st,tt=ht.compression||tt,vt=ht.rotation||ht.angle||vt}var At=this.internal.getFilters();if(tt===void 0&&At.indexOf("FlateEncode")!==-1&&(tt="SLOW"),isNaN(V)||isNaN(j))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var E=Q.call(this,P,N,st,tt);return w.call(this,V,j,J,at,E,vt),this};var Q=function(P,N,V,j){var J,at,st;if(typeof P=="string"&&i(P)===t){P=unescape(P);var tt=ct(P,!1);(tt!==""||(tt=n.loadFile(P,!0))!==void 0)&&(P=tt)}if(p(P)&&(P=m(P,N)),N=i(P,N),!d(N))throw new Error("addImage does not support files of type '"+N+"', please ensure that a plugin for '"+N+"' support is added.");if(((st=V)==null||st.length===0)&&(V=function(vt){return typeof vt=="string"||X(vt)?x(vt):X(vt.data)?x(vt.data):null}(P)),(J=f.call(this,V))||(U()&&(P instanceof Uint8Array||N==="RGBA"||(at=P,P=G(P))),J=this["process"+N.toUpperCase()](P,c.call(this),V,function(vt){return vt&&typeof vt=="string"&&(vt=vt.toUpperCase()),vt in n.image_compression?vt:A.NONE}(j),at)),!J)throw new Error("An unknown error occurred whilst processing the image.");return J},ct=n.__addimage__.convertBase64ToBinaryString=function(P,N){var V;N=typeof N!="boolean"||N;var j,J="";if(typeof P=="string"){j=(V=q(P))!==null?V.data:P;try{J=Ld(j)}catch(at){if(N)throw M(j)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+at.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return J};n.getImageProperties=function(P){var N,V,j="";if(p(P)&&(P=m(P)),typeof P=="string"&&i(P)===t&&((j=ct(P,!1))===""&&(j=n.loadFile(P)||""),P=j),V=i(P),!d(V))throw new Error("addImage does not support files of type '"+V+"', please ensure that a plugin for '"+V+"' support is added.");if(!U()||P instanceof Uint8Array||(P=G(P)),!(N=this["process"+V.toUpperCase()](P)))throw new Error("An unknown error occurred whilst processing the image");return N.fileType=V,N}})(te.API),function(n){var t=function(e){if(e!==void 0&&e!="")return!0};te.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(e){for(var i,s,r,a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(e.objId),c=e.pageContext.annotations,d=!1,p=0;p<c.length&&!d;p++)switch((i=c[p]).type){case"link":(t(i.options.url)||t(i.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var m=0;m<c.length;m++){i=c[m];var f=this.internal.pdfEscape,b=this.internal.getEncryptor(e.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var w=this.internal.newAdditionalObject(),S=this.internal.newAdditionalObject(),A=this.internal.getEncryptor(w.objId),x=i.title||"Note";r="<</Type /Annot /Subtype /Text "+(s="/Rect ["+a(i.bounds.x)+" "+o(i.bounds.y+i.bounds.h)+" "+a(i.bounds.x+i.bounds.w)+" "+o(i.bounds.y)+"] ")+"/Contents ("+f(A(i.contents))+")",r+=" /Popup "+S.objId+" 0 R",r+=" /P "+l.objId+" 0 R",r+=" /T ("+f(A(x))+") >>",w.content=r;var M=w.objId+" 0 R";r="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+a(i.bounds.x+30)+" "+o(i.bounds.y+i.bounds.h)+" "+a(i.bounds.x+i.bounds.w+30)+" "+o(i.bounds.y)+"] ")+" /Parent "+M,i.open&&(r+=" /Open true"),r+=" >>",S.content=r,this.internal.write(w.objId,"0 R",S.objId,"0 R");break;case"freetext":s="/Rect ["+a(i.bounds.x)+" "+o(i.bounds.y)+" "+a(i.bounds.x+i.bounds.w)+" "+o(i.bounds.y+i.bounds.h)+"] ";var q=i.color||"#000000";r="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+f(b(i.contents))+")",r+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+q+")",r+=" /Border [0 0 0]",r+=" >>",this.internal.write(r);break;case"link":if(i.options.name){var U=this.annotations._nameMap[i.options.name];i.options.pageNumber=U.page,i.options.top=U.y}else i.options.top||(i.options.top=0);if(s="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",r="",i.options.url)r="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+f(b(i.options.url))+") >>";else if(i.options.pageNumber)switch(r="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":r+=" /Fit]";break;case"FitH":r+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,r+=" /FitV "+i.options.left+"]";break;case"XYZ":default:var X=o(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),r+=" /XYZ "+i.options.left+" "+X+" "+i.options.zoom+"]"}r!=""&&(r+=" >>",this.internal.write(r))}}this.internal.write("]")}}]),n.createAnnotation=function(e){var i=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":i.pageContext.annotations.push(e)}},n.link=function(e,i,s,r,a){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(e),y:c(i),w:l(e+s),h:c(i+r)},options:a,type:"link"})},n.textWithLink=function(e,i,s,r){var a,o,l=this.getTextWidth(e),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(r.maxWidth!==void 0){o=r.maxWidth;var d=this.splitTextToSize(e,o).length;a=Math.ceil(c*d)}else o=l,a=c;return this.text(e,i,s,r),s+=.2*c,r.align==="center"&&(i-=l/2),r.align==="right"&&(i-=l),this.link(i,s-c,o,a,r),l},n.getTextWidth=function(e){var i=this.internal.getFontSize();return this.getStringUnitWidth(e)*i/this.internal.scaleFactor}}(te.API),function(n){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},e={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];n.__arabicParser__={};var r=n.__arabicParser__.isInArabicSubstitutionA=function(w){return t[w.charCodeAt(0)]!==void 0},a=n.__arabicParser__.isArabicLetter=function(w){return typeof w=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(w)},o=n.__arabicParser__.isArabicEndLetter=function(w){return a(w)&&r(w)&&t[w.charCodeAt(0)].length<=2},l=n.__arabicParser__.isArabicAlfLetter=function(w){return a(w)&&s.indexOf(w.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(w){return a(w)&&r(w)&&t[w.charCodeAt(0)].length>=1};var c=n.__arabicParser__.arabicLetterHasFinalForm=function(w){return a(w)&&r(w)&&t[w.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(w){return a(w)&&r(w)&&t[w.charCodeAt(0)].length>=3};var d=n.__arabicParser__.arabicLetterHasMedialForm=function(w){return a(w)&&r(w)&&t[w.charCodeAt(0)].length==4},p=n.__arabicParser__.resolveLigatures=function(w){var S=0,A=e,x="",M=0;for(S=0;S<w.length;S+=1)A[w.charCodeAt(S)]!==void 0?(M++,typeof(A=A[w.charCodeAt(S)])=="number"&&(x+=String.fromCharCode(A),A=e,M=0),S===w.length-1&&(A=e,x+=w.charAt(S-(M-1)),S-=M-1,M=0)):(A=e,x+=w.charAt(S-M),S-=M,M=0);return x};n.__arabicParser__.isArabicDiacritic=function(w){return w!==void 0&&i[w.charCodeAt(0)]!==void 0};var m=n.__arabicParser__.getCorrectForm=function(w,S,A){return a(w)?r(w)===!1?-1:!c(w)||!a(S)&&!a(A)||!a(A)&&o(S)||o(w)&&!a(S)||o(w)&&l(S)||o(w)&&o(S)?0:d(w)&&a(S)&&!o(S)&&a(A)&&c(A)?3:o(w)||!a(A)?1:2:-1},f=function(w){var S=0,A=0,x=0,M="",q="",U="",X=(w=w||"").split("\\s+"),G=[];for(S=0;S<X.length;S+=1){for(G.push(""),A=0;A<X[S].length;A+=1)M=X[S][A],q=X[S][A-1],U=X[S][A+1],a(M)?(x=m(M,q,U),G[S]+=x!==-1?String.fromCharCode(t[M.charCodeAt(0)][x]):M):G[S]+=M;G[S]=p(G[S])}return G.join(" ")},b=n.__arabicParser__.processArabic=n.processArabic=function(){var w,S=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,A=[];if(Array.isArray(S)){var x=0;for(A=[],x=0;x<S.length;x+=1)Array.isArray(S[x])?A.push([f(S[x][0]),S[x][1],S[x][2]]):A.push([f(S[x])]);w=A}else w=f(S);return typeof arguments[0]=="string"?w:(arguments[0].text=w,arguments[0])};n.events.push(["preProcessText",b])}(te.API),te.API.autoPrint=function(n){var t;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(n){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(o){e=o}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(o){i=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(o){s=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var r=[];Object.defineProperty(this,"childNodes",{get:function(){return r},set:function(o){r=o}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(o){a=o}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,i){var s;if((e=e||"2d")!=="2d")return null;for(s in i)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=i[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(te.API),function(n){var t={left:0,top:0,bottom:0,right:0},e=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new r,this.internal.__cell__.pages=1},r=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(w){l=w}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(w){c=w}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(w){d=w}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(w){p=w}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(w){m=w}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(w){f=w}});var b=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return b},set:function(w){b=w}}),this};r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},r.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(l){return i.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},n.getTextDimensions=function(l,c){i.call(this);var d=(c=c||{}).fontSize||this.getFontSize(),p=c.font||this.getFont(),m=c.scaleFactor||this.internal.scaleFactor,f=0,b=0,w=0,S=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var A=c.maxWidth;A>0?typeof l=="string"?l=this.splitTextToSize(l,A):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(M,q){return M.concat(S.splitTextToSize(q,A))},[])):l=Array.isArray(l)?l:[l];for(var x=0;x<l.length;x++)f<(w=this.getStringUnitWidth(l[x],{font:p})*d)&&(f=w);return f!==0&&(b=l.length),{w:f/=m,h:Math.max((b*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/m,0)}},n.cellAddPage=function(){i.call(this),this.addPage();var l=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new r(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=n.cell=function(){var l;l=arguments[0]instanceof r?arguments[0]:new r(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),i.call(this);var c=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,p=this.internal.__cell__.margins||t,m=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=p.top,f&&m&&(this.printHeaderRow(l.lineNumber,!0),l.y+=m[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,e===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-d,l.y+d,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+d,{align:"center",baseline:"top",maxWidth:l.width-d-d}):this.text(l.text,l.x+d,l.y+d,{align:"left",baseline:"top",maxWidth:l.width-d-d})),this.internal.__cell__.lastCell=l,this};n.table=function(l,c,d,p,m){if(i.call(this),!d)throw new Error("No data for PDF table.");var f,b,w,S,A=[],x=[],M=[],q={},U={},X=[],G=[],B=(m=m||{}).autoSize||!1,Q=m.printHeaders!==!1,ct=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,P=m.margins||Object.assign({width:this.getPageWidth()},t),N=typeof m.padding=="number"?m.padding:3,V=m.headerBackgroundColor||"#c8c8c8",j=m.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=Q,this.internal.__cell__.margins=P,this.internal.__cell__.table_font_size=ct,this.internal.__cell__.padding=N,this.internal.__cell__.headerBackgroundColor=V,this.internal.__cell__.headerTextColor=j,this.setFontSize(ct),p==null)x=A=Object.keys(d[0]),M=A.map(function(){return"left"});else if(Array.isArray(p)&&ze(p[0])==="object")for(A=p.map(function(ht){return ht.name}),x=p.map(function(ht){return ht.prompt||ht.name||""}),M=p.map(function(ht){return ht.align||"left"}),f=0;f<p.length;f+=1)U[p[f].name]=p[f].width*(19.049976/25.4);else Array.isArray(p)&&typeof p[0]=="string"&&(x=A=p,M=A.map(function(){return"left"}));if(B||Array.isArray(p)&&typeof p[0]=="string")for(f=0;f<A.length;f+=1){for(q[S=A[f]]=d.map(function(ht){return ht[S]}),this.setFont(void 0,"bold"),X.push(this.getTextDimensions(x[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),b=q[S],this.setFont(void 0,"normal"),w=0;w<b.length;w+=1)X.push(this.getTextDimensions(b[w],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);U[S]=Math.max.apply(null,X)+N+N,X=[]}if(Q){var J={};for(f=0;f<A.length;f+=1)J[A[f]]={},J[A[f]].text=x[f],J[A[f]].align=M[f];var at=o.call(this,J,U);G=A.map(function(ht){return new r(l,c,U[ht],at,J[ht].text,void 0,J[ht].align)}),this.setTableHeaderRow(G),this.printHeaderRow(1,!1)}var st=p.reduce(function(ht,At){return ht[At.name]=At.align,ht},{});for(f=0;f<d.length;f+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:f,data:d[f]},this);var tt=o.call(this,d[f],U);for(w=0;w<A.length;w+=1){var vt=d[f][A[w]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:f,col:w,data:vt},this),a.call(this,new r(l,c,U[A[w]],tt,vt,f+2,st[A[w]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var o=function(l,c){var d=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(l).map(function(f){var b=l[f];return this.splitTextToSize(b.hasOwnProperty("text")?b.text:b,c[f]-d-d)},this).map(function(f){return this.getLineHeightFactor()*f.length*p/m+d+d},this).reduce(function(f,b){return Math.max(f,b)},0)};n.setTableHeaderRow=function(l){i.call(this),this.internal.__cell__.tableHeaderRow=l},n.printHeaderRow=function(l,c){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(e=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new r(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){d=this.internal.__cell__.tableHeaderRow[f].clone(),c&&(d.y=this.internal.__cell__.margins.top||0,m.push(d)),d.lineNumber=l;var b=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,d),this.setTextColor(b)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),e=!1}}(te.API);var HA={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},VA=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],j2=zA(VA),UA=[100,200,300,400,500,600,700,800,900],GL=zA(UA);function q2(n){var t=n.family.replace(/"|'/g,"").toLowerCase(),e=function(r){return HA[r=r||"normal"]?r:"normal"}(n.style),i=function(r){if(!r)return 400;if(typeof r=="number")return r>=100&&r<=900&&r%100==0?r:400;if(/^\d00$/.test(r))return parseInt(r);switch(r){case"bold":return 700;case"normal":default:return 400}}(n.weight),s=function(r){return typeof j2[r=r||"normal"]=="number"?r:"normal"}(n.stretch);return{family:t,style:e,weight:i,stretch:s,src:n.src||[],ref:n.ref||{name:t,style:[s,e,i].join(" ")}}}function J5(n,t,e,i){var s;for(s=e;s>=0&&s<t.length;s+=i)if(n[t[s]])return n[t[s]];for(s=e;s>=0&&s<t.length;s-=i)if(n[t[s]])return n[t[s]]}var $L={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Q5={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Z5(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function XL(n,t,e){for(var i=(e=e||{}).defaultFontFamily||"times",s=Object.assign({},$L,e.genericFontFamilies||{}),r=null,a=null,o=0;o<t.length;++o)if(s[(r=q2(t[o])).family]&&(r.family=s[r.family]),n.hasOwnProperty(r.family)){a=n[r.family];break}if(!(a=a||n[i]))throw new Error("Could not find a font-family for the rule '"+Z5(r)+"' and default family '"+i+"'.");if(a=function(l,c){if(c[l])return c[l];var d=j2[l],p=d<=j2.normal?-1:1,m=J5(c,VA,d,p);if(!m)throw new Error("Could not find a matching font-stretch value for "+l);return m}(r.stretch,a),a=function(l,c){if(c[l])return c[l];for(var d=HA[l],p=0;p<d.length;++p)if(c[d[p]])return c[d[p]];throw new Error("Could not find a matching font-style for "+l)}(r.style,a),!(a=function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var d=GL[l],p=J5(c,UA,d,l<400?-1:1);if(!p)throw new Error("Could not find a matching font-weight for value "+l);return p}(r.weight,a)))throw new Error("Failed to resolve a font for the rule '"+Z5(r)+"'.");return a}function tb(n){return n.trimLeft()}function YL(n,t){for(var e=0;e<n.length;){if(n.charAt(e)===t)return[n.substring(0,e),n.substring(e+1)];e+=1}return null}function KL(n){var t=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],n.substring(t[0].length)]}var sg,eb,ib,e0=["times"];(function(n){var t,e,i,s,r,a,o,l,c,d=function(E){return E=E||{},this.isStrokeTransparent=E.isStrokeTransparent||!1,this.strokeOpacity=E.strokeOpacity||1,this.strokeStyle=E.strokeStyle||"#000000",this.fillStyle=E.fillStyle||"#000000",this.isFillTransparent=E.isFillTransparent||!1,this.fillOpacity=E.fillOpacity||1,this.font=E.font||"10px sans-serif",this.textBaseline=E.textBaseline||"alphabetic",this.textAlign=E.textAlign||"left",this.lineWidth=E.lineWidth||1,this.lineJoin=E.lineJoin||"miter",this.lineCap=E.lineCap||"butt",this.path=E.path||[],this.transform=E.transform!==void 0?E.transform.clone():new l,this.globalCompositeOperation=E.globalCompositeOperation||"normal",this.globalAlpha=E.globalAlpha||1,this.clip_path=E.clip_path||[],this.currentPoint=E.currentPoint||new a,this.miterLimit=E.miterLimit||10,this.lastPoint=E.lastPoint||new a,this.lineDashOffset=E.lineDashOffset||0,this.lineDash=E.lineDash||[],this.margin=E.margin||[0,0,0,0],this.prevPageLastElemOffset=E.prevPageLastElemOffset||0,this.ignoreClearRect=typeof E.ignoreClearRect!="boolean"||E.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new p(this),t=this.internal.f2,e=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,r=this.internal.getVerticalCoordinate,a=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,c=new d}]);var p=function(E){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var z=E;Object.defineProperty(this,"pdf",{get:function(){return z}});var $=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return $},set:function(wt){$=!!wt}});var K=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return K},set:function(wt){K=!!wt}});var Z=0;Object.defineProperty(this,"posX",{get:function(){return Z},set:function(wt){isNaN(wt)||(Z=wt)}});var ot=0;Object.defineProperty(this,"posY",{get:function(){return ot},set:function(wt){isNaN(wt)||(ot=wt)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(wt){var Y;typeof wt=="number"?Y=[wt,wt,wt,wt]:((Y=new Array(4))[0]=wt[0],Y[1]=wt.length>=2?wt[1]:Y[0],Y[2]=wt.length>=3?wt[2]:Y[0],Y[3]=wt.length>=4?wt[3]:Y[1]),c.margin=Y}});var ft=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ft},set:function(wt){ft=wt}});var mt=0;Object.defineProperty(this,"lastBreak",{get:function(){return mt},set:function(wt){mt=wt}});var Nt=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Nt},set:function(wt){Nt=wt}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(wt){wt instanceof d&&(c=wt)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(wt){c.path=wt}});var kt=[];Object.defineProperty(this,"ctxStack",{get:function(){return kt},set:function(wt){kt=wt}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(wt){var Y;Y=m(wt),this.ctx.fillStyle=Y.style,this.ctx.isFillTransparent=Y.a===0,this.ctx.fillOpacity=Y.a,this.pdf.setFillColor(Y.r,Y.g,Y.b,{a:Y.a}),this.pdf.setTextColor(Y.r,Y.g,Y.b,{a:Y.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(wt){var Y=m(wt);this.ctx.strokeStyle=Y.style,this.ctx.isStrokeTransparent=Y.a===0,this.ctx.strokeOpacity=Y.a,Y.a===0?this.pdf.setDrawColor(255,255,255):(Y.a,this.pdf.setDrawColor(Y.r,Y.g,Y.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(wt){["butt","round","square"].indexOf(wt)!==-1&&(this.ctx.lineCap=wt,this.pdf.setLineCap(wt))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(wt){isNaN(wt)||(this.ctx.lineWidth=wt,this.pdf.setLineWidth(wt))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(wt){["bevel","round","miter"].indexOf(wt)!==-1&&(this.ctx.lineJoin=wt,this.pdf.setLineJoin(wt))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(wt){isNaN(wt)||(this.ctx.miterLimit=wt,this.pdf.setMiterLimit(wt))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(wt){this.ctx.textBaseline=wt}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(wt){["right","end","center","left","start"].indexOf(wt)!==-1&&(this.ctx.textAlign=wt)}});var Bt=null;function Rt(wt,Y){if(Bt===null){var ue=function(Gt){var Pt=[];return Object.keys(Gt).forEach(function(Tt){Gt[Tt].forEach(function(jt){var Dt=null;switch(jt){case"bold":Dt={family:Tt,weight:"bold"};break;case"italic":Dt={family:Tt,style:"italic"};break;case"bolditalic":Dt={family:Tt,weight:"bold",style:"italic"};break;case"":case"normal":Dt={family:Tt}}Dt!==null&&(Dt.ref={name:Tt,style:jt},Pt.push(Dt))})}),Pt}(wt.getFontList());Bt=function(Gt){for(var Pt={},Tt=0;Tt<Gt.length;++Tt){var jt=q2(Gt[Tt]),Dt=jt.family,Xt=jt.stretch,ae=jt.style,pe=jt.weight;Pt[Dt]=Pt[Dt]||{},Pt[Dt][Xt]=Pt[Dt][Xt]||{},Pt[Dt][Xt][ae]=Pt[Dt][Xt][ae]||{},Pt[Dt][Xt][ae][pe]=jt}return Pt}(ue.concat(Y))}return Bt}var Zt=null;Object.defineProperty(this,"fontFaces",{get:function(){return Zt},set:function(wt){Bt=null,Zt=wt}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(wt){var Y;if(this.ctx.font=wt,(Y=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(wt))!==null){var ue=Y[1],Gt=(Y[2],Y[3]),Pt=Y[4],Tt=(Y[5],Y[6]),jt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Pt)[2];Pt=Math.floor(jt==="px"?parseFloat(Pt)*this.pdf.internal.scaleFactor:jt==="em"?parseFloat(Pt)*this.pdf.getFontSize():parseFloat(Pt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Pt);var Dt=function(ie){var be,qt,on=[],ke=ie.trim();if(ke==="")return e0;if(ke in Q5)return[Q5[ke]];for(;ke!=="";){switch(qt=null,be=(ke=tb(ke)).charAt(0)){case'"':case"'":qt=YL(ke.substring(1),be);break;default:qt=KL(ke)}if(qt===null||(on.push(qt[0]),(ke=tb(qt[1]))!==""&&ke.charAt(0)!==","))return e0;ke=ke.replace(/^,/,"")}return on}(Tt);if(this.fontFaces){var Xt=XL(Rt(this.pdf,this.fontFaces),Dt.map(function(ie){return{family:ie,stretch:"normal",weight:Gt,style:ue}}));this.pdf.setFont(Xt.ref.name,Xt.ref.style)}else{var ae="";(Gt==="bold"||parseInt(Gt,10)>=700||ue==="bold")&&(ae="bold"),ue==="italic"&&(ae+="italic"),ae.length===0&&(ae="normal");for(var pe="",me={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ce=0;Ce<Dt.length;Ce++){if(this.pdf.internal.getFont(Dt[Ce],ae,{noFallback:!0,disableWarning:!0})!==void 0){pe=Dt[Ce];break}if(ae==="bolditalic"&&this.pdf.internal.getFont(Dt[Ce],"bold",{noFallback:!0,disableWarning:!0})!==void 0)pe=Dt[Ce],ae="bold";else if(this.pdf.internal.getFont(Dt[Ce],"normal",{noFallback:!0,disableWarning:!0})!==void 0){pe=Dt[Ce],ae="normal";break}}if(pe===""){for(var He=0;He<Dt.length;He++)if(me[Dt[He]]){pe=me[Dt[He]];break}}pe=pe===""?"Times":pe,this.pdf.setFont(pe,ae)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(wt){this.ctx.globalCompositeOperation=wt}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(wt){this.ctx.globalAlpha=wt}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(wt){this.ctx.lineDashOffset=wt,At.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(wt){this.ctx.lineDash=wt,At.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(wt){this.ctx.ignoreClearRect=!!wt}})};p.prototype.setLineDash=function(E){this.lineDash=E},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){q.call(this,"fill",!1)},p.prototype.stroke=function(){q.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(E,z){if(isNaN(E)||isNaN(z))throw Xe.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var $=this.ctx.transform.applyToPoint(new a(E,z));this.path.push({type:"mt",x:$.x,y:$.y}),this.ctx.lastPoint=new a(E,z)},p.prototype.closePath=function(){var E=new a(0,0),z=0;for(z=this.path.length-1;z!==-1;z--)if(this.path[z].type==="begin"&&ze(this.path[z+1])==="object"&&typeof this.path[z+1].x=="number"){E=new a(this.path[z+1].x,this.path[z+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(E.x,E.y)},p.prototype.lineTo=function(E,z){if(isNaN(E)||isNaN(z))throw Xe.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var $=this.ctx.transform.applyToPoint(new a(E,z));this.path.push({type:"lt",x:$.x,y:$.y}),this.ctx.lastPoint=new a($.x,$.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),q.call(this,null,!0)},p.prototype.quadraticCurveTo=function(E,z,$,K){if(isNaN($)||isNaN(K)||isNaN(E)||isNaN(z))throw Xe.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Z=this.ctx.transform.applyToPoint(new a($,K)),ot=this.ctx.transform.applyToPoint(new a(E,z));this.path.push({type:"qct",x1:ot.x,y1:ot.y,x:Z.x,y:Z.y}),this.ctx.lastPoint=new a(Z.x,Z.y)},p.prototype.bezierCurveTo=function(E,z,$,K,Z,ot){if(isNaN(Z)||isNaN(ot)||isNaN(E)||isNaN(z)||isNaN($)||isNaN(K))throw Xe.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ft=this.ctx.transform.applyToPoint(new a(Z,ot)),mt=this.ctx.transform.applyToPoint(new a(E,z)),Nt=this.ctx.transform.applyToPoint(new a($,K));this.path.push({type:"bct",x1:mt.x,y1:mt.y,x2:Nt.x,y2:Nt.y,x:ft.x,y:ft.y}),this.ctx.lastPoint=new a(ft.x,ft.y)},p.prototype.arc=function(E,z,$,K,Z,ot){if(isNaN(E)||isNaN(z)||isNaN($)||isNaN(K)||isNaN(Z))throw Xe.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ot=!!ot,!this.ctx.transform.isIdentity){var ft=this.ctx.transform.applyToPoint(new a(E,z));E=ft.x,z=ft.y;var mt=this.ctx.transform.applyToPoint(new a(0,$)),Nt=this.ctx.transform.applyToPoint(new a(0,0));$=Math.sqrt(Math.pow(mt.x-Nt.x,2)+Math.pow(mt.y-Nt.y,2))}Math.abs(Z-K)>=2*Math.PI&&(K=0,Z=2*Math.PI),this.path.push({type:"arc",x:E,y:z,radius:$,startAngle:K,endAngle:Z,counterclockwise:ot})},p.prototype.arcTo=function(E,z,$,K,Z){throw new Error("arcTo not implemented.")},p.prototype.rect=function(E,z,$,K){if(isNaN(E)||isNaN(z)||isNaN($)||isNaN(K))throw Xe.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(E,z),this.lineTo(E+$,z),this.lineTo(E+$,z+K),this.lineTo(E,z+K),this.lineTo(E,z),this.lineTo(E+$,z),this.lineTo(E,z)},p.prototype.fillRect=function(E,z,$,K){if(isNaN(E)||isNaN(z)||isNaN($)||isNaN(K))throw Xe.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var Z={};this.lineCap!=="butt"&&(Z.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Z.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(E,z,$,K),this.fill(),Z.hasOwnProperty("lineCap")&&(this.lineCap=Z.lineCap),Z.hasOwnProperty("lineJoin")&&(this.lineJoin=Z.lineJoin)}},p.prototype.strokeRect=function(E,z,$,K){if(isNaN(E)||isNaN(z)||isNaN($)||isNaN(K))throw Xe.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");b.call(this)||(this.beginPath(),this.rect(E,z,$,K),this.stroke())},p.prototype.clearRect=function(E,z,$,K){if(isNaN(E)||isNaN(z)||isNaN($)||isNaN(K))throw Xe.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(E,z,$,K))},p.prototype.save=function(E){E=typeof E!="boolean"||E;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,$=0;$<this.pdf.internal.getNumberOfPages();$++)this.pdf.setPage($+1),this.pdf.internal.out("q");if(this.pdf.setPage(z),E){this.ctx.fontSize=this.pdf.internal.getFontSize();var K=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=K}},p.prototype.restore=function(E){E=typeof E!="boolean"||E;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,$=0;$<this.pdf.internal.getNumberOfPages();$++)this.pdf.setPage($+1),this.pdf.internal.out("Q");this.pdf.setPage(z),E&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(E){var z,$,K,Z;if(E.isCanvasGradient===!0&&(E=E.getColor()),!E)return{r:0,g:0,b:0,a:0,style:E};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(E))z=0,$=0,K=0,Z=0;else{var ot=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(E);if(ot!==null)z=parseInt(ot[1]),$=parseInt(ot[2]),K=parseInt(ot[3]),Z=1;else if((ot=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(E))!==null)z=parseInt(ot[1]),$=parseInt(ot[2]),K=parseInt(ot[3]),Z=parseFloat(ot[4]);else{if(Z=1,typeof E=="string"&&E.charAt(0)!=="#"){var ft=new FA(E);E=ft.ok?ft.toHex():"#000000"}E.length===4?(z=E.substring(1,2),z+=z,$=E.substring(2,3),$+=$,K=E.substring(3,4),K+=K):(z=E.substring(1,3),$=E.substring(3,5),K=E.substring(5,7)),z=parseInt(z,16),$=parseInt($,16),K=parseInt(K,16)}}return{r:z,g:$,b:K,a:Z,style:E}},f=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},b=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(E,z,$,K){if(isNaN(z)||isNaN($)||typeof E!="string")throw Xe.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(K=isNaN(K)?void 0:K,!f.call(this)){var Z=tt(this.ctx.transform.rotation),ot=this.ctx.transform.scaleX;N.call(this,{text:E,x:z,y:$,scale:ot,angle:Z,align:this.textAlign,maxWidth:K})}},p.prototype.strokeText=function(E,z,$,K){if(isNaN(z)||isNaN($)||typeof E!="string")throw Xe.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!b.call(this)){K=isNaN(K)?void 0:K;var Z=tt(this.ctx.transform.rotation),ot=this.ctx.transform.scaleX;N.call(this,{text:E,x:z,y:$,scale:ot,renderingMode:"stroke",angle:Z,align:this.textAlign,maxWidth:K})}},p.prototype.measureText=function(E){if(typeof E!="string")throw Xe.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var z=this.pdf,$=this.pdf.internal.scaleFactor,K=z.internal.getFontSize(),Z=z.getStringUnitWidth(E)*K/z.internal.scaleFactor,ot=function(ft){var mt=(ft=ft||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return mt}}),this};return new ot({width:Z*=Math.round(96*$/72*1e4)/1e4})},p.prototype.scale=function(E,z){if(isNaN(E)||isNaN(z))throw Xe.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var $=new l(E,0,0,z,0,0);this.ctx.transform=this.ctx.transform.multiply($)},p.prototype.rotate=function(E){if(isNaN(E))throw Xe.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var z=new l(Math.cos(E),Math.sin(E),-Math.sin(E),Math.cos(E),0,0);this.ctx.transform=this.ctx.transform.multiply(z)},p.prototype.translate=function(E,z){if(isNaN(E)||isNaN(z))throw Xe.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var $=new l(1,0,0,1,E,z);this.ctx.transform=this.ctx.transform.multiply($)},p.prototype.transform=function(E,z,$,K,Z,ot){if(isNaN(E)||isNaN(z)||isNaN($)||isNaN(K)||isNaN(Z)||isNaN(ot))throw Xe.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ft=new l(E,z,$,K,Z,ot);this.ctx.transform=this.ctx.transform.multiply(ft)},p.prototype.setTransform=function(E,z,$,K,Z,ot){E=isNaN(E)?1:E,z=isNaN(z)?0:z,$=isNaN($)?0:$,K=isNaN(K)?1:K,Z=isNaN(Z)?0:Z,ot=isNaN(ot)?0:ot,this.ctx.transform=new l(E,z,$,K,Z,ot)};var w=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(E,z,$,K,Z,ot,ft,mt,Nt){var kt=this.pdf.getImageProperties(E),Bt=1,Rt=1,Zt=1,wt=1;K!==void 0&&mt!==void 0&&(Zt=mt/K,wt=Nt/Z,Bt=kt.width/K*mt/K,Rt=kt.height/Z*Nt/Z),ot===void 0&&(ot=z,ft=$,z=0,$=0),K!==void 0&&mt===void 0&&(mt=K,Nt=Z),K===void 0&&mt===void 0&&(mt=kt.width,Nt=kt.height);for(var Y,ue=this.ctx.transform.decompose(),Gt=tt(ue.rotate.shx),Pt=new l,Tt=(Pt=(Pt=(Pt=Pt.multiply(ue.translate)).multiply(ue.skew)).multiply(ue.scale)).applyToRectangle(new o(ot-z*Zt,ft-$*wt,K*Bt,Z*Rt)),jt=S.call(this,Tt),Dt=[],Xt=0;Xt<jt.length;Xt+=1)Dt.indexOf(jt[Xt])===-1&&Dt.push(jt[Xt]);if(M(Dt),this.autoPaging)for(var ae=Dt[0],pe=Dt[Dt.length-1],me=ae;me<pe+1;me++){this.pdf.setPage(me);var Ce=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],He=me===1?this.posY+this.margin[0]:this.margin[0],ie=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],be=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],qt=me===1?0:ie+(me-2)*be;if(this.ctx.clip_path.length!==0){var on=this.path;Y=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(Y,this.posX+this.margin[3],-qt+He+this.ctx.prevPageLastElemOffset),U.call(this,"fill",!0),this.path=on}var ke=JSON.parse(JSON.stringify(Tt));ke=x([ke],this.posX+this.margin[3],-qt+He+this.ctx.prevPageLastElemOffset)[0];var ks=(me>ae||me<pe)&&w.call(this);ks&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ce,be,null).clip().discardPath()),this.pdf.addImage(E,"JPEG",ke.x,ke.y,ke.w,ke.h,null,null,Gt),ks&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(E,"JPEG",Tt.x,Tt.y,Tt.w,Tt.h,null,null,Gt)};var S=function(E,z,$){var K=[];z=z||this.pdf.internal.pageSize.width,$=$||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Z=this.posY+this.ctx.prevPageLastElemOffset;switch(E.type){default:case"mt":case"lt":K.push(Math.floor((E.y+Z)/$)+1);break;case"arc":K.push(Math.floor((E.y+Z-E.radius)/$)+1),K.push(Math.floor((E.y+Z+E.radius)/$)+1);break;case"qct":var ot=vt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,E.x1,E.y1,E.x,E.y);K.push(Math.floor((ot.y+Z)/$)+1),K.push(Math.floor((ot.y+ot.h+Z)/$)+1);break;case"bct":var ft=ht(this.ctx.lastPoint.x,this.ctx.lastPoint.y,E.x1,E.y1,E.x2,E.y2,E.x,E.y);K.push(Math.floor((ft.y+Z)/$)+1),K.push(Math.floor((ft.y+ft.h+Z)/$)+1);break;case"rect":K.push(Math.floor((E.y+Z)/$)+1),K.push(Math.floor((E.y+E.h+Z)/$)+1)}for(var mt=0;mt<K.length;mt+=1)for(;this.pdf.internal.getNumberOfPages()<K[mt];)A.call(this);return K},A=function(){var E=this.fillStyle,z=this.strokeStyle,$=this.font,K=this.lineCap,Z=this.lineWidth,ot=this.lineJoin;this.pdf.addPage(),this.fillStyle=E,this.strokeStyle=z,this.font=$,this.lineCap=K,this.lineWidth=Z,this.lineJoin=ot},x=function(E,z,$){for(var K=0;K<E.length;K++)switch(E[K].type){case"bct":E[K].x2+=z,E[K].y2+=$;case"qct":E[K].x1+=z,E[K].y1+=$;case"mt":case"lt":case"arc":default:E[K].x+=z,E[K].y+=$}return E},M=function(E){return E.sort(function(z,$){return z-$})},q=function(E,z){for(var $,K,Z=this.fillStyle,ot=this.strokeStyle,ft=this.lineCap,mt=this.lineWidth,Nt=Math.abs(mt*this.ctx.transform.scaleX),kt=this.lineJoin,Bt=JSON.parse(JSON.stringify(this.path)),Rt=JSON.parse(JSON.stringify(this.path)),Zt=[],wt=0;wt<Rt.length;wt++)if(Rt[wt].x!==void 0)for(var Y=S.call(this,Rt[wt]),ue=0;ue<Y.length;ue+=1)Zt.indexOf(Y[ue])===-1&&Zt.push(Y[ue]);for(var Gt=0;Gt<Zt.length;Gt++)for(;this.pdf.internal.getNumberOfPages()<Zt[Gt];)A.call(this);if(M(Zt),this.autoPaging)for(var Pt=Zt[0],Tt=Zt[Zt.length-1],jt=Pt;jt<Tt+1;jt++){this.pdf.setPage(jt),this.fillStyle=Z,this.strokeStyle=ot,this.lineCap=ft,this.lineWidth=Nt,this.lineJoin=kt;var Dt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Xt=jt===1?this.posY+this.margin[0]:this.margin[0],ae=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],pe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],me=jt===1?0:ae+(jt-2)*pe;if(this.ctx.clip_path.length!==0){var Ce=this.path;$=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x($,this.posX+this.margin[3],-me+Xt+this.ctx.prevPageLastElemOffset),U.call(this,E,!0),this.path=Ce}if(K=JSON.parse(JSON.stringify(Bt)),this.path=x(K,this.posX+this.margin[3],-me+Xt+this.ctx.prevPageLastElemOffset),z===!1||jt===0){var He=(jt>Pt||jt<Tt)&&w.call(this);He&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Dt,pe,null).clip().discardPath()),U.call(this,E,z),He&&this.pdf.restoreGraphicsState()}this.lineWidth=mt}else this.lineWidth=Nt,U.call(this,E,z),this.lineWidth=mt;this.path=Bt},U=function(E,z){if((E!=="stroke"||z||!b.call(this))&&(E==="stroke"||z||!f.call(this))){for(var $,K,Z=[],ot=this.path,ft=0;ft<ot.length;ft++){var mt=ot[ft];switch(mt.type){case"begin":Z.push({begin:!0});break;case"close":Z.push({close:!0});break;case"mt":Z.push({start:mt,deltas:[],abs:[]});break;case"lt":var Nt=Z.length;if(ot[ft-1]&&!isNaN(ot[ft-1].x)&&($=[mt.x-ot[ft-1].x,mt.y-ot[ft-1].y],Nt>0)){for(;Nt>=0;Nt--)if(Z[Nt-1].close!==!0&&Z[Nt-1].begin!==!0){Z[Nt-1].deltas.push($),Z[Nt-1].abs.push(mt);break}}break;case"bct":$=[mt.x1-ot[ft-1].x,mt.y1-ot[ft-1].y,mt.x2-ot[ft-1].x,mt.y2-ot[ft-1].y,mt.x-ot[ft-1].x,mt.y-ot[ft-1].y],Z[Z.length-1].deltas.push($);break;case"qct":var kt=ot[ft-1].x+2/3*(mt.x1-ot[ft-1].x),Bt=ot[ft-1].y+2/3*(mt.y1-ot[ft-1].y),Rt=mt.x+2/3*(mt.x1-mt.x),Zt=mt.y+2/3*(mt.y1-mt.y),wt=mt.x,Y=mt.y;$=[kt-ot[ft-1].x,Bt-ot[ft-1].y,Rt-ot[ft-1].x,Zt-ot[ft-1].y,wt-ot[ft-1].x,Y-ot[ft-1].y],Z[Z.length-1].deltas.push($);break;case"arc":Z.push({deltas:[],abs:[],arc:!0}),Array.isArray(Z[Z.length-1].abs)&&Z[Z.length-1].abs.push(mt)}}K=z?null:E==="stroke"?"stroke":"fill";for(var ue=!1,Gt=0;Gt<Z.length;Gt++)if(Z[Gt].arc)for(var Pt=Z[Gt].abs,Tt=0;Tt<Pt.length;Tt++){var jt=Pt[Tt];jt.type==="arc"?B.call(this,jt.x,jt.y,jt.radius,jt.startAngle,jt.endAngle,jt.counterclockwise,void 0,z,!ue):V.call(this,jt.x,jt.y),ue=!0}else if(Z[Gt].close===!0)this.pdf.internal.out("h"),ue=!1;else if(Z[Gt].begin!==!0){var Dt=Z[Gt].start.x,Xt=Z[Gt].start.y;j.call(this,Z[Gt].deltas,Dt,Xt),ue=!0}K&&Q.call(this,K),z&&ct.call(this)}},X=function(E){var z=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,$=z*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return E-$;case"top":return E+z-$;case"hanging":return E+z-2*$;case"middle":return E+z/2-$;case"ideographic":return E;case"alphabetic":default:return E}},G=function(E){return E+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var E=function(){};return E.colorStops=[],E.addColorStop=function(z,$){this.colorStops.push([z,$])},E.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},E.isCanvasGradient=!0,E},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var B=function(E,z,$,K,Z,ot,ft,mt,Nt){for(var kt=at.call(this,$,K,Z,ot),Bt=0;Bt<kt.length;Bt++){var Rt=kt[Bt];Bt===0&&(Nt?P.call(this,Rt.x1+E,Rt.y1+z):V.call(this,Rt.x1+E,Rt.y1+z)),J.call(this,E,z,Rt.x2,Rt.y2,Rt.x3,Rt.y3,Rt.x4,Rt.y4)}mt?ct.call(this):Q.call(this,ft)},Q=function(E){switch(E){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},ct=function(){this.pdf.clip(),this.pdf.discardPath()},P=function(E,z){this.pdf.internal.out(e(E)+" "+i(z)+" m")},N=function(E){var z;switch(E.align){case"right":case"end":z="right";break;case"center":z="center";break;case"left":case"start":default:z="left"}var $=this.pdf.getTextDimensions(E.text),K=X.call(this,E.y),Z=G.call(this,K)-$.h,ot=this.ctx.transform.applyToPoint(new a(E.x,K)),ft=this.ctx.transform.decompose(),mt=new l;mt=(mt=(mt=mt.multiply(ft.translate)).multiply(ft.skew)).multiply(ft.scale);for(var Nt,kt,Bt,Rt=this.ctx.transform.applyToRectangle(new o(E.x,K,$.w,$.h)),Zt=mt.applyToRectangle(new o(E.x,Z,$.w,$.h)),wt=S.call(this,Zt),Y=[],ue=0;ue<wt.length;ue+=1)Y.indexOf(wt[ue])===-1&&Y.push(wt[ue]);if(M(Y),this.autoPaging)for(var Gt=Y[0],Pt=Y[Y.length-1],Tt=Gt;Tt<Pt+1;Tt++){this.pdf.setPage(Tt);var jt=Tt===1?this.posY+this.margin[0]:this.margin[0],Dt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Xt=this.pdf.internal.pageSize.height-this.margin[2],ae=Xt-this.margin[0],pe=this.pdf.internal.pageSize.width-this.margin[1],me=pe-this.margin[3],Ce=Tt===1?0:Dt+(Tt-2)*ae;if(this.ctx.clip_path.length!==0){var He=this.path;Nt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(Nt,this.posX+this.margin[3],-1*Ce+jt),U.call(this,"fill",!0),this.path=He}var ie=x([JSON.parse(JSON.stringify(Zt))],this.posX+this.margin[3],-Ce+jt+this.ctx.prevPageLastElemOffset)[0];E.scale>=.01&&(kt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(kt*E.scale),Bt=this.lineWidth,this.lineWidth=Bt*E.scale);var be=this.autoPaging!=="text";if(be||ie.y+ie.h<=Xt){if(be||ie.y>=jt&&ie.x<=pe){var qt=be?E.text:this.pdf.splitTextToSize(E.text,E.maxWidth||pe-ie.x)[0],on=x([JSON.parse(JSON.stringify(Rt))],this.posX+this.margin[3],-Ce+jt+this.ctx.prevPageLastElemOffset)[0],ke=be&&(Tt>Gt||Tt<Pt)&&w.call(this);ke&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],me,ae,null).clip().discardPath()),this.pdf.text(qt,on.x,on.y,{angle:E.angle,align:z,renderingMode:E.renderingMode}),ke&&this.pdf.restoreGraphicsState()}}else ie.y<Xt&&(this.ctx.prevPageLastElemOffset+=Xt-ie.y);E.scale>=.01&&(this.pdf.setFontSize(kt),this.lineWidth=Bt)}else E.scale>=.01&&(kt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(kt*E.scale),Bt=this.lineWidth,this.lineWidth=Bt*E.scale),this.pdf.text(E.text,ot.x+this.posX,ot.y+this.posY,{angle:E.angle,align:z,renderingMode:E.renderingMode,maxWidth:E.maxWidth}),E.scale>=.01&&(this.pdf.setFontSize(kt),this.lineWidth=Bt)},V=function(E,z,$,K){$=$||0,K=K||0,this.pdf.internal.out(e(E+$)+" "+i(z+K)+" l")},j=function(E,z,$){return this.pdf.lines(E,z,$,null,null)},J=function(E,z,$,K,Z,ot,ft,mt){this.pdf.internal.out([t(s($+E)),t(r(K+z)),t(s(Z+E)),t(r(ot+z)),t(s(ft+E)),t(r(mt+z)),"c"].join(" "))},at=function(E,z,$,K){for(var Z=2*Math.PI,ot=Math.PI/2;z>$;)z-=Z;var ft=Math.abs($-z);ft<Z&&K&&(ft=Z-ft);for(var mt=[],Nt=K?-1:1,kt=z;ft>1e-5;){var Bt=kt+Nt*Math.min(ft,ot);mt.push(st.call(this,E,kt,Bt)),ft-=Math.abs(Bt-kt),kt=Bt}return mt},st=function(E,z,$){var K=($-z)/2,Z=E*Math.cos(K),ot=E*Math.sin(K),ft=Z,mt=-ot,Nt=ft*ft+mt*mt,kt=Nt+ft*Z+mt*ot,Bt=4/3*(Math.sqrt(2*Nt*kt)-kt)/(ft*ot-mt*Z),Rt=ft-Bt*mt,Zt=mt+Bt*ft,wt=Rt,Y=-Zt,ue=K+z,Gt=Math.cos(ue),Pt=Math.sin(ue);return{x1:E*Math.cos(z),y1:E*Math.sin(z),x2:Rt*Gt-Zt*Pt,y2:Rt*Pt+Zt*Gt,x3:wt*Gt-Y*Pt,y3:wt*Pt+Y*Gt,x4:E*Math.cos($),y4:E*Math.sin($)}},tt=function(E){return 180*E/Math.PI},vt=function(E,z,$,K,Z,ot){var ft=E+.5*($-E),mt=z+.5*(K-z),Nt=Z+.5*($-Z),kt=ot+.5*(K-ot),Bt=Math.min(E,Z,ft,Nt),Rt=Math.max(E,Z,ft,Nt),Zt=Math.min(z,ot,mt,kt),wt=Math.max(z,ot,mt,kt);return new o(Bt,Zt,Rt-Bt,wt-Zt)},ht=function(E,z,$,K,Z,ot,ft,mt){var Nt,kt,Bt,Rt,Zt,wt,Y,ue,Gt,Pt,Tt,jt,Dt,Xt,ae=$-E,pe=K-z,me=Z-$,Ce=ot-K,He=ft-Z,ie=mt-ot;for(kt=0;kt<41;kt++)Gt=(Y=(Bt=E+(Nt=kt/40)*ae)+Nt*((Zt=$+Nt*me)-Bt))+Nt*(Zt+Nt*(Z+Nt*He-Zt)-Y),Pt=(ue=(Rt=z+Nt*pe)+Nt*((wt=K+Nt*Ce)-Rt))+Nt*(wt+Nt*(ot+Nt*ie-wt)-ue),kt==0?(Tt=Gt,jt=Pt,Dt=Gt,Xt=Pt):(Tt=Math.min(Tt,Gt),jt=Math.min(jt,Pt),Dt=Math.max(Dt,Gt),Xt=Math.max(Xt,Pt));return new o(Math.round(Tt),Math.round(jt),Math.round(Dt-Tt),Math.round(Xt-jt))},At=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var E,z,$=(E=this.ctx.lineDash,z=this.ctx.lineDashOffset,JSON.stringify({lineDash:E,lineDashOffset:z}));this.prevLineDash!==$&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=$)}}})(te.API),function(n){var t=function(r){var a,o,l,c,d,p,m,f,b,w;for(o=[],l=0,c=(r+=a="\0\0\0\0".slice(r.length%4||4)).length;c>l;l+=4)(d=(r.charCodeAt(l)<<24)+(r.charCodeAt(l+1)<<16)+(r.charCodeAt(l+2)<<8)+r.charCodeAt(l+3))!==0?(p=(d=((d=((d=((d=(d-(w=d%85))/85)-(b=d%85))/85)-(f=d%85))/85)-(m=d%85))/85)%85,o.push(p+33,m+33,f+33,b+33,w+33)):o.push(122);return function(S,A){for(var x=A;x>0;x--)S.pop()}(o,a.length),String.fromCharCode.apply(String,o)+"~>"},e=function(r){var a,o,l,c,d,p=String,m="length",f=255,b="charCodeAt",w="slice",S="replace";for(r[w](-2),r=r[w](0,-2)[S](/\s/g,"")[S]("z","!!!!!"),l=[],c=0,d=(r+=a="uuuuu"[w](r[m]%5||5))[m];d>c;c+=5)o=52200625*(r[b](c)-33)+614125*(r[b](c+1)-33)+7225*(r[b](c+2)-33)+85*(r[b](c+3)-33)+(r[b](c+4)-33),l.push(f&o>>24,f&o>>16,f&o>>8,f&o);return function(A,x){for(var M=x;M>0;M--)A.pop()}(l,a[m]),p.fromCharCode.apply(p,l)},i=function(r){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((r=r.replace(/\s/g,"")).indexOf(">")!==-1&&(r=r.substr(0,r.indexOf(">"))),r.length%2&&(r+="0"),a.test(r)===!1)return"";for(var o="",l=0;l<r.length;l+=2)o+=String.fromCharCode("0x"+(r[l]+r[l+1]));return o},s=function(r){for(var a=new Uint8Array(r.length),o=r.length;o--;)a[o]=r.charCodeAt(o);return r=(a=R2(a)).reduce(function(l,c){return l+String.fromCharCode(c)},"")};n.processDataByFilters=function(r,a){var o=0,l=r||"",c=[];for(typeof(a=a||[])=="string"&&(a=[a]),o=0;o<a.length;o+=1)switch(a[o]){case"ASCII85Decode":case"/ASCII85Decode":l=e(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=t(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=i(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=s(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[o]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(te.API),function(n){n.loadFile=function(t,e,i){return function(s,r,a){r=r!==!1,a=typeof a=="function"?a:function(){};var o=void 0;try{o=function(l,c,d){var p=new XMLHttpRequest,m=0,f=function(b){var w=b.length,S=[],A=String.fromCharCode;for(m=0;m<w;m+=1)S.push(A(255&b.charCodeAt(m)));return S.join("")};if(p.open("GET",l,!c),p.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(p.onload=function(){p.status===200?d(f(this.responseText)):d(void 0)}),p.send(null),c&&p.status===200)return f(p.responseText)}(s,r,a)}catch{}return o}(t,e,i)},n.loadImageFile=n.loadFile}(te.API),function(n){function t(){return(ee.html2canvas?Promise.resolve(ee.html2canvas):hl(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function e(){return(ee.DOMPurify?Promise.resolve(ee.DOMPurify):hl(()=>import("./purify.es-a-CayzAK.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var i=function(a){var o=ze(a);return o==="undefined"?"undefined":o==="string"||a instanceof String?"string":o==="number"||a instanceof Number?"number":o==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":o==="object"?"object":"unknown"},s=function(a,o){var l=document.createElement(a);for(var c in o.className&&(l.className=o.className),o.innerHTML&&o.dompurify&&(l.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)l.style[c]=o.style[c];return l},r=function a(o){var l=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),c=a.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,a,1,[a])).set(o)};(r.prototype=Object.create(Promise.prototype)).constructor=r,r.convert=function(a,o){return a.__proto__=o||r.prototype,a},r.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},r.prototype.from=function(a,o){return this.then(function(){switch(o=o||function(l){switch(i(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(e).then(function(l){return this.set({src:s("div",{innerHTML:a,dompurify:l})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},r.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},r.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function l(c,d){for(var p=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),m=c.firstChild;m;m=m.nextSibling)d!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||p.appendChild(l(m,d));return c.nodeType===1&&(c.nodeName==="CANVAS"?(p.width=c.width,p.height=c.height,p.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(p.value=c.value),p.addEventListener("load",function(){p.scrollTop=c.scrollTop,p.scrollLeft=c.scrollLeft},!0)),p}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},r.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then(function(o){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,o(this.prop.container,l)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},r.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then(function(o){var l=this.opt.jsPDF,c=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var m=0;m<c.length;++m){var f=c[m],b=f.src.find(function(w){return w.format==="truetype"});b&&l.addFont(b.url,f.ref.name,f.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,l.context2d.save(!0),o(this.prop.container,p)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},r.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},r.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},r.prototype.output=function(a,o,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(a,o):this.outputPdf(a,o)},r.prototype.outputPdf=function(a,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,o)})},r.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},r.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},r.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},r.prototype.set=function(a){if(i(a)!=="object")return this;var o=Object.keys(a||{}).map(function(l){if(l in r.template.prop)return function(){this.prop[l]=a[l]};switch(l){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[l]=a[l]}}},this);return this.then(function(){return this.thenList(o)})},r.prototype.get=function(a,o){return this.then(function(){var l=a in r.template.prop?this.prop[a]:this.opt[a];return o?o(l):l})},r.prototype.setMargin=function(a){return this.then(function(){switch(i(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},r.prototype.setPageSize=function(a){function o(l,c){return Math.floor(l*c/72*96)}return this.then(function(){(a=a||te.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:o(a.inner.width,a.k),height:o(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},r.prototype.setProgress=function(a,o,l,c){return a!=null&&(this.progress.val=a),o!=null&&(this.progress.state=o),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},r.prototype.updateProgress=function(a,o,l,c){return this.setProgress(a?this.progress.val+a:null,o||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},r.prototype.then=function(a,o){var l=this;return this.thenCore(a,o,function(c,d){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(p){return l.updateProgress(null,c),p}).then(c,d).then(function(p){return l.updateProgress(1),p})})},r.prototype.thenCore=function(a,o,l){l=l||Promise.prototype.then,a&&(a=a.bind(this)),o&&(o=o.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:r.convert(Object.assign({},this),Promise.prototype),d=l.call(c,a,o);return r.convert(d,this.__proto__)},r.prototype.thenExternal=function(a,o){return Promise.prototype.then.call(this,a,o)},r.prototype.thenList=function(a){var o=this;return a.forEach(function(l){o=o.thenCore(l)}),o},r.prototype.catch=function(a){a&&(a=a.bind(this));var o=Promise.prototype.catch.call(this,a);return r.convert(o,this)},r.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},r.prototype.error=function(a){return this.then(function(){throw new Error(a)})},r.prototype.using=r.prototype.set,r.prototype.saveAs=r.prototype.save,r.prototype.export=r.prototype.output,r.prototype.run=r.prototype.then,te.getPageSize=function(a,o,l){if(ze(a)==="object"){var c=a;a=c.orientation,o=c.unit||o,l=c.format||l}o=o||"mm",l=l||"a4",a=(""+(a||"P")).toLowerCase();var d,p=(""+l).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+o}var f,b=0,w=0;if(m.hasOwnProperty(p))b=m[p][1]/d,w=m[p][0]/d;else try{b=l[1],w=l[0]}catch{throw new Error("Invalid format: "+l)}if(a==="p"||a==="portrait")a="p",w>b&&(f=w,w=b,b=f);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",b>w&&(f=w,w=b,b=f)}return{width:w,height:b,unit:o,k:d,orientation:a}},n.html=function(a,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(q2):null;var l=new r(o);return o.worker?l:l.from(a).doCallback()}}(te.API),te.API.addJS=function(n){return ib=n,this.internal.events.subscribe("postPutResources",function(){sg=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(sg+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),eb=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+ib+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){sg!==void 0&&eb!==void 0&&this.internal.out("/Names <</JavaScript "+sg+" 0 R>>")}),this},function(n){var t;n.events.push(["postPutResources",function(){var e=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=e.outline.render().split(/\r\n/),r=0;r<s.length;r++){var a=s[r],o=i.exec(a);if(o!=null){var l=o[1];e.internal.newObjectDeferredBegin(l,!1)}e.internal.write(a)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,d=[];for(r=0;r<c;r++){var p=e.internal.newObject();d.push(p);var m=e.internal.getPageInfo(r+1);e.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var f=e.internal.newObject();for(e.internal.write("<< /Names [ "),r=0;r<d.length;r++)e.internal.write("(page_"+(r+1)+")"+d[r]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+f+" 0 R"),e.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),n.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(i,s,r){var a={title:s,options:r,children:[]};return i==null&&(i=this.root),i.children.push(a),a},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(i){i.id=e.internal.newObjectDeferred();for(var s=0;s<i.children.length;s++)this.genIds_r(i.children[s])},e.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},e.outline.renderItems=function(i){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,r=0;r<i.children.length;r++){var a=i.children[r];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(i)),r>0&&this.line("/Prev "+this.makeRef(i.children[r-1])),r<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[r+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var o=this.count=this.count_r({count:0},a);if(o>0&&this.line("/Count "+o),a.options&&a.options.pageNumber){var l=e.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var c=0;c<i.children.length;c++)this.renderItems(i.children[c])},e.outline.line=function(i){this.ctx.val+=i+`\r
`},e.outline.makeRef=function(i){return i.id+" 0 R"},e.outline.makeString=function(i){return"("+e.internal.pdfEscape(i)+")"},e.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},e.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},e.outline.count_r=function(i,s){for(var r=0;r<s.children.length;r++)i.count++,this.count_r(i,s.children[r]);return i.count}}])}(te.API),function(n){var t=[192,193,194,195,196,197,198,199];n.processJPEG=function(e,i,s,r,a,o){var l,c=this.decode.DCT_DECODE,d=null;if(typeof e=="string"||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=a||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,(l=function(p){for(var m,f=256*p.charCodeAt(4)+p.charCodeAt(5),b=p.length,w={width:0,height:0,numcomponents:1},S=4;S<b;S+=2){if(S+=f,t.indexOf(p.charCodeAt(S+1))!==-1){m=256*p.charCodeAt(S+5)+p.charCodeAt(S+6),w={width:256*p.charCodeAt(S+7)+p.charCodeAt(S+8),height:m,numcomponents:p.charCodeAt(S+9)};break}f=256*p.charCodeAt(S+2)+p.charCodeAt(S+3)}return w}(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}d={data:e,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:c,index:i,alias:s}}return d}}(te.API);var ih,rg,nb,sb,rb,JL=function(){var n,t,e;function i(r){var a,o,l,c,d,p,m,f,b,w,S,A,x,M;for(this.data=r,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},p=null;;){switch(a=this.readUInt32(),b=(function(){var q,U;for(U=[],q=0;q<4;++q)U.push(String.fromCharCode(this.data[this.pos++]));return U}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":p&&this.animation.frames.push(p),this.pos+=4,p={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),c=this.readUInt16()||100,p.delay=1e3*d/c,p.disposeOp=this.data[this.pos++],p.blendOp=this.data[this.pos++],p.data=[];break;case"IDAT":case"fdAT":for(b==="fdAT"&&(this.pos+=4,a-=4),r=(p!=null?p.data:void 0)||this.imgData,A=0;0<=a?A<a:A>a;0<=a?++A:--A)r.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((w=l-this.transparency.indexed.length)>0)for(x=0;0<=w?x<w:x>w;0<=w?++x:--x)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":m=(S=this.read(a)).indexOf(0),f=String.fromCharCode.apply(String,S.slice(0,m)),this.text[f]=String.fromCharCode.apply(String,S.slice(m+1));break;case"IEND":return p&&this.animation.frames.push(p),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(M=this.colorType)===4||M===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}i.prototype.read=function(r){var a,o;for(o=[],a=0;0<=r?a<r:a>r;0<=r?++a:--a)o.push(this.data[this.pos++]);return o},i.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.decodePixels=function(r){var a=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*a),l=0,c=this;if(r==null&&(r=this.imgData),r.length===0)return new Uint8Array(0);function d(p,m,f,b){var w,S,A,x,M,q,U,X,G,B,Q,ct,P,N,V,j,J,at,st,tt,vt,ht=Math.ceil((c.width-p)/f),At=Math.ceil((c.height-m)/b),E=c.width==ht&&c.height==At;for(N=a*ht,ct=E?o:new Uint8Array(N*At),q=r.length,P=0,S=0;P<At&&l<q;){switch(r[l++]){case 0:for(x=J=0;J<N;x=J+=1)ct[S++]=r[l++];break;case 1:for(x=at=0;at<N;x=at+=1)w=r[l++],M=x<a?0:ct[S-a],ct[S++]=(w+M)%256;break;case 2:for(x=st=0;st<N;x=st+=1)w=r[l++],A=(x-x%a)/a,V=P&&ct[(P-1)*N+A*a+x%a],ct[S++]=(V+w)%256;break;case 3:for(x=tt=0;tt<N;x=tt+=1)w=r[l++],A=(x-x%a)/a,M=x<a?0:ct[S-a],V=P&&ct[(P-1)*N+A*a+x%a],ct[S++]=(w+Math.floor((M+V)/2))%256;break;case 4:for(x=vt=0;vt<N;x=vt+=1)w=r[l++],A=(x-x%a)/a,M=x<a?0:ct[S-a],P===0?V=j=0:(V=ct[(P-1)*N+A*a+x%a],j=A&&ct[(P-1)*N+(A-1)*a+x%a]),U=M+V-j,X=Math.abs(U-M),B=Math.abs(U-V),Q=Math.abs(U-j),G=X<=B&&X<=Q?M:B<=Q?V:j,ct[S++]=(w+G)%256;break;default:throw new Error("Invalid filter algorithm: "+r[l-1])}if(!E){var z=((m+P*b)*c.width+p)*a,$=P*N;for(x=0;x<ht;x+=1){for(var K=0;K<a;K+=1)o[z++]=ct[$++];z+=(f-1)*a}}P++}}return r=kL(r),c.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),o},i.prototype.decodePalette=function(){var r,a,o,l,c,d,p,m,f;for(o=this.palette,d=this.transparency.indexed||[],c=new Uint8Array((d.length||0)+o.length),l=0,r=0,a=p=0,m=o.length;p<m;a=p+=3)c[l++]=o[a],c[l++]=o[a+1],c[l++]=o[a+2],c[l++]=(f=d[r++])!=null?f:255;return c},i.prototype.copyToImageData=function(r,a){var o,l,c,d,p,m,f,b,w,S,A;if(l=this.colors,w=null,o=this.hasAlphaChannel,this.palette.length&&(w=(A=this._decodedPalette)!=null?A:this._decodedPalette=this.decodePalette(),l=4,o=!0),b=(c=r.data||r).length,p=w||a,d=m=0,l===1)for(;d<b;)f=w?4*a[d/4]:m,S=p[f++],c[d++]=S,c[d++]=S,c[d++]=S,c[d++]=o?p[f++]:255,m=f;else for(;d<b;)f=w?4*a[d/4]:m,c[d++]=p[f++],c[d++]=p[f++],c[d++]=p[f++],c[d++]=o?p[f++]:255,m=f},i.prototype.decode=function(){var r;return r=new Uint8Array(this.width*this.height*4),this.copyToImageData(r,this.decodePixels()),r};var s=function(){if(Object.prototype.toString.call(ee)==="[object Window]"){try{t=ee.document.createElement("canvas"),e=t.getContext("2d")}catch{return!1}return!0}return!1};return s(),n=function(r){var a;if(s()===!0)return e.width=r.width,e.height=r.height,e.clearRect(0,0,r.width,r.height),e.putImageData(r,0,0),(a=new Image).src=t.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},i.prototype.decodeFrames=function(r){var a,o,l,c,d,p,m,f;if(this.animation){for(f=[],o=d=0,p=(m=this.animation.frames).length;d<p;o=++d)a=m[o],l=r.createImageData(a.width,a.height),c=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(l,c),a.imageData=l,f.push(a.image=n(l));return f}},i.prototype.renderFrame=function(r,a){var o,l,c;return o=(l=this.animation.frames)[a],c=l[a-1],a===0&&r.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?r.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&r.putImageData(c.imageData,c.xOffset,c.yOffset),o.blendOp===0&&r.clearRect(o.xOffset,o.yOffset,o.width,o.height),r.drawImage(o.image,o.xOffset,o.yOffset)},i.prototype.animate=function(r){var a,o,l,c,d,p,m=this;return o=0,p=this.animation,c=p.numFrames,l=p.frames,d=p.numPlays,(a=function(){var f,b;if(f=o++%c,b=l[f],m.renderFrame(r,f),c>1&&o/c<d)return m.animation._timeout=setTimeout(a,b.delay)})()},i.prototype.stopAnimation=function(){var r;return clearTimeout((r=this.animation)!=null?r._timeout:void 0)},i.prototype.render=function(r){var a,o;return r._png&&r._png.stopAnimation(),r._png=this,r.width=this.width,r.height=this.height,a=r.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(o=a.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),a.putImageData(o,0,0))},i}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function QL(n){var t=0;if(n[t++]!==71||n[t++]!==73||n[t++]!==70||n[t++]!==56||(n[t++]+1&253)!=56||n[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var e=n[t++]|n[t++]<<8,i=n[t++]|n[t++]<<8,s=n[t++],r=s>>7,a=1<<(7&s)+1;n[t++],n[t++];var o=null,l=null;r&&(o=t,l=a,t+=3*a);var c=!0,d=[],p=0,m=null,f=0,b=null;for(this.width=e,this.height=i;c&&t<n.length;)switch(n[t++]){case 33:switch(n[t++]){case 255:if(n[t]!==11||n[t+1]==78&&n[t+2]==69&&n[t+3]==84&&n[t+4]==83&&n[t+5]==67&&n[t+6]==65&&n[t+7]==80&&n[t+8]==69&&n[t+9]==50&&n[t+10]==46&&n[t+11]==48&&n[t+12]==3&&n[t+13]==1&&n[t+16]==0)t+=14,b=n[t++]|n[t++]<<8,t++;else for(t+=12;;){if(!((P=n[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}break;case 249:if(n[t++]!==4||n[t+4]!==0)throw new Error("Invalid graphics extension block.");var w=n[t++];p=n[t++]|n[t++]<<8,m=n[t++],!(1&w)&&(m=null),f=w>>2&7,t++;break;case 254:for(;;){if(!((P=n[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}break;default:throw new Error("Unknown graphic control label: 0x"+n[t-1].toString(16))}break;case 44:var S=n[t++]|n[t++]<<8,A=n[t++]|n[t++]<<8,x=n[t++]|n[t++]<<8,M=n[t++]|n[t++]<<8,q=n[t++],U=q>>6&1,X=1<<(7&q)+1,G=o,B=l,Q=!1;q>>7&&(Q=!0,G=t,B=X,t+=3*X);var ct=t;for(t++;;){var P;if(!((P=n[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}d.push({x:S,y:A,width:x,height:M,has_local_palette:Q,palette_offset:G,palette_size:B,data_offset:ct,data_length:t-ct,transparent_index:m,interlaced:!!U,delay:p,disposal:f});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+n[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return b},this.frameInfo=function(N){if(N<0||N>=d.length)throw new Error("Frame index out of range.");return d[N]},this.decodeAndBlitFrameBGRA=function(N,V){var j=this.frameInfo(N),J=j.width*j.height,at=new Uint8Array(J);ab(n,j.data_offset,at,J);var st=j.palette_offset,tt=j.transparent_index;tt===null&&(tt=256);var vt=j.width,ht=e-vt,At=vt,E=4*(j.y*e+j.x),z=4*((j.y+j.height)*e+j.x),$=E,K=4*ht;j.interlaced===!0&&(K+=4*e*7);for(var Z=8,ot=0,ft=at.length;ot<ft;++ot){var mt=at[ot];if(At===0&&(At=vt,($+=K)>=z&&(K=4*ht+4*e*(Z-1),$=E+(vt+ht)*(Z<<1),Z>>=1)),mt===tt)$+=4;else{var Nt=n[st+3*mt],kt=n[st+3*mt+1],Bt=n[st+3*mt+2];V[$++]=Bt,V[$++]=kt,V[$++]=Nt,V[$++]=255}--At}},this.decodeAndBlitFrameRGBA=function(N,V){var j=this.frameInfo(N),J=j.width*j.height,at=new Uint8Array(J);ab(n,j.data_offset,at,J);var st=j.palette_offset,tt=j.transparent_index;tt===null&&(tt=256);var vt=j.width,ht=e-vt,At=vt,E=4*(j.y*e+j.x),z=4*((j.y+j.height)*e+j.x),$=E,K=4*ht;j.interlaced===!0&&(K+=4*e*7);for(var Z=8,ot=0,ft=at.length;ot<ft;++ot){var mt=at[ot];if(At===0&&(At=vt,($+=K)>=z&&(K=4*ht+4*e*(Z-1),$=E+(vt+ht)*(Z<<1),Z>>=1)),mt===tt)$+=4;else{var Nt=n[st+3*mt],kt=n[st+3*mt+1],Bt=n[st+3*mt+2];V[$++]=Nt,V[$++]=kt,V[$++]=Bt,V[$++]=255}--At}}}function ab(n,t,e,i){for(var s=n[t++],r=1<<s,a=r+1,o=a+1,l=s+1,c=(1<<l)-1,d=0,p=0,m=0,f=n[t++],b=new Int32Array(4096),w=null;;){for(;d<16&&f!==0;)p|=n[t++]<<d,d+=8,f===1?f=n[t++]:--f;if(d<l)break;var S=p&c;if(p>>=l,d-=l,S!==r){if(S===a)break;for(var A=S<o?S:w,x=0,M=A;M>r;)M=b[M]>>8,++x;var q=M;if(m+x+(A!==S?1:0)>i)return void Xe.log("Warning, gif stream longer than expected.");e[m++]=q;var U=m+=x;for(A!==S&&(e[m++]=q),M=A;x--;)M=b[M],e[--U]=255&M,M>>=8;w!==null&&o<4096&&(b[o++]=w<<8|q,o>=c+1&&l<12&&(++l,c=c<<1|1)),w=S}else o=a+1,c=(1<<(l=s+1))-1,w=null}return m!==i&&Xe.log("Warning, gif stream shorter than expected."),e}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function i0(n){var t,e,i,s,r,a=Math.floor,o=new Array(64),l=new Array(64),c=new Array(64),d=new Array(64),p=new Array(65535),m=new Array(65535),f=new Array(64),b=new Array(64),w=[],S=0,A=7,x=new Array(64),M=new Array(64),q=new Array(64),U=new Array(256),X=new Array(2048),G=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],B=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Q=[0,1,2,3,4,5,6,7,8,9,10,11],ct=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],P=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],N=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],V=[0,1,2,3,4,5,6,7,8,9,10,11],j=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],J=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function at(E,z){for(var $=0,K=0,Z=new Array,ot=1;ot<=16;ot++){for(var ft=1;ft<=E[ot];ft++)Z[z[K]]=[],Z[z[K]][0]=$,Z[z[K]][1]=ot,K++,$++;$*=2}return Z}function st(E){for(var z=E[0],$=E[1]-1;$>=0;)z&1<<$&&(S|=1<<A),$--,--A<0&&(S==255?(tt(255),tt(0)):tt(S),A=7,S=0)}function tt(E){w.push(E)}function vt(E){tt(E>>8&255),tt(255&E)}function ht(E,z,$,K,Z){for(var ot,ft=Z[0],mt=Z[240],Nt=function(Pt,Tt){var jt,Dt,Xt,ae,pe,me,Ce,He,ie,be,qt=0;for(ie=0;ie<8;++ie){jt=Pt[qt],Dt=Pt[qt+1],Xt=Pt[qt+2],ae=Pt[qt+3],pe=Pt[qt+4],me=Pt[qt+5],Ce=Pt[qt+6];var on=jt+(He=Pt[qt+7]),ke=jt-He,ks=Dt+Ce,Ge=Dt-Ce,ei=Xt+me,ar=Xt-me,Fe=ae+pe,Uo=ae-pe,ci=on+Fe,Ns=on-Fe,Wr=ks+ei,hi=ks-ei;Pt[qt]=ci+Wr,Pt[qt+4]=ci-Wr;var oe=.707106781*(hi+Ns);Pt[qt+2]=Ns+oe,Pt[qt+6]=Ns-oe;var Oe=.382683433*((ci=Uo+ar)-(hi=Ge+ke)),Wo=.5411961*ci+Oe,Qi=1.306562965*hi+Oe,or=.707106781*(Wr=ar+Ge),lr=ke+or,Qt=ke-or;Pt[qt+5]=Qt+Wo,Pt[qt+3]=Qt-Wo,Pt[qt+1]=lr+Qi,Pt[qt+7]=lr-Qi,qt+=8}for(qt=0,ie=0;ie<8;++ie){jt=Pt[qt],Dt=Pt[qt+8],Xt=Pt[qt+16],ae=Pt[qt+24],pe=Pt[qt+32],me=Pt[qt+40],Ce=Pt[qt+48];var Ts=jt+(He=Pt[qt+56]),cr=jt-He,Nn=Dt+Ce,Ri=Dt-Ce,Ei=Xt+me,Un=Xt-me,Cc=ae+pe,Gr=ae-pe,Is=Ts+Cc,Ms=Ts-Cc,Rs=Nn+Ei,hr=Nn-Ei;Pt[qt]=Is+Rs,Pt[qt+32]=Is-Rs;var ls=.707106781*(hr+Ms);Pt[qt+16]=Ms+ls,Pt[qt+48]=Ms-ls;var ur=.382683433*((Is=Gr+Un)-(hr=Ri+cr)),Go=.5411961*Is+ur,Ec=1.306562965*hr+ur,Pc=.707106781*(Rs=Un+Ri),kc=cr+Pc,Nc=cr-Pc;Pt[qt+40]=Nc+Go,Pt[qt+24]=Nc-Go,Pt[qt+8]=kc+Ec,Pt[qt+56]=kc-Ec,qt++}for(ie=0;ie<64;++ie)be=Pt[ie]*Tt[ie],f[ie]=be>0?be+.5|0:be-.5|0;return f}(E,z),kt=0;kt<64;++kt)b[G[kt]]=Nt[kt];var Bt=b[0]-$;$=b[0],Bt==0?st(K[0]):(st(K[m[ot=32767+Bt]]),st(p[ot]));for(var Rt=63;Rt>0&&b[Rt]==0;)Rt--;if(Rt==0)return st(ft),$;for(var Zt,wt=1;wt<=Rt;){for(var Y=wt;b[wt]==0&&wt<=Rt;)++wt;var ue=wt-Y;if(ue>=16){Zt=ue>>4;for(var Gt=1;Gt<=Zt;++Gt)st(mt);ue&=15}ot=32767+b[wt],st(Z[(ue<<4)+m[ot]]),st(p[ot]),wt++}return Rt!=63&&st(ft),$}function At(E){E=Math.min(Math.max(E,1),100),r!=E&&(function(z){for(var $=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],K=0;K<64;K++){var Z=a(($[K]*z+50)/100);Z=Math.min(Math.max(Z,1),255),o[G[K]]=Z}for(var ot=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ft=0;ft<64;ft++){var mt=a((ot[ft]*z+50)/100);mt=Math.min(Math.max(mt,1),255),l[G[ft]]=mt}for(var Nt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],kt=0,Bt=0;Bt<8;Bt++)for(var Rt=0;Rt<8;Rt++)c[kt]=1/(o[G[kt]]*Nt[Bt]*Nt[Rt]*8),d[kt]=1/(l[G[kt]]*Nt[Bt]*Nt[Rt]*8),kt++}(E<50?Math.floor(5e3/E):Math.floor(200-2*E)),r=E)}this.encode=function(E,z){z&&At(z),w=new Array,S=0,A=7,vt(65496),vt(65504),vt(16),tt(74),tt(70),tt(73),tt(70),tt(0),tt(1),tt(1),tt(0),vt(1),vt(1),tt(0),tt(0),function(){vt(65499),vt(132),tt(0);for(var Dt=0;Dt<64;Dt++)tt(o[Dt]);tt(1);for(var Xt=0;Xt<64;Xt++)tt(l[Xt])}(),function(Dt,Xt){vt(65472),vt(17),tt(8),vt(Xt),vt(Dt),tt(3),tt(1),tt(17),tt(0),tt(2),tt(17),tt(1),tt(3),tt(17),tt(1)}(E.width,E.height),function(){vt(65476),vt(418),tt(0);for(var Dt=0;Dt<16;Dt++)tt(B[Dt+1]);for(var Xt=0;Xt<=11;Xt++)tt(Q[Xt]);tt(16);for(var ae=0;ae<16;ae++)tt(ct[ae+1]);for(var pe=0;pe<=161;pe++)tt(P[pe]);tt(1);for(var me=0;me<16;me++)tt(N[me+1]);for(var Ce=0;Ce<=11;Ce++)tt(V[Ce]);tt(17);for(var He=0;He<16;He++)tt(j[He+1]);for(var ie=0;ie<=161;ie++)tt(J[ie])}(),vt(65498),vt(12),tt(3),tt(1),tt(0),tt(2),tt(17),tt(3),tt(17),tt(0),tt(63),tt(0);var $=0,K=0,Z=0;S=0,A=7,this.encode.displayName="_encode_";for(var ot,ft,mt,Nt,kt,Bt,Rt,Zt,wt,Y=E.data,ue=E.width,Gt=E.height,Pt=4*ue,Tt=0;Tt<Gt;){for(ot=0;ot<Pt;){for(kt=Pt*Tt+ot,Rt=-1,Zt=0,wt=0;wt<64;wt++)Bt=kt+(Zt=wt>>3)*Pt+(Rt=4*(7&wt)),Tt+Zt>=Gt&&(Bt-=Pt*(Tt+1+Zt-Gt)),ot+Rt>=Pt&&(Bt-=ot+Rt-Pt+4),ft=Y[Bt++],mt=Y[Bt++],Nt=Y[Bt++],x[wt]=(X[ft]+X[mt+256>>0]+X[Nt+512>>0]>>16)-128,M[wt]=(X[ft+768>>0]+X[mt+1024>>0]+X[Nt+1280>>0]>>16)-128,q[wt]=(X[ft+1280>>0]+X[mt+1536>>0]+X[Nt+1792>>0]>>16)-128;$=ht(x,c,$,t,i),K=ht(M,d,K,e,s),Z=ht(q,d,Z,e,s),ot+=32}Tt+=8}if(A>=0){var jt=[];jt[1]=A+1,jt[0]=(1<<A+1)-1,st(jt)}return vt(65497),new Uint8Array(w)},n=n||50,function(){for(var E=String.fromCharCode,z=0;z<256;z++)U[z]=E(z)}(),t=at(B,Q),e=at(N,V),i=at(ct,P),s=at(j,J),function(){for(var E=1,z=2,$=1;$<=15;$++){for(var K=E;K<z;K++)m[32767+K]=$,p[32767+K]=[],p[32767+K][1]=$,p[32767+K][0]=K;for(var Z=-(z-1);Z<=-E;Z++)m[32767+Z]=$,p[32767+Z]=[],p[32767+Z][1]=$,p[32767+Z][0]=z-1+Z;E<<=1,z<<=1}}(),function(){for(var E=0;E<256;E++)X[E]=19595*E,X[E+256>>0]=38470*E,X[E+512>>0]=7471*E+32768,X[E+768>>0]=-11059*E,X[E+1024>>0]=-21709*E,X[E+1280>>0]=32768*E+8421375,X[E+1536>>0]=-27439*E,X[E+1792>>0]=-5329*E}(),At(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function zs(n,t){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function ob(n){function t(B){if(!B)throw Error("assert :P")}function e(B,Q,ct){for(var P=0;4>P;P++)if(B[Q+P]!=ct.charCodeAt(P))return!0;return!1}function i(B,Q,ct,P,N){for(var V=0;V<N;V++)B[Q+V]=ct[P+V]}function s(B,Q,ct,P){for(var N=0;N<P;N++)B[Q+N]=ct}function r(B){return new Int32Array(B)}function a(B,Q){for(var ct=[],P=0;P<B;P++)ct.push(new Q);return ct}function o(B,Q){var ct=[];return function P(N,V,j){for(var J=j[V],at=0;at<J&&(N.push(j.length>V+1?[]:new Q),!(j.length<V+1));at++)P(N[at],V+1,j)}(ct,0,B),ct}var l=function(){var B=this;function Q(h,g){for(var y=1<<g-1>>>0;h&y;)y>>>=1;return y?(h&y-1)+y:h}function ct(h,g,y,_,L){t(!(_%y));do h[g+(_-=y)]=L;while(0<_)}function P(h,g,y,_,L){if(t(2328>=L),512>=L)var T=r(512);else if((T=r(L))==null)return 0;return function(I,F,D,H,it,pt){var gt,lt,xt=F,bt=1<<D,nt=r(16),rt=r(16);for(t(it!=0),t(H!=null),t(I!=null),t(0<D),lt=0;lt<it;++lt){if(15<H[lt])return 0;++nt[H[lt]]}if(nt[0]==it)return 0;for(rt[1]=0,gt=1;15>gt;++gt){if(nt[gt]>1<<gt)return 0;rt[gt+1]=rt[gt]+nt[gt]}for(lt=0;lt<it;++lt)gt=H[lt],0<H[lt]&&(pt[rt[gt]++]=lt);if(rt[15]==1)return(H=new N).g=0,H.value=pt[0],ct(I,xt,1,bt,H),bt;var _t,Lt=-1,St=bt-1,Ht=0,It=1,Jt=1,Ft=1<<D;for(lt=0,gt=1,it=2;gt<=D;++gt,it<<=1){if(It+=Jt<<=1,0>(Jt-=nt[gt]))return 0;for(;0<nt[gt];--nt[gt])(H=new N).g=gt,H.value=pt[lt++],ct(I,xt+Ht,it,Ft,H),Ht=Q(Ht,gt)}for(gt=D+1,it=2;15>=gt;++gt,it<<=1){if(It+=Jt<<=1,0>(Jt-=nt[gt]))return 0;for(;0<nt[gt];--nt[gt]){if(H=new N,(Ht&St)!=Lt){for(xt+=Ft,_t=1<<(Lt=gt)-D;15>Lt&&!(0>=(_t-=nt[Lt]));)++Lt,_t<<=1;bt+=Ft=1<<(_t=Lt-D),I[F+(Lt=Ht&St)].g=_t+D,I[F+Lt].value=xt-F-Lt}H.g=gt-D,H.value=pt[lt++],ct(I,xt+(Ht>>D),it,Ft,H),Ht=Q(Ht,gt)}}return It!=2*rt[15]-1?0:bt}(h,g,y,_,L,T)}function N(){this.value=this.g=0}function V(){this.value=this.g=0}function j(){this.G=a(5,N),this.H=r(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Zi,V)}function J(h,g,y,_){t(h!=null),t(g!=null),t(2147483648>_),h.Ca=254,h.I=0,h.b=-8,h.Ka=0,h.oa=g,h.pa=y,h.Jd=g,h.Yc=y+_,h.Zc=4<=_?y+_-4+1:y,ot(h)}function at(h,g){for(var y=0;0<g--;)y|=mt(h,128)<<g;return y}function st(h,g){var y=at(h,g);return ft(h)?-y:y}function tt(h,g,y,_){var L,T=0;for(t(h!=null),t(g!=null),t(4294967288>_),h.Sb=_,h.Ra=0,h.u=0,h.h=0,4<_&&(_=4),L=0;L<_;++L)T+=g[y+L]<<8*L;h.Ra=T,h.bb=_,h.oa=g,h.pa=y}function vt(h){for(;8<=h.u&&h.bb<h.Sb;)h.Ra>>>=8,h.Ra+=h.oa[h.pa+h.bb]<<Wc-8>>>0,++h.bb,h.u-=8;$(h)&&(h.h=1,h.u=0)}function ht(h,g){if(t(0<=g),!h.h&&g<=Uc){var y=z(h)&Vc[g];return h.u+=g,vt(h),y}return h.h=1,h.u=0}function At(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function E(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function z(h){return h.Ra>>>(h.u&Wc-1)>>>0}function $(h){return t(h.bb<=h.Sb),h.h||h.bb==h.Sb&&h.u>Wc}function K(h,g){h.u=g,h.h=$(h)}function Z(h){h.u>=Hu&&(t(h.u>=Hu),vt(h))}function ot(h){t(h!=null&&h.oa!=null),h.pa<h.Zc?(h.I=(h.oa[h.pa++]|h.I<<8)>>>0,h.b+=8):(t(h!=null&&h.oa!=null),h.pa<h.Yc?(h.b+=8,h.I=h.oa[h.pa++]|h.I<<8):h.Ka?h.b=0:(h.I<<=8,h.b+=8,h.Ka=1))}function ft(h){return at(h,1)}function mt(h,g){var y=h.Ca;0>h.b&&ot(h);var _=h.b,L=y*g>>>8,T=(h.I>>>_>L)+0;for(T?(y-=L,h.I-=L+1<<_>>>0):y=L+1,_=y,L=0;256<=_;)L+=8,_>>=8;return _=7^L+In[_],h.b-=_,h.Ca=(y<<_)-1,T}function Nt(h,g,y){h[g+0]=y>>24&255,h[g+1]=y>>16&255,h[g+2]=y>>8&255,h[g+3]=y>>0&255}function kt(h,g){return h[g+0]<<0|h[g+1]<<8}function Bt(h,g){return kt(h,g)|h[g+2]<<16}function Rt(h,g){return kt(h,g)|kt(h,g+2)<<16}function Zt(h,g){var y=1<<g;return t(h!=null),t(0<g),h.X=r(y),h.X==null?0:(h.Mb=32-g,h.Xa=g,1)}function wt(h,g){t(h!=null),t(g!=null),t(h.Xa==g.Xa),i(g.X,0,h.X,0,1<<g.Xa)}function Y(){this.X=[],this.Xa=this.Mb=0}function ue(h,g,y,_){t(y!=null),t(_!=null);var L=y[0],T=_[0];return L==0&&(L=(h*T+g/2)/g),T==0&&(T=(g*L+h/2)/h),0>=L||0>=T?0:(y[0]=L,_[0]=T,1)}function Gt(h,g){return h+(1<<g)-1>>>g}function Pt(h,g){return((4278255360&h)+(4278255360&g)>>>0&4278255360)+((16711935&h)+(16711935&g)>>>0&16711935)>>>0}function Tt(h,g){B[g]=function(y,_,L,T,I,F,D){var H;for(H=0;H<I;++H){var it=B[h](F[D+H-1],L,T+H);F[D+H]=Pt(y[_+H],it)}}}function jt(){this.ud=this.hd=this.jd=0}function Dt(h,g){return((4278124286&(h^g))>>>1)+(h&g)>>>0}function Xt(h){return 0<=h&&256>h?h:0>h?0:255<h?255:void 0}function ae(h,g){return Xt(h+(h-g+.5>>1))}function pe(h,g,y){return Math.abs(g-y)-Math.abs(h-y)}function me(h,g,y,_,L,T,I){for(_=T[I-1],y=0;y<L;++y)T[I+y]=_=Pt(h[g+y],_)}function Ce(h,g,y,_,L){var T;for(T=0;T<y;++T){var I=h[g+T],F=I>>8&255,D=16711935&(D=(D=16711935&I)+((F<<16)+F));_[L+T]=(4278255360&I)+D>>>0}}function He(h,g){g.jd=h>>0&255,g.hd=h>>8&255,g.ud=h>>16&255}function ie(h,g,y,_,L,T){var I;for(I=0;I<_;++I){var F=g[y+I],D=F>>>8,H=F,it=255&(it=(it=F>>>16)+((h.jd<<24>>24)*(D<<24>>24)>>>5));H=255&(H=(H=H+((h.hd<<24>>24)*(D<<24>>24)>>>5))+((h.ud<<24>>24)*(it<<24>>24)>>>5)),L[T+I]=(4278255360&F)+(it<<16)+H}}function be(h,g,y,_,L){B[g]=function(T,I,F,D,H,it,pt,gt,lt){for(D=pt;D<gt;++D)for(pt=0;pt<lt;++pt)H[it++]=L(F[_(T[I++])])},B[h]=function(T,I,F,D,H,it,pt){var gt=8>>T.b,lt=T.Ea,xt=T.K[0],bt=T.w;if(8>gt)for(T=(1<<T.b)-1,bt=(1<<gt)-1;I<F;++I){var nt,rt=0;for(nt=0;nt<lt;++nt)nt&T||(rt=_(D[H++])),it[pt++]=L(xt[rt&bt]),rt>>=gt}else B["VP8LMapColor"+y](D,H,xt,bt,it,pt,I,F,lt)}}function qt(h,g,y,_,L){for(y=g+y;g<y;){var T=h[g++];_[L++]=T>>16&255,_[L++]=T>>8&255,_[L++]=T>>0&255}}function on(h,g,y,_,L){for(y=g+y;g<y;){var T=h[g++];_[L++]=T>>16&255,_[L++]=T>>8&255,_[L++]=T>>0&255,_[L++]=T>>24&255}}function ke(h,g,y,_,L){for(y=g+y;g<y;){var T=(I=h[g++])>>16&240|I>>12&15,I=I>>0&240|I>>28&15;_[L++]=T,_[L++]=I}}function ks(h,g,y,_,L){for(y=g+y;g<y;){var T=(I=h[g++])>>16&248|I>>13&7,I=I>>5&224|I>>3&31;_[L++]=T,_[L++]=I}}function Ge(h,g,y,_,L){for(y=g+y;g<y;){var T=h[g++];_[L++]=T>>0&255,_[L++]=T>>8&255,_[L++]=T>>16&255}}function ei(h,g,y,_,L,T){if(T==0)for(y=g+y;g<y;)Nt(_,((T=h[g++])[0]>>24|T[1]>>8&65280|T[2]<<8&16711680|T[3]<<24)>>>0),L+=32;else i(_,L,h,g,y)}function ar(h,g){B[g][0]=B[h+"0"],B[g][1]=B[h+"1"],B[g][2]=B[h+"2"],B[g][3]=B[h+"3"],B[g][4]=B[h+"4"],B[g][5]=B[h+"5"],B[g][6]=B[h+"6"],B[g][7]=B[h+"7"],B[g][8]=B[h+"8"],B[g][9]=B[h+"9"],B[g][10]=B[h+"10"],B[g][11]=B[h+"11"],B[g][12]=B[h+"12"],B[g][13]=B[h+"13"],B[g][14]=B[h+"0"],B[g][15]=B[h+"0"]}function Fe(h){return h==y1||h==w1||h==Fp||h==A1}function Uo(){this.eb=[],this.size=this.A=this.fb=0}function ci(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ns(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Uo,this.f.kb=new ci,this.sd=null}function Wr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function hi(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function oe(h){return alert("todo:WebPSamplerProcessPlane"),h.T}function Oe(h,g){var y=h.T,_=g.ba.f.RGBA,L=_.eb,T=_.fb+h.ka*_.A,I=ps[g.ba.S],F=h.y,D=h.O,H=h.f,it=h.N,pt=h.ea,gt=h.W,lt=g.cc,xt=g.dc,bt=g.Mc,nt=g.Nc,rt=h.ka,_t=h.ka+h.T,Lt=h.U,St=Lt+1>>1;for(rt==0?I(F,D,null,null,H,it,pt,gt,H,it,pt,gt,L,T,null,null,Lt):(I(g.ec,g.fc,F,D,lt,xt,bt,nt,H,it,pt,gt,L,T-_.A,L,T,Lt),++y);rt+2<_t;rt+=2)lt=H,xt=it,bt=pt,nt=gt,it+=h.Rc,gt+=h.Rc,T+=2*_.A,I(F,(D+=2*h.fa)-h.fa,F,D,lt,xt,bt,nt,H,it,pt,gt,L,T-_.A,L,T,Lt);return D+=h.fa,h.j+_t<h.o?(i(g.ec,g.fc,F,D,Lt),i(g.cc,g.dc,H,it,St),i(g.Mc,g.Nc,pt,gt,St),y--):1&_t||I(F,D,null,null,H,it,pt,gt,H,it,pt,gt,L,T+_.A,null,null,Lt),y}function Wo(h,g,y){var _=h.F,L=[h.J];if(_!=null){var T=h.U,I=g.ba.S,F=I==Rp||I==Fp;g=g.ba.f.RGBA;var D=[0],H=h.ka;D[0]=h.T,h.Kb&&(H==0?--D[0]:(--H,L[0]-=h.width),h.j+h.ka+h.T==h.o&&(D[0]=h.o-h.j-H));var it=g.eb;H=g.fb+H*g.A,h=Je(_,L[0],h.width,T,D,it,H+(F?0:3),g.A),t(y==D),h&&Fe(I)&&ds(it,H,F,T,D,g.A)}return 0}function Qi(h){var g=h.ma,y=g.ba.S,_=11>y,L=y==Ip||y==Mp||y==Rp||y==b1||y==12||Fe(y);if(g.memory=null,g.Ib=null,g.Jb=null,g.Nd=null,!qu(g.Oa,h,L?11:12))return 0;if(L&&Fe(y)&&Ct(),h.da)alert("todo:use_scaling");else{if(_){if(g.Ib=oe,h.Kb){if(y=h.U+1>>1,g.memory=r(h.U+2*y),g.memory==null)return 0;g.ec=g.memory,g.fc=0,g.cc=g.ec,g.dc=g.fc+h.U,g.Mc=g.cc,g.Nc=g.dc+y,g.Ib=Oe,Ct()}}else alert("todo:EmitYUV");L&&(g.Jb=Wo,_&&ut())}if(_&&!Iv){for(h=0;256>h;++h)u_[h]=89858*(h-128)+Dp>>Op,p_[h]=-22014*(h-128)+Dp,f_[h]=-45773*(h-128),d_[h]=113618*(h-128)+Dp>>Op;for(h=Yu;h<x1;++h)g=76283*(h-16)+Dp>>Op,g_[h-Yu]=Wn(g,255),m_[h-Yu]=Wn(g+8>>4,15);Iv=1}return 1}function or(h){var g=h.ma,y=h.U,_=h.T;return t(!(1&h.ka)),0>=y||0>=_?0:(y=g.Ib(h,g),g.Jb!=null&&g.Jb(h,g,y),g.Dc+=y,1)}function lr(h){h.ma.memory=null}function Qt(h,g,y,_){return ht(h,8)!=47?0:(g[0]=ht(h,14)+1,y[0]=ht(h,14)+1,_[0]=ht(h,1),ht(h,3)!=0?0:!h.h)}function Ts(h,g){if(4>h)return h+1;var y=h-2>>1;return(2+(1&h)<<y)+ht(g,y)+1}function cr(h,g){return 120<g?g-120:1<=(y=((y=JA[g-1])>>4)*h+(8-(15&y)))?y:1;var y}function Nn(h,g,y){var _=z(y),L=h[g+=255&_].g-8;return 0<L&&(K(y,y.u+8),_=z(y),g+=h[g].value,g+=_&(1<<L)-1),K(y,y.u+h[g].g),h[g].value}function Ri(h,g,y){return y.g+=h.g,y.value+=h.value<<g>>>0,t(8>=y.g),h.g}function Ei(h,g,y){var _=h.xc;return t((g=_==0?0:h.vc[h.md*(y>>_)+(g>>_)])<h.Wb),h.Ya[g]}function Un(h,g,y,_){var L=h.ab,T=h.c*g,I=h.C;g=I+g;var F=y,D=_;for(_=h.Ta,y=h.Ua;0<L--;){var H=h.gc[L],it=I,pt=g,gt=F,lt=D,xt=(D=_,F=y,H.Ea);switch(t(it<pt),t(pt<=H.nc),H.hc){case 2:Lp(gt,lt,(pt-it)*xt,D,F);break;case 0:var bt=it,nt=pt,rt=D,_t=F,Lt=(Ft=H).Ea;bt==0&&(m1(gt,lt,null,null,1,rt,_t),me(gt,lt+1,0,0,Lt-1,rt,_t+1),lt+=Lt,_t+=Lt,++bt);for(var St=1<<Ft.b,Ht=St-1,It=Gt(Lt,Ft.b),Jt=Ft.K,Ft=Ft.w+(bt>>Ft.b)*It;bt<nt;){var Te=Jt,Be=Ft,Ee=1;for(Vu(gt,lt,rt,_t-Lt,1,rt,_t);Ee<Lt;){var we=(Ee&~Ht)+St;we>Lt&&(we=Lt),(0,Ua[Te[Be++]>>8&15])(gt,lt+ +Ee,rt,_t+Ee-Lt,we-Ee,rt,_t+Ee),Ee=we}lt+=Lt,_t+=Lt,++bt&Ht||(Ft+=It)}pt!=H.nc&&i(D,F-xt,D,F+(pt-it-1)*xt,xt);break;case 1:for(xt=gt,nt=lt,Lt=(gt=H.Ea)-(_t=gt&~(rt=(lt=1<<H.b)-1)),bt=Gt(gt,H.b),St=H.K,H=H.w+(it>>H.b)*bt;it<pt;){for(Ht=St,It=H,Jt=new jt,Ft=nt+_t,Te=nt+gt;nt<Ft;)He(Ht[It++],Jt),Jo(Jt,xt,nt,lt,D,F),nt+=lt,F+=lt;nt<Te&&(He(Ht[It++],Jt),Jo(Jt,xt,nt,Lt,D,F),nt+=Lt,F+=Lt),++it&rt||(H+=bt)}break;case 3:if(gt==D&&lt==F&&0<H.b){for(nt=D,gt=xt=F+(pt-it)*xt-(_t=(pt-it)*Gt(H.Ea,H.b)),lt=D,rt=F,bt=[],_t=(Lt=_t)-1;0<=_t;--_t)bt[_t]=lt[rt+_t];for(_t=Lt-1;0<=_t;--_t)nt[gt+_t]=bt[_t];cs(H,it,pt,D,xt,D,F)}else cs(H,it,pt,gt,lt,D,F)}F=_,D=y}D!=y&&i(_,y,F,D,T)}function Cc(h,g){var y=h.V,_=h.Ba+h.c*h.C,L=g-h.C;if(t(g<=h.l.o),t(16>=L),0<L){var T=h.l,I=h.Ta,F=h.Ua,D=T.width;if(Un(h,L,y,_),L=F=[F],t((y=h.C)<(_=g)),t(T.v<T.va),_>T.o&&(_=T.o),y<T.j){var H=T.j-y;y=T.j,L[0]+=H*D}if(y>=_?y=0:(L[0]+=4*T.v,T.ka=y-T.j,T.U=T.va-T.v,T.T=_-y,y=1),y){if(F=F[0],11>(y=h.ca).S){var it=y.f.RGBA,pt=(_=y.S,L=T.U,T=T.T,H=it.eb,it.A),gt=T;for(it=it.fb+h.Ma*it.A;0<gt--;){var lt=I,xt=F,bt=L,nt=H,rt=it;switch(_){case Tp:Mn(lt,xt,bt,nt,rt);break;case Ip:wn(lt,xt,bt,nt,rt);break;case y1:wn(lt,xt,bt,nt,rt),ds(nt,rt,0,bt,1,0);break;case _v:Kr(lt,xt,bt,nt,rt);break;case Mp:ei(lt,xt,bt,nt,rt,1);break;case w1:ei(lt,xt,bt,nt,rt,1),ds(nt,rt,0,bt,1,0);break;case Rp:ei(lt,xt,bt,nt,rt,0);break;case Fp:ei(lt,xt,bt,nt,rt,0),ds(nt,rt,1,bt,1,0);break;case b1:Wa(lt,xt,bt,nt,rt);break;case A1:Wa(lt,xt,bt,nt,rt),Ke(nt,rt,bt,1,0);break;case Sv:Yr(lt,xt,bt,nt,rt);break;default:t(0)}F+=D,it+=pt}h.Ma+=T}else alert("todo:EmitRescaledRowsYUVA");t(h.Ma<=y.height)}}h.C=g,t(h.C<=h.i)}function Gr(h){var g;if(0<h.ua)return 0;for(g=0;g<h.Wb;++g){var y=h.Ya[g].G,_=h.Ya[g].H;if(0<y[1][_[1]+0].g||0<y[2][_[2]+0].g||0<y[3][_[3]+0].g)return 0}return 1}function Is(h,g,y,_,L,T){if(h.Z!=0){var I=h.qd,F=h.rd;for(t(Ya[h.Z]!=null);g<y;++g)Ya[h.Z](I,F,_,L,_,L,T),I=_,F=L,L+=T;h.qd=I,h.rd=F}}function Ms(h,g){var y=h.l.ma,_=y.Z==0||y.Z==1?h.l.j:h.C;if(_=h.C<_?_:h.C,t(g<=h.l.o),g>_){var L=h.l.width,T=y.ca,I=y.tb+L*_,F=h.V,D=h.Ba+h.c*_,H=h.gc;t(h.ab==1),t(H[0].hc==3),Cp(H[0],_,g,F,D,T,I),Is(y,_,g,T,I,L)}h.C=h.Ma=g}function Rs(h,g,y,_,L,T,I){var F=h.$/_,D=h.$%_,H=h.m,it=h.s,pt=y+h.$,gt=pt;L=y+_*L;var lt=y+_*T,xt=280+it.ua,bt=h.Pb?F:16777216,nt=0<it.ua?it.Wa:null,rt=it.wc,_t=pt<lt?Ei(it,D,F):null;t(h.C<T),t(lt<=L);var Lt=!1;t:for(;;){for(;Lt||pt<lt;){var St=0;if(F>=bt){var Ht=pt-y;t((bt=h).Pb),bt.wd=bt.m,bt.xd=Ht,0<bt.s.ua&&wt(bt.s.Wa,bt.s.vb),bt=F+ZA}if(D&rt||(_t=Ei(it,D,F)),t(_t!=null),_t.Qb&&(g[pt]=_t.qb,Lt=!0),!Lt)if(Z(H),_t.jc){St=H,Ht=g;var It=pt,Jt=_t.pd[z(St)&Zi-1];t(_t.jc),256>Jt.g?(K(St,St.u+Jt.g),Ht[It]=Jt.value,St=0):(K(St,St.u+Jt.g-256),t(256<=Jt.value),St=Jt.value),St==0&&(Lt=!0)}else St=Nn(_t.G[0],_t.H[0],H);if(H.h)break;if(Lt||256>St){if(!Lt)if(_t.nd)g[pt]=(_t.qb|St<<8)>>>0;else{if(Z(H),Lt=Nn(_t.G[1],_t.H[1],H),Z(H),Ht=Nn(_t.G[2],_t.H[2],H),It=Nn(_t.G[3],_t.H[3],H),H.h)break;g[pt]=(It<<24|Lt<<16|St<<8|Ht)>>>0}if(Lt=!1,++pt,++D>=_&&(D=0,++F,I!=null&&F<=T&&!(F%16)&&I(h,F),nt!=null))for(;gt<pt;)St=g[gt++],nt.X[(506832829*St&4294967295)>>>nt.Mb]=St}else if(280>St){if(St=Ts(St-256,H),Ht=Nn(_t.G[4],_t.H[4],H),Z(H),Ht=cr(_,Ht=Ts(Ht,H)),H.h)break;if(pt-y<Ht||L-pt<St)break t;for(It=0;It<St;++It)g[pt+It]=g[pt+It-Ht];for(pt+=St,D+=St;D>=_;)D-=_,++F,I!=null&&F<=T&&!(F%16)&&I(h,F);if(t(pt<=L),D&rt&&(_t=Ei(it,D,F)),nt!=null)for(;gt<pt;)St=g[gt++],nt.X[(506832829*St&4294967295)>>>nt.Mb]=St}else{if(!(St<xt))break t;for(Lt=St-280,t(nt!=null);gt<pt;)St=g[gt++],nt.X[(506832829*St&4294967295)>>>nt.Mb]=St;St=pt,t(!(Lt>>>(Ht=nt).Xa)),g[St]=Ht.X[Lt],Lt=!0}Lt||t(H.h==$(H))}if(h.Pb&&H.h&&pt<L)t(h.m.h),h.a=5,h.m=h.wd,h.$=h.xd,0<h.s.ua&&wt(h.s.vb,h.s.Wa);else{if(H.h)break t;I!=null&&I(h,F>T?T:F),h.a=0,h.$=pt-y}return 1}return h.a=3,0}function hr(h){t(h!=null),h.vc=null,h.yc=null,h.Ya=null;var g=h.Wa;g!=null&&(g.X=null),h.vb=null,t(h!=null)}function ls(){var h=new g1;return h==null?null:(h.a=0,h.xb=Cv,ar("Predictor","VP8LPredictors"),ar("Predictor","VP8LPredictors_C"),ar("PredictorAdd","VP8LPredictorsAdd"),ar("PredictorAdd","VP8LPredictorsAdd_C"),Lp=Ce,Jo=ie,Mn=qt,wn=on,Wa=ke,Yr=ks,Kr=Ge,B.VP8LMapColor32b=Gc,B.VP8LMapColor8b=Ep,h)}function ur(h,g,y,_,L){var T=1,I=[h],F=[g],D=_.m,H=_.s,it=null,pt=0;t:for(;;){if(y)for(;T&&ht(D,1);){var gt=I,lt=F,xt=_,bt=1,nt=xt.m,rt=xt.gc[xt.ab],_t=ht(nt,2);if(xt.Oc&1<<_t)T=0;else{switch(xt.Oc|=1<<_t,rt.hc=_t,rt.Ea=gt[0],rt.nc=lt[0],rt.K=[null],++xt.ab,t(4>=xt.ab),_t){case 0:case 1:rt.b=ht(nt,3)+2,bt=ur(Gt(rt.Ea,rt.b),Gt(rt.nc,rt.b),0,xt,rt.K),rt.K=rt.K[0];break;case 3:var Lt,St=ht(nt,8)+1,Ht=16<St?0:4<St?1:2<St?2:3;if(gt[0]=Gt(rt.Ea,Ht),rt.b=Ht,Lt=bt=ur(St,1,0,xt,rt.K)){var It,Jt=St,Ft=rt,Te=1<<(8>>Ft.b),Be=r(Te);if(Be==null)Lt=0;else{var Ee=Ft.K[0],we=Ft.w;for(Be[0]=Ft.K[0][0],It=1;It<1*Jt;++It)Be[It]=Pt(Ee[we+It],Be[It-1]);for(;It<4*Te;++It)Be[It]=0;Ft.K[0]=null,Ft.K[0]=Be,Lt=1}}bt=Lt;break;case 2:break;default:t(0)}T=bt}}if(I=I[0],F=F[0],T&&ht(D,1)&&!(T=1<=(pt=ht(D,4))&&11>=pt)){_.a=3;break t}var $e;if($e=T)e:{var Ve,fe,ki,Rn=_,Ni=I,Fn=F,je=pt,$n=y,Xn=Rn.m,Ui=Rn.s,tn=[null],_n=1,gs=0,gr=QA[je];i:for(;;){if($n&&ht(Xn,1)){var Wi=ht(Xn,3)+2,ta=Gt(Ni,Wi),il=Gt(Fn,Wi),Jc=ta*il;if(!ur(ta,il,0,Rn,tn))break i;for(tn=tn[0],Ui.xc=Wi,Ve=0;Ve<Jc;++Ve){var Ka=tn[Ve]>>8&65535;tn[Ve]=Ka,Ka>=_n&&(_n=Ka+1)}}if(Xn.h)break i;for(fe=0;5>fe;++fe){var di=xv[fe];!fe&&0<je&&(di+=1<<je),gs<di&&(gs=di)}var L1=a(_n*gr,N),Fv=_n,Ov=a(Fv,j);if(Ov==null)var jp=null;else t(65536>=Fv),jp=Ov;var Ku=r(gs);if(jp==null||Ku==null||L1==null){Rn.a=1;break i}var qp=L1;for(Ve=ki=0;Ve<_n;++Ve){var js=jp[Ve],Qc=js.G,Zc=js.H,Dv=0,zp=1,Bv=0;for(fe=0;5>fe;++fe){di=xv[fe],Qc[fe]=qp,Zc[fe]=ki,!fe&&0<je&&(di+=1<<je);s:{var Hp,C1=di,Vp=Rn,Ju=Ku,y_=qp,w_=ki,E1=0,Ja=Vp.m,A_=ht(Ja,1);if(s(Ju,0,0,C1),A_){var __=ht(Ja,1)+1,S_=ht(Ja,1),jv=ht(Ja,S_==0?1:8);Ju[jv]=1,__==2&&(Ju[jv=ht(Ja,8)]=1);var Up=1}else{var qv=r(19),zv=ht(Ja,4)+4;if(19<zv){Vp.a=3;var Wp=0;break s}for(Hp=0;Hp<zv;++Hp)qv[KA[Hp]]=ht(Ja,3);var P1=void 0,Qu=void 0,Hv=Vp,x_=qv,Gp=C1,Vv=Ju,k1=0,Qa=Hv.m,Uv=8,Wv=a(128,N);n:for(;P(Wv,0,7,x_,19);){if(ht(Qa,1)){var L_=2+2*ht(Qa,3);if((P1=2+ht(Qa,L_))>Gp)break n}else P1=Gp;for(Qu=0;Qu<Gp&&P1--;){Z(Qa);var Gv=Wv[0+(127&z(Qa))];K(Qa,Qa.u+Gv.g);var th=Gv.value;if(16>th)Vv[Qu++]=th,th!=0&&(Uv=th);else{var C_=th==16,$v=th-16,E_=XA[$v],Xv=ht(Qa,$A[$v])+E_;if(Qu+Xv>Gp)break n;for(var P_=C_?Uv:0;0<Xv--;)Vv[Qu++]=P_}}k1=1;break n}k1||(Hv.a=3),Up=k1}(Up=Up&&!Ja.h)&&(E1=P(y_,w_,8,Ju,C1)),Up&&E1!=0?Wp=E1:(Vp.a=3,Wp=0)}if(Wp==0)break i;if(zp&&YA[fe]==1&&(zp=qp[ki].g==0),Dv+=qp[ki].g,ki+=Wp,3>=fe){var Zu,N1=Ku[0];for(Zu=1;Zu<di;++Zu)Ku[Zu]>N1&&(N1=Ku[Zu]);Bv+=N1}}if(js.nd=zp,js.Qb=0,zp&&(js.qb=(Qc[3][Zc[3]+0].value<<24|Qc[1][Zc[1]+0].value<<16|Qc[2][Zc[2]+0].value)>>>0,Dv==0&&256>Qc[0][Zc[0]+0].value&&(js.Qb=1,js.qb+=Qc[0][Zc[0]+0].value<<8)),js.jc=!js.Qb&&6>Bv,js.jc){var $p,ea=js;for($p=0;$p<Zi;++$p){var Za=$p,to=ea.pd[Za],Xp=ea.G[0][ea.H[0]+Za];256<=Xp.value?(to.g=Xp.g+256,to.value=Xp.value):(to.g=0,to.value=0,Za>>=Ri(Xp,8,to),Za>>=Ri(ea.G[1][ea.H[1]+Za],16,to),Za>>=Ri(ea.G[2][ea.H[2]+Za],0,to),Ri(ea.G[3][ea.H[3]+Za],24,to))}}}Ui.vc=tn,Ui.Wb=_n,Ui.Ya=jp,Ui.yc=L1,$e=1;break e}$e=0}if(!(T=$e)){_.a=3;break t}if(0<pt){if(H.ua=1<<pt,!Zt(H.Wa,pt)){_.a=1,T=0;break t}}else H.ua=0;var T1=_,Yv=I,k_=F,I1=T1.s,M1=I1.xc;if(T1.c=Yv,T1.i=k_,I1.md=Gt(Yv,M1),I1.wc=M1==0?-1:(1<<M1)-1,y){_.xb=a_;break t}if((it=r(I*F))==null){_.a=1,T=0;break t}T=(T=Rs(_,it,0,I,F,F,null))&&!D.h;break t}return T?(L!=null?L[0]=it:(t(it==null),t(y)),_.$=0,y||hr(H)):hr(H),T}function Go(h,g){var y=h.c*h.i,_=y+g+16*g;return t(h.c<=g),h.V=r(_),h.V==null?(h.Ta=null,h.Ua=0,h.a=1,0):(h.Ta=h.V,h.Ua=h.Ba+y+g,1)}function Ec(h,g){var y=h.C,_=g-y,L=h.V,T=h.Ba+h.c*y;for(t(g<=h.l.o);0<_;){var I=16<_?16:_,F=h.l.ma,D=h.l.width,H=D*I,it=F.ca,pt=F.tb+D*y,gt=h.Ta,lt=h.Ua;Un(h,I,L,T),bi(gt,lt,it,pt,H),Is(F,y,y+I,it,pt,D),_-=I,L+=I*h.c,y+=I}t(y==g),h.C=h.Ma=g}function Pc(){this.ub=this.yd=this.td=this.Rb=0}function kc(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Nc(){this.Fb=this.Bb=this.Cb=0,this.Zb=r(4),this.Lb=r(4)}function rp(){this.Yb=function(){var h=[];return function g(y,_,L){for(var T=L[_],I=0;I<T&&(y.push(L.length>_+1?[]:0),!(L.length<_+1));I++)g(y[I],_+1,L)}(h,0,[3,11]),h}()}function Gm(){this.jb=r(3),this.Wc=o([4,8],rp),this.Xc=o([4,17],rp)}function $m(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new r(4),this.od=new r(4)}function Tc(){this.ld=this.La=this.dd=this.tc=0}function ap(){this.Na=this.la=0}function Xm(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function xu(){this.ad=r(384),this.Za=0,this.Ob=r(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ym(){this.uc=this.M=this.Nb=0,this.wa=Array(new Tc),this.Y=0,this.ya=Array(new xu),this.aa=0,this.l=new Ic}function op(){this.y=r(16),this.f=r(8),this.ea=r(8)}function Km(){this.cb=this.a=0,this.sc="",this.m=new At,this.Od=new Pc,this.Kc=new kc,this.ed=new $m,this.Qa=new Nc,this.Ic=this.$c=this.Aa=0,this.D=new Ym,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,At),this.ia=0,this.pb=a(4,Xm),this.Pa=new Gm,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new op),this.Hd=0,this.rb=Array(new ap),this.sb=0,this.wa=Array(new Tc),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new xu),this.L=this.aa=0,this.gd=o([4,2],Tc),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ic(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Jm(){var h=new Km;return h!=null&&(h.a=0,h.sc="OK",h.cb=0,h.Xb=0,Xu||(Xu=hp)),h}function mi(h,g,y){return h.a==0&&(h.a=g,h.sc=y,h.cb=0),0}function lp(h,g,y){return 3<=y&&h[g+0]==157&&h[g+1]==1&&h[g+2]==42}function cp(h,g){if(h==null)return 0;if(h.a=0,h.sc="OK",g==null)return mi(h,2,"null VP8Io passed to VP8GetHeaders()");var y=g.data,_=g.w,L=g.ha;if(4>L)return mi(h,7,"Truncated header.");var T=y[_+0]|y[_+1]<<8|y[_+2]<<16,I=h.Od;if(I.Rb=!(1&T),I.td=T>>1&7,I.yd=T>>4&1,I.ub=T>>5,3<I.td)return mi(h,3,"Incorrect keyframe parameters.");if(!I.yd)return mi(h,4,"Frame not displayable.");_+=3,L-=3;var F=h.Kc;if(I.Rb){if(7>L)return mi(h,7,"cannot parse picture header");if(!lp(y,_,L))return mi(h,3,"Bad code word");F.c=16383&(y[_+4]<<8|y[_+3]),F.Td=y[_+4]>>6,F.i=16383&(y[_+6]<<8|y[_+5]),F.Ud=y[_+6]>>6,_+=7,L-=7,h.za=F.c+15>>4,h.Ub=F.i+15>>4,g.width=F.c,g.height=F.i,g.Da=0,g.j=0,g.v=0,g.va=g.width,g.o=g.height,g.da=0,g.ib=g.width,g.hb=g.height,g.U=g.width,g.T=g.height,s((T=h.Pa).jb,0,255,T.jb.length),t((T=h.Qa)!=null),T.Cb=0,T.Bb=0,T.Fb=1,s(T.Zb,0,0,T.Zb.length),s(T.Lb,0,0,T.Lb)}if(I.ub>L)return mi(h,7,"bad partition length");J(T=h.m,y,_,I.ub),_+=I.ub,L-=I.ub,I.Rb&&(F.Ld=ft(T),F.Kd=ft(T)),F=h.Qa;var D,H=h.Pa;if(t(T!=null),t(F!=null),F.Cb=ft(T),F.Cb){if(F.Bb=ft(T),ft(T)){for(F.Fb=ft(T),D=0;4>D;++D)F.Zb[D]=ft(T)?st(T,7):0;for(D=0;4>D;++D)F.Lb[D]=ft(T)?st(T,6):0}if(F.Bb)for(D=0;3>D;++D)H.jb[D]=ft(T)?at(T,8):255}else F.Bb=0;if(T.Ka)return mi(h,3,"cannot parse segment header");if((F=h.ed).zd=ft(T),F.Tb=at(T,6),F.wb=at(T,3),F.Pc=ft(T),F.Pc&&ft(T)){for(H=0;4>H;++H)ft(T)&&(F.vd[H]=st(T,6));for(H=0;4>H;++H)ft(T)&&(F.od[H]=st(T,6))}if(h.L=F.Tb==0?0:F.zd?1:2,T.Ka)return mi(h,3,"cannot parse filter header");var it=L;if(L=D=_,_=D+it,F=it,h.Xb=(1<<at(h.m,2))-1,it<3*(H=h.Xb))y=7;else{for(D+=3*H,F-=3*H,it=0;it<H;++it){var pt=y[L+0]|y[L+1]<<8|y[L+2]<<16;pt>F&&(pt=F),J(h.Jc[+it],y,D,pt),D+=pt,F-=pt,L+=3}J(h.Jc[+H],y,D,F),y=D<_?0:5}if(y!=0)return mi(h,y,"cannot parse partitions");for(y=at(D=h.m,7),L=ft(D)?st(D,4):0,_=ft(D)?st(D,4):0,F=ft(D)?st(D,4):0,H=ft(D)?st(D,4):0,D=ft(D)?st(D,4):0,it=h.Qa,pt=0;4>pt;++pt){if(it.Cb){var gt=it.Zb[pt];it.Fb||(gt+=y)}else{if(0<pt){h.pb[pt]=h.pb[0];continue}gt=y}var lt=h.pb[pt];lt.Sc[0]=_1[Wn(gt+L,127)],lt.Sc[1]=S1[Wn(gt+0,127)],lt.Eb[0]=2*_1[Wn(gt+_,127)],lt.Eb[1]=101581*S1[Wn(gt+F,127)]>>16,8>lt.Eb[1]&&(lt.Eb[1]=8),lt.Qc[0]=_1[Wn(gt+H,117)],lt.Qc[1]=S1[Wn(gt+D,127)],lt.lc=gt+D}if(!I.Rb)return mi(h,4,"Not a key frame.");for(ft(T),I=h.Pa,y=0;4>y;++y){for(L=0;8>L;++L)for(_=0;3>_;++_)for(F=0;11>F;++F)H=mt(T,s_[y][L][_][F])?at(T,8):i_[y][L][_][F],I.Wc[y][L].Yb[_][F]=H;for(L=0;17>L;++L)I.Xc[y][L]=I.Wc[y][r_[L]]}return h.kc=ft(T),h.kc&&(h.Bd=at(T,8)),h.cb=1}function hp(h,g,y,_,L,T,I){var F=g[L].Yb[y];for(y=0;16>L;++L){if(!mt(h,F[y+0]))return L;for(;!mt(h,F[y+1]);)if(F=g[++L].Yb[0],y=0,L==16)return 16;var D=g[L+1].Yb;if(mt(h,F[y+2])){var H=h,it=0;if(mt(H,(gt=F)[(pt=y)+3]))if(mt(H,gt[pt+6])){for(F=0,pt=2*(it=mt(H,gt[pt+8]))+(gt=mt(H,gt[pt+9+it])),it=0,gt=t_[pt];gt[F];++F)it+=it+mt(H,gt[F]);it+=3+(8<<pt)}else mt(H,gt[pt+7])?(it=7+2*mt(H,165),it+=mt(H,145)):it=5+mt(H,159);else it=mt(H,gt[pt+4])?3+mt(H,gt[pt+5]):2;F=D[2]}else it=1,F=D[1];D=I+e_[L],0>(H=h).b&&ot(H);var pt,gt=H.b,lt=(pt=H.Ca>>1)-(H.I>>gt)>>31;--H.b,H.Ca+=lt,H.Ca|=1,H.I-=(pt+1&lt)<<gt,T[D]=((it^lt)-lt)*_[(0<L)+0]}return 16}function Lu(h){var g=h.rb[h.sb-1];g.la=0,g.Na=0,s(h.zc,0,0,h.zc.length),h.ja=0}function Qm(h,g){if(h==null)return 0;if(g==null)return mi(h,2,"NULL VP8Io parameter in VP8Decode().");if(!h.cb&&!cp(h,g))return 0;if(t(h.cb),g.ac==null||g.ac(g)){g.ob&&(h.L=0);var y=Bp[h.L];if(h.L==2?(h.yb=0,h.zb=0):(h.yb=g.v-y>>4,h.zb=g.j-y>>4,0>h.yb&&(h.yb=0),0>h.zb&&(h.zb=0)),h.Va=g.o+15+y>>4,h.Hb=g.va+15+y>>4,h.Hb>h.za&&(h.Hb=h.za),h.Va>h.Ub&&(h.Va=h.Ub),0<h.L){var _=h.ed;for(y=0;4>y;++y){var L;if(h.Qa.Cb){var T=h.Qa.Lb[y];h.Qa.Fb||(T+=_.Tb)}else T=_.Tb;for(L=0;1>=L;++L){var I=h.gd[y][L],F=T;if(_.Pc&&(F+=_.vd[0],L&&(F+=_.od[0])),0<(F=0>F?0:63<F?63:F)){var D=F;0<_.wb&&(D=4<_.wb?D>>2:D>>1)>9-_.wb&&(D=9-_.wb),1>D&&(D=1),I.dd=D,I.tc=2*F+D,I.ld=40<=F?2:15<=F?1:0}else I.tc=0;I.La=L}}}y=0}else mi(h,6,"Frame setup failed"),y=h.a;if(y=y==0){if(y){h.$c=0,0<h.Aa||(h.Ic=b_);t:{y=h.Ic,_=4*(D=h.za);var H=32*D,it=D+1,pt=0<h.L?D*(0<h.Aa?2:1):0,gt=(h.Aa==2?2:1)*D;if((I=_+832+(L=3*(16*y+Bp[h.L])/2*H)+(T=h.Fa!=null&&0<h.Fa.length?h.Kc.c*h.Kc.i:0))!=I)y=0;else{if(I>h.Vb){if(h.Vb=0,h.Ec=r(I),h.Fc=0,h.Ec==null){y=mi(h,1,"no memory during frame initialization.");break t}h.Vb=I}I=h.Ec,F=h.Fc,h.Ac=I,h.Bc=F,F+=_,h.Gd=a(H,op),h.Hd=0,h.rb=a(it+1,ap),h.sb=1,h.wa=pt?a(pt,Tc):null,h.Y=0,h.D.Nb=0,h.D.wa=h.wa,h.D.Y=h.Y,0<h.Aa&&(h.D.Y+=D),t(!0),h.oc=I,h.pc=F,F+=832,h.ya=a(gt,xu),h.aa=0,h.D.ya=h.ya,h.D.aa=h.aa,h.Aa==2&&(h.D.aa+=D),h.R=16*D,h.B=8*D,D=(H=Bp[h.L])*h.R,H=H/2*h.B,h.sa=I,h.ta=F+D,h.qa=h.sa,h.ra=h.ta+16*y*h.R+H,h.Ha=h.qa,h.Ia=h.ra+8*y*h.B+H,h.$c=0,F+=L,h.mb=T?I:null,h.nb=T?F:null,t(F+T<=h.Fc+h.Vb),Lu(h),s(h.Ac,h.Bc,0,_),y=1}}if(y){if(g.ka=0,g.y=h.sa,g.O=h.ta,g.f=h.qa,g.N=h.ra,g.ea=h.Ha,g.Vd=h.Ia,g.fa=h.R,g.Rc=h.B,g.F=null,g.J=0,!kp){for(y=-255;255>=y;++y)Fi[255+y]=0>y?-y:y;for(y=-1020;1020>=y;++y)Qr[1020+y]=-128>y?-128:127<y?127:y;for(y=-112;112>=y;++y)$u[112+y]=-16>y?-16:15<y?15:y;for(y=-255;510>=y;++y)Kc[255+y]=0>y?0:255<y?255:y;kp=1}$c=e1,Jr=Zm,Uu=dp,An=t1,hs=fp,vi=up,Xc=Tu,Pp=Yo,Wu=p1,Qo=Iu,Zo=f1,Ga=Bc,tl=Mu,Yc=_p,el=Ap,$a=fr,Gu=Xr,us=d1,Bs[0]=dr,Bs[1]=i1,Bs[2]=a1,Bs[3]=o1,Bs[4]=mp,Bs[5]=Oc,Bs[6]=vp,Bs[7]=Pu,Bs[8]=c1,Bs[9]=l1,Xa[0]=pp,Xa[1]=s1,Xa[2]=$r,Xa[3]=Rc,Xa[4]=ln,Xa[5]=r1,Xa[6]=gp,Zr[0]=za,Zr[1]=n1,Zr[2]=h1,Zr[3]=ku,Zr[4]=Xo,Zr[5]=u1,Zr[6]=Nu,y=1}else y=0}y&&(y=function(lt,xt){for(lt.M=0;lt.M<lt.Va;++lt.M){var bt,nt=lt.Jc[lt.M&lt.Xb],rt=lt.m,_t=lt;for(bt=0;bt<_t.za;++bt){var Lt=rt,St=_t,Ht=St.Ac,It=St.Bc+4*bt,Jt=St.zc,Ft=St.ya[St.aa+bt];if(St.Qa.Bb?Ft.$b=mt(Lt,St.Pa.jb[0])?2+mt(Lt,St.Pa.jb[2]):mt(Lt,St.Pa.jb[1]):Ft.$b=0,St.kc&&(Ft.Ad=mt(Lt,St.Bd)),Ft.Za=!mt(Lt,145)+0,Ft.Za){var Te=Ft.Ob,Be=0;for(St=0;4>St;++St){var Ee,we=Jt[0+St];for(Ee=0;4>Ee;++Ee){we=n_[Ht[It+Ee]][we];for(var $e=Lv[mt(Lt,we[0])];0<$e;)$e=Lv[2*$e+mt(Lt,we[$e])];we=-$e,Ht[It+Ee]=we}i(Te,Be,Ht,It,4),Be+=4,Jt[0+St]=we}}else we=mt(Lt,156)?mt(Lt,128)?1:3:mt(Lt,163)?2:0,Ft.Ob[0]=we,s(Ht,It,we,4),s(Jt,0,we,4);Ft.Dd=mt(Lt,142)?mt(Lt,114)?mt(Lt,183)?1:3:2:0}if(_t.m.Ka)return mi(lt,7,"Premature end-of-partition0 encountered.");for(;lt.ja<lt.za;++lt.ja){if(_t=nt,Lt=(rt=lt).rb[rt.sb-1],Ht=rt.rb[rt.sb+rt.ja],bt=rt.ya[rt.aa+rt.ja],It=rt.kc?bt.Ad:0)Lt.la=Ht.la=0,bt.Za||(Lt.Na=Ht.Na=0),bt.Hc=0,bt.Gc=0,bt.ia=0;else{var Ve,fe;if(Lt=Ht,Ht=_t,It=rt.Pa.Xc,Jt=rt.ya[rt.aa+rt.ja],Ft=rt.pb[Jt.$b],St=Jt.ad,Te=0,Be=rt.rb[rt.sb-1],we=Ee=0,s(St,Te,0,384),Jt.Za)var ki=0,Rn=It[3];else{$e=r(16);var Ni=Lt.Na+Be.Na;if(Ni=Xu(Ht,It[1],Ni,Ft.Eb,0,$e,0),Lt.Na=Be.Na=(0<Ni)+0,1<Ni)$c($e,0,St,Te);else{var Fn=$e[0]+3>>3;for($e=0;256>$e;$e+=16)St[Te+$e]=Fn}ki=1,Rn=It[0]}var je=15&Lt.la,$n=15&Be.la;for($e=0;4>$e;++$e){var Xn=1&$n;for(Fn=fe=0;4>Fn;++Fn)je=je>>1|(Xn=(Ni=Xu(Ht,Rn,Ni=Xn+(1&je),Ft.Sc,ki,St,Te))>ki)<<7,fe=fe<<2|(3<Ni?3:1<Ni?2:St[Te+0]!=0),Te+=16;je>>=4,$n=$n>>1|Xn<<7,Ee=(Ee<<8|fe)>>>0}for(Rn=je,ki=$n>>4,Ve=0;4>Ve;Ve+=2){for(fe=0,je=Lt.la>>4+Ve,$n=Be.la>>4+Ve,$e=0;2>$e;++$e){for(Xn=1&$n,Fn=0;2>Fn;++Fn)Ni=Xn+(1&je),je=je>>1|(Xn=0<(Ni=Xu(Ht,It[2],Ni,Ft.Qc,0,St,Te)))<<3,fe=fe<<2|(3<Ni?3:1<Ni?2:St[Te+0]!=0),Te+=16;je>>=2,$n=$n>>1|Xn<<5}we|=fe<<4*Ve,Rn|=je<<4<<Ve,ki|=(240&$n)<<Ve}Lt.la=Rn,Be.la=ki,Jt.Hc=Ee,Jt.Gc=we,Jt.ia=43690&we?0:Ft.ia,It=!(Ee|we)}if(0<rt.L&&(rt.wa[rt.Y+rt.ja]=rt.gd[bt.$b][bt.Za],rt.wa[rt.Y+rt.ja].La|=!It),_t.Ka)return mi(lt,7,"Premature end-of-file encountered.")}if(Lu(lt),rt=xt,_t=1,bt=(nt=lt).D,Lt=0<nt.L&&nt.M>=nt.zb&&nt.M<=nt.Va,nt.Aa==0)t:{if(bt.M=nt.M,bt.uc=Lt,ju(nt,bt),_t=1,bt=(fe=nt.D).Nb,Lt=(we=Bp[nt.L])*nt.R,Ht=we/2*nt.B,$e=16*bt*nt.R,Fn=8*bt*nt.B,It=nt.sa,Jt=nt.ta-Lt+$e,Ft=nt.qa,St=nt.ra-Ht+Fn,Te=nt.Ha,Be=nt.Ia-Ht+Fn,$n=(je=fe.M)==0,Ee=je>=nt.Va-1,nt.Aa==2&&ju(nt,fe),fe.uc)for(Xn=(Ni=nt).D.M,t(Ni.D.uc),fe=Ni.yb;fe<Ni.Hb;++fe){ki=fe,Rn=Xn;var Ui=(tn=(di=Ni).D).Nb;Ve=di.R;var tn=tn.wa[tn.Y+ki],_n=di.sa,gs=di.ta+16*Ui*Ve+16*ki,gr=tn.dd,Wi=tn.tc;if(Wi!=0)if(t(3<=Wi),di.L==1)0<ki&&$a(_n,gs,Ve,Wi+4),tn.La&&us(_n,gs,Ve,Wi),0<Rn&&el(_n,gs,Ve,Wi+4),tn.La&&Gu(_n,gs,Ve,Wi);else{var ta=di.B,il=di.qa,Jc=di.ra+8*Ui*ta+8*ki,Ka=di.Ha,di=di.Ia+8*Ui*ta+8*ki;Ui=tn.ld,0<ki&&(Pp(_n,gs,Ve,Wi+4,gr,Ui),Qo(il,Jc,Ka,di,ta,Wi+4,gr,Ui)),tn.La&&(Ga(_n,gs,Ve,Wi,gr,Ui),Yc(il,Jc,Ka,di,ta,Wi,gr,Ui)),0<Rn&&(Xc(_n,gs,Ve,Wi+4,gr,Ui),Wu(il,Jc,Ka,di,ta,Wi+4,gr,Ui)),tn.La&&(Zo(_n,gs,Ve,Wi,gr,Ui),tl(il,Jc,Ka,di,ta,Wi,gr,Ui))}}if(nt.ia&&alert("todo:DitherRow"),rt.put!=null){if(fe=16*je,je=16*(je+1),$n?(rt.y=nt.sa,rt.O=nt.ta+$e,rt.f=nt.qa,rt.N=nt.ra+Fn,rt.ea=nt.Ha,rt.W=nt.Ia+Fn):(fe-=we,rt.y=It,rt.O=Jt,rt.f=Ft,rt.N=St,rt.ea=Te,rt.W=Be),Ee||(je-=we),je>rt.o&&(je=rt.o),rt.F=null,rt.J=null,nt.Fa!=null&&0<nt.Fa.length&&fe<je&&(rt.J=Du(nt,rt,fe,je-fe),rt.F=nt.mb,rt.F==null&&rt.F.length==0)){_t=mi(nt,3,"Could not decode alpha data.");break t}fe<rt.j&&(we=rt.j-fe,fe=rt.j,t(!(1&we)),rt.O+=nt.R*we,rt.N+=nt.B*(we>>1),rt.W+=nt.B*(we>>1),rt.F!=null&&(rt.J+=rt.width*we)),fe<je&&(rt.O+=rt.v,rt.N+=rt.v>>1,rt.W+=rt.v>>1,rt.F!=null&&(rt.J+=rt.v),rt.ka=fe-rt.j,rt.U=rt.va-rt.v,rt.T=je-fe,_t=rt.put(rt))}bt+1!=nt.Ic||Ee||(i(nt.sa,nt.ta-Lt,It,Jt+16*nt.R,Lt),i(nt.qa,nt.ra-Ht,Ft,St+8*nt.B,Ht),i(nt.Ha,nt.Ia-Ht,Te,Be+8*nt.B,Ht))}if(!_t)return mi(lt,6,"Output aborted.")}return 1}(h,g)),g.bc!=null&&g.bc(g),y&=1}return y?(h.cb=0,y):0}function Fs(h,g,y,_,L){L=h[g+y+32*_]+(L>>3),h[g+y+32*_]=-256&L?0>L?0:255:L}function Mc(h,g,y,_,L,T){Fs(h,g,0,y,_+L),Fs(h,g,1,y,_+T),Fs(h,g,2,y,_-T),Fs(h,g,3,y,_-L)}function Tn(h){return(20091*h>>16)+h}function Cu(h,g,y,_){var L,T=0,I=r(16);for(L=0;4>L;++L){var F=h[g+0]+h[g+8],D=h[g+0]-h[g+8],H=(35468*h[g+4]>>16)-Tn(h[g+12]),it=Tn(h[g+4])+(35468*h[g+12]>>16);I[T+0]=F+it,I[T+1]=D+H,I[T+2]=D-H,I[T+3]=F-it,T+=4,g++}for(L=T=0;4>L;++L)F=(h=I[T+0]+4)+I[T+8],D=h-I[T+8],H=(35468*I[T+4]>>16)-Tn(I[T+12]),Fs(y,_,0,0,F+(it=Tn(I[T+4])+(35468*I[T+12]>>16))),Fs(y,_,1,0,D+H),Fs(y,_,2,0,D-H),Fs(y,_,3,0,F-it),T++,_+=32}function up(h,g,y,_){var L=h[g+0]+4,T=35468*h[g+4]>>16,I=Tn(h[g+4]),F=35468*h[g+1]>>16;Mc(y,_,0,L+I,h=Tn(h[g+1]),F),Mc(y,_,1,L+T,h,F),Mc(y,_,2,L-T,h,F),Mc(y,_,3,L-I,h,F)}function Zm(h,g,y,_,L){Cu(h,g,y,_),L&&Cu(h,g+16,y,_+4)}function dp(h,g,y,_){Jr(h,g+0,y,_,1),Jr(h,g+32,y,_+128,1)}function t1(h,g,y,_){var L;for(h=h[g+0]+4,L=0;4>L;++L)for(g=0;4>g;++g)Fs(y,_,g,L,h)}function fp(h,g,y,_){h[g+0]&&An(h,g+0,y,_),h[g+16]&&An(h,g+16,y,_+4),h[g+32]&&An(h,g+32,y,_+128),h[g+48]&&An(h,g+48,y,_+128+4)}function e1(h,g,y,_){var L,T=r(16);for(L=0;4>L;++L){var I=h[g+0+L]+h[g+12+L],F=h[g+4+L]+h[g+8+L],D=h[g+4+L]-h[g+8+L],H=h[g+0+L]-h[g+12+L];T[0+L]=I+F,T[8+L]=I-F,T[4+L]=H+D,T[12+L]=H-D}for(L=0;4>L;++L)I=(h=T[0+4*L]+3)+T[3+4*L],F=T[1+4*L]+T[2+4*L],D=T[1+4*L]-T[2+4*L],H=h-T[3+4*L],y[_+0]=I+F>>3,y[_+16]=H+D>>3,y[_+32]=I-F>>3,y[_+48]=H-D>>3,_+=64}function Eu(h,g,y){var _,L=g-32,T=Gn,I=255-h[L-1];for(_=0;_<y;++_){var F,D=T,H=I+h[g-1];for(F=0;F<y;++F)h[g+F]=D[H+h[L+F]];g+=32}}function i1(h,g){Eu(h,g,4)}function n1(h,g){Eu(h,g,8)}function s1(h,g){Eu(h,g,16)}function $r(h,g){var y;for(y=0;16>y;++y)i(h,g+32*y,h,g-32,16)}function Rc(h,g){var y;for(y=16;0<y;--y)s(h,g,h[g-1],16),g+=32}function Fc(h,g,y){var _;for(_=0;16>_;++_)s(g,y+32*_,h,16)}function pp(h,g){var y,_=16;for(y=0;16>y;++y)_+=h[g-1+32*y]+h[g+y-32];Fc(_>>5,h,g)}function ln(h,g){var y,_=8;for(y=0;16>y;++y)_+=h[g-1+32*y];Fc(_>>4,h,g)}function r1(h,g){var y,_=8;for(y=0;16>y;++y)_+=h[g+y-32];Fc(_>>4,h,g)}function gp(h,g){Fc(128,h,g)}function ne(h,g,y){return h+2*g+y+2>>2}function a1(h,g){var y,_=g-32;for(_=new Uint8Array([ne(h[_-1],h[_+0],h[_+1]),ne(h[_+0],h[_+1],h[_+2]),ne(h[_+1],h[_+2],h[_+3]),ne(h[_+2],h[_+3],h[_+4])]),y=0;4>y;++y)i(h,g+32*y,_,0,_.length)}function o1(h,g){var y=h[g-1],_=h[g-1+32],L=h[g-1+64],T=h[g-1+96];Nt(h,g+0,16843009*ne(h[g-1-32],y,_)),Nt(h,g+32,16843009*ne(y,_,L)),Nt(h,g+64,16843009*ne(_,L,T)),Nt(h,g+96,16843009*ne(L,T,T))}function dr(h,g){var y,_=4;for(y=0;4>y;++y)_+=h[g+y-32]+h[g-1+32*y];for(_>>=3,y=0;4>y;++y)s(h,g+32*y,_,4)}function mp(h,g){var y=h[g-1+0],_=h[g-1+32],L=h[g-1+64],T=h[g-1-32],I=h[g+0-32],F=h[g+1-32],D=h[g+2-32],H=h[g+3-32];h[g+0+96]=ne(_,L,h[g-1+96]),h[g+1+96]=h[g+0+64]=ne(y,_,L),h[g+2+96]=h[g+1+64]=h[g+0+32]=ne(T,y,_),h[g+3+96]=h[g+2+64]=h[g+1+32]=h[g+0+0]=ne(I,T,y),h[g+3+64]=h[g+2+32]=h[g+1+0]=ne(F,I,T),h[g+3+32]=h[g+2+0]=ne(D,F,I),h[g+3+0]=ne(H,D,F)}function vp(h,g){var y=h[g+1-32],_=h[g+2-32],L=h[g+3-32],T=h[g+4-32],I=h[g+5-32],F=h[g+6-32],D=h[g+7-32];h[g+0+0]=ne(h[g+0-32],y,_),h[g+1+0]=h[g+0+32]=ne(y,_,L),h[g+2+0]=h[g+1+32]=h[g+0+64]=ne(_,L,T),h[g+3+0]=h[g+2+32]=h[g+1+64]=h[g+0+96]=ne(L,T,I),h[g+3+32]=h[g+2+64]=h[g+1+96]=ne(T,I,F),h[g+3+64]=h[g+2+96]=ne(I,F,D),h[g+3+96]=ne(F,D,D)}function Oc(h,g){var y=h[g-1+0],_=h[g-1+32],L=h[g-1+64],T=h[g-1-32],I=h[g+0-32],F=h[g+1-32],D=h[g+2-32],H=h[g+3-32];h[g+0+0]=h[g+1+64]=T+I+1>>1,h[g+1+0]=h[g+2+64]=I+F+1>>1,h[g+2+0]=h[g+3+64]=F+D+1>>1,h[g+3+0]=D+H+1>>1,h[g+0+96]=ne(L,_,y),h[g+0+64]=ne(_,y,T),h[g+0+32]=h[g+1+96]=ne(y,T,I),h[g+1+32]=h[g+2+96]=ne(T,I,F),h[g+2+32]=h[g+3+96]=ne(I,F,D),h[g+3+32]=ne(F,D,H)}function Pu(h,g){var y=h[g+0-32],_=h[g+1-32],L=h[g+2-32],T=h[g+3-32],I=h[g+4-32],F=h[g+5-32],D=h[g+6-32],H=h[g+7-32];h[g+0+0]=y+_+1>>1,h[g+1+0]=h[g+0+64]=_+L+1>>1,h[g+2+0]=h[g+1+64]=L+T+1>>1,h[g+3+0]=h[g+2+64]=T+I+1>>1,h[g+0+32]=ne(y,_,L),h[g+1+32]=h[g+0+96]=ne(_,L,T),h[g+2+32]=h[g+1+96]=ne(L,T,I),h[g+3+32]=h[g+2+96]=ne(T,I,F),h[g+3+64]=ne(I,F,D),h[g+3+96]=ne(F,D,H)}function l1(h,g){var y=h[g-1+0],_=h[g-1+32],L=h[g-1+64],T=h[g-1+96];h[g+0+0]=y+_+1>>1,h[g+2+0]=h[g+0+32]=_+L+1>>1,h[g+2+32]=h[g+0+64]=L+T+1>>1,h[g+1+0]=ne(y,_,L),h[g+3+0]=h[g+1+32]=ne(_,L,T),h[g+3+32]=h[g+1+64]=ne(L,T,T),h[g+3+64]=h[g+2+64]=h[g+0+96]=h[g+1+96]=h[g+2+96]=h[g+3+96]=T}function c1(h,g){var y=h[g-1+0],_=h[g-1+32],L=h[g-1+64],T=h[g-1+96],I=h[g-1-32],F=h[g+0-32],D=h[g+1-32],H=h[g+2-32];h[g+0+0]=h[g+2+32]=y+I+1>>1,h[g+0+32]=h[g+2+64]=_+y+1>>1,h[g+0+64]=h[g+2+96]=L+_+1>>1,h[g+0+96]=T+L+1>>1,h[g+3+0]=ne(F,D,H),h[g+2+0]=ne(I,F,D),h[g+1+0]=h[g+3+32]=ne(y,I,F),h[g+1+32]=h[g+3+64]=ne(_,y,I),h[g+1+64]=h[g+3+96]=ne(L,_,y),h[g+1+96]=ne(T,L,_)}function h1(h,g){var y;for(y=0;8>y;++y)i(h,g+32*y,h,g-32,8)}function ku(h,g){var y;for(y=0;8>y;++y)s(h,g,h[g-1],8),g+=32}function $o(h,g,y){var _;for(_=0;8>_;++_)s(g,y+32*_,h,8)}function za(h,g){var y,_=8;for(y=0;8>y;++y)_+=h[g+y-32]+h[g-1+32*y];$o(_>>4,h,g)}function u1(h,g){var y,_=4;for(y=0;8>y;++y)_+=h[g+y-32];$o(_>>3,h,g)}function Xo(h,g){var y,_=4;for(y=0;8>y;++y)_+=h[g-1+32*y];$o(_>>3,h,g)}function Nu(h,g){$o(128,h,g)}function Dc(h,g,y){var _=h[g-y],L=h[g+0],T=3*(L-_)+v1[1020+h[g-2*y]-h[g+y]],I=Np[112+(T+4>>3)];h[g-y]=Gn[255+_+Np[112+(T+3>>3)]],h[g+0]=Gn[255+L-I]}function bp(h,g,y,_){var L=h[g+0],T=h[g+y];return fs[255+h[g-2*y]-h[g-y]]>_||fs[255+T-L]>_}function yp(h,g,y,_){return 4*fs[255+h[g-y]-h[g+0]]+fs[255+h[g-2*y]-h[g+y]]<=_}function wp(h,g,y,_,L){var T=h[g-3*y],I=h[g-2*y],F=h[g-y],D=h[g+0],H=h[g+y],it=h[g+2*y],pt=h[g+3*y];return 4*fs[255+F-D]+fs[255+I-H]>_?0:fs[255+h[g-4*y]-T]<=L&&fs[255+T-I]<=L&&fs[255+I-F]<=L&&fs[255+pt-it]<=L&&fs[255+it-H]<=L&&fs[255+H-D]<=L}function Ap(h,g,y,_){var L=2*_+1;for(_=0;16>_;++_)yp(h,g+_,y,L)&&Dc(h,g+_,y)}function fr(h,g,y,_){var L=2*_+1;for(_=0;16>_;++_)yp(h,g+_*y,1,L)&&Dc(h,g+_*y,1)}function Xr(h,g,y,_){var L;for(L=3;0<L;--L)Ap(h,g+=4*y,y,_)}function d1(h,g,y,_){var L;for(L=3;0<L;--L)fr(h,g+=4,y,_)}function Ha(h,g,y,_,L,T,I,F){for(T=2*T+1;0<L--;){if(wp(h,g,y,T,I))if(bp(h,g,y,F))Dc(h,g,y);else{var D=h,H=g,it=y,pt=D[H-2*it],gt=D[H-it],lt=D[H+0],xt=D[H+it],bt=D[H+2*it],nt=27*(_t=v1[1020+3*(lt-gt)+v1[1020+pt-xt]])+63>>7,rt=18*_t+63>>7,_t=9*_t+63>>7;D[H-3*it]=Gn[255+D[H-3*it]+_t],D[H-2*it]=Gn[255+pt+rt],D[H-it]=Gn[255+gt+nt],D[H+0]=Gn[255+lt-nt],D[H+it]=Gn[255+xt-rt],D[H+2*it]=Gn[255+bt-_t]}g+=_}}function Os(h,g,y,_,L,T,I,F){for(T=2*T+1;0<L--;){if(wp(h,g,y,T,I))if(bp(h,g,y,F))Dc(h,g,y);else{var D=h,H=g,it=y,pt=D[H-it],gt=D[H+0],lt=D[H+it],xt=Np[112+((bt=3*(gt-pt))+4>>3)],bt=Np[112+(bt+3>>3)],nt=xt+1>>1;D[H-2*it]=Gn[255+D[H-2*it]+nt],D[H-it]=Gn[255+pt+bt],D[H+0]=Gn[255+gt-xt],D[H+it]=Gn[255+lt-nt]}g+=_}}function Tu(h,g,y,_,L,T){Ha(h,g,y,1,16,_,L,T)}function Yo(h,g,y,_,L,T){Ha(h,g,1,y,16,_,L,T)}function f1(h,g,y,_,L,T){var I;for(I=3;0<I;--I)Os(h,g+=4*y,y,1,16,_,L,T)}function Bc(h,g,y,_,L,T){var I;for(I=3;0<I;--I)Os(h,g+=4,1,y,16,_,L,T)}function p1(h,g,y,_,L,T,I,F){Ha(h,g,L,1,8,T,I,F),Ha(y,_,L,1,8,T,I,F)}function Iu(h,g,y,_,L,T,I,F){Ha(h,g,1,L,8,T,I,F),Ha(y,_,1,L,8,T,I,F)}function Mu(h,g,y,_,L,T,I,F){Os(h,g+4*L,L,1,8,T,I,F),Os(y,_+4*L,L,1,8,T,I,F)}function _p(h,g,y,_,L,T,I,F){Os(h,g+4,1,L,8,T,I,F),Os(y,_+4,1,L,8,T,I,F)}function jc(){this.ba=new Ns,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new hi,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ru(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Fu(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Sp(){this.ua=0,this.Wa=new Y,this.vb=new Y,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new j,this.yc=new N}function g1(){this.xb=this.a=0,this.l=new Ic,this.ca=new Ns,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new E,this.Pb=0,this.wd=new E,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Sp,this.ab=0,this.gc=a(4,Fu),this.Oc=0}function qc(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ic,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Ko(h,g,y,_,L,T,I){for(h=h==null?0:h[g+0],g=0;g<I;++g)L[T+g]=h+y[_+g]&255,h=L[T+g]}function Ou(h,g,y,_,L,T,I){var F;if(h==null)Ko(null,null,y,_,L,T,I);else for(F=0;F<I;++F)L[T+F]=h[g+F]+y[_+F]&255}function Va(h,g,y,_,L,T,I){if(h==null)Ko(null,null,y,_,L,T,I);else{var F,D=h[g+0],H=D,it=D;for(F=0;F<I;++F)H=it+(D=h[g+F])-H,it=y[_+F]+(-256&H?0>H?0:255:H)&255,H=D,L[T+F]=it}}function Du(h,g,y,_){var L=g.width,T=g.o;if(t(h!=null&&g!=null),0>y||0>=_||y+_>T)return null;if(!h.Cc){if(h.ga==null){var I;if(h.ga=new qc,(I=h.ga==null)||(I=g.width*g.o,t(h.Gb.length==0),h.Gb=r(I),h.Uc=0,h.Gb==null?I=0:(h.mb=h.Gb,h.nb=h.Uc,h.rc=null,I=1),I=!I),!I){I=h.ga;var F=h.Fa,D=h.P,H=h.qc,it=h.mb,pt=h.nb,gt=D+1,lt=H-1,xt=I.l;if(t(F!=null&&it!=null&&g!=null),Ya[0]=null,Ya[1]=Ko,Ya[2]=Ou,Ya[3]=Va,I.ca=it,I.tb=pt,I.c=g.width,I.i=g.height,t(0<I.c&&0<I.i),1>=H)g=0;else if(I.$a=F[D+0]>>0&3,I.Z=F[D+0]>>2&3,I.Lc=F[D+0]>>4&3,D=F[D+0]>>6&3,0>I.$a||1<I.$a||4<=I.Z||1<I.Lc||D)g=0;else if(xt.put=or,xt.ac=Qi,xt.bc=lr,xt.ma=I,xt.width=g.width,xt.height=g.height,xt.Da=g.Da,xt.v=g.v,xt.va=g.va,xt.j=g.j,xt.o=g.o,I.$a)t:{t(I.$a==1),g=ls();e:for(;;){if(g==null){g=0;break t}if(t(I!=null),I.mc=g,g.c=I.c,g.i=I.i,g.l=I.l,g.l.ma=I,g.l.width=I.c,g.l.height=I.i,g.a=0,tt(g.m,F,gt,lt),!ur(I.c,I.i,1,g,null)||(g.ab==1&&g.gc[0].hc==3&&Gr(g.s)?(I.ic=1,F=g.c*g.i,g.Ta=null,g.Ua=0,g.V=r(F),g.Ba=0,g.V==null?(g.a=1,g=0):g=1):(I.ic=0,g=Go(g,I.c)),!g))break e;g=1;break t}I.mc=null,g=0}else g=lt>=I.c*I.i;I=!g}if(I)return null;h.ga.Lc!=1?h.Ga=0:_=T-y}t(h.ga!=null),t(y+_<=T);t:{if(g=(F=h.ga).c,T=F.l.o,F.$a==0){if(gt=h.rc,lt=h.Vc,xt=h.Fa,D=h.P+1+y*g,H=h.mb,it=h.nb+y*g,t(D<=h.P+h.qc),F.Z!=0)for(t(Ya[F.Z]!=null),I=0;I<_;++I)Ya[F.Z](gt,lt,xt,D,H,it,g),gt=H,lt=it,it+=g,D+=g;else for(I=0;I<_;++I)i(H,it,xt,D,g),gt=H,lt=it,it+=g,D+=g;h.rc=gt,h.Vc=lt}else{if(t(F.mc!=null),g=y+_,t((I=F.mc)!=null),t(g<=I.i),I.C>=g)g=1;else if(F.ic||ut(),F.ic){F=I.V,gt=I.Ba,lt=I.c;var bt=I.i,nt=(xt=1,D=I.$/lt,H=I.$%lt,it=I.m,pt=I.s,I.$),rt=lt*bt,_t=lt*g,Lt=pt.wc,St=nt<_t?Ei(pt,H,D):null;t(nt<=rt),t(g<=bt),t(Gr(pt));e:for(;;){for(;!it.h&&nt<_t;){if(H&Lt||(St=Ei(pt,H,D)),t(St!=null),Z(it),256>(bt=Nn(St.G[0],St.H[0],it)))F[gt+nt]=bt,++nt,++H>=lt&&(H=0,++D<=g&&!(D%16)&&Ms(I,D));else{if(!(280>bt)){xt=0;break e}bt=Ts(bt-256,it);var Ht,It=Nn(St.G[4],St.H[4],it);if(Z(it),!(nt>=(It=cr(lt,It=Ts(It,it)))&&rt-nt>=bt)){xt=0;break e}for(Ht=0;Ht<bt;++Ht)F[gt+nt+Ht]=F[gt+nt+Ht-It];for(nt+=bt,H+=bt;H>=lt;)H-=lt,++D<=g&&!(D%16)&&Ms(I,D);nt<_t&&H&Lt&&(St=Ei(pt,H,D))}t(it.h==$(it))}Ms(I,D>g?g:D);break e}!xt||it.h&&nt<rt?(xt=0,I.a=it.h?5:3):I.$=nt,g=xt}else g=Rs(I,I.V,I.Ba,I.c,I.i,g,Ec);if(!g){_=0;break t}}y+_>=T&&(h.Cc=1),_=1}if(!_)return null;if(h.Cc&&((_=h.ga)!=null&&(_.mc=null),h.ga=null,0<h.Ga))return alert("todo:WebPDequantizeLevels"),null}return h.nb+y*L}function v(h,g,y,_,L,T){for(;0<L--;){var I,F=h,D=g+(y?1:0),H=h,it=g+(y?0:3);for(I=0;I<_;++I){var pt=H[it+4*I];pt!=255&&(pt*=32897,F[D+4*I+0]=F[D+4*I+0]*pt>>23,F[D+4*I+1]=F[D+4*I+1]*pt>>23,F[D+4*I+2]=F[D+4*I+2]*pt>>23)}g+=T}}function C(h,g,y,_,L){for(;0<_--;){var T;for(T=0;T<y;++T){var I=h[g+2*T+0],F=15&(H=h[g+2*T+1]),D=4369*F,H=(240&H|H>>4)*D>>16;h[g+2*T+0]=(240&I|I>>4)*D>>16&240|(15&I|I<<4)*D>>16>>4&15,h[g+2*T+1]=240&H|F}g+=L}}function W(h,g,y,_,L,T,I,F){var D,H,it=255;for(H=0;H<L;++H){for(D=0;D<_;++D){var pt=h[g+D];T[I+4*D]=pt,it&=pt}g+=y,I+=F}return it!=255}function et(h,g,y,_,L){var T;for(T=0;T<L;++T)y[_+T]=h[g+T]>>8}function ut(){ds=v,Ke=C,Je=W,bi=et}function yt(h,g,y){B[h]=function(_,L,T,I,F,D,H,it,pt,gt,lt,xt,bt,nt,rt,_t,Lt){var St,Ht=Lt-1>>1,It=F[D+0]|H[it+0]<<16,Jt=pt[gt+0]|lt[xt+0]<<16;t(_!=null);var Ft=3*It+Jt+131074>>2;for(g(_[L+0],255&Ft,Ft>>16,bt,nt),T!=null&&(Ft=3*Jt+It+131074>>2,g(T[I+0],255&Ft,Ft>>16,rt,_t)),St=1;St<=Ht;++St){var Te=F[D+St]|H[it+St]<<16,Be=pt[gt+St]|lt[xt+St]<<16,Ee=It+Te+Jt+Be+524296,we=Ee+2*(Te+Jt)>>3;Ft=we+It>>1,It=(Ee=Ee+2*(It+Be)>>3)+Te>>1,g(_[L+2*St-1],255&Ft,Ft>>16,bt,nt+(2*St-1)*y),g(_[L+2*St-0],255&It,It>>16,bt,nt+(2*St-0)*y),T!=null&&(Ft=Ee+Jt>>1,It=we+Be>>1,g(T[I+2*St-1],255&Ft,Ft>>16,rt,_t+(2*St-1)*y),g(T[I+2*St+0],255&It,It>>16,rt,_t+(2*St+0)*y)),It=Te,Jt=Be}1&Lt||(Ft=3*It+Jt+131074>>2,g(_[L+Lt-1],255&Ft,Ft>>16,bt,nt+(Lt-1)*y),T!=null&&(Ft=3*Jt+It+131074>>2,g(T[I+Lt-1],255&Ft,Ft>>16,rt,_t+(Lt-1)*y)))}}function Ct(){ps[Tp]=o_,ps[Ip]=Ev,ps[_v]=l_,ps[Mp]=Pv,ps[Rp]=kv,ps[b1]=Nv,ps[Sv]=c_,ps[y1]=Ev,ps[w1]=Pv,ps[Fp]=kv,ps[A1]=Nv}function zt(h){return h&~h_?0>h?0:255:h>>Tv}function Yt(h,g){return zt((19077*h>>8)+(26149*g>>8)-14234)}function de(h,g,y){return zt((19077*h>>8)-(6419*g>>8)-(13320*y>>8)+8708)}function le(h,g){return zt((19077*h>>8)+(33050*g>>8)-17685)}function xe(h,g,y,_,L){_[L+0]=Yt(h,y),_[L+1]=de(h,g,y),_[L+2]=le(h,g)}function ri(h,g,y,_,L){_[L+0]=le(h,g),_[L+1]=de(h,g,y),_[L+2]=Yt(h,y)}function ui(h,g,y,_,L){var T=de(h,g,y);g=T<<3&224|le(h,g)>>3,_[L+0]=248&Yt(h,y)|T>>5,_[L+1]=g}function Pi(h,g,y,_,L){var T=240&le(h,g)|15;_[L+0]=240&Yt(h,y)|de(h,g,y)>>4,_[L+1]=T}function cn(h,g,y,_,L){_[L+0]=255,xe(h,g,y,_,L+1)}function Vi(h,g,y,_,L){ri(h,g,y,_,L),_[L+3]=255}function Ds(h,g,y,_,L){xe(h,g,y,_,L),_[L+3]=255}function Wn(h,g){return 0>h?0:h>g?g:h}function pr(h,g,y){B[h]=function(_,L,T,I,F,D,H,it,pt){for(var gt=it+(-2&pt)*y;it!=gt;)g(_[L+0],T[I+0],F[D+0],H,it),g(_[L+1],T[I+0],F[D+0],H,it+y),L+=2,++I,++D,it+=2*y;1&pt&&g(_[L+0],T[I+0],F[D+0],H,it)}}function xp(h,g,y){return y==0?h==0?g==0?6:5:g==0?4:0:y}function Bu(h,g,y,_,L){switch(h>>>30){case 3:Jr(g,y,_,L,0);break;case 2:vi(g,y,_,L);break;case 1:An(g,y,_,L)}}function ju(h,g){var y,_,L=g.M,T=g.Nb,I=h.oc,F=h.pc+40,D=h.oc,H=h.pc+584,it=h.oc,pt=h.pc+600;for(y=0;16>y;++y)I[F+32*y-1]=129;for(y=0;8>y;++y)D[H+32*y-1]=129,it[pt+32*y-1]=129;for(0<L?I[F-1-32]=D[H-1-32]=it[pt-1-32]=129:(s(I,F-32-1,127,21),s(D,H-32-1,127,9),s(it,pt-32-1,127,9)),_=0;_<h.za;++_){var gt=g.ya[g.aa+_];if(0<_){for(y=-1;16>y;++y)i(I,F+32*y-4,I,F+32*y+12,4);for(y=-1;8>y;++y)i(D,H+32*y-4,D,H+32*y+4,4),i(it,pt+32*y-4,it,pt+32*y+4,4)}var lt=h.Gd,xt=h.Hd+_,bt=gt.ad,nt=gt.Hc;if(0<L&&(i(I,F-32,lt[xt].y,0,16),i(D,H-32,lt[xt].f,0,8),i(it,pt-32,lt[xt].ea,0,8)),gt.Za){var rt=I,_t=F-32+16;for(0<L&&(_>=h.za-1?s(rt,_t,lt[xt].y[15],4):i(rt,_t,lt[xt+1].y,0,4)),y=0;4>y;y++)rt[_t+128+y]=rt[_t+256+y]=rt[_t+384+y]=rt[_t+0+y];for(y=0;16>y;++y,nt<<=2)rt=I,_t=F+Mv[y],Bs[gt.Ob[y]](rt,_t),Bu(nt,bt,16*+y,rt,_t)}else if(rt=xp(_,L,gt.Ob[0]),Xa[rt](I,F),nt!=0)for(y=0;16>y;++y,nt<<=2)Bu(nt,bt,16*+y,I,F+Mv[y]);for(y=gt.Gc,rt=xp(_,L,gt.Dd),Zr[rt](D,H),Zr[rt](it,pt),nt=bt,rt=D,_t=H,255&(gt=y>>0)&&(170&gt?Uu(nt,256,rt,_t):hs(nt,256,rt,_t)),gt=it,nt=pt,255&(y>>=8)&&(170&y?Uu(bt,320,gt,nt):hs(bt,320,gt,nt)),L<h.Ub-1&&(i(lt[xt].y,0,I,F+480,16),i(lt[xt].f,0,D,H+224,8),i(lt[xt].ea,0,it,pt+224,8)),y=8*T*h.B,lt=h.sa,xt=h.ta+16*_+16*T*h.R,bt=h.qa,gt=h.ra+8*_+y,nt=h.Ha,rt=h.Ia+8*_+y,y=0;16>y;++y)i(lt,xt+y*h.R,I,F+32*y,16);for(y=0;8>y;++y)i(bt,gt+y*h.B,D,H+32*y,8),i(nt,rt+y*h.B,it,pt+32*y,8)}}function zc(h,g,y,_,L,T,I,F,D){var H=[0],it=[0],pt=0,gt=D!=null?D.kd:0,lt=D??new Ru;if(h==null||12>y)return 7;lt.data=h,lt.w=g,lt.ha=y,g=[g],y=[y],lt.gb=[lt.gb];t:{var xt=g,bt=y,nt=lt.gb;if(t(h!=null),t(bt!=null),t(nt!=null),nt[0]=0,12<=bt[0]&&!e(h,xt[0],"RIFF")){if(e(h,xt[0]+8,"WEBP")){nt=3;break t}var rt=Rt(h,xt[0]+4);if(12>rt||4294967286<rt){nt=3;break t}if(gt&&rt>bt[0]-8){nt=7;break t}nt[0]=rt,xt[0]+=12,bt[0]-=12}nt=0}if(nt!=0)return nt;for(rt=0<lt.gb[0],y=y[0];;){t:{var _t=h;bt=g,nt=y;var Lt=H,St=it,Ht=xt=[0];if((Ft=pt=[pt])[0]=0,8>nt[0])nt=7;else{if(!e(_t,bt[0],"VP8X")){if(Rt(_t,bt[0]+4)!=10){nt=3;break t}if(18>nt[0]){nt=7;break t}var It=Rt(_t,bt[0]+8),Jt=1+Bt(_t,bt[0]+12);if(2147483648<=Jt*(_t=1+Bt(_t,bt[0]+15))){nt=3;break t}Ht!=null&&(Ht[0]=It),Lt!=null&&(Lt[0]=Jt),St!=null&&(St[0]=_t),bt[0]+=18,nt[0]-=18,Ft[0]=1}nt=0}}if(pt=pt[0],xt=xt[0],nt!=0)return nt;if(bt=!!(2&xt),!rt&&pt)return 3;if(T!=null&&(T[0]=!!(16&xt)),I!=null&&(I[0]=bt),F!=null&&(F[0]=0),I=H[0],xt=it[0],pt&&bt&&D==null){nt=0;break}if(4>y){nt=7;break}if(rt&&pt||!rt&&!pt&&!e(h,g[0],"ALPH")){y=[y],lt.na=[lt.na],lt.P=[lt.P],lt.Sa=[lt.Sa];t:{It=h,nt=g,rt=y;var Ft=lt.gb;Lt=lt.na,St=lt.P,Ht=lt.Sa,Jt=22,t(It!=null),t(rt!=null),_t=nt[0];var Te=rt[0];for(t(Lt!=null),t(Ht!=null),Lt[0]=null,St[0]=null,Ht[0]=0;;){if(nt[0]=_t,rt[0]=Te,8>Te){nt=7;break t}var Be=Rt(It,_t+4);if(4294967286<Be){nt=3;break t}var Ee=8+Be+1&-2;if(Jt+=Ee,0<Ft&&Jt>Ft){nt=3;break t}if(!e(It,_t,"VP8 ")||!e(It,_t,"VP8L")){nt=0;break t}if(Te[0]<Ee){nt=7;break t}e(It,_t,"ALPH")||(Lt[0]=It,St[0]=_t+8,Ht[0]=Be),_t+=Ee,Te-=Ee}}if(y=y[0],lt.na=lt.na[0],lt.P=lt.P[0],lt.Sa=lt.Sa[0],nt!=0)break}y=[y],lt.Ja=[lt.Ja],lt.xa=[lt.xa];t:if(Ft=h,nt=g,rt=y,Lt=lt.gb[0],St=lt.Ja,Ht=lt.xa,It=nt[0],_t=!e(Ft,It,"VP8 "),Jt=!e(Ft,It,"VP8L"),t(Ft!=null),t(rt!=null),t(St!=null),t(Ht!=null),8>rt[0])nt=7;else{if(_t||Jt){if(Ft=Rt(Ft,It+4),12<=Lt&&Ft>Lt-12){nt=3;break t}if(gt&&Ft>rt[0]-8){nt=7;break t}St[0]=Ft,nt[0]+=8,rt[0]-=8,Ht[0]=Jt}else Ht[0]=5<=rt[0]&&Ft[It+0]==47&&!(Ft[It+4]>>5),St[0]=rt[0];nt=0}if(y=y[0],lt.Ja=lt.Ja[0],lt.xa=lt.xa[0],g=g[0],nt!=0)break;if(4294967286<lt.Ja)return 3;if(F==null||bt||(F[0]=lt.xa?2:1),I=[I],xt=[xt],lt.xa){if(5>y){nt=7;break}F=I,gt=xt,bt=T,h==null||5>y?h=0:5<=y&&h[g+0]==47&&!(h[g+4]>>5)?(rt=[0],Ft=[0],Lt=[0],tt(St=new E,h,g,y),Qt(St,rt,Ft,Lt)?(F!=null&&(F[0]=rt[0]),gt!=null&&(gt[0]=Ft[0]),bt!=null&&(bt[0]=Lt[0]),h=1):h=0):h=0}else{if(10>y){nt=7;break}F=xt,h==null||10>y||!lp(h,g+3,y-3)?h=0:(gt=h[g+0]|h[g+1]<<8|h[g+2]<<16,bt=16383&(h[g+7]<<8|h[g+6]),h=16383&(h[g+9]<<8|h[g+8]),1&gt||3<(gt>>1&7)||!(gt>>4&1)||gt>>5>=lt.Ja||!bt||!h?h=0:(I&&(I[0]=bt),F&&(F[0]=h),h=1))}if(!h||(I=I[0],xt=xt[0],pt&&(H[0]!=I||it[0]!=xt)))return 3;D!=null&&(D[0]=lt,D.offset=g-D.w,t(4294967286>g-D.w),t(D.offset==D.ha-y));break}return nt==0||nt==7&&pt&&D==null?(T!=null&&(T[0]|=lt.na!=null&&0<lt.na.length),_!=null&&(_[0]=I),L!=null&&(L[0]=xt),0):nt}function qu(h,g,y){var _=g.width,L=g.height,T=0,I=0,F=_,D=L;if(g.Da=h!=null&&0<h.Da,g.Da&&(F=h.cd,D=h.bd,T=h.v,I=h.j,11>y||(T&=-2,I&=-2),0>T||0>I||0>=F||0>=D||T+F>_||I+D>L))return 0;if(g.v=T,g.j=I,g.va=T+F,g.o=I+D,g.U=F,g.T=D,g.da=h!=null&&0<h.da,g.da){if(!ue(F,D,y=[h.ib],T=[h.hb]))return 0;g.ib=y[0],g.hb=T[0]}return g.ob=h!=null&&h.ob,g.Kb=h==null||!h.Sd,g.da&&(g.ob=g.ib<3*_/4&&g.hb<3*L/4,g.Kb=0),1}function zu(h){if(h==null)return 2;if(11>h.S){var g=h.f.RGBA;g.fb+=(h.height-1)*g.A,g.A=-g.A}else g=h.f.kb,h=h.height,g.O+=(h-1)*g.fa,g.fa=-g.fa,g.N+=(h-1>>1)*g.Ab,g.Ab=-g.Ab,g.W+=(h-1>>1)*g.Db,g.Db=-g.Db,g.F!=null&&(g.J+=(h-1)*g.lb,g.lb=-g.lb);return 0}function Hc(h,g,y,_){if(_==null||0>=h||0>=g)return 2;if(y!=null){if(y.Da){var L=y.cd,T=y.bd,I=-2&y.v,F=-2&y.j;if(0>I||0>F||0>=L||0>=T||I+L>h||F+T>g)return 2;h=L,g=T}if(y.da){if(!ue(h,g,L=[y.ib],T=[y.hb]))return 2;h=L[0],g=T[0]}}_.width=h,_.height=g;t:{var D=_.width,H=_.height;if(h=_.S,0>=D||0>=H||!(h>=Tp&&13>h))h=2;else{if(0>=_.Rd&&_.sd==null){I=T=L=g=0;var it=(F=D*Rv[h])*H;if(11>h||(T=(H+1)/2*(g=(D+1)/2),h==12&&(I=(L=D)*H)),(H=r(it+2*T+I))==null){h=1;break t}_.sd=H,11>h?((D=_.f.RGBA).eb=H,D.fb=0,D.A=F,D.size=it):((D=_.f.kb).y=H,D.O=0,D.fa=F,D.Fd=it,D.f=H,D.N=0+it,D.Ab=g,D.Cd=T,D.ea=H,D.W=0+it+T,D.Db=g,D.Ed=T,h==12&&(D.F=H,D.J=0+it+2*T),D.Tc=I,D.lb=L)}if(g=1,L=_.S,T=_.width,I=_.height,L>=Tp&&13>L)if(11>L)h=_.f.RGBA,g&=(F=Math.abs(h.A))*(I-1)+T<=h.size,g&=F>=T*Rv[L],g&=h.eb!=null;else{h=_.f.kb,F=(T+1)/2,it=(I+1)/2,D=Math.abs(h.fa),H=Math.abs(h.Ab);var pt=Math.abs(h.Db),gt=Math.abs(h.lb),lt=gt*(I-1)+T;g&=D*(I-1)+T<=h.Fd,g&=H*(it-1)+F<=h.Cd,g=(g&=pt*(it-1)+F<=h.Ed)&D>=T&H>=F&pt>=F,g&=h.y!=null,g&=h.f!=null,g&=h.ea!=null,L==12&&(g&=gt>=T,g&=lt<=h.Tc,g&=h.F!=null)}else g=0;h=g?0:2}}return h!=0||y!=null&&y.fd&&(h=zu(_)),h}var Zi=64,Vc=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Uc=24,Wc=32,Hu=8,In=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Tt("Predictor0","PredictorAdd0"),B.Predictor0=function(){return 4278190080},B.Predictor1=function(h){return h},B.Predictor2=function(h,g,y){return g[y+0]},B.Predictor3=function(h,g,y){return g[y+1]},B.Predictor4=function(h,g,y){return g[y-1]},B.Predictor5=function(h,g,y){return Dt(Dt(h,g[y+1]),g[y+0])},B.Predictor6=function(h,g,y){return Dt(h,g[y-1])},B.Predictor7=function(h,g,y){return Dt(h,g[y+0])},B.Predictor8=function(h,g,y){return Dt(g[y-1],g[y+0])},B.Predictor9=function(h,g,y){return Dt(g[y+0],g[y+1])},B.Predictor10=function(h,g,y){return Dt(Dt(h,g[y-1]),Dt(g[y+0],g[y+1]))},B.Predictor11=function(h,g,y){var _=g[y+0];return 0>=pe(_>>24&255,h>>24&255,(g=g[y-1])>>24&255)+pe(_>>16&255,h>>16&255,g>>16&255)+pe(_>>8&255,h>>8&255,g>>8&255)+pe(255&_,255&h,255&g)?_:h},B.Predictor12=function(h,g,y){var _=g[y+0];return(Xt((h>>24&255)+(_>>24&255)-((g=g[y-1])>>24&255))<<24|Xt((h>>16&255)+(_>>16&255)-(g>>16&255))<<16|Xt((h>>8&255)+(_>>8&255)-(g>>8&255))<<8|Xt((255&h)+(255&_)-(255&g)))>>>0},B.Predictor13=function(h,g,y){var _=g[y-1];return(ae((h=Dt(h,g[y+0]))>>24&255,_>>24&255)<<24|ae(h>>16&255,_>>16&255)<<16|ae(h>>8&255,_>>8&255)<<8|ae(h>>0&255,_>>0&255))>>>0};var m1=B.PredictorAdd0;B.PredictorAdd1=me,Tt("Predictor2","PredictorAdd2"),Tt("Predictor3","PredictorAdd3"),Tt("Predictor4","PredictorAdd4"),Tt("Predictor5","PredictorAdd5"),Tt("Predictor6","PredictorAdd6"),Tt("Predictor7","PredictorAdd7"),Tt("Predictor8","PredictorAdd8"),Tt("Predictor9","PredictorAdd9"),Tt("Predictor10","PredictorAdd10"),Tt("Predictor11","PredictorAdd11"),Tt("Predictor12","PredictorAdd12"),Tt("Predictor13","PredictorAdd13");var Vu=B.PredictorAdd2;be("ColorIndexInverseTransform","MapARGB","32b",function(h){return h>>8&255},function(h){return h}),be("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(h){return h},function(h){return h>>8&255});var Lp,cs=B.ColorIndexInverseTransform,Gc=B.MapARGB,Cp=B.VP8LColorIndexInverseTransformAlpha,Ep=B.MapAlpha,Ua=B.VP8LPredictorsAdd=[];Ua.length=16,(B.VP8LPredictors=[]).length=16,(B.VP8LPredictorsAdd_C=[]).length=16,(B.VP8LPredictors_C=[]).length=16;var Jo,Mn,wn,Wa,Yr,Kr,$c,Jr,vi,Uu,An,hs,Xc,Pp,Wu,Qo,Zo,Ga,tl,Yc,el,$a,Gu,us,ds,Ke,Je,bi,Fi=r(511),Qr=r(2041),$u=r(225),Kc=r(767),kp=0,v1=Qr,Np=$u,Gn=Kc,fs=Fi,Tp=0,Ip=1,_v=2,Mp=3,Rp=4,b1=5,Sv=6,y1=7,w1=8,Fp=9,A1=10,$A=[2,3,7],XA=[3,3,11],xv=[280,256,256,256,40],YA=[0,1,1,1,0],KA=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],JA=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],QA=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],ZA=8,_1=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],S1=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Xu=null,t_=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],e_=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Lv=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],i_=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],n_=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],s_=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],r_=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Xa=[],Bs=[],Zr=[],a_=1,Cv=2,Ya=[],ps=[];yt("UpsampleRgbLinePair",xe,3),yt("UpsampleBgrLinePair",ri,3),yt("UpsampleRgbaLinePair",Ds,4),yt("UpsampleBgraLinePair",Vi,4),yt("UpsampleArgbLinePair",cn,4),yt("UpsampleRgba4444LinePair",Pi,2),yt("UpsampleRgb565LinePair",ui,2);var o_=B.UpsampleRgbLinePair,l_=B.UpsampleBgrLinePair,Ev=B.UpsampleRgbaLinePair,Pv=B.UpsampleBgraLinePair,kv=B.UpsampleArgbLinePair,Nv=B.UpsampleRgba4444LinePair,c_=B.UpsampleRgb565LinePair,Op=16,Dp=1<<Op-1,Yu=-227,x1=482,Tv=6,h_=(256<<Tv)-1,Iv=0,u_=r(256),d_=r(256),f_=r(256),p_=r(256),g_=r(x1-Yu),m_=r(x1-Yu);pr("YuvToRgbRow",xe,3),pr("YuvToBgrRow",ri,3),pr("YuvToRgbaRow",Ds,4),pr("YuvToBgraRow",Vi,4),pr("YuvToArgbRow",cn,4),pr("YuvToRgba4444Row",Pi,2),pr("YuvToRgb565Row",ui,2);var Mv=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Bp=[0,2,8],v_=[8,7,6,4,4,2,2,2,1,1,1,1],b_=1;this.WebPDecodeRGBA=function(h,g,y,_,L){var T=Ip,I=new jc,F=new Ns;I.ba=F,F.S=T,F.width=[F.width],F.height=[F.height];var D=F.width,H=F.height,it=new Wr;if(it==null||h==null)var pt=2;else t(it!=null),pt=zc(h,g,y,it.width,it.height,it.Pd,it.Qd,it.format,null);if(pt!=0?D=0:(D!=null&&(D[0]=it.width[0]),H!=null&&(H[0]=it.height[0]),D=1),D){F.width=F.width[0],F.height=F.height[0],_!=null&&(_[0]=F.width),L!=null&&(L[0]=F.height);t:{if(_=new Ic,(L=new Ru).data=h,L.w=g,L.ha=y,L.kd=1,g=[0],t(L!=null),((h=zc(L.data,L.w,L.ha,null,null,null,g,null,L))==0||h==7)&&g[0]&&(h=4),(g=h)==0){if(t(I!=null),_.data=L.data,_.w=L.w+L.offset,_.ha=L.ha-L.offset,_.put=or,_.ac=Qi,_.bc=lr,_.ma=I,L.xa){if((h=ls())==null){I=1;break t}if(function(gt,lt){var xt=[0],bt=[0],nt=[0];e:for(;;){if(gt==null)return 0;if(lt==null)return gt.a=2,0;if(gt.l=lt,gt.a=0,tt(gt.m,lt.data,lt.w,lt.ha),!Qt(gt.m,xt,bt,nt)){gt.a=3;break e}if(gt.xb=Cv,lt.width=xt[0],lt.height=bt[0],!ur(xt[0],bt[0],1,gt,null))break e;return 1}return t(gt.a!=0),0}(h,_)){if(_=(g=Hc(_.width,_.height,I.Oa,I.ba))==0){e:{_=h;i:for(;;){if(_==null){_=0;break e}if(t(_.s.yc!=null),t(_.s.Ya!=null),t(0<_.s.Wb),t((y=_.l)!=null),t((L=y.ma)!=null),_.xb!=0){if(_.ca=L.ba,_.tb=L.tb,t(_.ca!=null),!qu(L.Oa,y,Mp)){_.a=2;break i}if(!Go(_,y.width)||y.da)break i;if((y.da||Fe(_.ca.S))&&ut(),11>_.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),_.ca.f.kb.F!=null&&ut()),_.Pb&&0<_.s.ua&&_.s.vb.X==null&&!Zt(_.s.vb,_.s.Wa.Xa)){_.a=1;break i}_.xb=0}if(!Rs(_,_.V,_.Ba,_.c,_.i,y.o,Cc))break i;L.Dc=_.Ma,_=1;break e}t(_.a!=0),_=0}_=!_}_&&(g=h.a)}else g=h.a}else{if((h=new Jm)==null){I=1;break t}if(h.Fa=L.na,h.P=L.P,h.qc=L.Sa,cp(h,_)){if((g=Hc(_.width,_.height,I.Oa,I.ba))==0){if(h.Aa=0,y=I.Oa,t((L=h)!=null),y!=null){if(0<(D=0>(D=y.Md)?0:100<D?255:255*D/100)){for(H=it=0;4>H;++H)12>(pt=L.pb[H]).lc&&(pt.ia=D*v_[0>pt.lc?0:pt.lc]>>3),it|=pt.ia;it&&(alert("todo:VP8InitRandom"),L.ia=1)}L.Ga=y.Id,100<L.Ga?L.Ga=100:0>L.Ga&&(L.Ga=0)}Qm(h,_)||(g=h.a)}}else g=h.a}g==0&&I.Oa!=null&&I.Oa.fd&&(g=zu(I.ba))}I=g}T=I!=0?null:11>T?F.f.RGBA.eb:F.f.kb.y}else T=null;return T};var Rv=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(B,Q){for(var ct="",P=0;P<4;P++)ct+=String.fromCharCode(B[Q++]);return ct}function d(B,Q){return(B[Q+0]<<0|B[Q+1]<<8|B[Q+2]<<16)>>>0}function p(B,Q){return(B[Q+0]<<0|B[Q+1]<<8|B[Q+2]<<16|B[Q+3]<<24)>>>0}new l;var m=[0],f=[0],b=[],w=new l,S=n,A=function(B,Q){var ct={},P=0,N=!1,V=0,j=0;if(ct.frames=[],!function(z,$,K,Z){for(var ot=0;ot<Z;ot++)if(z[$+ot]!=K.charCodeAt(ot))return!0;return!1}(B,Q,"RIFF",4)){var J,at;for(p(B,Q+=4),Q+=8;Q<B.length;){var st=c(B,Q),tt=p(B,Q+=4);Q+=4;var vt=tt+(1&tt);switch(st){case"VP8 ":case"VP8L":ct.frames[P]===void 0&&(ct.frames[P]={}),(E=ct.frames[P]).src_off=N?j:Q-8,E.src_size=V+tt+8,P++,N&&(N=!1,V=0,j=0);break;case"VP8X":(E=ct.header={}).feature_flags=B[Q];var ht=Q+4;E.canvas_width=1+d(B,ht),ht+=3,E.canvas_height=1+d(B,ht),ht+=3;break;case"ALPH":N=!0,V=vt+8,j=Q-8;break;case"ANIM":(E=ct.header).bgcolor=p(B,Q),ht=Q+4,E.loop_count=(J=B)[(at=ht)+0]<<0|J[at+1]<<8,ht+=2;break;case"ANMF":var At,E;(E=ct.frames[P]={}).offset_x=2*d(B,Q),Q+=3,E.offset_y=2*d(B,Q),Q+=3,E.width=1+d(B,Q),Q+=3,E.height=1+d(B,Q),Q+=3,E.duration=d(B,Q),Q+=3,At=B[Q++],E.dispose=1&At,E.blend=At>>1&1}st!="ANMF"&&(Q+=vt)}return ct}}(S,0);A.response=S,A.rgbaoutput=!0,A.dataurl=!1;var x=A.header?A.header:null,M=A.frames?A.frames:null;if(x){x.loop_counter=x.loop_count,m=[x.canvas_height],f=[x.canvas_width];for(var q=0;q<M.length&&M[q].blend!=0;q++);}var U=M[0],X=w.WebPDecodeRGBA(S,U.src_off,U.src_size,f,m);U.rgba=X,U.imgwidth=f[0],U.imgheight=m[0];for(var G=0;G<f[0]*m[0]*4;G++)b[G]=X[G];return this.width=f,this.height=m,this.data=b,this}(function(n){var t=function(){return typeof R2=="function"},e=function(m,f,b,w){var S=4,A=a;switch(w){case n.image_compression.FAST:S=1,A=r;break;case n.image_compression.MEDIUM:S=6,A=o;break;case n.image_compression.SLOW:S=9,A=l}m=i(m,f,b,A);var x=R2(m,{level:S});return n.__addimage__.arrayBufferToBinaryString(x)},i=function(m,f,b,w){for(var S,A,x,M=m.length/f,q=new Uint8Array(m.length+M),U=d(),X=0;X<M;X+=1){if(x=X*f,S=m.subarray(x,x+f),w)q.set(w(S,b,A),x+X);else{for(var G,B=U.length,Q=[];G<B;G+=1)Q[G]=U[G](S,b,A);var ct=p(Q.concat());q.set(Q[ct],x+X)}A=S}return q},s=function(m){var f=Array.apply([],m);return f.unshift(0),f},r=function(m,f){var b,w=[],S=m.length;w[0]=1;for(var A=0;A<S;A+=1)b=m[A-f]||0,w[A+1]=m[A]-b+256&255;return w},a=function(m,f,b){var w,S=[],A=m.length;S[0]=2;for(var x=0;x<A;x+=1)w=b&&b[x]||0,S[x+1]=m[x]-w+256&255;return S},o=function(m,f,b){var w,S,A=[],x=m.length;A[0]=3;for(var M=0;M<x;M+=1)w=m[M-f]||0,S=b&&b[M]||0,A[M+1]=m[M]+256-(w+S>>>1)&255;return A},l=function(m,f,b){var w,S,A,x,M=[],q=m.length;M[0]=4;for(var U=0;U<q;U+=1)w=m[U-f]||0,S=b&&b[U]||0,A=b&&b[U-f]||0,x=c(w,S,A),M[U+1]=m[U]-x+256&255;return M},c=function(m,f,b){if(m===f&&f===b)return m;var w=Math.abs(f-b),S=Math.abs(m-b),A=Math.abs(m+f-b-b);return w<=S&&w<=A?m:S<=A?f:b},d=function(){return[s,r,a,o,l]},p=function(m){var f=m.map(function(b){return b.reduce(function(w,S){return w+Math.abs(S)},0)});return f.indexOf(Math.min.apply(null,f))};n.processPNG=function(m,f,b,w){var S,A,x,M,q,U,X,G,B,Q,ct,P,N,V,j,J=this.decode.FLATE_DECODE,at="";if(this.__addimage__.isArrayBuffer(m)&&(m=new Uint8Array(m)),this.__addimage__.isArrayBufferView(m)){if(m=(x=new JL(m)).imgData,A=x.bits,S=x.colorSpace,q=x.colors,[4,6].indexOf(x.colorType)!==-1){if(x.bits===8){B=(G=x.pixelBitlength==32?new Uint32Array(x.decodePixels().buffer):x.pixelBitlength==16?new Uint16Array(x.decodePixels().buffer):new Uint8Array(x.decodePixels().buffer)).length,ct=new Uint8Array(B*x.colors),Q=new Uint8Array(B);var st,tt=x.pixelBitlength-x.bits;for(V=0,j=0;V<B;V++){for(N=G[V],st=0;st<tt;)ct[j++]=N>>>st&255,st+=x.bits;Q[V]=N>>>st&255}}if(x.bits===16){B=(G=new Uint32Array(x.decodePixels().buffer)).length,ct=new Uint8Array(B*(32/x.pixelBitlength)*x.colors),Q=new Uint8Array(B*(32/x.pixelBitlength)),P=x.colors>1,V=0,j=0;for(var vt=0;V<B;)N=G[V++],ct[j++]=N>>>0&255,P&&(ct[j++]=N>>>16&255,N=G[V++],ct[j++]=N>>>0&255),Q[vt++]=N>>>16&255;A=8}w!==n.image_compression.NONE&&t()?(m=e(ct,x.width*x.colors,x.colors,w),X=e(Q,x.width,1,w)):(m=ct,X=Q,J=void 0)}if(x.colorType===3&&(S=this.color_spaces.INDEXED,U=x.palette,x.transparency.indexed)){var ht=x.transparency.indexed,At=0;for(V=0,B=ht.length;V<B;++V)At+=ht[V];if((At/=255)===B-1&&ht.indexOf(0)!==-1)M=[ht.indexOf(0)];else if(At!==B){for(G=x.decodePixels(),Q=new Uint8Array(G.length),V=0,B=G.length;V<B;V++)Q[V]=ht[G[V]];X=e(Q,x.width,1)}}var E=function(z){var $;switch(z){case n.image_compression.FAST:$=11;break;case n.image_compression.MEDIUM:$=13;break;case n.image_compression.SLOW:$=14;break;default:$=12}return $}(w);return J===this.decode.FLATE_DECODE&&(at="/Predictor "+E+" "),at+="/Colors "+q+" /BitsPerComponent "+A+" /Columns "+x.width,(this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),(X&&this.__addimage__.isArrayBuffer(X)||this.__addimage__.isArrayBufferView(X))&&(X=this.__addimage__.arrayBufferToBinaryString(X)),{alias:b,data:m,index:f,filter:J,decodeParameters:at,transparency:M,palette:U,sMask:X,predictor:E,width:x.width,height:x.height,bitsPerComponent:A,colorSpace:S}}}})(te.API),function(n){n.processGIF89A=function(t,e,i,s){var r=new QL(t),a=r.width,o=r.height,l=[];r.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:a,height:o},d=new i0(100).encode(c,100);return n.processJPEG.call(this,d,e,i,s)},n.processGIF87A=n.processGIF89A}(te.API),zs.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var t=0;t<n;t++){var e=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:s,green:i,blue:e,quad:r}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},zs.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[n]()}catch(e){Xe.log("bit decode error:"+e)}},zs.prototype.bit1=function(){var n,t=Math.ceil(this.width/8),e=t%4;for(n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,s=0;s<t;s++)for(var r=this.datav.getUint8(this.pos++,!0),a=i*this.width*4+8*s*4,o=0;o<8&&8*s+o<this.width;o++){var l=this.palette[r>>7-o&1];this.data[a+4*o]=l.blue,this.data[a+4*o+1]=l.green,this.data[a+4*o+2]=l.red,this.data[a+4*o+3]=255}e!==0&&(this.pos+=4-e)}},zs.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),t=n%4,e=this.height-1;e>=0;e--){for(var i=this.bottom_up?e:this.height-1-e,s=0;s<n;s++){var r=this.datav.getUint8(this.pos++,!0),a=i*this.width*4+2*s*4,o=r>>4,l=15&r,c=this.palette[o];if(this.data[a]=c.blue,this.data[a+1]=c.green,this.data[a+2]=c.red,this.data[a+3]=255,2*s+1>=this.width)break;c=this.palette[l],this.data[a+4]=c.blue,this.data[a+4+1]=c.green,this.data[a+4+2]=c.red,this.data[a+4+3]=255}t!==0&&(this.pos+=4-t)}},zs.prototype.bit8=function(){for(var n=this.width%4,t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var s=this.datav.getUint8(this.pos++,!0),r=e*this.width*4+4*i;if(s<this.palette.length){var a=this.palette[s];this.data[r]=a.red,this.data[r+1]=a.green,this.data[r+2]=a.blue,this.data[r+3]=255}else this.data[r]=255,this.data[r+1]=255,this.data[r+2]=255,this.data[r+3]=255}n!==0&&(this.pos+=4-n)}},zs.prototype.bit15=function(){for(var n=this.width%3,t=parseInt("11111",2),e=this.height-1;e>=0;e--){for(var i=this.bottom_up?e:this.height-1-e,s=0;s<this.width;s++){var r=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(r&t)/t*255|0,o=(r>>5&t)/t*255|0,l=(r>>10&t)/t*255|0,c=r>>15?255:0,d=i*this.width*4+4*s;this.data[d]=l,this.data[d+1]=o,this.data[d+2]=a,this.data[d+3]=c}this.pos+=n}},zs.prototype.bit16=function(){for(var n=this.width%3,t=parseInt("11111",2),e=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var s=this.bottom_up?i:this.height-1-i,r=0;r<this.width;r++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&t)/t*255|0,l=(a>>5&e)/e*255|0,c=(a>>11)/t*255|0,d=s*this.width*4+4*r;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=255}this.pos+=n}},zs.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var t=this.bottom_up?n:this.height-1-n,e=0;e<this.width;e++){var i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*e;this.data[a]=r,this.data[a+1]=s,this.data[a+2]=i,this.data[a+3]=255}this.pos+=this.width%4}},zs.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var t=this.bottom_up?n:this.height-1-n,e=0;e<this.width;e++){var i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*e;this.data[o]=r,this.data[o+1]=s,this.data[o+2]=i,this.data[o+3]=a}},zs.prototype.getData=function(){return this.data},function(n){n.processBMP=function(t,e,i,s){var r=new zs(t,!1),a=r.width,o=r.height,l={data:r.getData(),width:a,height:o},c=new i0(100).encode(l,100);return n.processJPEG.call(this,c,e,i,s)}}(te.API),ob.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(t,e,i,s){var r=new ob(t),a=r.width,o=r.height,l={data:r.getData(),width:a,height:o},c=new i0(100).encode(l,100);return n.processJPEG.call(this,c,e,i,s)}}(te.API),te.API.processRGBA=function(n,t,e){for(var i=n.data,s=i.length,r=new Uint8Array(s/4*3),a=new Uint8Array(s/4),o=0,l=0,c=0;c<s;c+=4){var d=i[c],p=i[c+1],m=i[c+2],f=i[c+3];r[o++]=d,r[o++]=p,r[o++]=m,a[l++]=f}var b=this.__addimage__.arrayBufferToBinaryString(r);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:b,index:t,alias:e,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},te.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},ih=te.API,rg=ih.getCharWidthsArray=function(n,t){var e,i,s=(t=t||{}).font||this.internal.getFont(),r=t.fontSize||this.internal.getFontSize(),a=t.charSpace||this.internal.getCharSpace(),o=t.widths?t.widths:s.metadata.Unicode.widths,l=o.fof?o.fof:1,c=t.kerning?t.kerning:s.metadata.Unicode.kerning,d=c.fof?c.fof:1,p=t.doKerning!==!1,m=0,f=n.length,b=0,w=o[0]||l,S=[];for(e=0;e<f;e++)i=n.charCodeAt(e),typeof s.metadata.widthOfString=="function"?S.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(i))+a*(1e3/r)||0)/1e3):(m=p&&ze(c[i])==="object"&&!isNaN(parseInt(c[i][b],10))?c[i][b]/d:0,S.push((o[i]||w)/l+m)),b=i;return S},nb=ih.getStringUnitWidth=function(n,t){var e=(t=t||{}).fontSize||this.internal.getFontSize(),i=t.font||this.internal.getFont(),s=t.charSpace||this.internal.getCharSpace();return ih.processArabic&&(n=ih.processArabic(n)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(n,e,s)/e:rg.apply(this,arguments).reduce(function(r,a){return r+a},0)},sb=function(n,t,e,i){for(var s=[],r=0,a=n.length,o=0;r!==a&&o+t[r]<e;)o+=t[r],r++;s.push(n.slice(0,r));var l=r;for(o=0;r!==a;)o+t[r]>i&&(s.push(n.slice(l,r)),o=0,l=r),o+=t[r],r++;return l!==r&&s.push(n.slice(l,r)),s},rb=function(n,t,e){e||(e={});var i,s,r,a,o,l,c,d=[],p=[d],m=e.textIndent||0,f=0,b=0,w=n.split(" "),S=rg.apply(this,[" ",e])[0];if(l=e.lineIndent===-1?w[0].length+2:e.lineIndent||0){var A=Array(l).join(" "),x=[];w.map(function(q){(q=q.split(/\s*\n/)).length>1?x=x.concat(q.map(function(U,X){return(X&&U.length?`
`:"")+U})):x.push(q[0])}),w=x,l=nb.apply(this,[A,e])}for(r=0,a=w.length;r<a;r++){var M=0;if(i=w[r],l&&i[0]==`
`&&(i=i.substr(1),M=1),m+f+(b=(s=rg.apply(this,[i,e])).reduce(function(q,U){return q+U},0))>t||M){if(b>t){for(o=sb.apply(this,[i,s,t-(m+f),t]),d.push(o.shift()),d=[o.pop()];o.length;)p.push([o.shift()]);b=s.slice(i.length-(d[0]?d[0].length:0)).reduce(function(q,U){return q+U},0)}else d=[i];p.push(d),m=b+l,f=S}else d.push(i),m+=f+b,f=S}return c=l?function(q,U){return(U?A:"")+q.join(" ")}:function(q){return q.join(" ")},p.map(c)},ih.splitTextToSize=function(n,t,e){var i,s=(e=e||{}).fontSize||this.internal.getFontSize(),r=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var p=this.internal.getFont(d.fontName,d.fontStyle);return p.metadata.Unicode?{widths:p.metadata.Unicode.widths||{0:1},kerning:p.metadata.Unicode.kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,e);i=Array.isArray(n)?n:String(n).split(/\r?\n/);var a=1*this.internal.scaleFactor*t/s;r.textIndent=e.textIndent?1*e.textIndent*this.internal.scaleFactor/s:0,r.lineIndent=e.lineIndent;var o,l,c=[];for(o=0,l=i.length;o<l;o++)c=c.concat(rb.apply(this,[i[o],a,r]));return c},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",e={},i={},s=0;s<t.length;s++)e[t[s]]="0123456789abcdef"[s],i["0123456789abcdef"[s]]=t[s];var r=function(p){return"0x"+parseInt(p,10).toString(16)},a=n.__fontmetrics__.compress=function(p){var m,f,b,w,S=["{"];for(var A in p){if(m=p[A],isNaN(parseInt(A,10))?f="'"+A+"'":(A=parseInt(A,10),f=(f=r(A).slice(2)).slice(0,-1)+i[f.slice(-1)]),typeof m=="number")m<0?(b=r(m).slice(3),w="-"):(b=r(m).slice(2),w=""),b=w+b.slice(0,-1)+i[b.slice(-1)];else{if(ze(m)!=="object")throw new Error("Don't know what to do with value type "+ze(m)+".");b=a(m)}S.push(f+b)}return S.push("}"),S.join("")},o=n.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,f,b,w,S={},A=1,x=S,M=[],q="",U="",X=p.length-1,G=1;G<X;G+=1)(w=p[G])=="'"?m?(b=m.join(""),m=void 0):m=[]:m?m.push(w):w=="{"?(M.push([x,b]),x={},b=void 0):w=="}"?((f=M.pop())[0][f[1]]=x,b=void 0,x=f[0]):w=="-"?A=-1:b===void 0?e.hasOwnProperty(w)?(q+=e[w],b=parseInt(q,16)*A,A=1,q=""):q+=w:e.hasOwnProperty(w)?(U+=e[w],x[b]=parseInt(U,16)*A,A=1,b=void 0,U=""):U+=w;return S},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},d={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(p){var m=p.font,f=d.Unicode[m.postScriptName];f&&(m.metadata.Unicode={},m.metadata.Unicode.widths=f.widths,m.metadata.Unicode.kerning=f.kerning);var b=c.Unicode[m.postScriptName];b&&(m.metadata.Unicode.encoding=b,m.encoding=b.codePages[0])}])}(te.API),function(n){var t=function(e){for(var i=e.length,s=new Uint8Array(i),r=0;r<i;r++)s[r]=e.charCodeAt(r);return s};n.API.events.push(["addFont",function(e){var i=void 0,s=e.font,r=e.instance;if(!s.isStandardFont){if(r===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(i=r.existsFileInVFS(s.postScriptName)===!1?r.loadFile(s.postScriptName):r.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(a,o){o=/^\x00\x01\x00\x00/.test(o)?t(o):t(Ld(o)),a.metadata=n.API.TTFFont.open(o),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(s,i)}}])}(te),function(n){function t(){return(ee.canvg?Promise.resolve(ee.canvg):hl(()=>import("./index.es-C7zZGSUO.js"),__vite__mapDeps([0,1,2,3]))).catch(function(e){return Promise.reject(new Error("Could not load canvg: "+e))}).then(function(e){return e.default?e.default:e})}te.API.addSvgAsImage=function(e,i,s,r,a,o,l,c){if(isNaN(i)||isNaN(s))throw Xe.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(a))throw Xe.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=r,d.height=a;var p=d.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,d.width,d.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return t().then(function(b){return b.fromString(p,e,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(b){return b.render(m)}).then(function(){f.addImage(d.toDataURL("image/jpeg",1),i,s,r,a,l,c)})}}(),te.API.putTotalPages=function(n){var t,e=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(n,"g"),e=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),e=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var s=0;s<this.internal.pages[i].length;s++)this.internal.pages[i][s]=this.internal.pages[i][s].replace(t,e);return this},te.API.viewerPreferences=function(n,t){var e;n=n||{},t=t||!1;var i,s,r,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(a),l=[],c=0,d=0,p=0;function m(b,w){var S,A=!1;for(S=0;S<b.length;S+=1)b[S]===w&&(A=!0);return A}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),e=this.internal.viewerpreferences.configuration,n==="reset"||t===!0){var f=o.length;for(p=0;p<f;p+=1)e[o[p]].value=e[o[p]].defaultValue,e[o[p]].explicitSet=!1}if(ze(n)==="object"){for(s in n)if(r=n[s],m(o,s)&&r!==void 0){if(e[s].type==="boolean"&&typeof r=="boolean")e[s].value=r;else if(e[s].type==="name"&&m(e[s].valueSet,r))e[s].value=r;else if(e[s].type==="integer"&&Number.isInteger(r))e[s].value=r;else if(e[s].type==="array"){for(c=0;c<r.length;c+=1)if(i=!0,r[c].length===1&&typeof r[c][0]=="number")l.push(String(r[c]-1));else if(r[c].length>1){for(d=0;d<r[c].length;d+=1)typeof r[c][d]!="number"&&(i=!1);i===!0&&l.push([r[c][0]-1,r[c][1]-1].join(" "))}e[s].value="["+l.join(" ")+"]"}else e[s].value=e[s].defaultValue;e[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var b,w=[];for(b in e)e[b].explicitSet===!0&&(e[b].type==="name"?w.push("/"+b+" /"+e[b].value):w.push("/"+b+" "+e[b].value));w.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+w.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=e,this},function(n){var t=function(){var i='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),r=unescape(encodeURIComponent(i)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=r.length+a.length+o.length+s.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(s+r+a+o+l),this.internal.write("endstream"),this.internal.write("endobj")},e=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(i,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:i,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",e),this.internal.events.subscribe("postPutResources",t)),this}}(te.API),function(n){var t=n.API,e=t.pdfEscape16=function(r,a){for(var o,l=a.metadata.Unicode.widths,c=["","0","00","000","0000"],d=[""],p=0,m=r.length;p<m;++p){if(o=a.metadata.characterToGlyph(r.charCodeAt(p)),a.metadata.glyIdsUsed.push(o),a.metadata.toUnicode[o]=r.charCodeAt(p),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(a.metadata.widthOfGlyph(o),10)])),o=="0")return d.join("");o=o.toString(16),d.push(c[4-o.length],o)}return d.join("")},i=function(r){var a,o,l,c,d,p,m;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],p=0,m=(o=Object.keys(r).sort(function(f,b){return f-b})).length;p<m;p++)a=o[p],l.length>=100&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),r[a]!==void 0&&r[a]!==null&&typeof r[a].toString=="function"&&(c=("0000"+r[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),l.push("<"+a+"><"+c+">"));return l.length&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(r){(function(a){var o=a.font,l=a.out,c=a.newObject,d=a.putStream;if(o.metadata instanceof n.API.TTFFont&&o.encoding==="Identity-H"){for(var p=o.metadata.Unicode.widths,m=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),f="",b=0;b<m.length;b++)f+=String.fromCharCode(m[b]);var w=c();d({data:f,addLength1:!0,objectId:w}),l("endobj");var S=c();d({data:i(o.metadata.toUnicode),addLength1:!0,objectId:S}),l("endobj");var A=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+uh(o.fontName)),l("/FontFile2 "+w+" 0 R"),l("/FontBBox "+n.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var x=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+uh(o.fontName)),l("/FontDescriptor "+A+" 0 R"),l("/W "+n.API.PDFObject.convert(p)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+S+" 0 R"),l("/BaseFont /"+uh(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+x+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(r)}]),t.events.push(["putFont",function(r){(function(a){var o=a.font,l=a.out,c=a.newObject,d=a.putStream;if(o.metadata instanceof n.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var p=o.metadata.rawData,m="",f=0;f<p.length;f++)m+=String.fromCharCode(p[f]);var b=c();d({data:m,addLength1:!0,objectId:b}),l("endobj");var w=c();d({data:i(o.metadata.toUnicode),addLength1:!0,objectId:w}),l("endobj");var S=c();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+b+" 0 R"),l("/Flags 96"),l("/FontBBox "+n.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+uh(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=c();for(var A=0;A<o.metadata.hmtx.widths.length;A++)o.metadata.hmtx.widths[A]=parseInt(o.metadata.hmtx.widths[A]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+w+" 0 R/BaseFont/"+uh(o.fontName)+"/FontDescriptor "+S+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(r)}]);var s=function(r){var a,o=r.text||"",l=r.x,c=r.y,d=r.options||{},p=r.mutex||{},m=p.pdfEscape,f=p.activeFontKey,b=p.fonts,w=f,S="",A=0,x="",M=b[w].encoding;if(b[w].encoding!=="Identity-H")return{text:o,x:l,y:c,options:d,mutex:p};for(x=o,w=f,Array.isArray(o)&&(x=o[0]),A=0;A<x.length;A+=1)b[w].metadata.hasOwnProperty("cmap")&&(a=b[w].metadata.cmap.unicode.codeMap[x[A].charCodeAt(0)]),a||x[A].charCodeAt(0)<256&&b[w].metadata.hasOwnProperty("Unicode")?S+=x[A]:S+="";var q="";return parseInt(w.slice(1))<14||M==="WinAnsiEncoding"?q=m(S,w).split("").map(function(U){return U.charCodeAt(0).toString(16)}).join(""):M==="Identity-H"&&(q=e(S,b[w])),p.isHex=!0,{text:q,x:l,y:c,options:d,mutex:p}};t.events.push(["postProcessText",function(r){var a=r.text||"",o=[],l={text:a,x:r.x,y:r.y,options:r.options,mutex:r.mutex};if(Array.isArray(a)){var c=0;for(c=0;c<a.length;c+=1)Array.isArray(a[c])&&a[c].length===3?o.push([s(Object.assign({},l,{text:a[c][0]})).text,a[c][1],a[c][2]]):o.push(s(Object.assign({},l,{text:a[c]})).text);r.text=o}else r.text=s(Object.assign({},l,{text:a})).text}])}(te),function(n){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0},n.addFileToVFS=function(e,i){return t.call(this),this.internal.vFS[e]=i,this},n.getFileFromVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0?this.internal.vFS[e]:null}}(te.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(i){var s,r,a,o,l,c,d,p=t,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],b={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},w={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},S=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],A=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),x=!1,M=0;this.__bidiEngine__={};var q=function(P){var N=P.charCodeAt(),V=N>>8,j=w[V];return j!==void 0?p[256*j+(255&N)]:V===252||V===253?"AL":A.test(V)?"L":V===8?"R":"N"},U=function(P){for(var N,V=0;V<P.length;V++){if((N=q(P.charAt(V)))==="L")return!1;if(N==="R")return!0}return!1},X=function(P,N,V,j){var J,at,st,tt,vt=N[j];switch(vt){case"L":case"R":x=!1;break;case"N":case"AN":break;case"EN":x&&(vt="AN");break;case"AL":x=!0,vt="R";break;case"WS":vt="N";break;case"CS":j<1||j+1>=N.length||(J=V[j-1])!=="EN"&&J!=="AN"||(at=N[j+1])!=="EN"&&at!=="AN"?vt="N":x&&(at="AN"),vt=at===J?at:"N";break;case"ES":vt=(J=j>0?V[j-1]:"B")==="EN"&&j+1<N.length&&N[j+1]==="EN"?"EN":"N";break;case"ET":if(j>0&&V[j-1]==="EN"){vt="EN";break}if(x){vt="N";break}for(st=j+1,tt=N.length;st<tt&&N[st]==="ET";)st++;vt=st<tt&&N[st]==="EN"?"EN":"N";break;case"NSM":if(a&&!o){for(tt=N.length,st=j+1;st<tt&&N[st]==="NSM";)st++;if(st<tt){var ht=P[j],At=ht>=1425&&ht<=2303||ht===64286;if(J=N[st],At&&(J==="R"||J==="AL")){vt="R";break}}}vt=j<1||(J=N[j-1])==="B"?"N":V[j-1];break;case"B":x=!1,s=!0,vt=M;break;case"S":r=!0,vt="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":x=!1;break;case"BN":vt="N"}return vt},G=function(P,N,V){var j=P.split("");return V&&B(j,V,{hiLevel:M}),j.reverse(),N&&N.reverse(),j.join("")},B=function(P,N,V){var j,J,at,st,tt,vt=-1,ht=P.length,At=0,E=[],z=M?f:m,$=[];for(x=!1,s=!1,r=!1,J=0;J<ht;J++)$[J]=q(P[J]);for(at=0;at<ht;at++){if(tt=At,E[at]=X(P,$,E,at),j=240&(At=z[tt][b[E[at]]]),At&=15,N[at]=st=z[At][5],j>0)if(j===16){for(J=vt;J<at;J++)N[J]=1;vt=-1}else vt=-1;if(z[At][6])vt===-1&&(vt=at);else if(vt>-1){for(J=vt;J<at;J++)N[J]=st;vt=-1}$[at]==="B"&&(N[at]=0),V.hiLevel|=st}r&&function(K,Z,ot){for(var ft=0;ft<ot;ft++)if(K[ft]==="S"){Z[ft]=M;for(var mt=ft-1;mt>=0&&K[mt]==="WS";mt--)Z[mt]=M}}($,N,ht)},Q=function(P,N,V,j,J){if(!(J.hiLevel<P)){if(P===1&&M===1&&!s)return N.reverse(),void(V&&V.reverse());for(var at,st,tt,vt,ht=N.length,At=0;At<ht;){if(j[At]>=P){for(tt=At+1;tt<ht&&j[tt]>=P;)tt++;for(vt=At,st=tt-1;vt<st;vt++,st--)at=N[vt],N[vt]=N[st],N[st]=at,V&&(at=V[vt],V[vt]=V[st],V[st]=at);At=tt}At++}}},ct=function(P,N,V){var j=P.split(""),J={hiLevel:M};return V||(V=[]),B(j,V,J),function(at,st,tt){if(tt.hiLevel!==0&&d)for(var vt,ht=0;ht<at.length;ht++)st[ht]===1&&(vt=S.indexOf(at[ht]))>=0&&(at[ht]=S[vt+1])}(j,V,J),Q(2,j,N,V,J),Q(1,j,N,V,J),j.join("")};return this.__bidiEngine__.doBidiReorder=function(P,N,V){if(function(J,at){if(at)for(var st=0;st<J.length;st++)at[st]=st;o===void 0&&(o=U(J)),c===void 0&&(c=U(J))}(P,N),a||!l||c)if(a&&l&&o^c)M=o?1:0,P=G(P,N,V);else if(!a&&l&&c)M=o?1:0,P=ct(P,N,V),P=G(P,N);else if(!a||o||l||c){if(a&&!l&&o^c)P=G(P,N),o?(M=0,P=ct(P,N,V)):(M=1,P=ct(P,N,V),P=G(P,N));else if(a&&o&&!l&&c)M=1,P=ct(P,N,V),P=G(P,N);else if(!a&&!l&&o^c){var j=d;o?(M=1,P=ct(P,N,V),M=0,d=!1,P=ct(P,N,V),d=j):(M=0,P=ct(P,N,V),P=G(P,N),M=1,d=!1,P=ct(P,N,V),d=j,P=G(P,N))}}else M=0,P=ct(P,N,V);else M=o?1:0,P=ct(P,N,V);return P},this.__bidiEngine__.setOptions=function(P){P&&(a=P.isInputVisual,l=P.isOutputVisual,o=P.isInputRtl,c=P.isOutputRtl,d=P.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],e=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(i){var s=i.text,r=(i.x,i.y,i.options||{}),a=(i.mutex,r.lang,[]);if(r.isInputVisual=typeof r.isInputVisual!="boolean"||r.isInputVisual,e.setOptions(r),Object.prototype.toString.call(s)==="[object Array]"){var o=0;for(a=[],o=0;o<s.length;o+=1)Object.prototype.toString.call(s[o])==="[object Array]"?a.push([e.doBidiReorder(s[o][0]),s[o][1],s[o][2]]):a.push([e.doBidiReorder(s[o])]);i.text=a}else i.text=e.doBidiReorder(s);e.setOptions({isInputVisual:!0})}])}(te),te.API.TTFFont=function(){function n(t){var e;if(this.rawData=t,e=this.contents=new qo(t),this.contents.pos=4,e.readString(4)==="ttcf")throw new Error("TTCF not supported.");e.pos=0,this.parse(),this.subset=new fC(this),this.registerTTF()}return n.open=function(t){return new n(t)},n.prototype.parse=function(){return this.directory=new ZL(this.contents),this.head=new eC(this),this.name=new aC(this),this.cmap=new WA(this),this.toUnicode={},this.hhea=new iC(this),this.maxp=new oC(this),this.hmtx=new lC(this),this.post=new sC(this),this.os2=new nC(this),this.loca=new dC(this),this.glyf=new cC(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var t,e,i,s,r;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,o,l,c;for(c=[],a=0,o=(l=this.bbox).length;a<o;a++)t=l[a],c.push(Math.round(t*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(i=255&(s=this.post.italic_angle),32768&(e=s>>16)&&(e=-(1+(65535^e))),this.italicAngle=+(e+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(r=this.familyClass)===1||r===2||r===3||r===4||r===5||r===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(t){var e;return((e=this.cmap.unicode)!=null?e.codeMap[t]:void 0)||0},n.prototype.widthOfGlyph=function(t){var e;return e=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*e},n.prototype.widthOfString=function(t,e,i){var s,r,a,o;for(a=0,r=0,o=(t=""+t).length;0<=o?r<o:r>o;r=0<=o?++r:--r)s=t.charCodeAt(r),a+=this.widthOfGlyph(this.characterToGlyph(s))+i*(1e3/e)||0;return a*(e/1e3)},n.prototype.lineHeight=function(t,e){var i;return e==null&&(e=!1),i=e?this.lineGap:0,(this.ascender+i-this.decender)/1e3*t},n}();var rr,qo=function(){function n(t){this.data=t??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(t){return this.data[this.pos++]=t},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},n.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},n.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},n.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},n.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},n.prototype.readString=function(t){var e,i;for(i=[],e=0;0<=t?e<t:e>t;e=0<=t?++e:--e)i[e]=String.fromCharCode(this.readByte());return i.join("")},n.prototype.writeString=function(t){var e,i,s;for(s=[],e=0,i=t.length;0<=i?e<i:e>i;e=0<=i?++e:--e)s.push(this.writeByte(t.charCodeAt(e)));return s},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(t){return this.writeInt16(t)},n.prototype.readLongLong=function(){var t,e,i,s,r,a,o,l;return t=this.readByte(),e=this.readByte(),i=this.readByte(),s=this.readByte(),r=this.readByte(),a=this.readByte(),o=this.readByte(),l=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^e)+1099511627776*(255^i)+4294967296*(255^s)+16777216*(255^r)+65536*(255^a)+256*(255^o)+(255^l)+1):72057594037927940*t+281474976710656*e+1099511627776*i+4294967296*s+16777216*r+65536*a+256*o+l},n.prototype.writeLongLong=function(t){var e,i;return e=Math.floor(t/4294967296),i=4294967295&t,this.writeByte(e>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(t){return this.writeInt32(t)},n.prototype.read=function(t){var e,i;for(e=[],i=0;0<=t?i<t:i>t;i=0<=t?++i:--i)e.push(this.readByte());return e},n.prototype.write=function(t){var e,i,s,r;for(r=[],i=0,s=t.length;i<s;i++)e=t[i],r.push(this.writeByte(e));return r},n}(),ZL=function(){var n;function t(e){var i,s,r;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},s=0,r=this.tableCount;0<=r?s<r:s>r;s=0<=r?++s:--s)i={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[i.tag]=i}return t.prototype.encode=function(e){var i,s,r,a,o,l,c,d,p,m,f,b,w;for(w in f=Object.keys(e).length,l=Math.log(2),p=16*Math.floor(Math.log(f)/l),a=Math.floor(p/l),d=16*f-p,(s=new qo).writeInt(this.scalarType),s.writeShort(f),s.writeShort(p),s.writeShort(a),s.writeShort(d),r=16*f,c=s.pos+r,o=null,b=[],e)for(m=e[w],s.writeString(w),s.writeInt(n(m)),s.writeInt(c),s.writeInt(m.length),b=b.concat(m),w==="head"&&(o=c),c+=m.length;c%4;)b.push(0),c++;return s.write(b),i=2981146554-n(s.data),s.pos=o+8,s.writeUInt32(i),s.data},n=function(e){var i,s,r,a;for(e=GA.call(e);e.length%4;)e.push(0);for(r=new qo(e),s=0,i=0,a=e.length;i<a;i=i+=4)s+=r.readUInt32();return 4294967295&s},t}(),tC={}.hasOwnProperty,Ur=function(n,t){for(var e in t)tC.call(t,e)&&(n[e]=t[e]);function i(){this.constructor=n}return i.prototype=t.prototype,n.prototype=new i,n.__super__=t.prototype,n};rr=function(){function n(t){var e;this.file=t,e=this.file.directory.tables[this.tag],this.exists=!!e,e&&(this.offset=e.offset,this.length=e.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var eC=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Ur(t,rr),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var i;return(i=new qo).writeInt(this.version),i.writeInt(this.revision),i.writeInt(this.checkSumAdjustment),i.writeInt(this.magicNumber),i.writeShort(this.flags),i.writeShort(this.unitsPerEm),i.writeLongLong(this.created),i.writeLongLong(this.modified),i.writeShort(this.xMin),i.writeShort(this.yMin),i.writeShort(this.xMax),i.writeShort(this.yMax),i.writeShort(this.macStyle),i.writeShort(this.lowestRecPPEM),i.writeShort(this.fontDirectionHint),i.writeShort(e),i.writeShort(this.glyphDataFormat),i.data},t}(),lb=function(){function n(t,e){var i,s,r,a,o,l,c,d,p,m,f,b,w,S,A,x,M;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=e+t.readInt(),p=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=t.readByte();break;case 4:for(f=t.readUInt16(),m=f/2,t.pos+=6,r=function(){var q,U;for(U=[],l=q=0;0<=m?q<m:q>m;l=0<=m?++q:--q)U.push(t.readUInt16());return U}(),t.pos+=2,w=function(){var q,U;for(U=[],l=q=0;0<=m?q<m:q>m;l=0<=m?++q:--q)U.push(t.readUInt16());return U}(),c=function(){var q,U;for(U=[],l=q=0;0<=m?q<m:q>m;l=0<=m?++q:--q)U.push(t.readUInt16());return U}(),d=function(){var q,U;for(U=[],l=q=0;0<=m?q<m:q>m;l=0<=m?++q:--q)U.push(t.readUInt16());return U}(),s=(this.length-t.pos+this.offset)/2,o=function(){var q,U;for(U=[],l=q=0;0<=s?q<s:q>s;l=0<=s?++q:--q)U.push(t.readUInt16());return U}(),l=A=0,M=r.length;A<M;l=++A)for(S=r[l],i=x=b=w[l];b<=S?x<=S:x>=S;i=b<=S?++x:--x)d[l]===0?a=i+c[l]:(a=o[d[l]/2+(i-b)-(m-l)]||0)!==0&&(a+=c[l]),this.codeMap[i]=65535&a}t.pos=p}return n.encode=function(t,e){var i,s,r,a,o,l,c,d,p,m,f,b,w,S,A,x,M,q,U,X,G,B,Q,ct,P,N,V,j,J,at,st,tt,vt,ht,At,E,z,$,K,Z,ot,ft,mt,Nt,kt,Bt;switch(j=new qo,a=Object.keys(t).sort(function(Rt,Zt){return Rt-Zt}),e){case"macroman":for(w=0,S=function(){var Rt=[];for(b=0;b<256;++b)Rt.push(0);return Rt}(),x={0:0},r={},J=0,vt=a.length;J<vt;J++)x[mt=t[s=a[J]]]==null&&(x[mt]=++w),r[s]={old:t[s],new:x[t[s]]},S[s]=x[t[s]];return j.writeUInt16(1),j.writeUInt16(0),j.writeUInt32(12),j.writeUInt16(0),j.writeUInt16(262),j.writeUInt16(0),j.write(S),{charMap:r,subtable:j.data,maxGlyphID:w+1};case"unicode":for(N=[],p=[],M=0,x={},i={},A=c=null,at=0,ht=a.length;at<ht;at++)x[U=t[s=a[at]]]==null&&(x[U]=++M),i[s]={old:U,new:x[U]},o=x[U]-s,A!=null&&o===c||(A&&p.push(A),N.push(s),c=o),A=s;for(A&&p.push(A),p.push(65535),N.push(65535),ct=2*(Q=N.length),B=2*Math.pow(Math.log(Q)/Math.LN2,2),m=Math.log(B/2)/Math.LN2,G=2*Q-B,l=[],X=[],f=[],b=st=0,At=N.length;st<At;b=++st){if(P=N[b],d=p[b],P===65535){l.push(0),X.push(0);break}if(P-(V=i[P].new)>=32768)for(l.push(0),X.push(2*(f.length+Q-b)),s=tt=P;P<=d?tt<=d:tt>=d;s=P<=d?++tt:--tt)f.push(i[s].new);else l.push(V-P),X.push(0)}for(j.writeUInt16(3),j.writeUInt16(1),j.writeUInt32(12),j.writeUInt16(4),j.writeUInt16(16+8*Q+2*f.length),j.writeUInt16(0),j.writeUInt16(ct),j.writeUInt16(B),j.writeUInt16(m),j.writeUInt16(G),ot=0,E=p.length;ot<E;ot++)s=p[ot],j.writeUInt16(s);for(j.writeUInt16(0),ft=0,z=N.length;ft<z;ft++)s=N[ft],j.writeUInt16(s);for(Nt=0,$=l.length;Nt<$;Nt++)o=l[Nt],j.writeUInt16(o);for(kt=0,K=X.length;kt<K;kt++)q=X[kt],j.writeUInt16(q);for(Bt=0,Z=f.length;Bt<Z;Bt++)w=f[Bt],j.writeUInt16(w);return{charMap:i,subtable:j.data,maxGlyphID:M+1}}},n}(),WA=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Ur(t,rr),t.prototype.tag="cmap",t.prototype.parse=function(e){var i,s,r;for(e.pos=this.offset,this.version=e.readUInt16(),r=e.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)i=new lb(e,this.offset),this.tables.push(i),i.isUnicode&&this.unicode==null&&(this.unicode=i);return!0},t.encode=function(e,i){var s,r;return i==null&&(i="macroman"),s=lb.encode(e,i),(r=new qo).writeUInt16(0),r.writeUInt16(1),s.table=r.data.concat(s.subtable),s},t}(),iC=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Ur(t,rr),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),nC=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Ur(t,rr),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var i,s;for(s=[],i=0;i<10;++i)s.push(e.readByte());return s}(),this.charRange=function(){var i,s;for(s=[],i=0;i<4;++i)s.push(e.readInt());return s}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var i,s;for(s=[],i=0;i<2;i=++i)s.push(e.readInt());return s}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),sC=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Ur(t,rr),t.prototype.tag="post",t.prototype.parse=function(e){var i,s,r;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:break;case 131072:var a;for(s=e.readUInt16(),this.glyphNameIndex=[],a=0;0<=s?a<s:a>s;a=0<=s?++a:--a)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],r=[];e.pos<this.offset+this.length;)i=e.readByte(),r.push(this.names.push(e.readString(i)));return r;case 151552:return s=e.readUInt16(),this.offsets=e.read(s);case 196608:break;case 262144:return this.map=(function(){var o,l,c;for(c=[],a=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;a=0<=l?++o:--o)c.push(e.readUInt32());return c}).call(this)}},t}(),rC=function(n,t){this.raw=n,this.length=n.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},aC=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Ur(t,rr),t.prototype.tag="name",t.prototype.parse=function(e){var i,s,r,a,o,l,c,d,p,m,f;for(e.pos=this.offset,e.readShort(),i=e.readShort(),l=e.readShort(),s=[],a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)s.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+l+e.readShort()});for(c={},a=p=0,m=s.length;p<m;a=++p)r=s[a],e.pos=r.offset,d=e.readString(r.length),o=new rC(d,r),c[f=r.nameID]==null&&(c[f]=[]),c[r.nameID].push(o);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},t}(),oC=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Ur(t,rr),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),lC=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Ur(t,rr),t.prototype.tag="hmtx",t.prototype.parse=function(e){var i,s,r,a,o,l,c;for(e.pos=this.offset,this.metrics=[],i=0,l=this.file.hhea.numberOfMetrics;0<=l?i<l:i>l;i=0<=l?++i:--i)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(r=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,p;for(p=[],i=d=0;0<=r?d<r:d>r;i=0<=r?++d:--d)p.push(e.readInt16());return p}(),this.widths=(function(){var d,p,m,f;for(f=[],d=0,p=(m=this.metrics).length;d<p;d++)a=m[d],f.push(a.advance);return f}).call(this),s=this.widths[this.widths.length-1],c=[],i=o=0;0<=r?o<r:o>r;i=0<=r?++o:--o)c.push(this.widths.push(s));return c},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),GA=[].slice,cC=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Ur(t,rr),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var i,s,r,a,o,l,c,d,p,m;return e in this.cache?this.cache[e]:(a=this.file.loca,i=this.file.contents,s=a.indexOf(e),(r=a.lengthOf(e))===0?this.cache[e]=null:(i.pos=this.offset+s,o=(l=new qo(i.read(r))).readShort(),d=l.readShort(),m=l.readShort(),c=l.readShort(),p=l.readShort(),this.cache[e]=o===-1?new uC(l,d,m,c,p):new hC(l,o,d,m,c,p),this.cache[e]))},t.prototype.encode=function(e,i,s){var r,a,o,l,c;for(o=[],a=[],l=0,c=i.length;l<c;l++)r=e[i[l]],a.push(o.length),r&&(o=o.concat(r.encode(s)));return a.push(o.length),{table:o,offsets:a}},t}(),hC=function(){function n(t,e,i,s,r,a){this.raw=t,this.numberOfContours=e,this.xMin=i,this.yMin=s,this.xMax=r,this.yMax=a,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),uC=function(){function n(t,e,i,s,r){var a,o;for(this.raw=t,this.xMin=e,this.yMin=i,this.xMax=s,this.yMax=r,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;o=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&o;)a.pos+=1&o?4:2,128&o?a.pos+=8:64&o?a.pos+=4:8&o&&(a.pos+=2)}return n.prototype.encode=function(){var t,e,i;for(e=new qo(GA.call(this.raw.data)),t=0,i=this.glyphIDs.length;t<i;++t)e.pos=this.glyphOffsets[t];return e.data},n}(),dC=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Ur(t,rr),t.prototype.tag="loca",t.prototype.parse=function(e){var i,s;return e.pos=this.offset,i=this.file.head.indexToLocFormat,this.offsets=i===0?(function(){var r,a;for(a=[],s=0,r=this.length;s<r;s+=2)a.push(2*e.readUInt16());return a}).call(this):(function(){var r,a;for(a=[],s=0,r=this.length;s<r;s+=4)a.push(e.readUInt32());return a}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,i){for(var s=new Uint32Array(this.offsets.length),r=0,a=0,o=0;o<s.length;++o)if(s[o]=r,a<i.length&&i[a]==o){++a,s[o]=r;var l=this.offsets[o],c=this.offsets[o+1]-l;c>0&&(r+=c)}for(var d=new Array(4*s.length),p=0;p<s.length;++p)d[4*p+3]=255&s[p],d[4*p+2]=(65280&s[p])>>8,d[4*p+1]=(16711680&s[p])>>16,d[4*p]=(4278190080&s[p])>>24;return d},t}(),fC=function(){function n(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var t,e,i,s,r;for(e in s=this.font.cmap.tables[0].codeMap,t={},r=this.subset)i=r[e],t[e]=s[i];return t},n.prototype.glyphsFor=function(t){var e,i,s,r,a,o,l;for(s={},a=0,o=t.length;a<o;a++)s[r=t[a]]=this.font.glyf.glyphFor(r);for(r in e=[],s)(i=s[r])!=null&&i.compound&&e.push.apply(e,i.glyphIDs);if(e.length>0)for(r in l=this.glyphsFor(e))i=l[r],s[r]=i;return s},n.prototype.encode=function(t,e){var i,s,r,a,o,l,c,d,p,m,f,b,w,S,A;for(s in i=WA.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(t),f={0:0},A=i.charMap)f[(l=A[s]).old]=l.new;for(b in m=i.maxGlyphID,a)b in f||(f[b]=m++);return d=function(x){var M,q;for(M in q={},x)q[x[M]]=M;return q}(f),p=Object.keys(d).sort(function(x,M){return x-M}),w=function(){var x,M,q;for(q=[],x=0,M=p.length;x<M;x++)o=p[x],q.push(d[o]);return q}(),r=this.font.glyf.encode(a,w,f),c=this.font.loca.encode(r.offsets,w),S={cmap:this.font.cmap.raw(),glyf:r.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(e)},this.font.os2.exists&&(S["OS/2"]=this.font.os2.raw()),this.font.directory.encode(S)},n}();te.API.PDFObject=function(){var n;function t(){}return n=function(e,i){return(Array(i+1).join("0")+e).slice(-i)},t.convert=function(e){var i,s,r,a;if(Array.isArray(e))return"["+function(){var o,l,c;for(c=[],o=0,l=e.length;o<l;o++)i=e[o],c.push(t.convert(i));return c}().join(" ")+"]";if(typeof e=="string")return"/"+e;if(e!=null&&e.isString)return"("+e+")";if(e instanceof Date)return"(D:"+n(e.getUTCFullYear(),4)+n(e.getUTCMonth(),2)+n(e.getUTCDate(),2)+n(e.getUTCHours(),2)+n(e.getUTCMinutes(),2)+n(e.getUTCSeconds(),2)+"Z)";if({}.toString.call(e)==="[object Object]"){for(s in r=["<<"],e)a=e[s],r.push("/"+s+" "+t.convert(a));return r.push(">>"),r.join(`
`)}return""+e},t}();const pC=re({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...hv({origin:"center center",scrollStrategy:"block",transition:{component:R4},zIndex:2400})},"VDialog"),gC=Ne()({name:"VDialog",props:pC(),emits:{"update:modelValue":n=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(n,t){let{emit:e,slots:i}=t;const s=wc(n,"modelValue"),{scopeId:r}=Hm(),a=Re();function o(d){var f,b;const p=d.relatedTarget,m=d.target;if(p!==m&&((f=a.value)!=null&&f.contentEl)&&((b=a.value)!=null&&b.globalTop)&&![document,a.value.contentEl].includes(m)&&!a.value.contentEl.contains(m)){const w=Ab(a.value.contentEl);if(!w.length)return;const S=w[0],A=w[w.length-1];p===S?A.focus():S.focus()}}Ls&&gi(()=>s.value&&n.retainFocus,d=>{d?document.addEventListener("focusin",o):document.removeEventListener("focusin",o)},{immediate:!0});function l(){var d;e("afterEnter"),(d=a.value)!=null&&d.contentEl&&!a.value.contentEl.contains(document.activeElement)&&a.value.contentEl.focus({preventScroll:!0})}function c(){e("afterLeave")}return gi(s,async d=>{var p;d||(await qa(),(p=a.value.activatorEl)==null||p.focus({preventScroll:!0}))}),si(()=>{const d=Qg.filterProps(n),p=ti({"aria-haspopup":"dialog"},n.activatorProps),m=ti({tabindex:-1},n.contentProps);return dt(Qg,ti({ref:a,class:["v-dialog",{"v-dialog--fullscreen":n.fullscreen,"v-dialog--scrollable":n.scrollable},n.class],style:n.style},d,{modelValue:s.value,"onUpdate:modelValue":f=>s.value=f,"aria-modal":"true",activatorProps:p,contentProps:m,role:"dialog",onAfterEnter:l,onAfterLeave:c},r),{activator:i.activator,default:function(){for(var f=arguments.length,b=new Array(f),w=0;w<f;w++)b[w]=arguments[w];return dt(Ma,{root:"VDialog"},{default:()=>{var S;return[(S=i.default)==null?void 0:S.call(i,...b)]}})}})}),uv({},a)}}),mC=Au({__name:"SignaturePdfViewer",props:{pdfPath:{}},emits:["beforePrintPages","afterPrintPages","onPrintPagesError","onResize"],setup(n,{emit:t}){const e=t,i=Re(!1),s=Re(),r=Re(!1);let a;function o(p){i.value=!1;const m=s.value.pagesCanvas[s.value.pagesCanvas.length-1];a=new mL(m.width,m.height,m.style.width,m.style.height),a.get().style.position="absolute",a.get().style.left="0",a.get().style.top="0",a.get().id="signature-canvas",m.parentElement.appendChild(a.get());const f=a.get().width/s.value.viewports.initial.width,b=a.get().height/s.value.viewports.initial.height,w=p.width*f,S=p.height*b;a.drawSignature(p.dataURL,a.width-w-10,a.height-S-10,w,S),r.value=!0,qa(()=>window.scrollTo(0,document.body.scrollHeight))}async function l(){const p=new te({unit:"pt",orientation:s.value.viewports.default.width>s.value.viewports.default.height?"landscape":"portrait",format:[s.value.viewports.default.width,s.value.viewports.default.height],putOnlyUsedFonts:!0,floatPrecision:16,compress:!0});s.value.pagesCanvas.forEach((m,f)=>{f>0&&p.addPage(),m.parentElement===a.get().parentElement?(m.getContext("2d").drawImage(a.getSignature().img,a.getSignature().corners.topLeft.x,a.getSignature().corners.topLeft.y,a.getSignature().currentWidth,a.getSignature().currentHeight),p.addImage(m.toDataURL("image/jpeg",.9),0,0,s.value.viewports.default.width,s.value.viewports.default.height,"","FAST"),a.get().remove(),p.save("novo_documento.pdf")):p.addImage(m.toDataURL("image/jpeg",.9),0,0,s.value.viewports.default.width,s.value.viewports.default.height,"","FAST")})}function c(p){e("onPrintPagesError",p)}function d(){if(!(a!=null&&a.get()))return;const p=s.value.pagesCanvas[s.value.pagesCanvas.length-1],m=p.width/a.get().width,f=p.height/a.get().height;a.get().width=p.width,a.get().height=p.height,a.get().style.width=p.style.width,a.get().style.height=p.style.height,a.drawSignature(a.getSignature().img.src,a.getSignature().corners.topLeft.x*m,a.getSignature().corners.topLeft.y*f,a.getSignature().currentWidth*m,a.getSignature().currentHeight*f)}return(p,m)=>(Oo(),$2(Ba,null,[dt(U4,{ref_key:"viewerRef",ref:s,"pdf-path":p.pdfPath,onOnPrintPagesError:c,onOnResize:d},{toolbarButtons:zi(()=>{var f,b;return[dt(xd,{hint:"Assinar","hint-position":"bottom",icon:"mdi-file-sign",variant:"text",color:"white",density:"compact",onClick:m[0]||(m[0]=w=>i.value=!0),disabled:r.value||((f=s.value)==null?void 0:f.loadingPdfDoc)},null,8,["disabled"]),dt(xd,{hint:"Salvar","hint-position":"bottom",icon:"mdi-file-check-outline",variant:"text",color:"white",density:"compact",onClick:l,disabled:!r.value||((b=s.value)==null?void 0:b.loadingPdfDoc)},null,8,["disabled"]),dt(Og,{vertical:"",class:"mx-1"})]}),_:1},8,["pdf-path"]),dt(gC,{modelValue:i.value,"onUpdate:modelValue":m[2]||(m[2]=f=>i.value=f)},{default:zi(()=>[dt(pL,{width:400,height:100,"signature-type":"svg",onOnCancel:m[1]||(m[1]=f=>i.value=!1),onOnSave:o})]),_:1},8,["modelValue"])],64))}}),vC=re({actionText:String,bgColor:String,color:String,icon:mu,image:String,justify:{type:String,default:"center"},headline:String,title:String,text:String,textWidth:{type:[Number,String],default:500},href:String,to:String,...Ci(),...yu(),...zm({size:void 0}),...Es()},"VEmptyState"),bC=Ne()({name:"VEmptyState",props:vC(),emits:{"click:action":n=>!0},setup(n,t){let{emit:e,slots:i}=t;const{themeClasses:s}=Ps(n),{backgroundColorClasses:r,backgroundColorStyles:a}=Ta(ni(n,"bgColor")),{dimensionStyles:o}=wu(n),{displayClasses:l}=V2();function c(d){e("click:action",d)}return si(()=>{var S,A,x;const d=!!(i.actions||n.actionText),p=!!(i.headline||n.headline),m=!!(i.title||n.title),f=!!(i.text||n.text),b=!!(i.media||n.image||n.icon),w=n.size||(n.image?200:96);return dt("div",{class:["v-empty-state",{[`v-empty-state--${n.justify}`]:!0},s.value,r.value,l.value,n.class],style:[a.value,o.value,n.style]},[b&&dt("div",{key:"media",class:"v-empty-state__media"},[i.media?dt(Ma,{key:"media-defaults",defaults:{VImg:{src:n.image,height:w},VIcon:{size:w,icon:n.icon}}},{default:()=>[i.media()]}):dt(Ba,null,[n.image?dt(fA,{key:"image",src:n.image,height:w},null):n.icon?dt(uc,{key:"icon",color:n.color,size:w,icon:n.icon},null):void 0])]),p&&dt("div",{key:"headline",class:"v-empty-state__headline"},[((S=i.headline)==null?void 0:S.call(i))??n.headline]),m&&dt("div",{key:"title",class:"v-empty-state__title"},[((A=i.title)==null?void 0:A.call(i))??n.title]),f&&dt("div",{key:"text",class:"v-empty-state__text",style:{maxWidth:Ae(n.textWidth)}},[((x=i.text)==null?void 0:x.call(i))??n.text]),i.default&&dt("div",{key:"content",class:"v-empty-state__content"},[i.default()]),d&&dt("div",{key:"actions",class:"v-empty-state__actions"},[dt(Ma,{defaults:{VBtn:{class:"v-empty-state__action-btn",color:n.color??"surface-variant",text:n.actionText}}},{default:()=>{var M;return[((M=i.actions)==null?void 0:M.call(i,{props:{onClick:c}}))??dt(nr,{onClick:c},null)]}})])])}),{}}}),yC=Au({__name:"index",setup(n){const t=Re(!1);return(e,i)=>{const s=mC;return Oo(),$2(Ba,null,[t.value?(Oo(),ep(Kw,{key:0,fluid:"",class:"fill-height"},{default:zi(()=>[dt(E4,{"no-gutters":""},{default:zi(()=>[dt(w4,null,{default:zi(()=>[dt(bC,{image:"https://cdn.vuetifyjs.com/docs/images/components/v-empty-state/connection.svg",text:"Ocorreu um erro ao carregar o arquivo PDF. Tente novamente mais tarde ou entre em contato com a Tek-System",title:"Ops... Algo deu errado"})]),_:1})]),_:1})]),_:1})):yb("",!0),dt(s,{"pdf-path":"../../public/teste.pdf",onOnPrintPagesError:i[0]||(i[0]=r=>t.value=!0)})],64)}}}),SC=Object.freeze(Object.defineProperty({__proto__:null,default:yC},Symbol.toStringTag,{value:"Module"}));export{ze as _,SC as i};
